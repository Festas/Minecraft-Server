2025-12-10T09:19:53.3588821Z Current runner version: '2.329.0'
2025-12-10T09:19:53.3613105Z ##[group]Runner Image Provisioner
2025-12-10T09:19:53.3613927Z Hosted Compute Agent
2025-12-10T09:19:53.3614509Z Version: 20251124.448
2025-12-10T09:19:53.3615122Z Commit: fda5086b43ec66ade217e5fcd18146c879571177
2025-12-10T09:19:53.3615872Z Build Date: 2025-11-24T21:16:26Z
2025-12-10T09:19:53.3616501Z ##[endgroup]
2025-12-10T09:19:53.3617005Z ##[group]Operating System
2025-12-10T09:19:53.3617617Z Ubuntu
2025-12-10T09:19:53.3618099Z 24.04.3
2025-12-10T09:19:53.3618583Z LTS
2025-12-10T09:19:53.3619041Z ##[endgroup]
2025-12-10T09:19:53.3620057Z ##[group]Runner Image
2025-12-10T09:19:53.3620641Z Image: ubuntu-24.04
2025-12-10T09:19:53.3621118Z Version: 20251126.144.1
2025-12-10T09:19:53.3622256Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20251126.144/images/ubuntu/Ubuntu2404-Readme.md
2025-12-10T09:19:53.3623912Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20251126.144
2025-12-10T09:19:53.3625197Z ##[endgroup]
2025-12-10T09:19:53.3627073Z ##[group]GITHUB_TOKEN Permissions
2025-12-10T09:19:53.3630879Z Checks: write
2025-12-10T09:19:53.3631689Z Contents: read
2025-12-10T09:19:53.3632389Z Metadata: read
2025-12-10T09:19:53.3633209Z ##[endgroup]
2025-12-10T09:19:53.3636127Z Secret source: Actions
2025-12-10T09:19:53.3637348Z Prepare workflow directory
2025-12-10T09:19:53.4114108Z Prepare all required actions
2025-12-10T09:19:53.4169601Z Getting action download info
2025-12-10T09:19:53.7445370Z Download action repository 'actions/checkout@v4' (SHA:34e114876b0b11c390a56381ad16ebd13914f8d5)
2025-12-10T09:19:54.0882404Z Download action repository 'actions/setup-node@v4' (SHA:49933ea5288caeca8642d1e84afbd3f7d6820020)
2025-12-10T09:19:54.1770123Z Download action repository 'actions/upload-artifact@v4' (SHA:ea165f8d65b6e75b540449e92b4886f43607fa02)
2025-12-10T09:19:54.2908614Z Download action repository 'romeovs/lcov-reporter-action@v0.3.1' (SHA:dda1c9b1fa1622b225e9acd87a248751dbcc6ada)
2025-12-10T09:19:54.6447517Z Complete job name: Backend Tests
2025-12-10T09:19:54.7251495Z ##[group]Run actions/checkout@v4
2025-12-10T09:19:54.7252750Z with:
2025-12-10T09:19:54.7253480Z   repository: Festas/Minecraft-Server
2025-12-10T09:19:54.7254718Z   token: ***
2025-12-10T09:19:54.7255416Z   ssh-strict: true
2025-12-10T09:19:54.7256140Z   ssh-user: git
2025-12-10T09:19:54.7256889Z   persist-credentials: true
2025-12-10T09:19:54.7257731Z   clean: true
2025-12-10T09:19:54.7258485Z   sparse-checkout-cone-mode: true
2025-12-10T09:19:54.7259582Z   fetch-depth: 1
2025-12-10T09:19:54.7260318Z   fetch-tags: false
2025-12-10T09:19:54.7261089Z   show-progress: true
2025-12-10T09:19:54.7261866Z   lfs: false
2025-12-10T09:19:54.7262561Z   submodules: false
2025-12-10T09:19:54.7263318Z   set-safe-directory: true
2025-12-10T09:19:54.7264400Z ##[endgroup]
2025-12-10T09:19:54.8360036Z Syncing repository: Festas/Minecraft-Server
2025-12-10T09:19:54.8363828Z ##[group]Getting Git version info
2025-12-10T09:19:54.8365391Z Working directory is '/home/runner/work/Minecraft-Server/Minecraft-Server'
2025-12-10T09:19:54.8367405Z [command]/usr/bin/git version
2025-12-10T09:19:54.8423271Z git version 2.52.0
2025-12-10T09:19:54.8451067Z ##[endgroup]
2025-12-10T09:19:54.8467621Z Temporarily overriding HOME='/home/runner/work/_temp/36ca15af-d5d6-4c61-aa55-215be59eaa89' before making global git config changes
2025-12-10T09:19:54.8472576Z Adding repository directory to the temporary git global config as a safe directory
2025-12-10T09:19:54.8482558Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/Minecraft-Server/Minecraft-Server
2025-12-10T09:19:54.8523015Z Deleting the contents of '/home/runner/work/Minecraft-Server/Minecraft-Server'
2025-12-10T09:19:54.8526734Z ##[group]Initializing the repository
2025-12-10T09:19:54.8532087Z [command]/usr/bin/git init /home/runner/work/Minecraft-Server/Minecraft-Server
2025-12-10T09:19:54.8666846Z hint: Using 'master' as the name for the initial branch. This default branch name
2025-12-10T09:19:54.8669927Z hint: will change to "main" in Git 3.0. To configure the initial branch name
2025-12-10T09:19:54.8672473Z hint: to use in all of your new repositories, which will suppress this warning,
2025-12-10T09:19:54.8674919Z hint: call:
2025-12-10T09:19:54.8676135Z hint:
2025-12-10T09:19:54.8677655Z hint: 	git config --global init.defaultBranch <name>
2025-12-10T09:19:54.8679687Z hint:
2025-12-10T09:19:54.8681510Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2025-12-10T09:19:54.8684723Z hint: 'development'. The just-created branch can be renamed via this command:
2025-12-10T09:19:54.8687102Z hint:
2025-12-10T09:19:54.8688202Z hint: 	git branch -m <name>
2025-12-10T09:19:54.8689755Z hint:
2025-12-10T09:19:54.8691324Z hint: Disable this message with "git config set advice.defaultBranchName false"
2025-12-10T09:19:54.8693456Z Initialized empty Git repository in /home/runner/work/Minecraft-Server/Minecraft-Server/.git/
2025-12-10T09:19:54.8697504Z [command]/usr/bin/git remote add origin https://github.com/Festas/Minecraft-Server
2025-12-10T09:19:54.8721347Z ##[endgroup]
2025-12-10T09:19:54.8723669Z ##[group]Disabling automatic garbage collection
2025-12-10T09:19:54.8725833Z [command]/usr/bin/git config --local gc.auto 0
2025-12-10T09:19:54.8755505Z ##[endgroup]
2025-12-10T09:19:54.8757636Z ##[group]Setting up auth
2025-12-10T09:19:54.8763395Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-12-10T09:19:54.8796053Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-12-10T09:19:54.9160827Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-12-10T09:19:54.9193781Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-12-10T09:19:54.9417140Z [command]/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
2025-12-10T09:19:54.9447058Z [command]/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url
2025-12-10T09:19:54.9675924Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2025-12-10T09:19:54.9710111Z ##[endgroup]
2025-12-10T09:19:54.9718517Z ##[group]Fetching the repository
2025-12-10T09:19:54.9721357Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --no-recurse-submodules --depth=1 origin +0dcdf6b8e734076ca4f3e4dda61f12b616485ecf:refs/remotes/origin/main
2025-12-10T09:19:55.2894480Z From https://github.com/Festas/Minecraft-Server
2025-12-10T09:19:55.2898686Z  * [new ref]         0dcdf6b8e734076ca4f3e4dda61f12b616485ecf -> origin/main
2025-12-10T09:19:55.2946934Z ##[endgroup]
2025-12-10T09:19:55.2949459Z ##[group]Determining the checkout info
2025-12-10T09:19:55.2952121Z ##[endgroup]
2025-12-10T09:19:55.2954193Z [command]/usr/bin/git sparse-checkout disable
2025-12-10T09:19:55.2996323Z [command]/usr/bin/git config --local --unset-all extensions.worktreeConfig
2025-12-10T09:19:55.3023994Z ##[group]Checking out the ref
2025-12-10T09:19:55.3026763Z [command]/usr/bin/git checkout --progress --force -B main refs/remotes/origin/main
2025-12-10T09:19:55.3326502Z Switched to a new branch 'main'
2025-12-10T09:19:55.3328773Z branch 'main' set up to track 'origin/main'.
2025-12-10T09:19:55.3339070Z ##[endgroup]
2025-12-10T09:19:55.3380467Z [command]/usr/bin/git log -1 --format=%H
2025-12-10T09:19:55.3403955Z 0dcdf6b8e734076ca4f3e4dda61f12b616485ecf
2025-12-10T09:19:55.3651355Z ##[group]Run actions/setup-node@v4
2025-12-10T09:19:55.3651989Z with:
2025-12-10T09:19:55.3652481Z   node-version: 18
2025-12-10T09:19:55.3652967Z   cache: npm
2025-12-10T09:19:55.3653567Z   cache-dependency-path: console/backend/package-lock.json
2025-12-10T09:19:55.3654213Z   always-auth: false
2025-12-10T09:19:55.3654997Z   check-latest: false
2025-12-10T09:19:55.3655649Z   token: ***
2025-12-10T09:19:55.3656178Z ##[endgroup]
2025-12-10T09:19:55.5453232Z Attempting to download 18...
2025-12-10T09:19:55.9232462Z Acquiring 18.20.8 - x64 from https://github.com/actions/node-versions/releases/download/18.20.8-14110393767/node-18.20.8-linux-x64.tar.gz
2025-12-10T09:19:56.3484325Z Extracting ...
2025-12-10T09:19:56.3581813Z [command]/usr/bin/tar xz --strip 1 --warning=no-unknown-keyword --overwrite -C /home/runner/work/_temp/deb50b29-b269-4342-98b8-586112819ede -f /home/runner/work/_temp/79166cd5-9aff-4b03-b9ad-556f05099413
2025-12-10T09:19:57.3092409Z Adding to the cache ...
2025-12-10T09:19:58.9488060Z ##[group]Environment details
2025-12-10T09:19:59.1997222Z node: v18.20.8
2025-12-10T09:19:59.1997750Z npm: 10.8.2
2025-12-10T09:19:59.1998102Z yarn: 1.22.22
2025-12-10T09:19:59.1998904Z ##[endgroup]
2025-12-10T09:19:59.2020742Z [command]/opt/hostedtoolcache/node/18.20.8/x64/bin/npm config get cache
2025-12-10T09:19:59.3169751Z /home/runner/.npm
2025-12-10T09:19:59.3814447Z Cache hit for: node-cache-Linux-x64-npm-225982302951d97251e5931986f216a9b05cc1bf2337aee95d32989c8df5cf49
2025-12-10T09:19:59.5003226Z Received 801238 of 801238 (100.0%), 8.9 MBs/sec
2025-12-10T09:19:59.5004081Z Cache Size: ~1 MB (801238 B)
2025-12-10T09:19:59.5032357Z [command]/usr/bin/tar -xf /home/runner/work/_temp/68245d42-9dfb-44f0-ace7-7d0f5097cdec/cache.tzst -P -C /home/runner/work/Minecraft-Server/Minecraft-Server --use-compress-program unzstd
2025-12-10T09:19:59.5154530Z Cache restored successfully
2025-12-10T09:19:59.5161762Z Cache restored from key: node-cache-Linux-x64-npm-225982302951d97251e5931986f216a9b05cc1bf2337aee95d32989c8df5cf49
2025-12-10T09:19:59.5326022Z ##[group]Run cd console/backend
2025-12-10T09:19:59.5326362Z [36;1mcd console/backend[0m
2025-12-10T09:19:59.5326655Z [36;1mPUPPETEER_SKIP_DOWNLOAD=true npm ci[0m
2025-12-10T09:19:59.5363788Z shell: /usr/bin/bash -e {0}
2025-12-10T09:19:59.5364076Z ##[endgroup]
2025-12-10T09:20:01.8007130Z npm warn deprecated supertest@6.3.4: Please upgrade to supertest v7.1.3+, see release notes at https://github.com/forwardemail/supertest/releases/tag/v7.1.3 - maintenance is supported by Forward Email @ https://forwardemail.net
2025-12-10T09:20:01.9214973Z npm warn deprecated rimraf@3.0.2: Rimraf versions prior to v4 are no longer supported
2025-12-10T09:20:02.5756585Z npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
2025-12-10T09:20:02.7847079Z npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
2025-12-10T09:20:03.6098556Z npm warn deprecated @humanwhocodes/config-array@0.13.0: Use @eslint/config-array instead
2025-12-10T09:20:03.6107298Z npm warn deprecated @humanwhocodes/object-schema@2.0.3: Use @eslint/object-schema instead
2025-12-10T09:20:03.7115288Z npm warn deprecated superagent@8.1.2: Please upgrade to superagent v10.2.2+, see release notes at https://github.com/forwardemail/superagent/releases/tag/v10.2.2 - maintenance is supported by Forward Email @ https://forwardemail.net
2025-12-10T09:20:03.9901804Z npm warn deprecated puppeteer@21.11.0: < 24.15.0 is no longer supported
2025-12-10T09:20:05.0733224Z npm warn deprecated eslint@8.57.1: This version is no longer supported. Please see https://eslint.org/version-support for other options.
2025-12-10T09:20:10.5755628Z 
2025-12-10T09:20:10.5756589Z added 630 packages, and audited 631 packages in 11s
2025-12-10T09:20:10.5757155Z 
2025-12-10T09:20:10.5757424Z 86 packages are looking for funding
2025-12-10T09:20:10.5757944Z   run `npm fund` for details
2025-12-10T09:20:10.5986833Z 
2025-12-10T09:20:10.5987724Z 5 high severity vulnerabilities
2025-12-10T09:20:10.5989121Z 
2025-12-10T09:20:10.5989785Z To address all issues (including breaking changes), run:
2025-12-10T09:20:10.5990396Z   npm audit fix --force
2025-12-10T09:20:10.5991316Z 
2025-12-10T09:20:10.5991536Z Run `npm audit` for details.
2025-12-10T09:20:10.6324293Z ##[group]Run cd console/backend
2025-12-10T09:20:10.6324602Z [36;1mcd console/backend[0m
2025-12-10T09:20:10.6324885Z [36;1mnpm test -- --ci --coverage --maxWorkers=2[0m
2025-12-10T09:20:10.6358220Z shell: /usr/bin/bash -e {0}
2025-12-10T09:20:10.6358474Z ##[endgroup]
2025-12-10T09:20:10.7667312Z 
2025-12-10T09:20:10.7667967Z > minecraft-console-backend@1.0.0 test
2025-12-10T09:20:10.7668412Z > jest --ci --coverage --maxWorkers=2
2025-12-10T09:20:10.7668612Z 
2025-12-10T09:20:12.1515981Z   console.log
2025-12-10T09:20:12.1518318Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.1518733Z 
2025-12-10T09:20:12.1520356Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.1520936Z 
2025-12-10T09:20:12.1548223Z   console.log
2025-12-10T09:20:12.1548783Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.1549575Z 
2025-12-10T09:20:12.1550189Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.1550968Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.1551288Z 
2025-12-10T09:20:12.1561097Z   console.log
2025-12-10T09:20:12.1565508Z     [PluginGateway] Registered adapter: TestPlugin
2025-12-10T09:20:12.1569986Z 
2025-12-10T09:20:12.1574450Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.1577330Z 
2025-12-10T09:20:12.1586217Z   console.log
2025-12-10T09:20:12.1588456Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.1594497Z 
2025-12-10T09:20:12.1595051Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.1595952Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.1596292Z 
2025-12-10T09:20:12.1919682Z   console.log
2025-12-10T09:20:12.1920936Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.1922333Z 
2025-12-10T09:20:12.1922850Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.1923403Z 
2025-12-10T09:20:12.1930270Z   console.log
2025-12-10T09:20:12.1931320Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.1931934Z 
2025-12-10T09:20:12.1932663Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.1933494Z 
2025-12-10T09:20:12.1946626Z   console.log
2025-12-10T09:20:12.1947432Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.1948175Z 
2025-12-10T09:20:12.1948915Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.1950136Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.1950693Z 
2025-12-10T09:20:12.1959966Z   console.log
2025-12-10T09:20:12.1960801Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.1961477Z 
2025-12-10T09:20:12.1962250Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.1963201Z 
2025-12-10T09:20:12.1981139Z   console.log
2025-12-10T09:20:12.1982000Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.1982691Z 
2025-12-10T09:20:12.1983422Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.1987964Z 
2025-12-10T09:20:12.1998218Z   console.log
2025-12-10T09:20:12.1999023Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.1999803Z 
2025-12-10T09:20:12.2000344Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2000922Z 
2025-12-10T09:20:12.2008480Z   console.log
2025-12-10T09:20:12.2009508Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2010068Z 
2025-12-10T09:20:12.2010625Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2011204Z 
2025-12-10T09:20:12.2028959Z   console.log
2025-12-10T09:20:12.2030356Z     [PluginGateway] Unregistered adapter: nonexistent
2025-12-10T09:20:12.2031164Z 
2025-12-10T09:20:12.2031706Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2032264Z 
2025-12-10T09:20:12.2045421Z   console.log
2025-12-10T09:20:12.2045912Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2046276Z 
2025-12-10T09:20:12.2046742Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2047280Z 
2025-12-10T09:20:12.2068778Z   console.log
2025-12-10T09:20:12.2070966Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2071855Z 
2025-12-10T09:20:12.2072796Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2073735Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2074179Z 
2025-12-10T09:20:12.2083702Z   console.log
2025-12-10T09:20:12.2084438Z     [PluginGateway] Registered adapter: TestPlugin
2025-12-10T09:20:12.2085120Z 
2025-12-10T09:20:12.2085776Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2086654Z 
2025-12-10T09:20:12.2110529Z   console.log
2025-12-10T09:20:12.2111272Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2111670Z 
2025-12-10T09:20:12.2112162Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2112965Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2113319Z 
2025-12-10T09:20:12.2115387Z   console.log
2025-12-10T09:20:12.2119592Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2119974Z 
2025-12-10T09:20:12.2120426Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2120973Z 
2025-12-10T09:20:12.2136074Z   console.log
2025-12-10T09:20:12.2136601Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2136996Z 
2025-12-10T09:20:12.2137509Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2138274Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2138592Z 
2025-12-10T09:20:12.2147027Z   console.log
2025-12-10T09:20:12.2147541Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2147911Z 
2025-12-10T09:20:12.2148387Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2148937Z 
2025-12-10T09:20:12.2162721Z   console.log
2025-12-10T09:20:12.2163467Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2170161Z 
2025-12-10T09:20:12.2170688Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2171519Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2171847Z 
2025-12-10T09:20:12.2177763Z   console.log
2025-12-10T09:20:12.2178579Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2179451Z 
2025-12-10T09:20:12.2180158Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2181086Z 
2025-12-10T09:20:12.2201038Z   console.log
2025-12-10T09:20:12.2201730Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2202133Z 
2025-12-10T09:20:12.2203625Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2204413Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2204746Z 
2025-12-10T09:20:12.2212464Z   console.log
2025-12-10T09:20:12.2213327Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2213928Z 
2025-12-10T09:20:12.2214437Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2214990Z 
2025-12-10T09:20:12.2226549Z   console.log
2025-12-10T09:20:12.2227408Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2229836Z 
2025-12-10T09:20:12.2230370Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2231881Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2232224Z 
2025-12-10T09:20:12.2239618Z   console.log
2025-12-10T09:20:12.2242104Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2245938Z 
2025-12-10T09:20:12.2246469Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2247010Z 
2025-12-10T09:20:12.2255595Z   console.log
2025-12-10T09:20:12.2256330Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2257062Z 
2025-12-10T09:20:12.2258754Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2259736Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2260055Z 
2025-12-10T09:20:12.2286084Z   console.log
2025-12-10T09:20:12.2286820Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2287235Z 
2025-12-10T09:20:12.2287716Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2288269Z 
2025-12-10T09:20:12.2303913Z   console.log
2025-12-10T09:20:12.2304721Z     [PluginGateway] Initialized testplugin: { success: true }
2025-12-10T09:20:12.2305181Z 
2025-12-10T09:20:12.2305642Z       at PluginGateway.log [as initialize] (services/pluginGateway.js:97:21)
2025-12-10T09:20:12.2306180Z 
2025-12-10T09:20:12.2340937Z   console.log
2025-12-10T09:20:12.2341487Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2341892Z 
2025-12-10T09:20:12.2342377Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2343161Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2343480Z 
2025-12-10T09:20:12.2343620Z   console.log
2025-12-10T09:20:12.2344069Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2344429Z 
2025-12-10T09:20:12.2344885Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2345436Z 
2025-12-10T09:20:12.2352279Z   console.log
2025-12-10T09:20:12.2353053Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2353476Z 
2025-12-10T09:20:12.2353955Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2354718Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2355043Z 
2025-12-10T09:20:12.2361109Z   console.log
2025-12-10T09:20:12.2362591Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2362978Z 
2025-12-10T09:20:12.2363442Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2363981Z 
2025-12-10T09:20:12.2406090Z   console.error
2025-12-10T09:20:12.2408208Z     [PluginGateway] Failed to initialize testplugin: Connection failed
2025-12-10T09:20:12.2408720Z 
2025-12-10T09:20:12.2409599Z     [0m [90m  98 |[39m             [36mreturn[39m result[33m;[39m
2025-12-10T09:20:12.2410407Z      [90m  99 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:12.2412009Z     [31m[1m>[22m[39m[90m 100 |[39m             console[33m.[39merror([32m`[PluginGateway] Failed to initialize ${pluginName}:`[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:12.2413399Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:12.2414045Z      [90m 101 |[39m             
2025-12-10T09:20:12.2414780Z      [90m 102 |[39m             [90m// Log critical plugin errors[39m
2025-12-10T09:20:12.2415602Z      [90m 103 |[39m             [36mawait[39m logAuditEvent([0m
2025-12-10T09:20:12.2415993Z 
2025-12-10T09:20:12.2416415Z       at PluginGateway.error [as initialize] (services/pluginGateway.js:100:21)
2025-12-10T09:20:12.2417346Z       at Object.<anonymous> (__tests__/services/pluginGateway.test.js:199:13)
2025-12-10T09:20:12.2417866Z 
2025-12-10T09:20:12.2426905Z   console.log
2025-12-10T09:20:12.2427488Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2427892Z 
2025-12-10T09:20:12.2428958Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2429954Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2430299Z 
2025-12-10T09:20:12.2435320Z   console.log
2025-12-10T09:20:12.2436077Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2436481Z 
2025-12-10T09:20:12.2436952Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2437491Z 
2025-12-10T09:20:12.2451470Z   console.log
2025-12-10T09:20:12.2452264Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2452704Z 
2025-12-10T09:20:12.2453238Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2454007Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2454331Z 
2025-12-10T09:20:12.2461452Z   console.log
2025-12-10T09:20:12.2462144Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2462547Z 
2025-12-10T09:20:12.2463044Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2463588Z 
2025-12-10T09:20:12.2481654Z   console.log
2025-12-10T09:20:12.2482405Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2482821Z 
2025-12-10T09:20:12.2483314Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2484068Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2484353Z 
2025-12-10T09:20:12.2552223Z   console.log
2025-12-10T09:20:12.2560079Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2560654Z 
2025-12-10T09:20:12.2561261Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2563014Z 
2025-12-10T09:20:12.2579830Z   console.log
2025-12-10T09:20:12.2580799Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2581476Z 
2025-12-10T09:20:12.2582146Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2583144Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2583655Z 
2025-12-10T09:20:12.2589017Z   console.log
2025-12-10T09:20:12.2590351Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2591140Z 
2025-12-10T09:20:12.2591821Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2592378Z 
2025-12-10T09:20:12.2626484Z   console.error
2025-12-10T09:20:12.2627452Z     [PluginGateway] Error calling testplugin.testMethod: Method failed
2025-12-10T09:20:12.2628251Z 
2025-12-10T09:20:12.2629372Z     [0m [90m 136 |[39m             [36mreturn[39m result[33m;[39m
2025-12-10T09:20:12.2630414Z      [90m 137 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:12.2632175Z     [31m[1m>[22m[39m[90m 138 |[39m             console[33m.[39merror([32m`[PluginGateway] Error calling ${pluginName}.${method}:`[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:12.2633733Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:12.2634620Z      [90m 139 |[39m             
2025-12-10T09:20:12.2635593Z      [90m 140 |[39m             [90m// Log plugin call failures[39m
2025-12-10T09:20:12.2636715Z      [90m 141 |[39m             [36mawait[39m logAuditEvent([0m
2025-12-10T09:20:12.2637522Z 
2025-12-10T09:20:12.2638171Z       at PluginGateway.error [as call] (services/pluginGateway.js:138:21)
2025-12-10T09:20:12.2639554Z       at Object.<anonymous> (__tests__/services/pluginGateway.test.js:239:13)
2025-12-10T09:20:12.2662981Z 
2025-12-10T09:20:12.2663416Z   console.log
2025-12-10T09:20:12.2664174Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2664812Z 
2025-12-10T09:20:12.2665514Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2666551Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2667129Z 
2025-12-10T09:20:12.2667501Z   console.log
2025-12-10T09:20:12.2668640Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2669664Z 
2025-12-10T09:20:12.2670372Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2671168Z 
2025-12-10T09:20:12.2686605Z   console.log
2025-12-10T09:20:12.2691139Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2694542Z 
2025-12-10T09:20:12.2695232Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2696522Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2697189Z 
2025-12-10T09:20:12.2706348Z   console.log
2025-12-10T09:20:12.2711068Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2713843Z 
2025-12-10T09:20:12.2715528Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2717437Z 
2025-12-10T09:20:12.2721401Z   console.log
2025-12-10T09:20:12.2723433Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2723994Z 
2025-12-10T09:20:12.2724888Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2725883Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2726939Z 
2025-12-10T09:20:12.2731246Z   console.log
2025-12-10T09:20:12.2731948Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2732347Z 
2025-12-10T09:20:12.2732812Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2733349Z 
2025-12-10T09:20:12.2744339Z   console.log
2025-12-10T09:20:12.2746021Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2746565Z 
2025-12-10T09:20:12.2747233Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2747972Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2748271Z 
2025-12-10T09:20:12.2754388Z   console.log
2025-12-10T09:20:12.2755220Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2755755Z 
2025-12-10T09:20:12.2756231Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2756739Z 
2025-12-10T09:20:12.2768823Z   console.log
2025-12-10T09:20:12.2772611Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2773014Z 
2025-12-10T09:20:12.2773485Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2774222Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2774537Z 
2025-12-10T09:20:12.2780958Z   console.log
2025-12-10T09:20:12.2781637Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2783861Z 
2025-12-10T09:20:12.2784555Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2785534Z 
2025-12-10T09:20:12.2796752Z   console.log
2025-12-10T09:20:12.2797953Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2798520Z 
2025-12-10T09:20:12.2799475Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2800577Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2801166Z 
2025-12-10T09:20:12.2808158Z   console.log
2025-12-10T09:20:12.2808910Z     [PluginGateway] Registered adapter: plugin1
2025-12-10T09:20:12.2809830Z 
2025-12-10T09:20:12.2812535Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2813072Z 
2025-12-10T09:20:12.2819400Z   console.log
2025-12-10T09:20:12.2820076Z     [PluginGateway] Registered adapter: plugin2
2025-12-10T09:20:12.2820467Z 
2025-12-10T09:20:12.2820938Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2821466Z 
2025-12-10T09:20:12.2836730Z   console.log
2025-12-10T09:20:12.2837590Z     [PluginGateway] Unregistered adapter: plugin1
2025-12-10T09:20:12.2838150Z 
2025-12-10T09:20:12.2838865Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2840246Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2840765Z 
2025-12-10T09:20:12.2846551Z   console.log
2025-12-10T09:20:12.2847397Z     [PluginGateway] Unregistered adapter: plugin2
2025-12-10T09:20:12.2847786Z 
2025-12-10T09:20:12.2848268Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2849037Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2849540Z 
2025-12-10T09:20:12.2856474Z   console.log
2025-12-10T09:20:12.2856996Z     [PluginGateway] Registered adapter: plugin1
2025-12-10T09:20:12.2863023Z 
2025-12-10T09:20:12.2864026Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2864584Z 
2025-12-10T09:20:12.2865072Z   console.log
2025-12-10T09:20:12.2866310Z     [PluginGateway] Registered adapter: plugin2
2025-12-10T09:20:12.2866684Z 
2025-12-10T09:20:12.2867157Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2867800Z 
2025-12-10T09:20:12.2877096Z   console.log
2025-12-10T09:20:12.2877968Z     [PluginGateway] Unregistered adapter: plugin1
2025-12-10T09:20:12.2878348Z 
2025-12-10T09:20:12.2878823Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2879803Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2886184Z 
2025-12-10T09:20:12.2886363Z   console.log
2025-12-10T09:20:12.2887560Z     [PluginGateway] Unregistered adapter: plugin2
2025-12-10T09:20:12.2887977Z 
2025-12-10T09:20:12.2888459Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2889415Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2889763Z 
2025-12-10T09:20:12.2902040Z   console.log
2025-12-10T09:20:12.2902532Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.2902910Z 
2025-12-10T09:20:12.2918121Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2918710Z 
2025-12-10T09:20:12.2918851Z   console.log
2025-12-10T09:20:12.2923012Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:12.2923405Z 
2025-12-10T09:20:12.2923864Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2924599Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2924911Z 
2025-12-10T09:20:12.2929788Z   console.log
2025-12-10T09:20:12.2931329Z     [PluginGateway] Registered adapter: plugin1
2025-12-10T09:20:12.2932174Z 
2025-12-10T09:20:12.2932824Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2933539Z 
2025-12-10T09:20:12.2938419Z   console.log
2025-12-10T09:20:12.2939641Z     [PluginGateway] Registered adapter: plugin2
2025-12-10T09:20:12.2940357Z 
2025-12-10T09:20:12.2941035Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2941783Z 
2025-12-10T09:20:12.2952413Z   console.log
2025-12-10T09:20:12.2953228Z     [PluginGateway] Unregistered adapter: plugin1
2025-12-10T09:20:12.2953630Z 
2025-12-10T09:20:12.2954093Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2954872Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2955193Z 
2025-12-10T09:20:12.2962046Z   console.log
2025-12-10T09:20:12.2962750Z     [PluginGateway] Unregistered adapter: plugin2
2025-12-10T09:20:12.2963144Z 
2025-12-10T09:20:12.2963605Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:12.2964314Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:12.2964616Z 
2025-12-10T09:20:12.2975412Z   console.log
2025-12-10T09:20:12.2976187Z     [PluginGateway] Registered adapter: plugin1
2025-12-10T09:20:12.2976535Z 
2025-12-10T09:20:12.2977000Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2977539Z 
2025-12-10T09:20:12.2985066Z   console.log
2025-12-10T09:20:12.2985766Z     [PluginGateway] Registered adapter: plugin2
2025-12-10T09:20:12.2986390Z 
2025-12-10T09:20:12.2986878Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.2987423Z 
2025-12-10T09:20:12.2997893Z   console.log
2025-12-10T09:20:12.3000017Z     [PluginGateway] Shutting down all adapters...
2025-12-10T09:20:12.3000412Z 
2025-12-10T09:20:12.3000833Z       at PluginGateway.log [as shutdown] (services/pluginGateway.js:230:17)
2025-12-10T09:20:12.3001582Z 
2025-12-10T09:20:12.3001738Z   console.log
2025-12-10T09:20:12.3004689Z     [PluginGateway] Shutdown plugin1
2025-12-10T09:20:12.3005057Z 
2025-12-10T09:20:12.3005495Z       at PluginGateway.log [as shutdown] (services/pluginGateway.js:236:29)
2025-12-10T09:20:12.3005981Z 
2025-12-10T09:20:12.3006147Z   console.log
2025-12-10T09:20:12.3006548Z     [PluginGateway] Shutdown plugin2
2025-12-10T09:20:12.3007018Z 
2025-12-10T09:20:12.3007784Z       at PluginGateway.log [as shutdown] (services/pluginGateway.js:236:29)
2025-12-10T09:20:12.3008289Z 
2025-12-10T09:20:12.3019730Z   console.log
2025-12-10T09:20:12.3020315Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.3020841Z 
2025-12-10T09:20:12.3022012Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.3022550Z 
2025-12-10T09:20:12.3027725Z   console.log
2025-12-10T09:20:12.3028474Z     [PluginGateway] Shutting down all adapters...
2025-12-10T09:20:12.3029144Z 
2025-12-10T09:20:12.3030035Z       at PluginGateway.log [as shutdown] (services/pluginGateway.js:230:17)
2025-12-10T09:20:12.3030578Z 
2025-12-10T09:20:12.3032306Z   console.log
2025-12-10T09:20:12.3032738Z     [PluginGateway] Shutdown testplugin
2025-12-10T09:20:12.3033087Z 
2025-12-10T09:20:12.3033512Z       at PluginGateway.log [as shutdown] (services/pluginGateway.js:236:29)
2025-12-10T09:20:12.3034024Z 
2025-12-10T09:20:12.3045524Z   console.log
2025-12-10T09:20:12.3046386Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.3048095Z 
2025-12-10T09:20:12.3048806Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.3049530Z 
2025-12-10T09:20:12.3053448Z   console.log
2025-12-10T09:20:12.3054140Z     [PluginGateway] Shutting down all adapters...
2025-12-10T09:20:12.3056409Z 
2025-12-10T09:20:12.3056884Z       at PluginGateway.log [as shutdown] (services/pluginGateway.js:230:17)
2025-12-10T09:20:12.3057384Z 
2025-12-10T09:20:12.3141309Z   console.error
2025-12-10T09:20:12.3142269Z     [PluginGateway] Error shutting down testplugin: Shutdown failed
2025-12-10T09:20:12.3143032Z 
2025-12-10T09:20:12.3143792Z     [0m [90m 237 |[39m                 }
2025-12-10T09:20:12.3144934Z      [90m 238 |[39m             } [36mcatch[39m (error) {
2025-12-10T09:20:12.3146773Z     [31m[1m>[22m[39m[90m 239 |[39m                 console[33m.[39merror([32m`[PluginGateway] Error shutting down ${pluginName}:`[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:12.3148489Z      [90m     |[39m                         [31m[1m^[22m[39m
2025-12-10T09:20:12.3149599Z      [90m 240 |[39m             }
2025-12-10T09:20:12.3150407Z      [90m 241 |[39m         }
2025-12-10T09:20:12.3151261Z      [90m 242 |[39m         [0m
2025-12-10T09:20:12.3162565Z 
2025-12-10T09:20:12.3164928Z       at PluginGateway.error [as shutdown] (services/pluginGateway.js:239:25)
2025-12-10T09:20:12.3167016Z       at Object.<anonymous> (__tests__/services/pluginGateway.test.js:400:13)
2025-12-10T09:20:12.3179437Z 
2025-12-10T09:20:12.3179620Z   console.log
2025-12-10T09:20:12.3180115Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:12.3180508Z 
2025-12-10T09:20:12.3180959Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:12.3181496Z 
2025-12-10T09:20:12.3181645Z   console.log
2025-12-10T09:20:12.3182095Z     [PluginGateway] Shutting down all adapters...
2025-12-10T09:20:12.3182920Z 
2025-12-10T09:20:12.3183618Z       at PluginGateway.log [as shutdown] (services/pluginGateway.js:230:17)
2025-12-10T09:20:12.3184197Z 
2025-12-10T09:20:12.3384910Z FAIL __tests__/services/pluginGateway.test.js
2025-12-10T09:20:12.3396254Z   PluginGateway
2025-12-10T09:20:12.3396993Z     registerAdapter
2025-12-10T09:20:12.3398352Z       ✓ should register an adapter successfully (26 ms)
2025-12-10T09:20:12.3399731Z       ✓ should normalize adapter names to lowercase (4 ms)
2025-12-10T09:20:12.3400849Z       ✓ should throw error if plugin name is invalid (32 ms)
2025-12-10T09:20:12.3401910Z       ✓ should throw error if adapter is invalid (2 ms)
2025-12-10T09:20:12.3404098Z       ✓ should allow overwriting existing adapter (2 ms)
2025-12-10T09:20:12.3404609Z     unregisterAdapter
2025-12-10T09:20:12.3405124Z       ✓ should unregister an adapter (4 ms)
2025-12-10T09:20:12.3405813Z       ✓ should call adapter shutdown if available (3 ms)
2025-12-10T09:20:12.3406669Z       ✓ should handle unregistering non-existent adapter gracefully (1 ms)
2025-12-10T09:20:12.3407298Z     getAdapter
2025-12-10T09:20:12.3407819Z       ✓ should return registered adapter (1 ms)
2025-12-10T09:20:12.3408517Z       ✓ should return null for non-existent adapter (2 ms)
2025-12-10T09:20:12.3409421Z       ✓ should be case-insensitive (2 ms)
2025-12-10T09:20:12.3409869Z     configure
2025-12-10T09:20:12.3410355Z       ✓ should configure an adapter (4 ms)
2025-12-10T09:20:12.3410926Z       ✓ should store configuration (2 ms)
2025-12-10T09:20:12.3411547Z       ✓ should throw error for invalid config (4 ms)
2025-12-10T09:20:12.3412246Z       ✓ should work even if adapter is not registered (3 ms)
2025-12-10T09:20:12.3412724Z     getConfig
2025-12-10T09:20:12.3413200Z       ✓ should return stored configuration (3 ms)
2025-12-10T09:20:12.3413874Z       ✕ should return null for non-configured adapter (3 ms)
2025-12-10T09:20:12.3414364Z     initialize
2025-12-10T09:20:12.3414809Z       ✓ should initialize an adapter (3 ms)
2025-12-10T09:20:12.3415469Z       ✓ should throw error if adapter not found (3 ms)
2025-12-10T09:20:12.3416112Z       ✓ should log audit event on error (8 ms)
2025-12-10T09:20:12.3416534Z     call
2025-12-10T09:20:12.3417021Z       ✓ should call adapter method successfully (2 ms)
2025-12-10T09:20:12.3417699Z       ✓ should throw error if adapter not found (2 ms)
2025-12-10T09:20:12.3418364Z       ✓ should throw error if method not found (9 ms)
2025-12-10T09:20:12.3418987Z       ✓ should log audit event on error (8 ms)
2025-12-10T09:20:12.3419827Z       ✓ should pass empty params by default (4 ms)
2025-12-10T09:20:12.3420281Z     checkHealth
2025-12-10T09:20:12.3420867Z       ✓ should return health status for registered adapter (3 ms)
2025-12-10T09:20:12.3421730Z       ✓ should return unknown status for non-existent adapter (3 ms)
2025-12-10T09:20:12.3422581Z       ✓ should return healthy if no health check implemented (2 ms)
2025-12-10T09:20:12.3423287Z       ✓ should return unhealthy on error (3 ms)
2025-12-10T09:20:12.3423726Z     checkAllHealth
2025-12-10T09:20:12.3424360Z       ✓ should check health of all registered adapters (4 ms)
2025-12-10T09:20:12.3425160Z       ✓ should return healthy true if all adapters are healthy (4 ms)
2025-12-10T09:20:12.3425998Z       ✓ should return empty result if no adapters registered (2 ms)
2025-12-10T09:20:12.3426688Z       ✓ should handle errors gracefully (1 ms)
2025-12-10T09:20:12.3427164Z     getRegisteredAdapters
2025-12-10T09:20:12.3427806Z       ✓ should return list of registered adapter names (3 ms)
2025-12-10T09:20:12.3428613Z       ✓ should return empty array if no adapters registered (3 ms)
2025-12-10T09:20:12.3429147Z     shutdown
2025-12-10T09:20:12.3429774Z       ✓ should shutdown all adapters (4 ms)
2025-12-10T09:20:12.3430416Z       ✓ should clear all adapters and configs (3 ms)
2025-12-10T09:20:12.3431080Z       ✓ should handle errors during shutdown (10 ms)
2025-12-10T09:20:12.3431805Z       ✓ should work if adapters have no shutdown method (2 ms)
2025-12-10T09:20:12.3432190Z 
2025-12-10T09:20:12.3433344Z   ● PluginGateway › getConfig › should return null for non-configured adapter
2025-12-10T09:20:12.3433860Z 
2025-12-10T09:20:12.3434049Z     expect(received).toBeNull()
2025-12-10T09:20:12.3434318Z 
2025-12-10T09:20:12.3434496Z     Received: {"enabled": true}
2025-12-10T09:20:12.3434751Z 
2025-12-10T09:20:12.3435467Z     [0m [90m 172 |[39m         it([32m'should return null for non-configured adapter'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:12.3436859Z      [90m 173 |[39m             [36mconst[39m result [33m=[39m pluginGateway[33m.[39mgetConfig([32m'nonexistent'[39m)[33m;[39m
2025-12-10T09:20:12.3438032Z     [31m[1m>[22m[39m[90m 174 |[39m             expect(result)[33m.[39mtoBeNull()[33m;[39m
2025-12-10T09:20:12.3438846Z      [90m     |[39m                            [31m[1m^[22m[39m
2025-12-10T09:20:12.3439599Z      [90m 175 |[39m         })[33m;[39m
2025-12-10T09:20:12.3440136Z      [90m 176 |[39m     })[33m;[39m
2025-12-10T09:20:12.3440619Z      [90m 177 |[39m[0m
2025-12-10T09:20:12.3440849Z 
2025-12-10T09:20:12.3441250Z       at Object.toBeNull (__tests__/services/pluginGateway.test.js:174:28)
2025-12-10T09:20:12.3441712Z 
2025-12-10T09:20:12.6044658Z   console.log
2025-12-10T09:20:12.6045710Z     [EventLogger] Initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/events-test.db
2025-12-10T09:20:12.6046493Z 
2025-12-10T09:20:12.6046933Z       at EventLoggerService.log [as initialize] (services/eventLogger.js:125:21)
2025-12-10T09:20:12.6047439Z 
2025-12-10T09:20:12.6069347Z   console.log
2025-12-10T09:20:12.6071045Z     [EventLogger] Logged event #1: server.start - Server started
2025-12-10T09:20:12.6071526Z 
2025-12-10T09:20:12.6071990Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6072543Z 
2025-12-10T09:20:12.6085063Z   console.log
2025-12-10T09:20:12.6085982Z     [EventLogger] Logged event #2: plugin.installed - Plugin installed
2025-12-10T09:20:12.6086517Z 
2025-12-10T09:20:12.6086980Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6087502Z 
2025-12-10T09:20:12.6173783Z   console.log
2025-12-10T09:20:12.6186545Z     [EventLogger] Logged event #3: server.start - Server started
2025-12-10T09:20:12.6186986Z 
2025-12-10T09:20:12.6187429Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6187929Z 
2025-12-10T09:20:12.6188065Z   console.log
2025-12-10T09:20:12.6190283Z     [EventLogger] Logged event #4: server.start - Server started
2025-12-10T09:20:12.6190725Z 
2025-12-10T09:20:12.6191146Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6191642Z 
2025-12-10T09:20:12.6194677Z   console.log
2025-12-10T09:20:12.6203022Z     [EventLogger] Logged event #5: system.info - Test event
2025-12-10T09:20:12.6203453Z 
2025-12-10T09:20:12.6203908Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6204447Z 
2025-12-10T09:20:12.6242048Z   console.log
2025-12-10T09:20:12.6243191Z     [EventLogger] Logged event #6: server.start - Server started
2025-12-10T09:20:12.6244655Z 
2025-12-10T09:20:12.6245319Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6247066Z 
2025-12-10T09:20:12.6250669Z   console.log
2025-12-10T09:20:12.6251450Z     [EventLogger] Logged event #7: server.stop - Server stopped
2025-12-10T09:20:12.6252406Z 
2025-12-10T09:20:12.6253101Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6254100Z 
2025-12-10T09:20:12.6259925Z   console.log
2025-12-10T09:20:12.6260555Z     [EventLogger] Logged event #8: plugin.installed - Plugin installed
2025-12-10T09:20:12.6261035Z 
2025-12-10T09:20:12.6261461Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6261998Z 
2025-12-10T09:20:12.6269130Z   console.log
2025-12-10T09:20:12.6271128Z     [EventLogger] Logged event #9: player.kicked - Player kicked
2025-12-10T09:20:12.6273511Z 
2025-12-10T09:20:12.6274021Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6274577Z 
2025-12-10T09:20:12.6288283Z   console.log
2025-12-10T09:20:12.6289419Z     [EventLogger] Logged event #10: server.start - Server started
2025-12-10T09:20:12.6290293Z 
2025-12-10T09:20:12.6292735Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6293696Z 
2025-12-10T09:20:12.6297539Z   console.log
2025-12-10T09:20:12.6298405Z     [EventLogger] Logged event #11: server.stop - Server stopped
2025-12-10T09:20:12.6299335Z 
2025-12-10T09:20:12.6300101Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6300900Z 
2025-12-10T09:20:12.6306725Z   console.log
2025-12-10T09:20:12.6307384Z     [EventLogger] Logged event #12: plugin.installed - Plugin installed
2025-12-10T09:20:12.6307920Z 
2025-12-10T09:20:12.6308380Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6308899Z 
2025-12-10T09:20:12.6316133Z   console.log
2025-12-10T09:20:12.6317068Z     [EventLogger] Logged event #13: player.kicked - Player kicked
2025-12-10T09:20:12.6319366Z 
2025-12-10T09:20:12.6321442Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6322301Z 
2025-12-10T09:20:12.6331695Z   console.log
2025-12-10T09:20:12.6332895Z     [EventLogger] Logged event #14: server.start - Server started
2025-12-10T09:20:12.6333511Z 
2025-12-10T09:20:12.6334130Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6335066Z 
2025-12-10T09:20:12.6340326Z   console.log
2025-12-10T09:20:12.6340823Z     [EventLogger] Logged event #15: server.stop - Server stopped
2025-12-10T09:20:12.6341210Z 
2025-12-10T09:20:12.6341623Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6342111Z 
2025-12-10T09:20:12.6349800Z   console.log
2025-12-10T09:20:12.6350924Z     [EventLogger] Logged event #16: plugin.installed - Plugin installed
2025-12-10T09:20:12.6352076Z 
2025-12-10T09:20:12.6352682Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6353476Z 
2025-12-10T09:20:12.6362429Z   console.log
2025-12-10T09:20:12.6364106Z     [EventLogger] Logged event #17: player.kicked - Player kicked
2025-12-10T09:20:12.6364587Z 
2025-12-10T09:20:12.6365060Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6365586Z 
2025-12-10T09:20:12.6381178Z   console.log
2025-12-10T09:20:12.6382498Z     [EventLogger] Logged event #18: server.start - Server started
2025-12-10T09:20:12.6383199Z 
2025-12-10T09:20:12.6383844Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6384740Z 
2025-12-10T09:20:12.6392515Z   console.log
2025-12-10T09:20:12.6393421Z     [EventLogger] Logged event #19: server.stop - Server stopped
2025-12-10T09:20:12.6395034Z 
2025-12-10T09:20:12.6395854Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6396683Z 
2025-12-10T09:20:12.6404697Z   console.log
2025-12-10T09:20:12.6405630Z     [EventLogger] Logged event #20: plugin.installed - Plugin installed
2025-12-10T09:20:12.6406463Z 
2025-12-10T09:20:12.6407088Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6408981Z 
2025-12-10T09:20:12.6418348Z   console.log
2025-12-10T09:20:12.6419410Z     [EventLogger] Logged event #21: player.kicked - Player kicked
2025-12-10T09:20:12.6420139Z 
2025-12-10T09:20:12.6420757Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6421773Z 
2025-12-10T09:20:12.6440339Z   console.log
2025-12-10T09:20:12.6441216Z     [EventLogger] Logged event #22: server.start - Server started
2025-12-10T09:20:12.6442262Z 
2025-12-10T09:20:12.6443109Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6444153Z 
2025-12-10T09:20:12.6466475Z   console.log
2025-12-10T09:20:12.6467301Z     [EventLogger] Logged event #23: server.stop - Server stopped
2025-12-10T09:20:12.6468715Z 
2025-12-10T09:20:12.6469396Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6469934Z 
2025-12-10T09:20:12.6470079Z   console.log
2025-12-10T09:20:12.6470655Z     [EventLogger] Logged event #24: plugin.installed - Plugin installed
2025-12-10T09:20:12.6471126Z 
2025-12-10T09:20:12.6471541Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6472036Z 
2025-12-10T09:20:12.6479474Z   console.log
2025-12-10T09:20:12.6480071Z     [EventLogger] Logged event #25: player.kicked - Player kicked
2025-12-10T09:20:12.6480536Z 
2025-12-10T09:20:12.6481001Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6481553Z 
2025-12-10T09:20:12.6522102Z   console.log
2025-12-10T09:20:12.6530257Z     [EventLogger] Logged event #26: server.start - Server started
2025-12-10T09:20:12.6530747Z 
2025-12-10T09:20:12.6531197Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6531726Z 
2025-12-10T09:20:12.6531861Z   console.log
2025-12-10T09:20:12.6532397Z     [EventLogger] Logged event #27: server.stop - Server stopped
2025-12-10T09:20:12.6532818Z 
2025-12-10T09:20:12.6533248Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6533756Z 
2025-12-10T09:20:12.6533912Z   console.log
2025-12-10T09:20:12.6534507Z     [EventLogger] Logged event #28: plugin.installed - Plugin installed
2025-12-10T09:20:12.6535013Z 
2025-12-10T09:20:12.6535449Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6535959Z 
2025-12-10T09:20:12.6536136Z   console.log
2025-12-10T09:20:12.6536901Z     [EventLogger] Logged event #29: player.kicked - Player kicked
2025-12-10T09:20:12.6537508Z 
2025-12-10T09:20:12.6538016Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6538673Z 
2025-12-10T09:20:12.6555550Z   console.log
2025-12-10T09:20:12.6556434Z     [EventLogger] Logged event #30: server.start - Server started
2025-12-10T09:20:12.6557157Z 
2025-12-10T09:20:12.6557849Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6558630Z 
2025-12-10T09:20:12.6566416Z   console.log
2025-12-10T09:20:12.6568348Z     [EventLogger] Logged event #31: server.stop - Server stopped
2025-12-10T09:20:12.6569029Z 
2025-12-10T09:20:12.6571446Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6571956Z 
2025-12-10T09:20:12.6577724Z   console.log
2025-12-10T09:20:12.6579692Z     [EventLogger] Logged event #32: plugin.installed - Plugin installed
2025-12-10T09:20:12.6580535Z 
2025-12-10T09:20:12.6581255Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6582143Z 
2025-12-10T09:20:12.6590017Z   console.log
2025-12-10T09:20:12.6590915Z     [EventLogger] Logged event #33: player.kicked - Player kicked
2025-12-10T09:20:12.6591685Z 
2025-12-10T09:20:12.6592418Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6594135Z 
2025-12-10T09:20:12.6649801Z   console.log
2025-12-10T09:20:12.6650643Z     [EventLogger] Logged event #34: server.start - Server started
2025-12-10T09:20:12.6651335Z 
2025-12-10T09:20:12.6651978Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6652702Z 
2025-12-10T09:20:12.6653085Z   console.log
2025-12-10T09:20:12.6654006Z     [EventLogger] Logged event #35: server.stop - Server stopped
2025-12-10T09:20:12.6654743Z 
2025-12-10T09:20:12.6655422Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6656653Z 
2025-12-10T09:20:12.6657002Z   console.log
2025-12-10T09:20:12.6658001Z     [EventLogger] Logged event #36: plugin.installed - Plugin installed
2025-12-10T09:20:12.6658740Z 
2025-12-10T09:20:12.6659561Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6660417Z 
2025-12-10T09:20:12.6662350Z   console.log
2025-12-10T09:20:12.6663908Z     [EventLogger] Logged event #37: player.kicked - Player kicked
2025-12-10T09:20:12.6664382Z 
2025-12-10T09:20:12.6664837Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6665365Z 
2025-12-10T09:20:12.6681612Z   console.log
2025-12-10T09:20:12.6682472Z     [EventLogger] Logged event #38: server.start - Server started
2025-12-10T09:20:12.6684017Z 
2025-12-10T09:20:12.6684666Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6685944Z 
2025-12-10T09:20:12.6696932Z   console.log
2025-12-10T09:20:12.6793610Z     [EventLogger] Logged event #39: server.stop - Server stopped
2025-12-10T09:20:12.6798192Z 
2025-12-10T09:20:12.6801479Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6804224Z 
2025-12-10T09:20:12.6806645Z   console.log
2025-12-10T09:20:12.6809668Z     [EventLogger] Logged event #40: plugin.installed - Plugin installed
2025-12-10T09:20:12.6817434Z 
2025-12-10T09:20:12.6817937Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6818452Z 
2025-12-10T09:20:12.6818604Z   console.log
2025-12-10T09:20:12.6820139Z     [EventLogger] Logged event #41: player.kicked - Player kicked
2025-12-10T09:20:12.6820662Z 
2025-12-10T09:20:12.6821109Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6821630Z 
2025-12-10T09:20:12.6821946Z   console.log
2025-12-10T09:20:12.6822508Z     [EventLogger] Logged event #42: server.start - Server started
2025-12-10T09:20:12.6824189Z 
2025-12-10T09:20:12.6824687Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6825210Z 
2025-12-10T09:20:12.6825348Z   console.log
2025-12-10T09:20:12.6825978Z     [EventLogger] Logged event #43: server.stop - Server stopped
2025-12-10T09:20:12.6826430Z 
2025-12-10T09:20:12.6826864Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6827394Z 
2025-12-10T09:20:12.6827537Z   console.log
2025-12-10T09:20:12.6828133Z     [EventLogger] Logged event #44: plugin.installed - Plugin installed
2025-12-10T09:20:12.6828614Z 
2025-12-10T09:20:12.6829061Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6829799Z 
2025-12-10T09:20:12.6829941Z   console.log
2025-12-10T09:20:12.6830499Z     [EventLogger] Logged event #45: player.kicked - Player kicked
2025-12-10T09:20:12.6830951Z 
2025-12-10T09:20:12.6831386Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6831903Z 
2025-12-10T09:20:12.6832062Z   console.log
2025-12-10T09:20:12.6832608Z     [EventLogger] Logged event #46: server.start - Server started
2025-12-10T09:20:12.6833041Z 
2025-12-10T09:20:12.6833476Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6833971Z 
2025-12-10T09:20:12.6834102Z   console.log
2025-12-10T09:20:12.6834620Z     [EventLogger] Logged event #47: server.stop - Server stopped
2025-12-10T09:20:12.6835058Z 
2025-12-10T09:20:12.6835480Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6835985Z 
2025-12-10T09:20:12.6844463Z   console.log
2025-12-10T09:20:12.6847114Z     [EventLogger] Logged event #48: plugin.installed - Plugin installed
2025-12-10T09:20:12.6847605Z 
2025-12-10T09:20:12.6849594Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6850329Z 
2025-12-10T09:20:12.6854585Z   console.log
2025-12-10T09:20:12.6856685Z     [EventLogger] Logged event #49: player.kicked - Player kicked
2025-12-10T09:20:12.6857739Z 
2025-12-10T09:20:12.6858494Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6859667Z 
2025-12-10T09:20:12.6872901Z   console.log
2025-12-10T09:20:12.6873767Z     [EventLogger] Logged event #50: server.start - Server started
2025-12-10T09:20:12.6874519Z 
2025-12-10T09:20:12.6875155Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6876026Z 
2025-12-10T09:20:12.6880816Z   console.log
2025-12-10T09:20:12.6881398Z     [EventLogger] Logged event #51: server.stop - Server stopped
2025-12-10T09:20:12.6881837Z 
2025-12-10T09:20:12.6882289Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6882809Z 
2025-12-10T09:20:12.6938073Z   console.log
2025-12-10T09:20:12.6939503Z     [EventLogger] Logged event #52: plugin.installed - Plugin installed
2025-12-10T09:20:12.6940164Z 
2025-12-10T09:20:12.6940808Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6941352Z 
2025-12-10T09:20:12.6948597Z   console.log
2025-12-10T09:20:12.6949538Z     [EventLogger] Logged event #53: player.kicked - Player kicked
2025-12-10T09:20:12.6950023Z 
2025-12-10T09:20:12.6950474Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6951001Z 
2025-12-10T09:20:12.6963262Z   console.log
2025-12-10T09:20:12.6964134Z     [EventLogger] Logged event #54: server.start - Server started
2025-12-10T09:20:12.6964792Z 
2025-12-10T09:20:12.6965456Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6966233Z 
2025-12-10T09:20:12.6974057Z   console.log
2025-12-10T09:20:12.6974914Z     [EventLogger] Logged event #55: server.stop - Server stopped
2025-12-10T09:20:12.6975661Z 
2025-12-10T09:20:12.6976284Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6977045Z 
2025-12-10T09:20:12.6983889Z   console.log
2025-12-10T09:20:12.6984793Z     [EventLogger] Logged event #56: plugin.installed - Plugin installed
2025-12-10T09:20:12.6985598Z 
2025-12-10T09:20:12.6986327Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.6987057Z 
2025-12-10T09:20:12.7019827Z   console.log
2025-12-10T09:20:12.7020571Z     [EventLogger] Logged event #57: player.kicked - Player kicked
2025-12-10T09:20:12.7021135Z 
2025-12-10T09:20:12.7021721Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7029686Z 
2025-12-10T09:20:12.7040394Z   console.log
2025-12-10T09:20:12.7040917Z     [EventLogger] Logged event #58: system.info - Event 0
2025-12-10T09:20:12.7041331Z 
2025-12-10T09:20:12.7041777Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7042502Z 
2025-12-10T09:20:12.7042652Z   console.log
2025-12-10T09:20:12.7043281Z     [EventLogger] Logged event #59: system.info - Event 1
2025-12-10T09:20:12.7043784Z 
2025-12-10T09:20:12.7044391Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7045020Z 
2025-12-10T09:20:12.7045304Z   console.log
2025-12-10T09:20:12.7045911Z     [EventLogger] Logged event #60: system.info - Event 2
2025-12-10T09:20:12.7046299Z 
2025-12-10T09:20:12.7046727Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7047225Z 
2025-12-10T09:20:12.7051208Z   console.log
2025-12-10T09:20:12.7051732Z     [EventLogger] Logged event #61: system.info - Event 3
2025-12-10T09:20:12.7052134Z 
2025-12-10T09:20:12.7052583Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7053099Z 
2025-12-10T09:20:12.7067480Z   console.log
2025-12-10T09:20:12.7068012Z     [EventLogger] Logged event #62: system.info - Event 4
2025-12-10T09:20:12.7068433Z 
2025-12-10T09:20:12.7068879Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7069894Z 
2025-12-10T09:20:12.7082273Z   console.log
2025-12-10T09:20:12.7082824Z     [EventLogger] Logged event #63: system.info - Event 5
2025-12-10T09:20:12.7083227Z 
2025-12-10T09:20:12.7083739Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7084258Z 
2025-12-10T09:20:12.7090870Z   console.log
2025-12-10T09:20:12.7091892Z     [EventLogger] Logged event #64: system.info - Event 6
2025-12-10T09:20:12.7092571Z 
2025-12-10T09:20:12.7093214Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7094195Z 
2025-12-10T09:20:12.7101111Z   console.log
2025-12-10T09:20:12.7102772Z     [EventLogger] Logged event #65: system.info - Event 7
2025-12-10T09:20:12.7103554Z 
2025-12-10T09:20:12.7104247Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7104992Z 
2025-12-10T09:20:12.7112257Z   console.log
2025-12-10T09:20:12.7112918Z     [EventLogger] Logged event #66: system.info - Event 8
2025-12-10T09:20:12.7113426Z 
2025-12-10T09:20:12.7113989Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7114512Z 
2025-12-10T09:20:12.7122503Z   console.log
2025-12-10T09:20:12.7123328Z     [EventLogger] Logged event #67: system.info - Event 9
2025-12-10T09:20:12.7123910Z 
2025-12-10T09:20:12.7126296Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7126820Z 
2025-12-10T09:20:12.7139080Z   console.log
2025-12-10T09:20:12.7140946Z     [EventLogger] Logged event #68: system.info - Event 0
2025-12-10T09:20:12.7141656Z 
2025-12-10T09:20:12.7143453Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7144194Z 
2025-12-10T09:20:12.7151201Z   console.log
2025-12-10T09:20:12.7151996Z     [EventLogger] Logged event #69: system.info - Event 1
2025-12-10T09:20:12.7152673Z 
2025-12-10T09:20:12.7154637Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7156586Z 
2025-12-10T09:20:12.7164002Z   console.log
2025-12-10T09:20:12.7164775Z     [EventLogger] Logged event #70: system.info - Event 2
2025-12-10T09:20:12.7165425Z 
2025-12-10T09:20:12.7166898Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7167420Z 
2025-12-10T09:20:12.7175499Z   console.log
2025-12-10T09:20:12.7176251Z     [EventLogger] Logged event #71: system.info - Event 3
2025-12-10T09:20:12.7176935Z 
2025-12-10T09:20:12.7179659Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7180181Z 
2025-12-10T09:20:12.7187218Z   console.log
2025-12-10T09:20:12.7187999Z     [EventLogger] Logged event #72: system.info - Event 4
2025-12-10T09:20:12.7189737Z 
2025-12-10T09:20:12.7190844Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7192011Z 
2025-12-10T09:20:12.7199524Z   console.log
2025-12-10T09:20:12.7200333Z     [EventLogger] Logged event #73: system.info - Event 5
2025-12-10T09:20:12.7200973Z 
2025-12-10T09:20:12.7203603Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7204127Z 
2025-12-10T09:20:12.7211617Z   console.log
2025-12-10T09:20:12.7212373Z     [EventLogger] Logged event #74: system.info - Event 6
2025-12-10T09:20:12.7213025Z 
2025-12-10T09:20:12.7213908Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7215645Z 
2025-12-10T09:20:12.7223147Z   console.log
2025-12-10T09:20:12.7223904Z     [EventLogger] Logged event #75: system.info - Event 7
2025-12-10T09:20:12.7224536Z 
2025-12-10T09:20:12.7225544Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7226638Z 
2025-12-10T09:20:12.7231393Z   console.log
2025-12-10T09:20:12.7231916Z     [EventLogger] Logged event #76: system.info - Event 8
2025-12-10T09:20:12.7232598Z 
2025-12-10T09:20:12.7233287Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7233818Z 
2025-12-10T09:20:12.7289960Z   console.log
2025-12-10T09:20:12.7290697Z     [EventLogger] Logged event #77: system.info - Event 9
2025-12-10T09:20:12.7291282Z 
2025-12-10T09:20:12.7291873Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7292393Z 
2025-12-10T09:20:12.7292671Z   console.log
2025-12-10T09:20:12.7293265Z     [EventLogger] Logged event #78: system.info - Event 0
2025-12-10T09:20:12.7293804Z 
2025-12-10T09:20:12.7294389Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7294949Z 
2025-12-10T09:20:12.7295172Z   console.log
2025-12-10T09:20:12.7295842Z     [EventLogger] Logged event #79: system.info - Event 1
2025-12-10T09:20:12.7296359Z 
2025-12-10T09:20:12.7297808Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7298517Z 
2025-12-10T09:20:12.7298719Z   console.log
2025-12-10T09:20:12.7299398Z     [EventLogger] Logged event #80: system.info - Event 2
2025-12-10T09:20:12.7299784Z 
2025-12-10T09:20:12.7300358Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7300988Z 
2025-12-10T09:20:12.7307505Z   console.log
2025-12-10T09:20:12.7308044Z     [EventLogger] Logged event #81: system.info - Event 3
2025-12-10T09:20:12.7308438Z 
2025-12-10T09:20:12.7308879Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7309621Z 
2025-12-10T09:20:12.7320819Z   console.log
2025-12-10T09:20:12.7321360Z     [EventLogger] Logged event #82: system.info - Event 4
2025-12-10T09:20:12.7321760Z 
2025-12-10T09:20:12.7322208Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7322743Z 
2025-12-10T09:20:12.7335579Z   console.log
2025-12-10T09:20:12.7336145Z     [EventLogger] Logged event #83: system.info - Event 5
2025-12-10T09:20:12.7336577Z 
2025-12-10T09:20:12.7337037Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7337554Z 
2025-12-10T09:20:12.7362770Z   console.log
2025-12-10T09:20:12.7367265Z     [EventLogger] Logged event #84: system.info - Event 6
2025-12-10T09:20:12.7373821Z 
2025-12-10T09:20:12.7374315Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7374859Z 
2025-12-10T09:20:12.7376150Z   console.log
2025-12-10T09:20:12.7376655Z     [EventLogger] Logged event #85: system.info - Event 7
2025-12-10T09:20:12.7377040Z 
2025-12-10T09:20:12.7377468Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7377965Z 
2025-12-10T09:20:12.7381787Z   console.log
2025-12-10T09:20:12.7384299Z     [EventLogger] Logged event #86: system.info - Event 8
2025-12-10T09:20:12.7386207Z 
2025-12-10T09:20:12.7387506Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7388293Z 
2025-12-10T09:20:12.7389932Z   console.log
2025-12-10T09:20:12.7390624Z     [EventLogger] Logged event #87: system.info - Event 9
2025-12-10T09:20:12.7398090Z 
2025-12-10T09:20:12.7398602Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7399342Z 
2025-12-10T09:20:12.7409599Z   console.log
2025-12-10T09:20:12.7410238Z     [EventLogger] Logged event #88: server.start - Server started
2025-12-10T09:20:12.7413065Z 
2025-12-10T09:20:12.7413681Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7414456Z 
2025-12-10T09:20:12.7420020Z   console.log
2025-12-10T09:20:12.7421765Z     [EventLogger] Logged event #89: server.start - Server started again
2025-12-10T09:20:12.7422956Z 
2025-12-10T09:20:12.7423550Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7425357Z 
2025-12-10T09:20:12.7431278Z   console.log
2025-12-10T09:20:12.7432394Z     [EventLogger] Logged event #90: plugin.installed - Plugin installed
2025-12-10T09:20:12.7435787Z 
2025-12-10T09:20:12.7436458Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7438186Z 
2025-12-10T09:20:12.7443815Z   console.log
2025-12-10T09:20:12.7444685Z     [EventLogger] Logged event #91: player.kicked - Player kicked
2025-12-10T09:20:12.7447841Z 
2025-12-10T09:20:12.7448659Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7451543Z 
2025-12-10T09:20:12.7469886Z   console.log
2025-12-10T09:20:12.7474379Z     [EventLogger] Logged event #92: server.start - Server started
2025-12-10T09:20:12.7475479Z 
2025-12-10T09:20:12.7476807Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7477813Z 
2025-12-10T09:20:12.7486357Z   console.log
2025-12-10T09:20:12.7487262Z     [EventLogger] Logged event #93: server.start - Server started again
2025-12-10T09:20:12.7488051Z 
2025-12-10T09:20:12.7488735Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7489820Z 
2025-12-10T09:20:12.7491221Z   console.log
2025-12-10T09:20:12.7491995Z     [EventLogger] Logged event #94: plugin.installed - Plugin installed
2025-12-10T09:20:12.7492691Z 
2025-12-10T09:20:12.7494146Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7494660Z 
2025-12-10T09:20:12.7502306Z   console.log
2025-12-10T09:20:12.7503178Z     [EventLogger] Logged event #95: player.kicked - Player kicked
2025-12-10T09:20:12.7505931Z 
2025-12-10T09:20:12.7507957Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7509441Z 
2025-12-10T09:20:12.7517567Z   console.log
2025-12-10T09:20:12.7518460Z     [EventLogger] Logged event #96: server.start - Server started
2025-12-10T09:20:12.7519084Z 
2025-12-10T09:20:12.7519774Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7520311Z 
2025-12-10T09:20:12.7527131Z   console.log
2025-12-10T09:20:12.7528067Z     [EventLogger] Logged event #97: server.start - Server started again
2025-12-10T09:20:12.7530523Z 
2025-12-10T09:20:12.7531012Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7531544Z 
2025-12-10T09:20:12.7537081Z   console.log
2025-12-10T09:20:12.7538005Z     [EventLogger] Logged event #98: plugin.installed - Plugin installed
2025-12-10T09:20:12.7540479Z 
2025-12-10T09:20:12.7540976Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7541515Z 
2025-12-10T09:20:12.7547046Z   console.log
2025-12-10T09:20:12.7547970Z     [EventLogger] Logged event #99: player.kicked - Player kicked
2025-12-10T09:20:12.7550410Z 
2025-12-10T09:20:12.7550903Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7551444Z 
2025-12-10T09:20:12.7600055Z   console.log
2025-12-10T09:20:12.7600696Z     [EventLogger] Logged event #100: server.start - Server started
2025-12-10T09:20:12.7601223Z 
2025-12-10T09:20:12.7601916Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7602426Z 
2025-12-10T09:20:12.7610401Z   console.log
2025-12-10T09:20:12.7611374Z     [EventLogger] Logged event #101: server.start - Server started again
2025-12-10T09:20:12.7612083Z 
2025-12-10T09:20:12.7612718Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7614071Z 
2025-12-10T09:20:12.7619925Z   console.log
2025-12-10T09:20:12.7620858Z     [EventLogger] Logged event #102: plugin.installed - Plugin installed
2025-12-10T09:20:12.7622509Z 
2025-12-10T09:20:12.7623114Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7623635Z 
2025-12-10T09:20:12.7629423Z   console.log
2025-12-10T09:20:12.7630375Z     [EventLogger] Logged event #103: player.kicked - Player kicked
2025-12-10T09:20:12.7632756Z 
2025-12-10T09:20:12.7633714Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7634630Z 
2025-12-10T09:20:12.7762521Z   console.log
2025-12-10T09:20:12.7764108Z     [EventLogger] Logged event #105: system.info - Recent event
2025-12-10T09:20:12.7764557Z 
2025-12-10T09:20:12.7764978Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:12.7765473Z 
2025-12-10T09:20:12.7772112Z   console.log
2025-12-10T09:20:12.7772836Z     [EventLogger] Deleted 1 events older than 90 days
2025-12-10T09:20:12.7773315Z 
2025-12-10T09:20:12.7773927Z       at EventLoggerService.log [as deleteOldEvents] (services/eventLogger.js:437:17)
2025-12-10T09:20:12.7774463Z 
2025-12-10T09:20:12.7830565Z   console.log
2025-12-10T09:20:12.7831337Z     [EventLogger] Database connection closed
2025-12-10T09:20:12.7831980Z 
2025-12-10T09:20:12.7832707Z       at EventLoggerService.log [as close] (services/eventLogger.js:448:21)
2025-12-10T09:20:12.7833217Z 
2025-12-10T09:20:12.7887240Z PASS __tests__/services/eventLogger.test.js
2025-12-10T09:20:12.7888835Z   Event Logger Service
2025-12-10T09:20:12.7890449Z     Initialization
2025-12-10T09:20:12.7892249Z       ✓ should initialize database successfully (1 ms)
2025-12-10T09:20:12.7893939Z       ✓ should create events table (1 ms)
2025-12-10T09:20:12.7900288Z       ✓ should create indexes
2025-12-10T09:20:12.7900737Z     logEvent()
2025-12-10T09:20:12.7901239Z       ✓ should log a basic event (2 ms)
2025-12-10T09:20:12.7901863Z       ✓ should log event with all fields (7 ms)
2025-12-10T09:20:12.7902629Z       ✓ should default to system actor if not provided (2 ms)
2025-12-10T09:20:12.7903479Z       ✓ should default to INFO severity if not provided (1 ms)
2025-12-10T09:20:12.7904269Z       ✓ should emit event for real-time notifications (5 ms)
2025-12-10T09:20:12.7904769Z     queryEvents()
2025-12-10T09:20:12.7905234Z       ✓ should query all events (5 ms)
2025-12-10T09:20:12.7905819Z       ✓ should filter by category (4 ms)
2025-12-10T09:20:12.7906404Z       ✓ should filter by severity (4 ms)
2025-12-10T09:20:12.7906960Z       ✓ should filter by event type (6 ms)
2025-12-10T09:20:12.7907526Z       ✓ should filter by actor (6 ms)
2025-12-10T09:20:12.7908063Z       ✓ should filter by target (6 ms)
2025-12-10T09:20:12.7908626Z       ✓ should search in title and message (6 ms)
2025-12-10T09:20:12.7909414Z       ✓ should apply limit (6 ms)
2025-12-10T09:20:12.7910000Z       ✓ should apply offset (9 ms)
2025-12-10T09:20:12.7910691Z       ✓ should sort by timestamp descending by default (5 ms)
2025-12-10T09:20:12.7911412Z       ✓ should sort ascending when specified (4 ms)
2025-12-10T09:20:12.7912077Z       ✓ should combine multiple filters (9 ms)
2025-12-10T09:20:12.7912756Z       ✓ should indicate if more results available (5 ms)
2025-12-10T09:20:12.7913264Z     getRecentEvents()
2025-12-10T09:20:12.7913847Z       ✓ should get recent events with default limit (12 ms)
2025-12-10T09:20:12.7914518Z       ✓ should respect custom limit (12 ms)
2025-12-10T09:20:12.7915197Z       ✓ should return events in descending order (15 ms)
2025-12-10T09:20:12.7915684Z     getEventStats()
2025-12-10T09:20:12.7916153Z       ✓ should get total count (5 ms)
2025-12-10T09:20:12.7916707Z       ✓ should count by category (6 ms)
2025-12-10T09:20:12.7917255Z       ✓ should count by severity (5 ms)
2025-12-10T09:20:12.7917809Z       ✓ should count by event type (8 ms)
2025-12-10T09:20:12.7918257Z     deleteOldEvents()
2025-12-10T09:20:12.7918873Z       ✓ should delete events older than specified days (15 ms)
2025-12-10T09:20:12.7919474Z 
2025-12-10T09:20:13.6074358Z   console.error
2025-12-10T09:20:13.6078903Z     Error previewing backup: Error: Backup file not found
2025-12-10T09:20:13.6085383Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/backups.test.js:204:59)
2025-12-10T09:20:13.6087768Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:13.6089571Z         at new Promise (<anonymous>)
2025-12-10T09:20:13.6090883Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:13.6092830Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:13.6094312Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:13.6095670Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:13.6097543Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:13.6099782Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:13.6101825Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:13.6103612Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:13.6105897Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:13.6108413Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:13.6110700Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:13.6112600Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:13.6114425Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:13.6115364Z 
2025-12-10T09:20:13.6116022Z     [0m [90m 104 |[39m         res[33m.[39mjson(preview)[33m;[39m
2025-12-10T09:20:13.6116807Z      [90m 105 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:13.6118014Z     [31m[1m>[22m[39m[90m 106 |[39m         console[33m.[39merror([32m'Error previewing backup:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:13.6119004Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:13.6120666Z      [90m 107 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ error[33m:[39m [32m'Failed to preview backup: '[39m [33m+[39m error[33m.[39mmessage })[33m;[39m
2025-12-10T09:20:13.6121845Z      [90m 108 |[39m     }
2025-12-10T09:20:13.6122455Z      [90m 109 |[39m })[33m;[39m[0m
2025-12-10T09:20:13.6122767Z 
2025-12-10T09:20:13.6122984Z       at error (routes/backups.js:106:17)
2025-12-10T09:20:13.6123310Z 
2025-12-10T09:20:13.6340161Z   console.error
2025-12-10T09:20:13.6344196Z     Error deleting backup: Error: Backup not found
2025-12-10T09:20:13.6346807Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/backups.test.js:280:58)
2025-12-10T09:20:13.6350152Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:13.6352703Z         at new Promise (<anonymous>)
2025-12-10T09:20:13.6355282Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:13.6359147Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:13.6362143Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:13.6364865Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:13.6368053Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:13.6370600Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:13.6373009Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:13.6376210Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:13.6378499Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:13.6381393Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:13.6383538Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:13.6385398Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:13.6387239Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:13.6388243Z 
2025-12-10T09:20:13.6388831Z     [0m [90m 154 |[39m         res[33m.[39mjson(result)[33m;[39m
2025-12-10T09:20:13.6389818Z      [90m 155 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:13.6391032Z     [31m[1m>[22m[39m[90m 156 |[39m         console[33m.[39merror([32m'Error deleting backup:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:13.6392168Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:13.6393672Z      [90m 157 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ error[33m:[39m [32m'Failed to delete backup: '[39m [33m+[39m error[33m.[39mmessage })[33m;[39m
2025-12-10T09:20:13.6394849Z      [90m 158 |[39m     }
2025-12-10T09:20:13.6395406Z      [90m 159 |[39m })[33m;[39m[0m
2025-12-10T09:20:13.6395715Z 
2025-12-10T09:20:13.6395942Z       at error (routes/backups.js:156:17)
2025-12-10T09:20:13.6396270Z 
2025-12-10T09:20:13.6777402Z   console.error
2025-12-10T09:20:13.6778207Z     Error listing backup jobs: Error: Database error
2025-12-10T09:20:13.6783263Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/backups.test.js:452:23)
2025-12-10T09:20:13.6784794Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:397:39
2025-12-10T09:20:13.6786391Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:404:13)
2025-12-10T09:20:13.6788076Z         at Object.mockConstructor (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:148:19)
2025-12-10T09:20:13.6790396Z         at Object.getAllBackupJobs (eval at _createMockFunction (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:566:31), <anonymous>:3:62)
2025-12-10T09:20:13.6792908Z         at getAllBackupJobs (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/routes/backups.js:33:36)
2025-12-10T09:20:13.6794572Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:13.6796217Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:13.6797722Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/backups.test.js:24:61)
2025-12-10T09:20:13.6799567Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:13.6801249Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:13.6802902Z         at Route.dispatch (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/route.js:119:3)
2025-12-10T09:20:13.6804646Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:13.6806193Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:284:15
2025-12-10T09:20:13.6807796Z         at Function.process_params (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:13.6809578Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:13.6811031Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/backups.test.js:29:46)
2025-12-10T09:20:13.6812728Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:13.6814506Z         at trim_prefix (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:13.6816011Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:13.6817558Z         at Function.process_params (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:13.6819143Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:13.6820829Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/backups.test.js:18:9)
2025-12-10T09:20:13.6822538Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:13.6824311Z         at trim_prefix (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:13.6825777Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:13.6827266Z         at Function.process_params (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:13.6828956Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:13.6830879Z         at Function.handle (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:175:3)
2025-12-10T09:20:13.6832873Z         at router (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:47:12)
2025-12-10T09:20:13.6834917Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:13.6836799Z         at trim_prefix (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:13.6838444Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:13.6840579Z         at Function.process_params (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:13.6842400Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:13.6844130Z         at jsonParser (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/body-parser/lib/types/json.js:113:7)
2025-12-10T09:20:13.6846051Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:13.6847914Z         at trim_prefix (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:13.6849790Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:13.6851491Z         at Function.process_params (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:13.6853265Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:13.6855016Z         at expressInit (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/middleware/init.js:40:5)
2025-12-10T09:20:13.6856927Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:13.6858783Z         at trim_prefix (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:13.6877262Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:13.6879055Z         at Function.process_params (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:13.6881021Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:13.6882684Z         at query (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/middleware/query.js:45:5)
2025-12-10T09:20:13.6884533Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:13.6886341Z         at trim_prefix (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:13.6887955Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:13.6889840Z         at Function.process_params (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:13.6891580Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:13.6893499Z         at Function.handle (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:175:3)
2025-12-10T09:20:13.6895451Z         at Function.handle (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/application.js:181:10)
2025-12-10T09:20:13.6897130Z         at Server.app (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/express.js:39:9)
2025-12-10T09:20:13.6898154Z         at Server.emit (node:events:517:28)
2025-12-10T09:20:13.6898707Z         at parserOnIncoming (node:_http_server:1130:12)
2025-12-10T09:20:13.6899591Z         at HTTPParser.parserOnHeadersComplete (node:_http_common:119:17)
2025-12-10T09:20:13.6900047Z 
2025-12-10T09:20:13.6900931Z     [0m [90m 35 |[39m         res[33m.[39mjson({ jobs[33m,[39m total[33m:[39m jobs[33m.[39mlength })[33m;[39m
2025-12-10T09:20:13.6901784Z      [90m 36 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:13.6902911Z     [31m[1m>[22m[39m[90m 37 |[39m         console[33m.[39merror([32m'Error listing backup jobs:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:13.6903854Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:13.6905002Z      [90m 38 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ error[33m:[39m [32m'Failed to list backup jobs'[39m })[33m;[39m
2025-12-10T09:20:13.6905841Z      [90m 39 |[39m     }
2025-12-10T09:20:13.6906298Z      [90m 40 |[39m })[33m;[39m[0m
2025-12-10T09:20:13.6906583Z 
2025-12-10T09:20:13.6906792Z       at error (routes/backups.js:37:17)
2025-12-10T09:20:13.6907540Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:13.6908336Z       at next (node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:13.6908954Z       at next (__tests__/routes/backups.test.js:24:61)
2025-12-10T09:20:13.6909963Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:13.6910810Z       at next (node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:13.6911571Z       at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
2025-12-10T09:20:13.6912472Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:13.6913257Z       at node_modules/express/lib/router/index.js:284:15
2025-12-10T09:20:13.6914037Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:13.6914842Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:13.6915475Z       at next (__tests__/routes/backups.test.js:29:46)
2025-12-10T09:20:13.6916280Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:13.6917147Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:13.6917818Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:13.6918601Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:13.6919623Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:13.6920180Z       at next (__tests__/routes/backups.test.js:18:9)
2025-12-10T09:20:13.6920845Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:13.6921642Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:13.6922340Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:13.6923149Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:13.6923974Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:13.6924723Z       at Function.handle (node_modules/express/lib/router/index.js:175:3)
2025-12-10T09:20:13.6925477Z       at router (node_modules/express/lib/router/index.js:47:12)
2025-12-10T09:20:13.6926346Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:13.6931141Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:13.6931991Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:13.6932816Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:13.6933659Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:13.6934414Z       at jsonParser (node_modules/body-parser/lib/types/json.js:113:7)
2025-12-10T09:20:13.6935321Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:13.6936201Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:13.6936860Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:13.6937661Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:13.6938477Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:13.6939550Z       at expressInit (node_modules/express/lib/middleware/init.js:40:5)
2025-12-10T09:20:13.6940513Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:13.6941440Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:13.6942152Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:13.6942946Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:13.6944133Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:13.6944880Z       at query (node_modules/express/lib/middleware/query.js:45:5)
2025-12-10T09:20:13.6945762Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:13.6946675Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:13.6947384Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:13.6948219Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:13.6949077Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:13.6950043Z       at Function.handle (node_modules/express/lib/router/index.js:175:3)
2025-12-10T09:20:13.6950899Z       at Function.handle (node_modules/express/lib/application.js:181:10)
2025-12-10T09:20:13.6951689Z       at Server.app (node_modules/express/lib/express.js:39:9)
2025-12-10T09:20:13.6952108Z 
2025-12-10T09:20:13.6952281Z   console.error
2025-12-10T09:20:13.6952712Z     Error creating backup: Error: Disk full
2025-12-10T09:20:13.6953917Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/backups.test.js:463:58)
2025-12-10T09:20:13.6955756Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:13.6956921Z         at new Promise (<anonymous>)
2025-12-10T09:20:13.6958123Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:13.6960206Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:13.6961555Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:13.6962900Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:13.6964711Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:13.6966643Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:13.6969005Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:13.6970986Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:13.6973165Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:13.6975611Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:13.6977669Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:13.6979620Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:13.6981412Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:13.6982339Z 
2025-12-10T09:20:13.6982842Z     [0m [90m 89 |[39m             res[33m.[39mjson(result)[33m;[39m
2025-12-10T09:20:13.6983556Z      [90m 90 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:13.6984673Z     [31m[1m>[22m[39m[90m 91 |[39m             console[33m.[39merror([32m'Error creating backup:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:13.6985646Z      [90m    |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:13.6987097Z      [90m 92 |[39m             res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ error[33m:[39m [32m'Failed to create backup: '[39m [33m+[39m error[33m.[39mmessage })[33m;[39m
2025-12-10T09:20:13.6988156Z      [90m 93 |[39m         }
2025-12-10T09:20:13.6988650Z      [90m 94 |[39m     }[0m
2025-12-10T09:20:13.6988901Z 
2025-12-10T09:20:13.6989112Z       at error (routes/backups.js:91:21)
2025-12-10T09:20:13.6989715Z 
2025-12-10T09:20:13.7331302Z PASS __tests__/routes/backups.test.js
2025-12-10T09:20:13.7333695Z   Backup Routes
2025-12-10T09:20:13.7334083Z     GET /api/backups/jobs
2025-12-10T09:20:13.7334871Z       ✓ should return list of backup jobs (24 ms)
2025-12-10T09:20:13.7335522Z       ✓ should support pagination (5 ms)
2025-12-10T09:20:13.7336000Z     GET /api/backups/jobs/:id
2025-12-10T09:20:13.7336615Z       ✓ should return specific backup job (3 ms)
2025-12-10T09:20:13.7337292Z       ✓ should return 404 if backup not found (2 ms)
2025-12-10T09:20:13.7337793Z     POST /api/backups/create
2025-12-10T09:20:13.7338383Z       ✓ should validate required fields (14 ms)
2025-12-10T09:20:13.7339075Z       ✓ should create backup with valid data (4 ms)
2025-12-10T09:20:13.7340030Z       ✓ should use defaults for optional fields (3 ms)
2025-12-10T09:20:13.7340715Z       ✓ should validate backup type (3 ms)
2025-12-10T09:20:13.7341233Z     GET /api/backups/preview/:id
2025-12-10T09:20:13.7341797Z       ✓ should return backup preview (3 ms)
2025-12-10T09:20:13.7342403Z       ✓ should handle preview errors (48 ms)
2025-12-10T09:20:13.7342870Z     POST /api/backups/restore
2025-12-10T09:20:13.7343452Z       ✓ should validate required fields (7 ms)
2025-12-10T09:20:13.7344095Z       ✓ should restore backup with valid data (5 ms)
2025-12-10T09:20:13.7345066Z       ✓ should default to creating pre-backup (3 ms)
2025-12-10T09:20:13.7345557Z     DELETE /api/backups/:id
2025-12-10T09:20:13.7346109Z       ✓ should delete backup successfully (3 ms)
2025-12-10T09:20:13.7346716Z       ✓ should handle deletion errors (7 ms)
2025-12-10T09:20:13.7347235Z     GET /api/backups/download/:id
2025-12-10T09:20:13.7347875Z       ✓ should return 404 if backup not found (3 ms)
2025-12-10T09:20:13.7348536Z       ✓ should return 404 if file path missing (2 ms)
2025-12-10T09:20:13.7349733Z     GET /api/backups/restore/jobs
2025-12-10T09:20:13.7350643Z       ✓ should return list of restore jobs (2 ms)
2025-12-10T09:20:13.7351218Z     GET /api/backups/restore/jobs/:id
2025-12-10T09:20:13.7351882Z       ✓ should return specific restore job (2 ms)
2025-12-10T09:20:13.7352616Z       ✓ should return 404 if restore job not found (2 ms)
2025-12-10T09:20:13.7353195Z     POST /api/backups/migrate/export
2025-12-10T09:20:13.7353807Z       ✓ should create migration export (2 ms)
2025-12-10T09:20:13.7354438Z       ✓ should work without name parameter (2 ms)
2025-12-10T09:20:13.7354979Z     POST /api/backups/migrate/import
2025-12-10T09:20:13.7355584Z       ✓ should validate required fields (2 ms)
2025-12-10T09:20:13.7356248Z       ✓ should import migration with valid data (2 ms)
2025-12-10T09:20:13.7356764Z     GET /api/backups/migrate/jobs
2025-12-10T09:20:13.7357379Z       ✓ should return list of migration jobs (2 ms)
2025-12-10T09:20:13.7357832Z     Error handling
2025-12-10T09:20:13.7358409Z       ✓ should handle service errors gracefully (27 ms)
2025-12-10T09:20:13.7359045Z       ✓ should handle async service errors (10 ms)
2025-12-10T09:20:13.7359640Z 
2025-12-10T09:20:13.8860058Z   console.log
2025-12-10T09:20:13.8861618Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:13.8862843Z 
2025-12-10T09:20:13.8863620Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:13.8864638Z 
2025-12-10T09:20:13.8949031Z   console.log
2025-12-10T09:20:13.8949943Z     Database connection closed
2025-12-10T09:20:13.8950460Z 
2025-12-10T09:20:13.8952055Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:13.8952515Z 
2025-12-10T09:20:13.9026677Z   console.log
2025-12-10T09:20:13.9027635Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:13.9028463Z 
2025-12-10T09:20:13.9028880Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:13.9029548Z 
2025-12-10T09:20:13.9311857Z   console.log
2025-12-10T09:20:13.9312767Z     Database connection closed
2025-12-10T09:20:13.9313467Z 
2025-12-10T09:20:13.9314945Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:13.9315446Z 
2025-12-10T09:20:13.9389805Z   console.log
2025-12-10T09:20:13.9390836Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:13.9391592Z 
2025-12-10T09:20:13.9391988Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:13.9392438Z 
2025-12-10T09:20:13.9432744Z   console.log
2025-12-10T09:20:13.9433518Z     Database connection closed
2025-12-10T09:20:13.9433769Z 
2025-12-10T09:20:13.9434101Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:13.9434536Z 
2025-12-10T09:20:13.9514760Z   console.log
2025-12-10T09:20:13.9515772Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:13.9516543Z 
2025-12-10T09:20:13.9516974Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:13.9517448Z 
2025-12-10T09:20:13.9555600Z   console.log
2025-12-10T09:20:13.9556029Z     Database connection closed
2025-12-10T09:20:13.9556316Z 
2025-12-10T09:20:13.9556700Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:13.9557143Z 
2025-12-10T09:20:13.9636314Z   console.log
2025-12-10T09:20:13.9645673Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:13.9646469Z 
2025-12-10T09:20:13.9646883Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:13.9647347Z 
2025-12-10T09:20:13.9676208Z   console.log
2025-12-10T09:20:13.9678015Z     Database connection closed
2025-12-10T09:20:13.9678303Z 
2025-12-10T09:20:13.9678897Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:13.9679571Z 
2025-12-10T09:20:13.9726949Z   console.log
2025-12-10T09:20:13.9728176Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:13.9729504Z 
2025-12-10T09:20:13.9730632Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:13.9731165Z 
2025-12-10T09:20:13.9761329Z   console.log
2025-12-10T09:20:13.9762018Z     Database connection closed
2025-12-10T09:20:13.9762333Z 
2025-12-10T09:20:13.9762743Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:13.9763218Z 
2025-12-10T09:20:13.9817739Z   console.log
2025-12-10T09:20:13.9820276Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:13.9821671Z 
2025-12-10T09:20:13.9822381Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:13.9822991Z 
2025-12-10T09:20:13.9861555Z   console.log
2025-12-10T09:20:13.9862313Z     Database connection closed
2025-12-10T09:20:13.9862794Z 
2025-12-10T09:20:13.9863717Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:13.9866542Z 
2025-12-10T09:20:13.9945410Z   console.log
2025-12-10T09:20:13.9946669Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:13.9947895Z 
2025-12-10T09:20:13.9948526Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:13.9950363Z 
2025-12-10T09:20:13.9982077Z   console.log
2025-12-10T09:20:13.9982737Z     Database connection closed
2025-12-10T09:20:13.9983040Z 
2025-12-10T09:20:13.9983457Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:13.9983980Z 
2025-12-10T09:20:14.0036604Z   console.log
2025-12-10T09:20:14.0037844Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.0038687Z 
2025-12-10T09:20:14.0039127Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.0039835Z 
2025-12-10T09:20:14.0075335Z   console.log
2025-12-10T09:20:14.0076005Z     Database connection closed
2025-12-10T09:20:14.0076334Z 
2025-12-10T09:20:14.0076739Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.0077212Z 
2025-12-10T09:20:14.0131966Z   console.log
2025-12-10T09:20:14.0133375Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.0134216Z 
2025-12-10T09:20:14.0134647Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.0135168Z 
2025-12-10T09:20:14.0163473Z   console.log
2025-12-10T09:20:14.0164124Z     Database connection closed
2025-12-10T09:20:14.0164753Z 
2025-12-10T09:20:14.0165091Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.0165623Z 
2025-12-10T09:20:14.0232275Z   console.log
2025-12-10T09:20:14.0233258Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.0234014Z 
2025-12-10T09:20:14.0234412Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.0234865Z 
2025-12-10T09:20:14.0270853Z   console.log
2025-12-10T09:20:14.0271315Z     Database connection closed
2025-12-10T09:20:14.0271611Z 
2025-12-10T09:20:14.0272015Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.0272479Z 
2025-12-10T09:20:14.0342630Z   console.log
2025-12-10T09:20:14.0343754Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.0344589Z 
2025-12-10T09:20:14.0344997Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.0345309Z 
2025-12-10T09:20:14.0377977Z   console.log
2025-12-10T09:20:14.0378483Z     Database connection closed
2025-12-10T09:20:14.0378883Z 
2025-12-10T09:20:14.0379478Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.0379980Z 
2025-12-10T09:20:14.0447094Z   console.log
2025-12-10T09:20:14.0448417Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.0449365Z 
2025-12-10T09:20:14.0449687Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.0450071Z 
2025-12-10T09:20:14.0480665Z   console.log
2025-12-10T09:20:14.0484008Z     Database connection closed
2025-12-10T09:20:14.0484365Z 
2025-12-10T09:20:14.0484775Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.0485310Z 
2025-12-10T09:20:14.0538620Z   console.log
2025-12-10T09:20:14.0540050Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.0540851Z 
2025-12-10T09:20:14.0541266Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.0541741Z 
2025-12-10T09:20:14.0576840Z   console.log
2025-12-10T09:20:14.0577295Z     Database connection closed
2025-12-10T09:20:14.0577620Z 
2025-12-10T09:20:14.0578029Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.0578644Z 
2025-12-10T09:20:14.0648758Z   console.log
2025-12-10T09:20:14.0649984Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.0650858Z 
2025-12-10T09:20:14.0651277Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.0651743Z 
2025-12-10T09:20:14.0682895Z   console.log
2025-12-10T09:20:14.0683478Z     Database connection closed
2025-12-10T09:20:14.0683760Z 
2025-12-10T09:20:14.0684148Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.0684587Z 
2025-12-10T09:20:14.0739736Z   console.log
2025-12-10T09:20:14.0740774Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.0741615Z 
2025-12-10T09:20:14.0741935Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.0742289Z 
2025-12-10T09:20:14.0774287Z   console.log
2025-12-10T09:20:14.0774725Z     Database connection closed
2025-12-10T09:20:14.0775041Z 
2025-12-10T09:20:14.0775442Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.0775934Z 
2025-12-10T09:20:14.0832189Z   console.log
2025-12-10T09:20:14.0833408Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.0834205Z 
2025-12-10T09:20:14.0834503Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.0834844Z 
2025-12-10T09:20:14.0857487Z   console.error
2025-12-10T09:20:14.0858381Z     [Webhooks] Error updating webhook: Error: Webhook not found
2025-12-10T09:20:14.0860151Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/webhooks.test.js:166:60)
2025-12-10T09:20:14.0862451Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:14.0863908Z         at new Promise (<anonymous>)
2025-12-10T09:20:14.0866550Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:14.0868670Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:14.0871799Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:14.0873396Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:14.0875659Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:14.0880635Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:14.0882621Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:14.0884445Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:14.0886689Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:14.0889147Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:14.0891483Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:14.0893326Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:14.0895191Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:14.0896164Z 
2025-12-10T09:20:14.0896724Z     [0m [90m 177 |[39m             })[33m;[39m
2025-12-10T09:20:14.0897484Z      [90m 178 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:14.0898851Z     [31m[1m>[22m[39m[90m 179 |[39m             console[33m.[39merror([32m'[Webhooks] Error updating webhook:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:14.0900181Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:14.0901320Z      [90m 180 |[39m             res[33m.[39mstatus([35m400[39m)[33m.[39mjson({ error[33m:[39m error[33m.[39mmessage })[33m;[39m
2025-12-10T09:20:14.0902203Z      [90m 181 |[39m         }
2025-12-10T09:20:14.0902713Z      [90m 182 |[39m     }[0m
2025-12-10T09:20:14.0902976Z 
2025-12-10T09:20:14.0903213Z       at error (routes/webhooks.js:179:21)
2025-12-10T09:20:14.0903533Z 
2025-12-10T09:20:14.0903683Z   console.log
2025-12-10T09:20:14.0904064Z     Database connection closed
2025-12-10T09:20:14.0904346Z 
2025-12-10T09:20:14.0904735Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.0905232Z 
2025-12-10T09:20:14.0915774Z   console.log
2025-12-10T09:20:14.0917128Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.0918224Z 
2025-12-10T09:20:14.0918911Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.0920171Z 
2025-12-10T09:20:14.0953377Z   console.log
2025-12-10T09:20:14.0953968Z     Database connection closed
2025-12-10T09:20:14.0954245Z 
2025-12-10T09:20:14.0954618Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.0955063Z 
2025-12-10T09:20:14.1011580Z   console.log
2025-12-10T09:20:14.1012558Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.1013296Z 
2025-12-10T09:20:14.1013681Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.1014151Z 
2025-12-10T09:20:14.1043690Z   console.log
2025-12-10T09:20:14.1044130Z     Database connection closed
2025-12-10T09:20:14.1044604Z 
2025-12-10T09:20:14.1044980Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.1050108Z 
2025-12-10T09:20:14.1050296Z   console.error
2025-12-10T09:20:14.1051270Z     [Webhooks] Error testing webhook: Error: Webhook delivery failed
2025-12-10T09:20:14.1052709Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/webhooks.test.js:210:58)
2025-12-10T09:20:14.1054907Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:14.1055825Z         at new Promise (<anonymous>)
2025-12-10T09:20:14.1056561Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:14.1057884Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:14.1058849Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:14.1060409Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:14.1062149Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:14.1064025Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:14.1065864Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:14.1067485Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:14.1069738Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:14.1072013Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:14.1074008Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:14.1075700Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:14.1077369Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:14.1078257Z 
2025-12-10T09:20:14.1078653Z     [0m [90m 223 |[39m             })[33m;[39m
2025-12-10T09:20:14.1079422Z      [90m 224 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:14.1080568Z     [31m[1m>[22m[39m[90m 225 |[39m             console[33m.[39merror([32m'[Webhooks] Error testing webhook:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:14.1081544Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:14.1082613Z      [90m 226 |[39m             res[33m.[39mstatus([35m400[39m)[33m.[39mjson({ error[33m:[39m error[33m.[39mmessage })[33m;[39m
2025-12-10T09:20:14.1083446Z      [90m 227 |[39m         }
2025-12-10T09:20:14.1083902Z      [90m 228 |[39m     }[0m
2025-12-10T09:20:14.1084144Z 
2025-12-10T09:20:14.1084350Z       at error (routes/webhooks.js:225:21)
2025-12-10T09:20:14.1084652Z 
2025-12-10T09:20:14.1116917Z   console.log
2025-12-10T09:20:14.1118233Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.1119786Z 
2025-12-10T09:20:14.1120608Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.1121975Z 
2025-12-10T09:20:14.1172053Z   console.log
2025-12-10T09:20:14.1172717Z     Database connection closed
2025-12-10T09:20:14.1172989Z 
2025-12-10T09:20:14.1173352Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.1173770Z 
2025-12-10T09:20:14.1241307Z   console.log
2025-12-10T09:20:14.1242564Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.1243544Z 
2025-12-10T09:20:14.1246977Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.1248785Z 
2025-12-10T09:20:14.1271868Z   console.log
2025-12-10T09:20:14.1272407Z     Database connection closed
2025-12-10T09:20:14.1272682Z 
2025-12-10T09:20:14.1273043Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.1273469Z 
2025-12-10T09:20:14.1383780Z   console.log
2025-12-10T09:20:14.1385202Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.1386240Z 
2025-12-10T09:20:14.1386861Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.1387448Z 
2025-12-10T09:20:14.1406706Z   console.log
2025-12-10T09:20:14.1407449Z     Database connection closed
2025-12-10T09:20:14.1411243Z 
2025-12-10T09:20:14.1411703Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.1412164Z 
2025-12-10T09:20:14.1412805Z   console.error
2025-12-10T09:20:14.1414574Z     [InboundWebhooks] Error processing webhook: Error: Webhook not found
2025-12-10T09:20:14.1416025Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/webhooks.test.js:388:21)
2025-12-10T09:20:14.1417785Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:14.1418652Z         at new Promise (<anonymous>)
2025-12-10T09:20:14.1419986Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:14.1421877Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:14.1422891Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:14.1423722Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:14.1424813Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:14.1426672Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:14.1428559Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:14.1430821Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:14.1432680Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:14.1434859Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:14.1437417Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:14.1440010Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:14.1441837Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:14.1443684Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:14.1444699Z 
2025-12-10T09:20:14.1445334Z     [0m [90m 570 |[39m             res[33m.[39mjson(result)[33m;[39m
2025-12-10T09:20:14.1446130Z      [90m 571 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:14.1458680Z     [31m[1m>[22m[39m[90m 572 |[39m             console[33m.[39merror([32m'[InboundWebhooks] Error processing webhook:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:14.1460156Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:14.1460848Z      [90m 573 |[39m             res[33m.[39mstatus([35m400[39m)[33m.[39mjson({ error[33m:[39m error[33m.[39mmessage })[33m;[39m
2025-12-10T09:20:14.1461337Z      [90m 574 |[39m         }
2025-12-10T09:20:14.1461618Z      [90m 575 |[39m     }[0m
2025-12-10T09:20:14.1461762Z 
2025-12-10T09:20:14.1461897Z       at error (routes/webhooks.js:572:21)
2025-12-10T09:20:14.1462078Z 
2025-12-10T09:20:14.1497331Z   console.log
2025-12-10T09:20:14.1498297Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.1499039Z 
2025-12-10T09:20:14.1499584Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.1500052Z 
2025-12-10T09:20:14.1524119Z   console.log
2025-12-10T09:20:14.1524825Z     Database connection closed
2025-12-10T09:20:14.1525387Z 
2025-12-10T09:20:14.1526062Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.1527023Z 
2025-12-10T09:20:14.1581045Z   console.log
2025-12-10T09:20:14.1582301Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.1589373Z 
2025-12-10T09:20:14.1590460Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.1594466Z 
2025-12-10T09:20:14.1617471Z   console.log
2025-12-10T09:20:14.1618227Z     Database connection closed
2025-12-10T09:20:14.1621544Z 
2025-12-10T09:20:14.1621993Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.1622478Z 
2025-12-10T09:20:14.1689597Z   console.log
2025-12-10T09:20:14.1690798Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.1691530Z 
2025-12-10T09:20:14.1691902Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.1692374Z 
2025-12-10T09:20:14.1728300Z   console.log
2025-12-10T09:20:14.1729007Z     Database connection closed
2025-12-10T09:20:14.1729877Z 
2025-12-10T09:20:14.1730478Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.1731150Z 
2025-12-10T09:20:14.1786458Z   console.log
2025-12-10T09:20:14.1787449Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.1788148Z 
2025-12-10T09:20:14.1788403Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.1788699Z 
2025-12-10T09:20:14.1840003Z PASS __tests__/routes/webhooks.test.js
2025-12-10T09:20:14.1840507Z   Webhook Routes
2025-12-10T09:20:14.1840879Z     GET /api/webhooks
2025-12-10T09:20:14.1841614Z       ✓ should return list of webhooks (26 ms)
2025-12-10T09:20:14.1842105Z     POST /api/webhooks
2025-12-10T09:20:14.1842661Z       ✓ should validate required fields (18 ms)
2025-12-10T09:20:14.1843912Z       ✓ should create webhook with valid data (8 ms)
2025-12-10T09:20:14.1844593Z       ✓ should validate URL format (5 ms)
2025-12-10T09:20:14.1845259Z       ✓ should validate event types are array (4 ms)
2025-12-10T09:20:14.1845748Z     PUT /api/webhooks/:id
2025-12-10T09:20:14.1846242Z       ✓ should update webhook (4 ms)
2025-12-10T09:20:14.1846823Z       ✓ should handle webhook not found (45 ms)
2025-12-10T09:20:14.1847278Z     DELETE /api/webhooks/:id
2025-12-10T09:20:14.1847782Z       ✓ should delete webhook (3 ms)
2025-12-10T09:20:14.1848240Z     POST /api/webhooks/:id/test
2025-12-10T09:20:14.1848743Z       ✓ should test webhook (3 ms)
2025-12-10T09:20:14.1849512Z       ✓ should handle test failure (16 ms)
2025-12-10T09:20:14.1850023Z     POST /api/webhooks/:id/trigger
2025-12-10T09:20:14.1850661Z       ✓ should validate event_type is required (3 ms)
2025-12-10T09:20:14.1851353Z       ✓ should trigger webhook with custom event (2 ms)
2025-12-10T09:20:14.1851905Z     GET /api/webhooks/:id/logs
2025-12-10T09:20:14.1852442Z       ✓ should return webhook logs (3 ms)
2025-12-10T09:20:14.1853032Z       ✓ should respect limit parameter (4 ms)
2025-12-10T09:20:14.1853472Z     Inbound Webhooks
2025-12-10T09:20:14.1853849Z       GET /api/webhooks/inbound/all
2025-12-10T09:20:14.1854440Z         ✓ should return list of inbound webhooks (3 ms)
2025-12-10T09:20:14.1854956Z       POST /api/webhooks/inbound
2025-12-10T09:20:14.1855519Z         ✓ should create inbound webhook (4 ms)
2025-12-10T09:20:14.1856126Z         ✓ should validate required fields (3 ms)
2025-12-10T09:20:14.1856697Z       POST /api/webhooks/inbound/:id/regenerate-secret
2025-12-10T09:20:14.1857365Z         ✓ should regenerate secret (3 ms)
2025-12-10T09:20:14.1857843Z       POST /api/webhooks/receive/:id
2025-12-10T09:20:14.1858396Z         ✓ should process webhook (2 ms)
2025-12-10T09:20:14.1858974Z         ✓ should handle invalid webhook (6 ms)
2025-12-10T09:20:14.1859617Z     GET /api/webhooks/templates/all
2025-12-10T09:20:14.1860237Z       ✓ should return integration templates (2 ms)
2025-12-10T09:20:14.1860594Z 
2025-12-10T09:20:14.1895940Z   console.log
2025-12-10T09:20:14.1896711Z     Database connection closed
2025-12-10T09:20:14.1897250Z 
2025-12-10T09:20:14.1897790Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.1898581Z 
2025-12-10T09:20:14.1898867Z   console.log
2025-12-10T09:20:14.1900141Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.1901122Z 
2025-12-10T09:20:14.1901662Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.1902332Z 
2025-12-10T09:20:14.1933906Z   console.log
2025-12-10T09:20:14.1934595Z     Database connection closed
2025-12-10T09:20:14.1935118Z 
2025-12-10T09:20:14.1936721Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.1937191Z 
2025-12-10T09:20:14.2001470Z   console.log
2025-12-10T09:20:14.2002489Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:14.2003293Z 
2025-12-10T09:20:14.2003738Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:14.2004229Z 
2025-12-10T09:20:14.2032433Z   console.log
2025-12-10T09:20:14.2035195Z     Database connection closed
2025-12-10T09:20:14.2035518Z 
2025-12-10T09:20:14.2035936Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:14.2036429Z 
2025-12-10T09:20:14.2270943Z PASS __tests__/services/apiKeyService.test.js
2025-12-10T09:20:14.2272174Z   ApiKeyService
2025-12-10T09:20:14.2272965Z     createApiKey
2025-12-10T09:20:14.2274917Z       ✓ should create an API key with valid data (36 ms)
2025-12-10T09:20:14.2275694Z       ✓ should throw error if name is missing (35 ms)
2025-12-10T09:20:14.2276440Z       ✓ should throw error if scopes are invalid (12 ms)
2025-12-10T09:20:14.2277685Z       ✓ should throw error if created_by is missing (12 ms)
2025-12-10T09:20:14.2278677Z       ✓ should set custom rate limit (12 ms)
2025-12-10T09:20:14.2279437Z     validateApiKey
2025-12-10T09:20:14.2280023Z       ✓ should validate a valid API key (9 ms)
2025-12-10T09:20:14.2280704Z       ✓ should return null for invalid API key (9 ms)
2025-12-10T09:20:14.2281445Z       ✓ should return null for disabled API key (13 ms)
2025-12-10T09:20:14.2282139Z       ✓ should return null for expired API key (9 ms)
2025-12-10T09:20:14.2282851Z       ✓ should return null for non-mcs_ prefixed key (9 ms)
2025-12-10T09:20:14.2283325Z     getApiKey
2025-12-10T09:20:14.2283765Z       ✓ should get API key by ID (11 ms)
2025-12-10T09:20:14.2284436Z       ✓ should return null for non-existent key (10 ms)
2025-12-10T09:20:14.2285105Z       ✓ should not return key_hash (11 ms)
2025-12-10T09:20:14.2285556Z     listApiKeys
2025-12-10T09:20:14.2286028Z       ✓ should list all API keys (9 ms)
2025-12-10T09:20:14.2286696Z       ✓ should not return key_hash in list (11 ms)
2025-12-10T09:20:14.2287186Z     updateApiKey
2025-12-10T09:20:14.2287689Z       ✓ should update API key name (9 ms)
2025-12-10T09:20:14.2288320Z       ✓ should update API key scopes (9 ms)
2025-12-10T09:20:14.2288986Z       ✓ should throw error for invalid scopes (9 ms)
2025-12-10T09:20:14.2289886Z       ✓ should update enabled status (9 ms)
2025-12-10T09:20:14.2290345Z     revokeApiKey
2025-12-10T09:20:14.2290873Z       ✓ should revoke (delete) an API key (13 ms)
2025-12-10T09:20:14.2291555Z       ✓ should return false for non-existent key (10 ms)
2025-12-10T09:20:14.2292044Z     hasScope
2025-12-10T09:20:14.2292573Z       ✓ should return true for exact scope match (7 ms)
2025-12-10T09:20:14.2293251Z       ✓ should return false for missing scope (12 ms)
2025-12-10T09:20:14.2293877Z       ✓ should support wildcard scopes (9 ms)
2025-12-10T09:20:14.2294333Z     getAvailableScopes
2025-12-10T09:20:14.2294912Z       ✓ should return list of available scopes (11 ms)
2025-12-10T09:20:14.2295452Z     usage tracking
2025-12-10T09:20:14.2295962Z       ✓ should update usage stats (9 ms)
2025-12-10T09:20:14.2296545Z       ✓ should log API key usage (12 ms)
2025-12-10T09:20:14.2297127Z       ✓ should get usage statistics (10 ms)
2025-12-10T09:20:14.2297455Z 
2025-12-10T09:20:14.5518572Z   console.error
2025-12-10T09:20:14.5523049Z     GitHub API request failed: GitHub API error
2025-12-10T09:20:14.5526786Z 
2025-12-10T09:20:14.5531240Z     [0m [90m 48 |[39m         [36mreturn[39m response[33m.[39mdata[33m;[39m
2025-12-10T09:20:14.5533307Z      [90m 49 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:14.5535732Z     [31m[1m>[22m[39m[90m 50 |[39m         console[33m.[39merror([32m'GitHub API request failed:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:14.5537922Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:14.5539916Z      [90m 51 |[39m         [36mthrow[39m error[33m;[39m
2025-12-10T09:20:14.5541666Z      [90m 52 |[39m     }
2025-12-10T09:20:14.5543314Z      [90m 53 |[39m }[0m
2025-12-10T09:20:14.5543928Z 
2025-12-10T09:20:14.5545211Z       at error (routes/cicd.js:50:17)
2025-12-10T09:20:14.5549497Z       at routes/cicd.js:61:22
2025-12-10T09:20:14.5553672Z 
2025-12-10T09:20:14.5691636Z   console.error
2025-12-10T09:20:14.5694511Z     Failed to fetch CI/CD status: Error: GitHub API error
2025-12-10T09:20:14.5695696Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/cicd.test.js:108:37)
2025-12-10T09:20:14.5697477Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:14.5698620Z         at new Promise (<anonymous>)
2025-12-10T09:20:14.5700032Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:14.5702529Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:14.5703894Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:14.5705147Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:14.5706835Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:14.5708645Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:14.5710796Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:14.5712560Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:14.5714665Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:14.5717033Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:14.5719061Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:14.5721085Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:14.5722825Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:14.5723788Z 
2025-12-10T09:20:14.5724411Z     [0m [90m 90 |[39m         res[33m.[39mjson(overview)[33m;[39m
2025-12-10T09:20:14.5725164Z      [90m 91 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:14.5726341Z     [31m[1m>[22m[39m[90m 92 |[39m         console[33m.[39merror([32m'Failed to fetch CI/CD status:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:14.5727340Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:14.5728120Z      [90m 93 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ 
2025-12-10T09:20:14.5729140Z      [90m 94 |[39m             error[33m:[39m [32m'Failed to fetch CI/CD status'[39m[33m,[39m
2025-12-10T09:20:14.5730318Z      [90m 95 |[39m             message[33m:[39m error[33m.[39mmessage [0m
2025-12-10T09:20:14.5730737Z 
2025-12-10T09:20:14.5730955Z       at error (routes/cicd.js:92:17)
2025-12-10T09:20:14.5731262Z 
2025-12-10T09:20:14.5928759Z PASS __tests__/routes/cicd.test.js
2025-12-10T09:20:14.5929608Z   CI/CD Routes
2025-12-10T09:20:14.5929953Z     GET /api/cicd/status
2025-12-10T09:20:14.5930700Z       ✓ should return CI/CD status overview (35 ms)
2025-12-10T09:20:14.5931390Z       ✓ should handle errors gracefully (51 ms)
2025-12-10T09:20:14.5931880Z     GET /api/cicd/runs
2025-12-10T09:20:14.5932444Z       ✓ should return workflow runs list (3 ms)
2025-12-10T09:20:14.5933143Z       ✓ should support filtering by workflow (2 ms)
2025-12-10T09:20:14.5933831Z       ✓ should support filtering by status (2 ms)
2025-12-10T09:20:14.5934321Z     GET /api/cicd/runs/:runId
2025-12-10T09:20:14.5934986Z       ✓ should return detailed workflow run information (3 ms)
2025-12-10T09:20:14.5935613Z     GET /api/cicd/runs/:runId/artifacts
2025-12-10T09:20:14.5936327Z       ✓ should return artifacts for a workflow run (2 ms)
2025-12-10T09:20:14.5936850Z     GET /api/cicd/workflows
2025-12-10T09:20:14.5937398Z       ✓ should return list of workflows (3 ms)
2025-12-10T09:20:14.5938247Z     GET /api/cicd/deployments
2025-12-10T09:20:14.5938989Z       ✓ should return deployment history (3 ms)
2025-12-10T09:20:14.5939570Z 
2025-12-10T09:20:15.2441230Z   console.error
2025-12-10T09:20:15.2444551Z     Error fetching plugins: Error: Test error
2025-12-10T09:20:15.2445736Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/plugins.test.js:45:59)
2025-12-10T09:20:15.2447471Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:15.2449642Z         at new Promise (<anonymous>)
2025-12-10T09:20:15.2450462Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:15.2452073Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:15.2453234Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:15.2454405Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:15.2456016Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:15.2457792Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:15.2459899Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:15.2461604Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:15.2463861Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:15.2466377Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:15.2468467Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:15.2470546Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:15.2472356Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:15.2473334Z 
2025-12-10T09:20:15.2474164Z     [0m [90m 68 |[39m         res[33m.[39mjson({ plugins[33m:[39m pluginsWithBackup })[33m;[39m
2025-12-10T09:20:15.2475089Z      [90m 69 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:15.2476259Z     [31m[1m>[22m[39m[90m 70 |[39m         console[33m.[39merror([32m'Error fetching plugins:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:15.2477270Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:15.2478275Z      [90m 71 |[39m         [90m// Always return plugins array, even if empty, with error message[39m
2025-12-10T09:20:15.2479391Z      [90m 72 |[39m         res[33m.[39mjson({ 
2025-12-10T09:20:15.2480168Z      [90m 73 |[39m             plugins[33m:[39m [][33m,[39m [0m
2025-12-10T09:20:15.2480536Z 
2025-12-10T09:20:15.2480760Z       at error (routes/plugins.js:70:17)
2025-12-10T09:20:15.2481088Z 
2025-12-10T09:20:15.2554781Z   console.error
2025-12-10T09:20:15.2559821Z     Error checking plugin manager health: Error: Health check failed
2025-12-10T09:20:15.2561195Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/plugins.test.js:113:57)
2025-12-10T09:20:15.2563852Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:15.2565070Z         at new Promise (<anonymous>)
2025-12-10T09:20:15.2566347Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:15.2568243Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:15.2570957Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:15.2572344Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:15.2574220Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:15.2576223Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:15.2578230Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:15.2580228Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:15.2582466Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:15.2584965Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:15.2587121Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:15.2588939Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:15.2590991Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:15.2591952Z 
2025-12-10T09:20:15.2592349Z     [0m [90m 363 |[39m         }
2025-12-10T09:20:15.2592997Z      [90m 364 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:15.2594308Z     [31m[1m>[22m[39m[90m 365 |[39m         console[33m.[39merror([32m'Error checking plugin manager health:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:15.2595394Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:15.2596257Z      [90m 366 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({
2025-12-10T09:20:15.2597190Z      [90m 367 |[39m             status[33m:[39m [32m'error'[39m[33m,[39m
2025-12-10T09:20:15.2598084Z      [90m 368 |[39m             error[33m:[39m error[33m.[39mmessage[0m
2025-12-10T09:20:15.2598498Z 
2025-12-10T09:20:15.2598720Z       at error (routes/plugins.js:365:17)
2025-12-10T09:20:15.2599042Z 
2025-12-10T09:20:15.2618556Z   console.log
2025-12-10T09:20:15.2619632Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:15.2620493Z       url: undefined,
2025-12-10T09:20:15.2620908Z       customName: undefined,
2025-12-10T09:20:15.2621365Z       selectedOption: undefined,
2025-12-10T09:20:15.2621784Z       sessionID: undefined,
2025-12-10T09:20:15.2622163Z       authenticated: false,
2025-12-10T09:20:15.2622539Z       username: 'NOT_SET',
2025-12-10T09:20:15.2622890Z       csrf: {
2025-12-10T09:20:15.2623248Z         headerValue: 'MISSING',
2025-12-10T09:20:15.2623991Z         cookieValue: 'MISSING',
2025-12-10T09:20:15.2624429Z         headerPresent: false,
2025-12-10T09:20:15.2625107Z         cookiePresent: false
2025-12-10T09:20:15.2625544Z       },
2025-12-10T09:20:15.2625937Z       timestamp: '2025-12-10T09:20:15.260Z'
2025-12-10T09:20:15.2626385Z     }
2025-12-10T09:20:15.2626561Z 
2025-12-10T09:20:15.2626786Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:15.2627098Z 
2025-12-10T09:20:15.2628638Z   console.log
2025-12-10T09:20:15.2629431Z     [PLUGIN_INSTALL_API] Install request failed: URL is required
2025-12-10T09:20:15.2629881Z 
2025-12-10T09:20:15.2630111Z       at log (routes/plugins.js:143:21)
2025-12-10T09:20:15.2630439Z 
2025-12-10T09:20:15.2658414Z   console.log
2025-12-10T09:20:15.2659515Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:15.2660163Z       url: 'http://example.com/test.jar',
2025-12-10T09:20:15.2660653Z       customName: undefined,
2025-12-10T09:20:15.2661106Z       selectedOption: undefined,
2025-12-10T09:20:15.2661538Z       sessionID: undefined,
2025-12-10T09:20:15.2661940Z       authenticated: false,
2025-12-10T09:20:15.2662343Z       username: 'NOT_SET',
2025-12-10T09:20:15.2662698Z       csrf: {
2025-12-10T09:20:15.2663042Z         headerValue: 'MISSING',
2025-12-10T09:20:15.2663521Z         cookieValue: 'MISSING',
2025-12-10T09:20:15.2663922Z         headerPresent: false,
2025-12-10T09:20:15.2664328Z         cookiePresent: false
2025-12-10T09:20:15.2664718Z       },
2025-12-10T09:20:15.2665083Z       timestamp: '2025-12-10T09:20:15.265Z'
2025-12-10T09:20:15.2665515Z     }
2025-12-10T09:20:15.2665682Z 
2025-12-10T09:20:15.2665891Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:15.2666214Z 
2025-12-10T09:20:15.2693903Z   console.error
2025-12-10T09:20:15.2694724Z     [PLUGIN_INSTALL_API] Install request failed with error: {
2025-12-10T09:20:15.2695408Z       url: 'http://example.com/test.jar',
2025-12-10T09:20:15.2696092Z       error: 'Plugins directory not accessible or not writable',
2025-12-10T09:20:15.2696943Z       stack: 'Error: Plugins directory not accessible or not writable\n' +
2025-12-10T09:20:15.2698178Z         '    at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/plugins.test.js:136:17)\n' +
2025-12-10T09:20:15.2699806Z         '    at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)\n' +
2025-12-10T09:20:15.2700708Z         '    at new Promise (<anonymous>)\n' +
2025-12-10T09:20:15.2701813Z         '    at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)\n' +
2025-12-10T09:20:15.2727521Z         '    at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)\n' +
2025-12-10T09:20:15.2728897Z         '    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n' +
2025-12-10T09:20:15.2730459Z         '    at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)\n' +
2025-12-10T09:20:15.2732254Z         '    at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)\n' +
2025-12-10T09:20:15.2734148Z         '    at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)\n' +
2025-12-10T09:20:15.2735992Z         '    at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)\n' +
2025-12-10T09:20:15.2737028Z         '    at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)\n' +
2025-12-10T09:20:15.2738555Z         '    at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n' +
2025-12-10T09:20:15.2740408Z         '    at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n' +
2025-12-10T09:20:15.2741561Z         '    at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)\n' +
2025-12-10T09:20:15.2742586Z         '    at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)\n' +
2025-12-10T09:20:15.2743579Z         '    at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)'
2025-12-10T09:20:15.2744165Z     }
2025-12-10T09:20:15.2744262Z 
2025-12-10T09:20:15.2744661Z     [0m [90m 165 |[39m         res[33m.[39mjson(result)[33m;[39m
2025-12-10T09:20:15.2745098Z      [90m 166 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:15.2745782Z     [31m[1m>[22m[39m[90m 167 |[39m         console[33m.[39merror([32m'[PLUGIN_INSTALL_API] Install request failed with error:'[39m[33m,[39m {
2025-12-10T09:20:15.2746373Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:15.2746835Z      [90m 168 |[39m             url[33m:[39m req[33m.[39mbody[33m.[39murl[33m,[39m
2025-12-10T09:20:15.2747314Z      [90m 169 |[39m             error[33m:[39m error[33m.[39mmessage[33m,[39m
2025-12-10T09:20:15.2747757Z      [90m 170 |[39m             stack[33m:[39m error[33m.[39mstack[0m
2025-12-10T09:20:15.2747976Z 
2025-12-10T09:20:15.2748101Z       at error (routes/plugins.js:167:17)
2025-12-10T09:20:15.2748282Z 
2025-12-10T09:20:15.2781646Z   console.log
2025-12-10T09:20:15.2782128Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:15.2782723Z       url: 'http://example.com/test.jar',
2025-12-10T09:20:15.2783176Z       customName: undefined,
2025-12-10T09:20:15.2783608Z       selectedOption: undefined,
2025-12-10T09:20:15.2784005Z       sessionID: undefined,
2025-12-10T09:20:15.2784369Z       authenticated: false,
2025-12-10T09:20:15.2784726Z       username: 'NOT_SET',
2025-12-10T09:20:15.2785061Z       csrf: {
2025-12-10T09:20:15.2785398Z         headerValue: 'MISSING',
2025-12-10T09:20:15.2785692Z         cookieValue: 'MISSING',
2025-12-10T09:20:15.2785935Z         headerPresent: false,
2025-12-10T09:20:15.2786271Z         cookiePresent: false
2025-12-10T09:20:15.2786654Z       },
2025-12-10T09:20:15.2787033Z       timestamp: '2025-12-10T09:20:15.276Z'
2025-12-10T09:20:15.2787447Z     }
2025-12-10T09:20:15.2787603Z 
2025-12-10T09:20:15.2787799Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:15.2788093Z 
2025-12-10T09:20:15.2788224Z   console.log
2025-12-10T09:20:15.2788648Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:15.2789399Z       url: 'http://example.com/test.jar',
2025-12-10T09:20:15.2789853Z       status: 'installed',
2025-12-10T09:20:15.2790260Z       pluginName: 'TestPlugin',
2025-12-10T09:20:15.2790553Z       version: '1.0.0'
2025-12-10T09:20:15.2790742Z     }
2025-12-10T09:20:15.2790832Z 
2025-12-10T09:20:15.2790953Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:15.2791119Z 
2025-12-10T09:20:15.2828197Z   console.log
2025-12-10T09:20:15.2828686Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:15.2829497Z       url: 'http://example.com/existing-plugin.jar',
2025-12-10T09:20:15.2830018Z       customName: undefined,
2025-12-10T09:20:15.2830457Z       selectedOption: undefined,
2025-12-10T09:20:15.2830855Z       sessionID: undefined,
2025-12-10T09:20:15.2831230Z       authenticated: false,
2025-12-10T09:20:15.2831598Z       username: 'NOT_SET',
2025-12-10T09:20:15.2831943Z       csrf: {
2025-12-10T09:20:15.2832280Z         headerValue: 'MISSING',
2025-12-10T09:20:15.2832694Z         cookieValue: 'MISSING',
2025-12-10T09:20:15.2833331Z         headerPresent: false,
2025-12-10T09:20:15.2833889Z         cookiePresent: false
2025-12-10T09:20:15.2834247Z       },
2025-12-10T09:20:15.2834607Z       timestamp: '2025-12-10T09:20:15.281Z'
2025-12-10T09:20:15.2835011Z     }
2025-12-10T09:20:15.2835165Z 
2025-12-10T09:20:15.2835365Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:15.2835660Z 
2025-12-10T09:20:15.2838525Z   console.log
2025-12-10T09:20:15.2839365Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:15.2840046Z       url: 'http://example.com/existing-plugin.jar',
2025-12-10T09:20:15.2840541Z       status: 'conflict',
2025-12-10T09:20:15.2840958Z       pluginName: 'ExistingPlugin',
2025-12-10T09:20:15.2841369Z       version: undefined
2025-12-10T09:20:15.2841694Z     }
2025-12-10T09:20:15.2841851Z 
2025-12-10T09:20:15.2842044Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:15.2842343Z 
2025-12-10T09:20:15.2871471Z   console.log
2025-12-10T09:20:15.2872071Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:15.2872709Z       url: 'http://example.com/plugin-release',
2025-12-10T09:20:15.2873178Z       customName: undefined,
2025-12-10T09:20:15.2873528Z       selectedOption: undefined,
2025-12-10T09:20:15.2873785Z       sessionID: undefined,
2025-12-10T09:20:15.2874013Z       authenticated: false,
2025-12-10T09:20:15.2874226Z       username: 'NOT_SET',
2025-12-10T09:20:15.2874422Z       csrf: {
2025-12-10T09:20:15.2874626Z         headerValue: 'MISSING',
2025-12-10T09:20:15.2874873Z         cookieValue: 'MISSING',
2025-12-10T09:20:15.2875231Z         headerPresent: false,
2025-12-10T09:20:15.2875646Z         cookiePresent: false
2025-12-10T09:20:15.2876018Z       },
2025-12-10T09:20:15.2876394Z       timestamp: '2025-12-10T09:20:15.285Z'
2025-12-10T09:20:15.2876791Z     }
2025-12-10T09:20:15.2876942Z 
2025-12-10T09:20:15.2877134Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:15.2877427Z 
2025-12-10T09:20:15.2877555Z   console.log
2025-12-10T09:20:15.2877991Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:15.2878568Z       url: 'http://example.com/plugin-release',
2025-12-10T09:20:15.2879065Z       status: 'multiple-options',
2025-12-10T09:20:15.2879654Z       pluginName: undefined,
2025-12-10T09:20:15.2879912Z       version: undefined
2025-12-10T09:20:15.2880105Z     }
2025-12-10T09:20:15.2880194Z 
2025-12-10T09:20:15.2880311Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:15.2880481Z 
2025-12-10T09:20:15.2913015Z   console.log
2025-12-10T09:20:15.2913485Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:15.2914053Z       url: 'http://example.com/test.jar',
2025-12-10T09:20:15.2914553Z       customName: 'CustomPluginName',
2025-12-10T09:20:15.2915018Z       selectedOption: undefined,
2025-12-10T09:20:15.2915409Z       sessionID: undefined,
2025-12-10T09:20:15.2915776Z       authenticated: false,
2025-12-10T09:20:15.2916131Z       username: 'NOT_SET',
2025-12-10T09:20:15.2916468Z       csrf: {
2025-12-10T09:20:15.2916807Z         headerValue: 'MISSING',
2025-12-10T09:20:15.2917221Z         cookieValue: 'MISSING',
2025-12-10T09:20:15.2917599Z         headerPresent: false,
2025-12-10T09:20:15.2917990Z         cookiePresent: false
2025-12-10T09:20:15.2918356Z       },
2025-12-10T09:20:15.2918735Z       timestamp: '2025-12-10T09:20:15.290Z'
2025-12-10T09:20:15.2919334Z     }
2025-12-10T09:20:15.2919498Z 
2025-12-10T09:20:15.2919702Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:15.2919987Z 
2025-12-10T09:20:15.2920125Z   console.log
2025-12-10T09:20:15.2920545Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:15.2921100Z       url: 'http://example.com/test.jar',
2025-12-10T09:20:15.2921530Z       status: 'installed',
2025-12-10T09:20:15.2921950Z       pluginName: 'CustomPluginName',
2025-12-10T09:20:15.2922354Z       version: '1.0.0'
2025-12-10T09:20:15.2922602Z     }
2025-12-10T09:20:15.2922701Z 
2025-12-10T09:20:15.2922819Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:15.2923266Z 
2025-12-10T09:20:15.2955626Z   console.log
2025-12-10T09:20:15.2957565Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:15.2958165Z       url: 'http://example.com/release',
2025-12-10T09:20:15.2958600Z       customName: undefined,
2025-12-10T09:20:15.2959120Z       selectedOption: 'http://example.com/specific.jar',
2025-12-10T09:20:15.2959791Z       sessionID: undefined,
2025-12-10T09:20:15.2960170Z       authenticated: false,
2025-12-10T09:20:15.2960534Z       username: 'NOT_SET',
2025-12-10T09:20:15.2960898Z       csrf: {
2025-12-10T09:20:15.2961255Z         headerValue: 'MISSING',
2025-12-10T09:20:15.2961704Z         cookieValue: 'MISSING',
2025-12-10T09:20:15.2962099Z         headerPresent: false,
2025-12-10T09:20:15.2962521Z         cookiePresent: false
2025-12-10T09:20:15.2962891Z       },
2025-12-10T09:20:15.2963281Z       timestamp: '2025-12-10T09:20:15.294Z'
2025-12-10T09:20:15.2963679Z     }
2025-12-10T09:20:15.2963825Z 
2025-12-10T09:20:15.2964050Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:15.2964350Z 
2025-12-10T09:20:15.2965348Z   console.log
2025-12-10T09:20:15.2966152Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:15.2966723Z       url: 'http://example.com/release',
2025-12-10T09:20:15.2967075Z       status: 'installed',
2025-12-10T09:20:15.2967329Z       pluginName: 'TestPlugin',
2025-12-10T09:20:15.2967561Z       version: '1.0.0'
2025-12-10T09:20:15.2967743Z     }
2025-12-10T09:20:15.2967844Z 
2025-12-10T09:20:15.2967959Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:15.3064661Z 
2025-12-10T09:20:15.3064852Z   console.error
2025-12-10T09:20:15.3065337Z     Error uninstalling plugin: Error: Plugin not found
2025-12-10T09:20:15.3066532Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/plugins.test.js:261:17)
2025-12-10T09:20:15.3068354Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:15.3069971Z         at new Promise (<anonymous>)
2025-12-10T09:20:15.3071042Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:15.3072508Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:15.3073272Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:15.3074010Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:15.3075036Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:15.3076755Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:15.3077843Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:15.3078827Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:15.3080314Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:15.3081634Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:15.3082719Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:15.3084001Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:15.3084979Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:15.3085484Z 
2025-12-10T09:20:15.3085866Z     [0m [90m 283 |[39m         res[33m.[39mjson(result)[33m;[39m
2025-12-10T09:20:15.3086256Z      [90m 284 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:15.3086898Z     [31m[1m>[22m[39m[90m 285 |[39m         console[33m.[39merror([32m'Error uninstalling plugin:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:15.3087432Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:15.3088028Z      [90m 286 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ error[33m:[39m error[33m.[39mmessage })[33m;[39m
2025-12-10T09:20:15.3088474Z      [90m 287 |[39m     }
2025-12-10T09:20:15.3088754Z      [90m 288 |[39m })[33m;[39m[0m
2025-12-10T09:20:15.3088920Z 
2025-12-10T09:20:15.3089041Z       at error (routes/plugins.js:285:17)
2025-12-10T09:20:15.3089367Z 
2025-12-10T09:20:15.3183390Z   console.error
2025-12-10T09:20:15.3184477Z     Error rolling back plugin: Error: No backup available for this plugin
2025-12-10T09:20:15.3186284Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/plugins.test.js:306:17)
2025-12-10T09:20:15.3188678Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:15.3195958Z         at new Promise (<anonymous>)
2025-12-10T09:20:15.3197238Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:15.3199078Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:15.3200643Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:15.3202001Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:15.3203815Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:15.3205786Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:15.3207709Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:15.3209613Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:15.3211796Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:15.3214246Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:15.3216258Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:15.3218052Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:15.3219983Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:15.3220935Z 
2025-12-10T09:20:15.3221871Z     [0m [90m 323 |[39m         res[33m.[39mjson(result)[33m;[39m
2025-12-10T09:20:15.3222828Z      [90m 324 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:15.3223990Z     [31m[1m>[22m[39m[90m 325 |[39m         console[33m.[39merror([32m'Error rolling back plugin:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:15.3224973Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:15.3226076Z      [90m 326 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ error[33m:[39m error[33m.[39mmessage })[33m;[39m
2025-12-10T09:20:15.3226891Z      [90m 327 |[39m     }
2025-12-10T09:20:15.3227383Z      [90m 328 |[39m })[33m;[39m[0m
2025-12-10T09:20:15.3227671Z 
2025-12-10T09:20:15.3227887Z       at error (routes/plugins.js:325:17)
2025-12-10T09:20:15.3228200Z 
2025-12-10T09:20:15.3366083Z PASS __tests__/routes/plugins.test.js
2025-12-10T09:20:15.3366709Z   Plugins API Routes - Error Handling
2025-12-10T09:20:15.3367157Z     GET /api/plugins
2025-12-10T09:20:15.3368112Z       ✓ should return empty plugins array when getAllPlugins returns empty (6 ms)
2025-12-10T09:20:15.3369364Z       ✓ should return plugins array with error field on exception (29 ms)
2025-12-10T09:20:15.3370234Z       ✓ should return plugins with backup status (2 ms)
2025-12-10T09:20:15.3370722Z     GET /api/plugins/health
2025-12-10T09:20:15.3371275Z       ✓ should return 200 when healthy (2 ms)
2025-12-10T09:20:15.3371886Z       ✓ should return 503 when unhealthy (2 ms)
2025-12-10T09:20:15.3372479Z       ✓ should return 500 on exception (5 ms)
2025-12-10T09:20:15.3372925Z     POST /api/plugins/install
2025-12-10T09:20:15.3373506Z       ✓ should return 400 when URL is missing (7 ms)
2025-12-10T09:20:15.3374206Z       ✓ should handle installation errors gracefully (11 ms)
2025-12-10T09:20:15.3375033Z       ✓ should return status "installed" on successful installation (5 ms)
2025-12-10T09:20:15.3375944Z       ✓ should return status "conflict" when plugin already exists (5 ms)
2025-12-10T09:20:15.3377005Z       ✓ should return status "multiple-options" when multiple JARs are available (4 ms)
2025-12-10T09:20:15.3377913Z       ✓ should accept customName parameter (4 ms)
2025-12-10T09:20:15.3378807Z       ✓ should accept selectedOption parameter for multi-jar releases (4 ms)
2025-12-10T09:20:15.3379698Z     POST /api/plugins/uninstall
2025-12-10T09:20:15.3380346Z       ✓ should return 400 when plugin name is missing (2 ms)
2025-12-10T09:20:15.3381075Z       ✓ should handle uninstall errors gracefully (8 ms)
2025-12-10T09:20:15.3381585Z     POST /api/plugins/toggle
2025-12-10T09:20:15.3382188Z       ✓ should return 400 when plugin name is missing (3 ms)
2025-12-10T09:20:15.3382943Z       ✓ should return 400 when enabled is not a boolean (2 ms)
2025-12-10T09:20:15.3383508Z     POST /api/plugins/rollback
2025-12-10T09:20:15.3384112Z       ✓ should return 400 when plugin name is missing (2 ms)
2025-12-10T09:20:15.3384847Z       ✓ should handle rollback errors gracefully (5 ms)
2025-12-10T09:20:15.3385239Z 
2025-12-10T09:20:15.5032606Z   console.log
2025-12-10T09:20:15.5034456Z     [Session] Cookie configuration: {
2025-12-10T09:20:15.5034921Z       secure: false,
2025-12-10T09:20:15.5035258Z       nodeEnv: 'test',
2025-12-10T09:20:15.5035660Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:15.5036200Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:15.5036657Z     }
2025-12-10T09:20:15.5036821Z 
2025-12-10T09:20:15.5037056Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:15.5037383Z 
2025-12-10T09:20:15.6429325Z   console.log
2025-12-10T09:20:15.6430937Z     [AUTH] Authentication check: {
2025-12-10T09:20:15.6431402Z       path: '/warn',
2025-12-10T09:20:15.6431756Z       method: 'POST',
2025-12-10T09:20:15.6432243Z       sessionID: 'PttNByAIVF1jjev6eCrqiutX4Y4iGxnx',
2025-12-10T09:20:15.6432748Z       hasSession: true,
2025-12-10T09:20:15.6433105Z       authenticated: true,
2025-12-10T09:20:15.6433469Z       username: 'testadmin',
2025-12-10T09:20:15.6434208Z       hasCookies: false,
2025-12-10T09:20:15.6434800Z       timestamp: '2025-12-10T09:20:15.634Z'
2025-12-10T09:20:15.6435214Z     }
2025-12-10T09:20:15.6435378Z 
2025-12-10T09:20:15.6435560Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:15.6435830Z 
2025-12-10T09:20:15.6444655Z   console.log
2025-12-10T09:20:15.6446624Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:15.6446981Z 
2025-12-10T09:20:15.6447165Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:15.6447434Z 
2025-12-10T09:20:15.6537948Z   console.log
2025-12-10T09:20:15.6538671Z     [AUTH] Authentication check: {
2025-12-10T09:20:15.6539535Z       path: '/warn',
2025-12-10T09:20:15.6541343Z       method: 'POST',
2025-12-10T09:20:15.6541817Z       sessionID: 'W0Kd4-mWZoJOTfoqgFvvjlLpJjNNg8Bv',
2025-12-10T09:20:15.6542165Z       hasSession: true,
2025-12-10T09:20:15.6542415Z       authenticated: true,
2025-12-10T09:20:15.6542641Z       username: 'testadmin',
2025-12-10T09:20:15.6542870Z       hasCookies: false,
2025-12-10T09:20:15.6543150Z       timestamp: '2025-12-10T09:20:15.651Z'
2025-12-10T09:20:15.6543408Z     }
2025-12-10T09:20:15.6543503Z 
2025-12-10T09:20:15.6543620Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:15.6543775Z 
2025-12-10T09:20:15.6554289Z   console.log
2025-12-10T09:20:15.6555083Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:15.6555618Z 
2025-12-10T09:20:15.6555814Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:15.6556086Z 
2025-12-10T09:20:15.6615878Z   console.log
2025-12-10T09:20:15.6618235Z     [AUTH] Authentication check: {
2025-12-10T09:20:15.6618699Z       path: '/warn',
2025-12-10T09:20:15.6619045Z       method: 'POST',
2025-12-10T09:20:15.6619821Z       sessionID: 'vZyjDbTF0G6WkUNPh9Aw0GfCI2ZyBg-B',
2025-12-10T09:20:15.6620338Z       hasSession: true,
2025-12-10T09:20:15.6620692Z       authenticated: true,
2025-12-10T09:20:15.6621069Z       username: 'testadmin',
2025-12-10T09:20:15.6621447Z       hasCookies: false,
2025-12-10T09:20:15.6621898Z       timestamp: '2025-12-10T09:20:15.659Z'
2025-12-10T09:20:15.6622347Z     }
2025-12-10T09:20:15.6622520Z 
2025-12-10T09:20:15.6622702Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:15.6622976Z 
2025-12-10T09:20:15.6626771Z   console.log
2025-12-10T09:20:15.6628958Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:15.6629668Z 
2025-12-10T09:20:15.6629891Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:15.6630179Z 
2025-12-10T09:20:15.6667617Z   console.log
2025-12-10T09:20:15.6670111Z     [AUTH] Authentication check: {
2025-12-10T09:20:15.6670549Z       path: '/mute',
2025-12-10T09:20:15.6670888Z       method: 'POST',
2025-12-10T09:20:15.6671376Z       sessionID: 'goizbEtmFvC1TRvcWmdcxqhs42bdYKY-',
2025-12-10T09:20:15.6671870Z       hasSession: true,
2025-12-10T09:20:15.6672229Z       authenticated: true,
2025-12-10T09:20:15.6672599Z       username: 'testadmin',
2025-12-10T09:20:15.6672973Z       hasCookies: false,
2025-12-10T09:20:15.6673376Z       timestamp: '2025-12-10T09:20:15.665Z'
2025-12-10T09:20:15.6673795Z     }
2025-12-10T09:20:15.6673948Z 
2025-12-10T09:20:15.6674145Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:15.6674409Z 
2025-12-10T09:20:15.6677212Z   console.log
2025-12-10T09:20:15.6677940Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:15.6678525Z 
2025-12-10T09:20:15.6678793Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:15.6679090Z 
2025-12-10T09:20:15.6761330Z   console.log
2025-12-10T09:20:15.6762029Z     [AUTH] Authentication check: {
2025-12-10T09:20:15.6762494Z       path: '/unmute',
2025-12-10T09:20:15.6762831Z       method: 'POST',
2025-12-10T09:20:15.6763279Z       sessionID: 'cW2NYZRTbey3jRXp-OELP0Hmq662NizY',
2025-12-10T09:20:15.6763766Z       hasSession: true,
2025-12-10T09:20:15.6764110Z       authenticated: true,
2025-12-10T09:20:15.6764468Z       username: 'testadmin',
2025-12-10T09:20:15.6764821Z       hasCookies: false,
2025-12-10T09:20:15.6765219Z       timestamp: '2025-12-10T09:20:15.674Z'
2025-12-10T09:20:15.6766088Z     }
2025-12-10T09:20:15.6766246Z 
2025-12-10T09:20:15.6766690Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:15.6766974Z 
2025-12-10T09:20:15.6773119Z   console.log
2025-12-10T09:20:15.6773819Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:15.6774198Z 
2025-12-10T09:20:15.6774384Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:15.6774668Z 
2025-12-10T09:20:15.6821267Z   console.log
2025-12-10T09:20:15.6821913Z     [AUTH] Authentication check: {
2025-12-10T09:20:15.6822451Z       path: '/test-uuid-123/details',
2025-12-10T09:20:15.6822903Z       method: 'GET',
2025-12-10T09:20:15.6823443Z       sessionID: 'p_7ZrpXek8eOEK5Uq5XhqhgdNUb3KBt0',
2025-12-10T09:20:15.6823979Z       hasSession: true,
2025-12-10T09:20:15.6824360Z       authenticated: true,
2025-12-10T09:20:15.6824751Z       username: 'testadmin',
2025-12-10T09:20:15.6825145Z       hasCookies: false,
2025-12-10T09:20:15.6825580Z       timestamp: '2025-12-10T09:20:15.680Z'
2025-12-10T09:20:15.6826011Z     }
2025-12-10T09:20:15.6826211Z 
2025-12-10T09:20:15.6826399Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:15.6826684Z 
2025-12-10T09:20:15.6835278Z   console.log
2025-12-10T09:20:15.6835888Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:15.6837382Z 
2025-12-10T09:20:15.6837614Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:15.6837908Z 
2025-12-10T09:20:15.6877885Z   console.log
2025-12-10T09:20:15.6878550Z     [AUTH] Authentication check: {
2025-12-10T09:20:15.6879103Z       path: '/nonexistent-uuid/details',
2025-12-10T09:20:15.6879761Z       method: 'GET',
2025-12-10T09:20:15.6880256Z       sessionID: 'i-E1xIm40873gzvgefeiNQShbCI3BOVT',
2025-12-10T09:20:15.6880776Z       hasSession: true,
2025-12-10T09:20:15.6881154Z       authenticated: true,
2025-12-10T09:20:15.6881530Z       username: 'testadmin',
2025-12-10T09:20:15.6881914Z       hasCookies: false,
2025-12-10T09:20:15.6882348Z       timestamp: '2025-12-10T09:20:15.686Z'
2025-12-10T09:20:15.6882769Z     }
2025-12-10T09:20:15.6882952Z 
2025-12-10T09:20:15.6883140Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:15.6883423Z 
2025-12-10T09:20:15.6893354Z   console.log
2025-12-10T09:20:15.6894330Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:15.6894878Z 
2025-12-10T09:20:15.6895306Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:15.6895726Z 
2025-12-10T09:20:15.6934066Z   console.log
2025-12-10T09:20:15.6934810Z     [AUTH] Authentication check: {
2025-12-10T09:20:15.6935345Z       path: '/test-uuid-123/history',
2025-12-10T09:20:15.6935778Z       method: 'GET',
2025-12-10T09:20:15.6936248Z       sessionID: 'obXHZvj8DPZ0HUbKpDUv1yS9oEgVpjzW',
2025-12-10T09:20:15.6936748Z       hasSession: true,
2025-12-10T09:20:15.6937109Z       authenticated: true,
2025-12-10T09:20:15.6937497Z       username: 'testadmin',
2025-12-10T09:20:15.6937872Z       hasCookies: false,
2025-12-10T09:20:15.6938298Z       timestamp: '2025-12-10T09:20:15.691Z'
2025-12-10T09:20:15.6938714Z     }
2025-12-10T09:20:15.6938873Z 
2025-12-10T09:20:15.6939096Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:15.6939624Z 
2025-12-10T09:20:15.6947618Z   console.log
2025-12-10T09:20:15.6948301Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:15.6948662Z 
2025-12-10T09:20:15.6948843Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:15.6949091Z 
2025-12-10T09:20:15.6988202Z   console.log
2025-12-10T09:20:15.6990305Z     [AUTH] Authentication check: {
2025-12-10T09:20:15.6991126Z       path: '/test-uuid-123/history',
2025-12-10T09:20:15.6992492Z       method: 'GET',
2025-12-10T09:20:15.6993254Z       sessionID: 'UJhO-UDRSIHq5Nq8G1rb_OP_9Cq9rvTQ',
2025-12-10T09:20:15.6994002Z       hasSession: true,
2025-12-10T09:20:15.7004393Z       authenticated: true,
2025-12-10T09:20:15.7004848Z       username: 'testadmin',
2025-12-10T09:20:15.7005279Z       hasCookies: false,
2025-12-10T09:20:15.7005710Z       timestamp: '2025-12-10T09:20:15.697Z'
2025-12-10T09:20:15.7006118Z     }
2025-12-10T09:20:15.7006278Z 
2025-12-10T09:20:15.7006837Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:15.7007119Z 
2025-12-10T09:20:15.7015986Z   console.log
2025-12-10T09:20:15.7017059Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:15.7018532Z 
2025-12-10T09:20:15.7019002Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:15.7021069Z 
2025-12-10T09:20:15.7053016Z   console.log
2025-12-10T09:20:15.7053743Z     [AUTH] Authentication check: {
2025-12-10T09:20:15.7065940Z       path: '/whitelist',
2025-12-10T09:20:15.7066606Z       method: 'GET',
2025-12-10T09:20:15.7068205Z       sessionID: 'Wf6f54G7mfIsbo4E3gdkgoE5P4PNO6Dx',
2025-12-10T09:20:15.7068729Z       hasSession: true,
2025-12-10T09:20:15.7069101Z       authenticated: true,
2025-12-10T09:20:15.7069701Z       username: 'testadmin',
2025-12-10T09:20:15.7070079Z       hasCookies: false,
2025-12-10T09:20:15.7070504Z       timestamp: '2025-12-10T09:20:15.703Z'
2025-12-10T09:20:15.7070910Z     }
2025-12-10T09:20:15.7071067Z 
2025-12-10T09:20:15.7071259Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:15.7071557Z 
2025-12-10T09:20:15.7075427Z   console.log
2025-12-10T09:20:15.7077942Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:15.7078327Z 
2025-12-10T09:20:15.7078896Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:15.7079600Z 
2025-12-10T09:20:15.7115558Z   console.log
2025-12-10T09:20:15.7116376Z     [AUTH] Authentication check: {
2025-12-10T09:20:15.7118846Z       path: '/whitelist/add',
2025-12-10T09:20:15.7119719Z       method: 'POST',
2025-12-10T09:20:15.7122205Z       sessionID: '8f4Bj1WvHK99xiZTdVW3zjoTp0KwEa15',
2025-12-10T09:20:15.7122738Z       hasSession: true,
2025-12-10T09:20:15.7123110Z       authenticated: true,
2025-12-10T09:20:15.7123484Z       username: 'testadmin',
2025-12-10T09:20:15.7123862Z       hasCookies: false,
2025-12-10T09:20:15.7124288Z       timestamp: '2025-12-10T09:20:15.710Z'
2025-12-10T09:20:15.7124692Z     }
2025-12-10T09:20:15.7124845Z 
2025-12-10T09:20:15.7125026Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:15.7125330Z 
2025-12-10T09:20:15.7133285Z   console.log
2025-12-10T09:20:15.7135400Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:15.7136306Z 
2025-12-10T09:20:15.7136796Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:15.7137433Z 
2025-12-10T09:20:15.7285670Z   console.log
2025-12-10T09:20:15.7287007Z     [AUTH] Authentication check: {
2025-12-10T09:20:15.7293863Z       path: '/whitelist/add',
2025-12-10T09:20:15.7294329Z       method: 'POST',
2025-12-10T09:20:15.7294832Z       sessionID: '5y4u9DfjaTHLLzmVTZhKZolgQLJv5IyQ',
2025-12-10T09:20:15.7295340Z       hasSession: true,
2025-12-10T09:20:15.7295660Z       authenticated: true,
2025-12-10T09:20:15.7296008Z       username: 'testadmin',
2025-12-10T09:20:15.7296372Z       hasCookies: false,
2025-12-10T09:20:15.7296799Z       timestamp: '2025-12-10T09:20:15.726Z'
2025-12-10T09:20:15.7297211Z     }
2025-12-10T09:20:15.7297379Z 
2025-12-10T09:20:15.7297558Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:15.7297830Z 
2025-12-10T09:20:15.7307297Z   console.log
2025-12-10T09:20:15.7310223Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:15.7312067Z 
2025-12-10T09:20:15.7312303Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:15.7312605Z 
2025-12-10T09:20:15.7361808Z   console.log
2025-12-10T09:20:15.7363137Z     [AUTH] Authentication check: {
2025-12-10T09:20:15.7363639Z       path: '/whitelist/remove',
2025-12-10T09:20:15.7364071Z       method: 'POST',
2025-12-10T09:20:15.7364549Z       sessionID: '4nzViRjNrm4xYZHIeSvqGqYci2AUj9tc',
2025-12-10T09:20:15.7365057Z       hasSession: true,
2025-12-10T09:20:15.7365419Z       authenticated: true,
2025-12-10T09:20:15.7365798Z       username: 'testadmin',
2025-12-10T09:20:15.7366170Z       hasCookies: false,
2025-12-10T09:20:15.7366596Z       timestamp: '2025-12-10T09:20:15.734Z'
2025-12-10T09:20:15.7367005Z     }
2025-12-10T09:20:15.7367166Z 
2025-12-10T09:20:15.7367361Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:15.7367640Z 
2025-12-10T09:20:15.7381396Z   console.log
2025-12-10T09:20:15.7392078Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:15.7395150Z 
2025-12-10T09:20:15.7397536Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:15.7400169Z 
2025-12-10T09:20:15.7669133Z PASS __tests__/routes/players-advanced.test.js
2025-12-10T09:20:15.7670197Z   Advanced Player Management Routes
2025-12-10T09:20:15.7670842Z     POST /api/players/warn
2025-12-10T09:20:15.7672048Z       ✓ warns player with reason (25 ms)
2025-12-10T09:20:15.7687718Z       ✓ returns error when player name missing (8 ms)
2025-12-10T09:20:15.7688855Z       ✓ returns error when reason missing (6 ms)
2025-12-10T09:20:15.7690294Z     POST /api/players/mute
2025-12-10T09:20:15.7690972Z       ✓ mutes player with reason and duration (6 ms)
2025-12-10T09:20:15.7691462Z     POST /api/players/unmute
2025-12-10T09:20:15.7691901Z       ✓ unmutes player (9 ms)
2025-12-10T09:20:15.7692343Z     GET /api/players/:uuid/details
2025-12-10T09:20:15.7692995Z       ✓ returns player details with action history (6 ms)
2025-12-10T09:20:15.7693708Z       ✓ returns 404 when player not found (5 ms)
2025-12-10T09:20:15.7694215Z     GET /api/players/:uuid/history
2025-12-10T09:20:15.7694764Z       ✓ returns action history for player (5 ms)
2025-12-10T09:20:15.7695303Z       ✓ respects limit parameter (7 ms)
2025-12-10T09:20:15.7695752Z     GET /api/players/whitelist
2025-12-10T09:20:15.7696232Z       ✓ returns whitelist entries (6 ms)
2025-12-10T09:20:15.7696688Z     POST /api/players/whitelist/add
2025-12-10T09:20:15.7697209Z       ✓ adds player to whitelist (15 ms)
2025-12-10T09:20:15.7697795Z       ✓ returns error when player not found (8 ms)
2025-12-10T09:20:15.7698307Z     POST /api/players/whitelist/remove
2025-12-10T09:20:15.7698857Z       ✓ removes player from whitelist (6 ms)
2025-12-10T09:20:15.7699339Z 
2025-12-10T09:20:16.0497090Z   console.error
2025-12-10T09:20:16.0498091Z     Error getting player activity: Error: Database error
2025-12-10T09:20:16.0500113Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/analytics.test.js:125:23)
2025-12-10T09:20:16.0502045Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:397:39
2025-12-10T09:20:16.0503957Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:404:13)
2025-12-10T09:20:16.0507850Z         at Object.mockConstructor (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:148:19)
2025-12-10T09:20:16.0510486Z         at Object.getPlayerActivity (eval at _createMockFunction (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:566:31), <anonymous>:3:63)
2025-12-10T09:20:16.0512670Z         at getPlayerActivity (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/routes/analytics.js:72:43)
2025-12-10T09:20:16.0514748Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:16.0516640Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:16.0519515Z         at middleware (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express-validator/lib/middlewares/check.js:16:13)
2025-12-10T09:20:16.0521276Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:16.0521949Z 
2025-12-10T09:20:16.0522770Z     [0m [90m 81 |[39m             })[33m;[39m
2025-12-10T09:20:16.0523824Z      [90m 82 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:16.0525216Z     [31m[1m>[22m[39m[90m 83 |[39m             console[33m.[39merror([32m'Error getting player activity:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:16.0526567Z      [90m    |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:16.0528487Z      [90m 84 |[39m             res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ 
2025-12-10T09:20:16.0529952Z      [90m 85 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m 
2025-12-10T09:20:16.0531119Z      [90m 86 |[39m                 error[33m:[39m [32m'Failed to retrieve player activity data'[39m [0m
2025-12-10T09:20:16.0531885Z 
2025-12-10T09:20:16.0534058Z       at error (routes/analytics.js:83:21)
2025-12-10T09:20:16.0534774Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:16.0540578Z       at next (node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:16.0541248Z       at middleware (node_modules/express-validator/lib/middlewares/check.js:16:13)
2025-12-10T09:20:16.0541679Z 
2025-12-10T09:20:16.1210521Z   console.error
2025-12-10T09:20:16.1211192Z     Error updating privacy settings: Error: Database error
2025-12-10T09:20:16.1240941Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/analytics.test.js:311:23)
2025-12-10T09:20:16.1243257Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:397:39
2025-12-10T09:20:16.1245078Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:404:13)
2025-12-10T09:20:16.1247150Z         at Object.mockConstructor (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:148:19)
2025-12-10T09:20:16.1249861Z         at Object.updatePrivacySettings (eval at _createMockFunction (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:566:31), <anonymous>:3:67)
2025-12-10T09:20:16.1252717Z         at updatePrivacySettings (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/routes/analytics.js:256:47)
2025-12-10T09:20:16.1254606Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:16.1256587Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:16.1266531Z         at middleware (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express-validator/lib/middlewares/check.js:16:13)
2025-12-10T09:20:16.1267954Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:16.1268467Z 
2025-12-10T09:20:16.1268990Z     [0m [90m 261 |[39m             })[33m;[39m
2025-12-10T09:20:16.1269959Z      [90m 262 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:16.1271183Z     [31m[1m>[22m[39m[90m 263 |[39m             console[33m.[39merror([32m'Error updating privacy settings:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:16.1272261Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:16.1273088Z      [90m 264 |[39m             res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ 
2025-12-10T09:20:16.1273953Z      [90m 265 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m 
2025-12-10T09:20:16.1274918Z      [90m 266 |[39m                 error[33m:[39m [32m'Failed to update privacy settings'[39m [0m
2025-12-10T09:20:16.1275393Z 
2025-12-10T09:20:16.1275613Z       at error (routes/analytics.js:263:21)
2025-12-10T09:20:16.1276418Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:16.1277221Z       at next (node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:16.1278021Z       at middleware (node_modules/express-validator/lib/middlewares/check.js:16:13)
2025-12-10T09:20:16.1278542Z 
2025-12-10T09:20:16.1282879Z PASS __tests__/routes/analytics.test.js
2025-12-10T09:20:16.1283907Z   Analytics Routes
2025-12-10T09:20:16.1284305Z     GET /api/analytics/dashboard
2025-12-10T09:20:16.1285202Z       ✓ should return dashboard statistics (7 ms)
2025-12-10T09:20:16.1285900Z       ✓ should accept date range filters (7 ms)
2025-12-10T09:20:16.1286610Z       ✓ should return 400 for invalid date format (3 ms)
2025-12-10T09:20:16.1287163Z     GET /api/analytics/players
2025-12-10T09:20:16.1287770Z       ✓ should return player activity data (5 ms)
2025-12-10T09:20:16.1288422Z       ✓ should handle errors gracefully (71 ms)
2025-12-10T09:20:16.1288886Z     GET /api/analytics/server
2025-12-10T09:20:16.1289708Z       ✓ should return server health data (4 ms)
2025-12-10T09:20:16.1290214Z     GET /api/analytics/plugins
2025-12-10T09:20:16.1290789Z       ✓ should return plugin usage data (3 ms)
2025-12-10T09:20:16.1291256Z     GET /api/analytics/export
2025-12-10T09:20:16.1291805Z       ✓ should export data as JSON (3 ms)
2025-12-10T09:20:16.1292410Z       ✓ should export data as CSV (3 ms)
2025-12-10T09:20:16.1293068Z       ✓ should validate format parameter (2 ms)
2025-12-10T09:20:16.1293723Z       ✓ should validate dataType parameter (2 ms)
2025-12-10T09:20:16.1294404Z     GET /api/analytics/settings
2025-12-10T09:20:16.1295264Z       ✓ should return privacy settings (3 ms)
2025-12-10T09:20:16.1295861Z     POST /api/analytics/settings
2025-12-10T09:20:16.1296448Z       ✓ should update privacy settings (8 ms)
2025-12-10T09:20:16.1297055Z       ✓ should validate boolean fields (3 ms)
2025-12-10T09:20:16.1297681Z       ✓ should validate retentionDays range (3 ms)
2025-12-10T09:20:16.1298333Z       ✓ should handle errors during update (6 ms)
2025-12-10T09:20:16.1298675Z 
2025-12-10T09:20:16.6222299Z   console.log
2025-12-10T09:20:16.6223535Z     [Test] Session middleware initialized (memory store)
2025-12-10T09:20:16.6225017Z 
2025-12-10T09:20:16.6225259Z       at Object.log (server.js:142:13)
2025-12-10T09:20:16.6225580Z 
2025-12-10T09:20:16.6228786Z   console.log
2025-12-10T09:20:16.6229735Z     [Session] Initialization status: {
2025-12-10T09:20:16.6230525Z       nodeEnv: 'test',
2025-12-10T09:20:16.6230970Z       sessionSecretSet: true,
2025-12-10T09:20:16.6231394Z       redisConfigured: false,
2025-12-10T09:20:16.6231793Z       middlewareApplied: true
2025-12-10T09:20:16.6232168Z     }
2025-12-10T09:20:16.6232340Z 
2025-12-10T09:20:16.6232559Z       at Object.log (server.js:155:9)
2025-12-10T09:20:16.6232875Z 
2025-12-10T09:20:16.6237126Z   console.log
2025-12-10T09:20:16.6237567Z     [CSRF] Cookie configuration: {
2025-12-10T09:20:16.6237998Z       secure: false,
2025-12-10T09:20:16.6238340Z       nodeEnv: 'test',
2025-12-10T09:20:16.6238795Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:16.6239960Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:16.6240482Z     }
2025-12-10T09:20:16.6240667Z 
2025-12-10T09:20:16.6240905Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:16.6241255Z 
2025-12-10T09:20:16.6411943Z   console.log
2025-12-10T09:20:16.6412433Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:16.6412754Z 
2025-12-10T09:20:16.6412945Z       at log (server.js:284:17)
2025-12-10T09:20:16.6413203Z 
2025-12-10T09:20:16.6449912Z   console.log
2025-12-10T09:20:16.6450375Z     [LOGIN] Login attempt: {
2025-12-10T09:20:16.6450807Z       username: 'admin',
2025-12-10T09:20:16.6451314Z       sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:16.6451853Z       hasSession: true,
2025-12-10T09:20:16.6452269Z       timestamp: '2025-12-10T09:20:16.642Z'
2025-12-10T09:20:16.6452684Z     }
2025-12-10T09:20:16.6452845Z 
2025-12-10T09:20:16.6453045Z       at log (routes/api.js:15:13)
2025-12-10T09:20:16.6453368Z 
2025-12-10T09:20:16.6482387Z   console.log
2025-12-10T09:20:16.6482891Z     [Session] Cookie configuration: {
2025-12-10T09:20:16.6483340Z       secure: false,
2025-12-10T09:20:16.6483691Z       nodeEnv: 'test',
2025-12-10T09:20:16.6484117Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:16.6484694Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:16.6485555Z     }
2025-12-10T09:20:16.6485721Z 
2025-12-10T09:20:16.6486167Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:16.6486485Z 
2025-12-10T09:20:16.6494535Z   console.error
2025-12-10T09:20:16.6496196Z     Error loading users: [Error: ENOENT: no such file or directory, open '/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/config/users.json'] {
2025-12-10T09:20:16.6497325Z       errno: -2,
2025-12-10T09:20:16.6497669Z       code: 'ENOENT',
2025-12-10T09:20:16.6498018Z       syscall: 'open',
2025-12-10T09:20:16.6498815Z       path: '/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/config/users.json'
2025-12-10T09:20:16.6499774Z     }
2025-12-10T09:20:16.6499933Z 
2025-12-10T09:20:16.6500708Z     [0m [90m 16 |[39m         [36mreturn[39m [33mJSON[39m[33m.[39mparse(data)[33m;[39m
2025-12-10T09:20:16.6501482Z      [90m 17 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:16.6502563Z     [31m[1m>[22m[39m[90m 18 |[39m         console[33m.[39merror([32m'Error loading users:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:16.6503401Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:16.6503993Z      [90m 19 |[39m         
2025-12-10T09:20:16.6504597Z      [90m 20 |[39m         [90m// Require ADMIN_PASSWORD to be set[39m
2025-12-10T09:20:16.6506445Z      [90m 21 |[39m         [36mif[39m ([33m![39mprocess[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m||[39m process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m===[39m [32m'change-this-secure-password'[39m) {[0m
2025-12-10T09:20:16.6531170Z 
2025-12-10T09:20:16.6531414Z       at error (auth/auth.js:18:17)
2025-12-10T09:20:16.6531994Z       at verifyCredentials (auth/auth.js:55:22)
2025-12-10T09:20:16.6532492Z       at routes/api.js:39:22
2025-12-10T09:20:16.6532739Z 
2025-12-10T09:20:16.8464912Z   console.error
2025-12-10T09:20:16.8466377Z     Error loading users: [Error: ENOENT: no such file or directory, open '/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/config/users.json'] {
2025-12-10T09:20:16.8467519Z       errno: -2,
2025-12-10T09:20:16.8467851Z       code: 'ENOENT',
2025-12-10T09:20:16.8468191Z       syscall: 'open',
2025-12-10T09:20:16.8468985Z       path: '/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/config/users.json'
2025-12-10T09:20:16.8469950Z     }
2025-12-10T09:20:16.8470112Z 
2025-12-10T09:20:16.8470857Z     [0m [90m 16 |[39m         [36mreturn[39m [33mJSON[39m[33m.[39mparse(data)[33m;[39m
2025-12-10T09:20:16.8471629Z      [90m 17 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:16.8472717Z     [31m[1m>[22m[39m[90m 18 |[39m         console[33m.[39merror([32m'Error loading users:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:16.8473712Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:16.8474253Z      [90m 19 |[39m         
2025-12-10T09:20:16.8474922Z      [90m 20 |[39m         [90m// Require ADMIN_PASSWORD to be set[39m
2025-12-10T09:20:16.8476806Z      [90m 21 |[39m         [36mif[39m ([33m![39mprocess[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m||[39m process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m===[39m [32m'change-this-secure-password'[39m) {[0m
2025-12-10T09:20:16.8477927Z 
2025-12-10T09:20:16.8478142Z       at error (auth/auth.js:18:17)
2025-12-10T09:20:16.8478684Z       at updateLastLogin (auth/auth.js:209:26)
2025-12-10T09:20:16.8479384Z       at routes/api.js:47:13
2025-12-10T09:20:16.8479662Z 
2025-12-10T09:20:16.8501993Z   console.log
2025-12-10T09:20:16.8502520Z     [Test] Session middleware initialized (memory store)
2025-12-10T09:20:16.8504760Z 
2025-12-10T09:20:16.8505187Z       at Object.log (server.js:142:13)
2025-12-10T09:20:16.8505848Z 
2025-12-10T09:20:16.8509779Z   console.log
2025-12-10T09:20:16.8510209Z     [Session] Initialization status: {
2025-12-10T09:20:16.8510832Z       nodeEnv: 'test',
2025-12-10T09:20:16.8511811Z       sessionSecretSet: true,
2025-12-10T09:20:16.8512601Z       redisConfigured: false,
2025-12-10T09:20:16.8513180Z       middlewareApplied: true
2025-12-10T09:20:16.8513656Z     }
2025-12-10T09:20:16.8513897Z 
2025-12-10T09:20:16.8515434Z       at Object.log (server.js:155:9)
2025-12-10T09:20:16.8516522Z 
2025-12-10T09:20:16.8519078Z   console.log
2025-12-10T09:20:16.8519972Z     [CSRF] Cookie configuration: {
2025-12-10T09:20:16.8520432Z       secure: false,
2025-12-10T09:20:16.8520798Z       nodeEnv: 'test',
2025-12-10T09:20:16.8521230Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:16.8521816Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:16.8522243Z     }
2025-12-10T09:20:16.8522419Z 
2025-12-10T09:20:16.8522652Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:16.8522982Z 
2025-12-10T09:20:16.8617181Z   console.log
2025-12-10T09:20:16.8617874Z     [CSRF] Token request: {
2025-12-10T09:20:16.8618640Z       sessionID: 'iuQOTtwc1qZlsTBsuICJiW4Q_XIWAH12',
2025-12-10T09:20:16.8619420Z       authenticated: false,
2025-12-10T09:20:16.8619833Z       username: 'NOT_SET',
2025-12-10T09:20:16.8620224Z       hasCookies: false,
2025-12-10T09:20:16.8620663Z       timestamp: '2025-12-10T09:20:16.859Z'
2025-12-10T09:20:16.8621086Z     }
2025-12-10T09:20:16.8621254Z 
2025-12-10T09:20:16.8621452Z       at log (server.js:236:13)
2025-12-10T09:20:16.8621714Z 
2025-12-10T09:20:16.8628542Z   console.log
2025-12-10T09:20:16.8629375Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:16.8630007Z       sessionID: 'iuQOTtwc1qZlsTBsuICJiW4Q_XIWAH12',
2025-12-10T09:20:16.8630513Z       tokenLength: 64,
2025-12-10T09:20:16.8630914Z       tokenPrefix: '8b267b90...',
2025-12-10T09:20:16.8631360Z       cookieName: 'csrf-token',
2025-12-10T09:20:16.8632069Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:16.8633356Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:16.8634050Z     }
2025-12-10T09:20:16.8634207Z 
2025-12-10T09:20:16.8634407Z       at log (server.js:266:13)
2025-12-10T09:20:16.8634669Z 
2025-12-10T09:20:16.8643860Z   console.log
2025-12-10T09:20:16.8644424Z     === API DEBUG LOG ===
2025-12-10T09:20:16.8644706Z 
2025-12-10T09:20:16.8645116Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:16.8645596Z 
2025-12-10T09:20:16.8652295Z   console.log
2025-12-10T09:20:16.8652750Z     GET /api/csrf-token - 200 (5ms)
2025-12-10T09:20:16.8653066Z 
2025-12-10T09:20:16.8653474Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:16.8653967Z 
2025-12-10T09:20:16.8660159Z   console.log
2025-12-10T09:20:16.8661033Z     Session: { id: 'iuQOTtwc1qZl...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:16.8661723Z 
2025-12-10T09:20:16.8662264Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:16.8663149Z 
2025-12-10T09:20:16.8668683Z   console.log
2025-12-10T09:20:16.8669505Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:16.8670073Z 
2025-12-10T09:20:16.8670553Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:16.8671035Z 
2025-12-10T09:20:16.8676591Z   console.log
2025-12-10T09:20:16.8677103Z     ====================
2025-12-10T09:20:16.8677362Z 
2025-12-10T09:20:16.8677761Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:16.8678230Z 
2025-12-10T09:20:16.8691454Z [0mGET /api/csrf-token [32m200[0m 12.335 ms - 80[0m
2025-12-10T09:20:16.8750428Z   console.log
2025-12-10T09:20:16.8751148Z     [CSRF] Token request: {
2025-12-10T09:20:16.8751721Z       sessionID: 'd50W6orinTiqhXhiE2sEJCfN1CuOWifu',
2025-12-10T09:20:16.8752251Z       authenticated: false,
2025-12-10T09:20:16.8752661Z       username: 'NOT_SET',
2025-12-10T09:20:16.8753046Z       hasCookies: false,
2025-12-10T09:20:16.8753487Z       timestamp: '2025-12-10T09:20:16.874Z'
2025-12-10T09:20:16.8754259Z     }
2025-12-10T09:20:16.8754423Z 
2025-12-10T09:20:16.8754824Z       at log (server.js:236:13)
2025-12-10T09:20:16.8755126Z 
2025-12-10T09:20:16.8760855Z   console.log
2025-12-10T09:20:16.8761503Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:16.8762111Z       sessionID: 'd50W6orinTiqhXhiE2sEJCfN1CuOWifu',
2025-12-10T09:20:16.8762619Z       tokenLength: 64,
2025-12-10T09:20:16.8763014Z       tokenPrefix: 'dd6a951f...',
2025-12-10T09:20:16.8763464Z       cookieName: 'csrf-token',
2025-12-10T09:20:16.8764165Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:16.8765396Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:16.8766069Z     }
2025-12-10T09:20:16.8766231Z 
2025-12-10T09:20:16.8766406Z       at log (server.js:266:13)
2025-12-10T09:20:16.8766672Z 
2025-12-10T09:20:16.8780632Z   console.log
2025-12-10T09:20:16.8781724Z     === API DEBUG LOG ===
2025-12-10T09:20:16.8782001Z 
2025-12-10T09:20:16.8782487Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:16.8782969Z 
2025-12-10T09:20:16.8784337Z   console.log
2025-12-10T09:20:16.8785284Z     GET /api/csrf-token - 200 (3ms)
2025-12-10T09:20:16.8787227Z 
2025-12-10T09:20:16.8787627Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:16.8788109Z 
2025-12-10T09:20:16.8794922Z   console.log
2025-12-10T09:20:16.8795750Z     Session: { id: 'd50W6orinTiq...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:16.8796260Z 
2025-12-10T09:20:16.8796722Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:16.8797201Z 
2025-12-10T09:20:16.8805700Z   console.log
2025-12-10T09:20:16.8806434Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:16.8807055Z 
2025-12-10T09:20:16.8807530Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:16.8808043Z 
2025-12-10T09:20:16.8815914Z   console.log
2025-12-10T09:20:16.8829351Z     ====================
2025-12-10T09:20:16.8859749Z 
2025-12-10T09:20:16.8860428Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:16.8860894Z 
2025-12-10T09:20:16.8861453Z [0mGET /api/csrf-token [32m200[0m 8.334 ms - 80[0m
2025-12-10T09:20:16.8910342Z   console.log
2025-12-10T09:20:16.8910719Z     [CSRF] Token request: {
2025-12-10T09:20:16.8911271Z       sessionID: 'npN7QCIaxzHDPnAYkdfvLqcJnSn60oHN',
2025-12-10T09:20:16.8911803Z       authenticated: false,
2025-12-10T09:20:16.8912181Z       username: 'NOT_SET',
2025-12-10T09:20:16.8912540Z       hasCookies: false,
2025-12-10T09:20:16.8912973Z       timestamp: '2025-12-10T09:20:16.890Z'
2025-12-10T09:20:16.8913386Z     }
2025-12-10T09:20:16.8913545Z 
2025-12-10T09:20:16.8913730Z       at log (server.js:236:13)
2025-12-10T09:20:16.8913983Z 
2025-12-10T09:20:16.8917721Z   console.log
2025-12-10T09:20:16.8921197Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:16.8921855Z       sessionID: 'npN7QCIaxzHDPnAYkdfvLqcJnSn60oHN',
2025-12-10T09:20:16.8922377Z       tokenLength: 64,
2025-12-10T09:20:16.8922772Z       tokenPrefix: '98a3556c...',
2025-12-10T09:20:16.8923215Z       cookieName: 'csrf-token',
2025-12-10T09:20:16.8923921Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:16.8925229Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:16.8929576Z     }
2025-12-10T09:20:16.8929762Z 
2025-12-10T09:20:16.8929956Z       at log (server.js:266:13)
2025-12-10T09:20:16.8930218Z 
2025-12-10T09:20:16.8930357Z   console.log
2025-12-10T09:20:16.8930666Z     === API DEBUG LOG ===
2025-12-10T09:20:16.8930903Z 
2025-12-10T09:20:16.8931293Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:16.8931773Z 
2025-12-10T09:20:16.8935051Z   console.log
2025-12-10T09:20:16.8938568Z     GET /api/csrf-token - 200 (2ms)
2025-12-10T09:20:16.8939449Z 
2025-12-10T09:20:16.8940049Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:16.8940536Z 
2025-12-10T09:20:16.8943135Z   console.log
2025-12-10T09:20:16.8946905Z     Session: { id: 'npN7QCIaxzHD...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:16.8947416Z 
2025-12-10T09:20:16.8947809Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:16.8948287Z 
2025-12-10T09:20:16.8950959Z   console.log
2025-12-10T09:20:16.8952693Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:16.8953050Z 
2025-12-10T09:20:16.8953449Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:16.8953921Z 
2025-12-10T09:20:16.8958272Z   console.log
2025-12-10T09:20:16.8958603Z     ====================
2025-12-10T09:20:16.8958835Z 
2025-12-10T09:20:16.8959439Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:16.8960027Z 
2025-12-10T09:20:16.8964081Z [0mGET /api/csrf-token [32m200[0m 6.521 ms - 80[0m
2025-12-10T09:20:16.8992720Z   console.log
2025-12-10T09:20:16.8993178Z     [CSRF] Token request: {
2025-12-10T09:20:16.8993772Z       sessionID: 'XYFQMRAeMfCnvOpmvDN3988qIKWRm6-H',
2025-12-10T09:20:16.8994343Z       authenticated: false,
2025-12-10T09:20:16.8994774Z       username: 'NOT_SET',
2025-12-10T09:20:16.8995193Z       hasCookies: false,
2025-12-10T09:20:16.8995645Z       timestamp: '2025-12-10T09:20:16.898Z'
2025-12-10T09:20:16.8996113Z     }
2025-12-10T09:20:16.8996277Z 
2025-12-10T09:20:16.8996478Z       at log (server.js:236:13)
2025-12-10T09:20:16.8996729Z 
2025-12-10T09:20:16.9002404Z   console.log
2025-12-10T09:20:16.9004576Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:16.9005181Z       sessionID: 'XYFQMRAeMfCnvOpmvDN3988qIKWRm6-H',
2025-12-10T09:20:16.9005690Z       tokenLength: 64,
2025-12-10T09:20:16.9006081Z       tokenPrefix: '7b82624d...',
2025-12-10T09:20:16.9006533Z       cookieName: 'csrf-token',
2025-12-10T09:20:16.9007242Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:16.9008460Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:16.9009137Z     }
2025-12-10T09:20:16.9009481Z 
2025-12-10T09:20:16.9009657Z       at log (server.js:266:13)
2025-12-10T09:20:16.9009919Z 
2025-12-10T09:20:16.9011393Z   console.log
2025-12-10T09:20:16.9014101Z     === API DEBUG LOG ===
2025-12-10T09:20:16.9014343Z 
2025-12-10T09:20:16.9014728Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:16.9015203Z 
2025-12-10T09:20:16.9018424Z   console.log
2025-12-10T09:20:16.9020893Z     GET /api/csrf-token - 200 (2ms)
2025-12-10T09:20:16.9021199Z 
2025-12-10T09:20:16.9021587Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:16.9022064Z 
2025-12-10T09:20:16.9026086Z   console.log
2025-12-10T09:20:16.9027471Z     Session: { id: 'XYFQMRAeMfCn...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:16.9027997Z 
2025-12-10T09:20:16.9028386Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:16.9028858Z 
2025-12-10T09:20:16.9033556Z   console.log
2025-12-10T09:20:16.9034249Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:16.9034632Z 
2025-12-10T09:20:16.9035051Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:16.9035525Z 
2025-12-10T09:20:16.9044375Z   console.log
2025-12-10T09:20:16.9045276Z     ====================
2025-12-10T09:20:16.9046294Z 
2025-12-10T09:20:16.9046715Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:16.9047192Z 
2025-12-10T09:20:16.9050043Z [0mGET /api/csrf-token [32m200[0m 6.673 ms - 80[0m
2025-12-10T09:20:16.9084289Z   console.log
2025-12-10T09:20:16.9085318Z     [CSRF] Token request: {
2025-12-10T09:20:16.9086111Z       sessionID: 'LMCf0fcBm13tcGLvOThdeORdmo4QX9AV',
2025-12-10T09:20:16.9087559Z       authenticated: false,
2025-12-10T09:20:16.9088156Z       username: 'NOT_SET',
2025-12-10T09:20:16.9088796Z       hasCookies: false,
2025-12-10T09:20:16.9089792Z       timestamp: '2025-12-10T09:20:16.907Z'
2025-12-10T09:20:16.9090243Z     }
2025-12-10T09:20:16.9090411Z 
2025-12-10T09:20:16.9090591Z       at log (server.js:236:13)
2025-12-10T09:20:16.9090852Z 
2025-12-10T09:20:16.9096502Z   console.log
2025-12-10T09:20:16.9096933Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:16.9097528Z       sessionID: 'LMCf0fcBm13tcGLvOThdeORdmo4QX9AV',
2025-12-10T09:20:16.9098029Z       tokenLength: 64,
2025-12-10T09:20:16.9098427Z       tokenPrefix: '5bbeef0d...',
2025-12-10T09:20:16.9098883Z       cookieName: 'csrf-token',
2025-12-10T09:20:16.9099763Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:16.9100975Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:16.9101670Z     }
2025-12-10T09:20:16.9101832Z 
2025-12-10T09:20:16.9102020Z       at log (server.js:266:13)
2025-12-10T09:20:16.9102275Z 
2025-12-10T09:20:16.9108049Z   console.log
2025-12-10T09:20:16.9116197Z     === API DEBUG LOG ===
2025-12-10T09:20:16.9116451Z 
2025-12-10T09:20:16.9116856Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:16.9117340Z 
2025-12-10T09:20:16.9118221Z   console.log
2025-12-10T09:20:16.9118852Z     GET /api/csrf-token - 200 (3ms)
2025-12-10T09:20:16.9119516Z 
2025-12-10T09:20:16.9120211Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:16.9120835Z 
2025-12-10T09:20:16.9127676Z   console.log
2025-12-10T09:20:16.9128522Z     Session: { id: 'LMCf0fcBm13t...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:16.9130181Z 
2025-12-10T09:20:16.9130830Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:16.9131345Z 
2025-12-10T09:20:16.9154027Z   console.log
2025-12-10T09:20:16.9159780Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:16.9160169Z 
2025-12-10T09:20:16.9160570Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:16.9161052Z 
2025-12-10T09:20:16.9161184Z   console.log
2025-12-10T09:20:16.9161500Z     ====================
2025-12-10T09:20:16.9161725Z 
2025-12-10T09:20:16.9162119Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:16.9162596Z 
2025-12-10T09:20:16.9163093Z [0mGET /api/csrf-token [32m200[0m 8.278 ms - 80[0m
2025-12-10T09:20:16.9188495Z   console.log
2025-12-10T09:20:16.9189976Z     [CSRF] Token request: {
2025-12-10T09:20:16.9190543Z       sessionID: 'o6oEcEiZJRY5TxG5eWol7Hr8mHdh68uQ',
2025-12-10T09:20:16.9191072Z       authenticated: false,
2025-12-10T09:20:16.9191469Z       username: 'NOT_SET',
2025-12-10T09:20:16.9191848Z       hasCookies: false,
2025-12-10T09:20:16.9192297Z       timestamp: '2025-12-10T09:20:16.918Z'
2025-12-10T09:20:16.9192738Z     }
2025-12-10T09:20:16.9192905Z 
2025-12-10T09:20:16.9193092Z       at log (server.js:236:13)
2025-12-10T09:20:16.9193343Z 
2025-12-10T09:20:16.9198128Z   console.log
2025-12-10T09:20:16.9200142Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:16.9202197Z       sessionID: 'o6oEcEiZJRY5TxG5eWol7Hr8mHdh68uQ',
2025-12-10T09:20:16.9203020Z       tokenLength: 64,
2025-12-10T09:20:16.9204643Z       tokenPrefix: '1e0bbb37...',
2025-12-10T09:20:16.9205105Z       cookieName: 'csrf-token',
2025-12-10T09:20:16.9205806Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:16.9207028Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:16.9207734Z     }
2025-12-10T09:20:16.9207919Z 
2025-12-10T09:20:16.9208116Z       at log (server.js:266:13)
2025-12-10T09:20:16.9208382Z 
2025-12-10T09:20:16.9211180Z   console.log
2025-12-10T09:20:16.9212033Z     === API DEBUG LOG ===
2025-12-10T09:20:16.9212364Z 
2025-12-10T09:20:16.9213160Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:16.9213662Z 
2025-12-10T09:20:16.9219113Z   console.log
2025-12-10T09:20:16.9220033Z     GET /api/csrf-token - 200 (2ms)
2025-12-10T09:20:16.9220357Z 
2025-12-10T09:20:16.9220777Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:16.9221256Z 
2025-12-10T09:20:16.9227122Z   console.log
2025-12-10T09:20:16.9227772Z     Session: { id: 'o6oEcEiZJRY5...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:16.9228284Z 
2025-12-10T09:20:16.9228685Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:16.9229385Z 
2025-12-10T09:20:16.9235214Z   console.log
2025-12-10T09:20:16.9235808Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:16.9236350Z 
2025-12-10T09:20:16.9236823Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:16.9237347Z 
2025-12-10T09:20:16.9242911Z   console.log
2025-12-10T09:20:16.9243501Z     ====================
2025-12-10T09:20:16.9243881Z 
2025-12-10T09:20:16.9244508Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:16.9244996Z 
2025-12-10T09:20:16.9247585Z [0mGET /api/csrf-token [32m200[0m 6.882 ms - 80[0m
2025-12-10T09:20:16.9303638Z   console.log
2025-12-10T09:20:16.9304297Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:16.9304757Z 
2025-12-10T09:20:16.9305195Z       at log (server.js:284:17)
2025-12-10T09:20:16.9305490Z 
2025-12-10T09:20:16.9340852Z   console.log
2025-12-10T09:20:16.9341416Z     [LOGIN] Login attempt: {
2025-12-10T09:20:16.9341854Z       username: 'admin',
2025-12-10T09:20:16.9342381Z       sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:16.9342909Z       hasSession: true,
2025-12-10T09:20:16.9343358Z       timestamp: '2025-12-10T09:20:16.932Z'
2025-12-10T09:20:16.9343752Z     }
2025-12-10T09:20:16.9343919Z 
2025-12-10T09:20:16.9344099Z       at log (routes/api.js:15:13)
2025-12-10T09:20:16.9344382Z 
2025-12-10T09:20:16.9398528Z   console.error
2025-12-10T09:20:16.9400217Z     Error loading users: [Error: ENOENT: no such file or directory, open '/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/config/users.json'] {
2025-12-10T09:20:16.9401290Z       errno: -2,
2025-12-10T09:20:16.9401624Z       code: 'ENOENT',
2025-12-10T09:20:16.9401978Z       syscall: 'open',
2025-12-10T09:20:16.9402777Z       path: '/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/config/users.json'
2025-12-10T09:20:16.9403553Z     }
2025-12-10T09:20:16.9403731Z 
2025-12-10T09:20:16.9404479Z     [0m [90m 16 |[39m         [36mreturn[39m [33mJSON[39m[33m.[39mparse(data)[33m;[39m
2025-12-10T09:20:16.9405339Z      [90m 17 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:16.9406475Z     [31m[1m>[22m[39m[90m 18 |[39m         console[33m.[39merror([32m'Error loading users:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:16.9407738Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:16.9408286Z      [90m 19 |[39m         
2025-12-10T09:20:16.9408986Z      [90m 20 |[39m         [90m// Require ADMIN_PASSWORD to be set[39m
2025-12-10T09:20:16.9411089Z      [90m 21 |[39m         [36mif[39m ([33m![39mprocess[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m||[39m process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m===[39m [32m'change-this-secure-password'[39m) {[0m
2025-12-10T09:20:16.9412326Z 
2025-12-10T09:20:16.9412529Z       at error (auth/auth.js:18:17)
2025-12-10T09:20:16.9413027Z       at verifyCredentials (auth/auth.js:55:22)
2025-12-10T09:20:16.9413483Z       at routes/api.js:39:22
2025-12-10T09:20:16.9413734Z 
2025-12-10T09:20:16.9413884Z   console.log
2025-12-10T09:20:16.9414212Z     [Audit] Event logged: {
2025-12-10T09:20:16.9414674Z       eventType: 'auth.login.success',
2025-12-10T09:20:16.9415471Z       username: 'admin',
2025-12-10T09:20:16.9416057Z       timestamp: '2025-12-10T09:20:16.938Z'
2025-12-10T09:20:16.9416467Z     }
2025-12-10T09:20:16.9416626Z 
2025-12-10T09:20:16.9416829Z       at log (services/auditLog.js:106:17)
2025-12-10T09:20:16.9417134Z 
2025-12-10T09:20:16.9419460Z   console.log
2025-12-10T09:20:16.9420680Z     [LOGIN] Login successful: {
2025-12-10T09:20:16.9421084Z       username: 'admin',
2025-12-10T09:20:16.9421431Z       role: 'viewer',
2025-12-10T09:20:16.9421806Z       sessionID: '[REDACTED]',
2025-12-10T09:20:16.9422202Z       authenticated: true,
2025-12-10T09:20:16.9422775Z       cookieMaxAge: 86399695,
2025-12-10T09:20:16.9423236Z       cookieExpires: 2025-12-11T09:20:16.636Z
2025-12-10T09:20:16.9423652Z     }
2025-12-10T09:20:16.9423802Z 
2025-12-10T09:20:16.9424112Z       at Immediate.log [as _onImmediate] (routes/api.js:64:25)
2025-12-10T09:20:16.9424489Z 
2025-12-10T09:20:16.9434011Z   console.log
2025-12-10T09:20:16.9434633Z     === API DEBUG LOG ===
2025-12-10T09:20:16.9434919Z 
2025-12-10T09:20:16.9435343Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:16.9435812Z 
2025-12-10T09:20:16.9435955Z   console.log
2025-12-10T09:20:16.9436289Z     POST /login - 200 (305ms)
2025-12-10T09:20:16.9436558Z 
2025-12-10T09:20:16.9436948Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:16.9437412Z 
2025-12-10T09:20:16.9444460Z   console.log
2025-12-10T09:20:16.9445458Z     Session: { id: 'MoCUYGLNfRwo...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:16.9446239Z 
2025-12-10T09:20:16.9446891Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:16.9447697Z 
2025-12-10T09:20:16.9448242Z   console.log
2025-12-10T09:20:16.9448953Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:16.9449691Z 
2025-12-10T09:20:16.9450089Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:16.9450547Z 
2025-12-10T09:20:16.9450702Z   console.log
2025-12-10T09:20:16.9450999Z     ====================
2025-12-10T09:20:16.9451218Z 
2025-12-10T09:20:16.9451583Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:16.9452010Z 
2025-12-10T09:20:16.9473242Z [0mPOST /api/login [32m200[0m 315.907 ms - 89[0m
2025-12-10T09:20:16.9522876Z   console.log
2025-12-10T09:20:16.9523580Z     [CSRF] Token request: {
2025-12-10T09:20:16.9526078Z       sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:16.9526640Z       authenticated: true,
2025-12-10T09:20:16.9527037Z       username: 'admin',
2025-12-10T09:20:16.9527428Z       hasCookies: true,
2025-12-10T09:20:16.9527870Z       timestamp: '2025-12-10T09:20:16.951Z'
2025-12-10T09:20:16.9528290Z     }
2025-12-10T09:20:16.9528465Z 
2025-12-10T09:20:16.9528651Z       at log (server.js:236:13)
2025-12-10T09:20:16.9528918Z 
2025-12-10T09:20:16.9537260Z   console.log
2025-12-10T09:20:16.9538410Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:16.9540455Z       sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:16.9541253Z       tokenLength: 64,
2025-12-10T09:20:16.9541988Z       tokenPrefix: 'fe8fe77a...',
2025-12-10T09:20:16.9542913Z       cookieName: 'csrf-token',
2025-12-10T09:20:16.9543775Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:16.9545402Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:16.9546433Z     }
2025-12-10T09:20:16.9546836Z 
2025-12-10T09:20:16.9547094Z       at log (server.js:266:13)
2025-12-10T09:20:16.9547381Z 
2025-12-10T09:20:16.9554146Z   console.log
2025-12-10T09:20:16.9554747Z     === API DEBUG LOG ===
2025-12-10T09:20:16.9556136Z 
2025-12-10T09:20:16.9556561Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:16.9557046Z 
2025-12-10T09:20:16.9564938Z   console.log
2025-12-10T09:20:16.9565591Z     GET /api/csrf-token - 200 (3ms)
2025-12-10T09:20:16.9566909Z 
2025-12-10T09:20:16.9567752Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:16.9568568Z 
2025-12-10T09:20:16.9574165Z   console.log
2025-12-10T09:20:16.9575056Z     Session: { id: 'MoCUYGLNfRwo...', authenticated: true, username: 'admin' }
2025-12-10T09:20:16.9575789Z 
2025-12-10T09:20:16.9576478Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:16.9577232Z 
2025-12-10T09:20:16.9585264Z   console.log
2025-12-10T09:20:16.9585973Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:16.9586561Z 
2025-12-10T09:20:16.9587241Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:16.9588087Z 
2025-12-10T09:20:16.9594044Z   console.log
2025-12-10T09:20:16.9594689Z     ====================
2025-12-10T09:20:16.9595673Z 
2025-12-10T09:20:16.9597212Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:16.9597693Z 
2025-12-10T09:20:16.9607585Z [0mGET /api/csrf-token [32m200[0m 9.790 ms - 80[0m
2025-12-10T09:20:16.9644685Z   console.log
2025-12-10T09:20:16.9645384Z     [CSRF] Token request: {
2025-12-10T09:20:16.9646279Z       sessionID: 'ZakRpPtyMVXxXKitPrVQ-e32C4BZXRSa',
2025-12-10T09:20:16.9647187Z       authenticated: false,
2025-12-10T09:20:16.9647865Z       username: 'NOT_SET',
2025-12-10T09:20:16.9648259Z       hasCookies: false,
2025-12-10T09:20:16.9648707Z       timestamp: '2025-12-10T09:20:16.963Z'
2025-12-10T09:20:16.9649124Z     }
2025-12-10T09:20:16.9649424Z 
2025-12-10T09:20:16.9649610Z       at log (server.js:236:13)
2025-12-10T09:20:16.9649868Z 
2025-12-10T09:20:16.9666249Z   console.log
2025-12-10T09:20:16.9666940Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:16.9667832Z       sessionID: 'ZakRpPtyMVXxXKitPrVQ-e32C4BZXRSa',
2025-12-10T09:20:16.9668781Z       tokenLength: 64,
2025-12-10T09:20:16.9669751Z       tokenPrefix: 'e3ee76c0...',
2025-12-10T09:20:16.9670539Z       cookieName: 'csrf-token',
2025-12-10T09:20:16.9671455Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:16.9672724Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:16.9673408Z     }
2025-12-10T09:20:16.9673573Z 
2025-12-10T09:20:16.9673750Z       at log (server.js:266:13)
2025-12-10T09:20:16.9674007Z 
2025-12-10T09:20:16.9674143Z   console.log
2025-12-10T09:20:16.9674464Z     === API DEBUG LOG ===
2025-12-10T09:20:16.9674697Z 
2025-12-10T09:20:16.9675088Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:16.9675572Z 
2025-12-10T09:20:16.9681645Z   console.log
2025-12-10T09:20:16.9682419Z     GET /api/csrf-token - 200 (3ms)
2025-12-10T09:20:16.9683025Z 
2025-12-10T09:20:16.9683785Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:16.9684735Z 
2025-12-10T09:20:16.9692675Z   console.log
2025-12-10T09:20:16.9693598Z     Session: { id: 'ZakRpPtyMVXx...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:16.9694381Z 
2025-12-10T09:20:16.9694988Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:16.9695687Z 
2025-12-10T09:20:16.9701539Z   console.log
2025-12-10T09:20:16.9702267Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:16.9702936Z 
2025-12-10T09:20:16.9703516Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:16.9704007Z 
2025-12-10T09:20:16.9711954Z   console.log
2025-12-10T09:20:16.9712599Z     ====================
2025-12-10T09:20:16.9713141Z 
2025-12-10T09:20:16.9713803Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:16.9714570Z 
2025-12-10T09:20:16.9717382Z [0mGET /api/csrf-token [32m200[0m 8.228 ms - 80[0m
2025-12-10T09:20:16.9753413Z   console.log
2025-12-10T09:20:16.9754122Z     [CSRF] Token request: {
2025-12-10T09:20:16.9754969Z       sessionID: 'Dx_001zmb4yAgUoNKcVasDWY86nLRYI8',
2025-12-10T09:20:16.9756180Z       authenticated: false,
2025-12-10T09:20:16.9757140Z       username: 'NOT_SET',
2025-12-10T09:20:16.9757803Z       hasCookies: false,
2025-12-10T09:20:16.9758250Z       timestamp: '2025-12-10T09:20:16.974Z'
2025-12-10T09:20:16.9758673Z     }
2025-12-10T09:20:16.9758832Z 
2025-12-10T09:20:16.9759007Z       at log (server.js:236:13)
2025-12-10T09:20:16.9759395Z 
2025-12-10T09:20:16.9770767Z   console.log
2025-12-10T09:20:16.9771516Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:16.9772410Z       sessionID: 'Dx_001zmb4yAgUoNKcVasDWY86nLRYI8',
2025-12-10T09:20:16.9773508Z       tokenLength: 64,
2025-12-10T09:20:16.9774210Z       tokenPrefix: '7a75845b...',
2025-12-10T09:20:16.9775753Z       cookieName: 'csrf-token',
2025-12-10T09:20:16.9776477Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:16.9777671Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:16.9778363Z     }
2025-12-10T09:20:16.9778524Z 
2025-12-10T09:20:16.9778708Z       at log (server.js:266:13)
2025-12-10T09:20:16.9778963Z 
2025-12-10T09:20:16.9779098Z   console.log
2025-12-10T09:20:16.9779651Z     === API DEBUG LOG ===
2025-12-10T09:20:16.9779884Z 
2025-12-10T09:20:16.9780266Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:16.9780739Z 
2025-12-10T09:20:16.9787033Z   console.log
2025-12-10T09:20:16.9787750Z     GET /api/csrf-token - 200 (3ms)
2025-12-10T09:20:16.9788352Z 
2025-12-10T09:20:16.9789136Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:16.9790355Z 
2025-12-10T09:20:16.9797830Z   console.log
2025-12-10T09:20:16.9798750Z     Session: { id: 'Dx_001zmb4yA...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:16.9799786Z 
2025-12-10T09:20:16.9800387Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:16.9801185Z 
2025-12-10T09:20:16.9807306Z   console.log
2025-12-10T09:20:16.9808075Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:16.9808711Z 
2025-12-10T09:20:16.9809595Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:16.9810370Z 
2025-12-10T09:20:16.9818059Z   console.log
2025-12-10T09:20:16.9818704Z     ====================
2025-12-10T09:20:16.9819405Z 
2025-12-10T09:20:16.9820855Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:16.9821349Z 
2025-12-10T09:20:16.9828122Z [0mGET /api/csrf-token [32m200[0m 7.956 ms - 80[0m
2025-12-10T09:20:16.9861554Z   console.log
2025-12-10T09:20:16.9862290Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:16.9863910Z 
2025-12-10T09:20:16.9864145Z       at log (server.js:284:17)
2025-12-10T09:20:16.9864424Z 
2025-12-10T09:20:16.9874684Z   console.log
2025-12-10T09:20:16.9875352Z     [LOGIN] Login attempt: {
2025-12-10T09:20:16.9876006Z       username: 'admin',
2025-12-10T09:20:16.9876843Z       sessionID: 'H6oBTUgMWh5X3Bi72Haf9P_UxQKAwNiT',
2025-12-10T09:20:16.9877699Z       hasSession: true,
2025-12-10T09:20:16.9878379Z       timestamp: '2025-12-10T09:20:16.986Z'
2025-12-10T09:20:16.9880568Z     }
2025-12-10T09:20:16.9880753Z 
2025-12-10T09:20:16.9880944Z       at log (routes/api.js:15:13)
2025-12-10T09:20:16.9881236Z 
2025-12-10T09:20:17.0724664Z   console.log
2025-12-10T09:20:17.0725298Z     [LOGIN] Login failed: Invalid credentials for user: admin
2025-12-10T09:20:17.0725703Z 
2025-12-10T09:20:17.0725923Z       at log (routes/api.js:83:21)
2025-12-10T09:20:17.0726189Z 
2025-12-10T09:20:17.0732896Z   console.log
2025-12-10T09:20:17.0733518Z     [Audit] Event logged: {
2025-12-10T09:20:17.0734013Z       eventType: 'auth.login.failure',
2025-12-10T09:20:17.0734462Z       username: 'admin',
2025-12-10T09:20:17.0734887Z       timestamp: '2025-12-10T09:20:17.072Z'
2025-12-10T09:20:17.0735306Z     }
2025-12-10T09:20:17.0735463Z 
2025-12-10T09:20:17.0735681Z       at log (services/auditLog.js:106:17)
2025-12-10T09:20:17.0736431Z 
2025-12-10T09:20:17.0739553Z   console.log
2025-12-10T09:20:17.0740414Z     === API DEBUG LOG ===
2025-12-10T09:20:17.0740713Z 
2025-12-10T09:20:17.0741132Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:17.0741608Z 
2025-12-10T09:20:17.0743936Z   console.log
2025-12-10T09:20:17.0744474Z     POST /login - 401 (88ms)
2025-12-10T09:20:17.0744759Z 
2025-12-10T09:20:17.0745158Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:17.0745638Z 
2025-12-10T09:20:17.0748717Z   console.log
2025-12-10T09:20:17.0750004Z     Session: { id: 'H6oBTUgMWh5X...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:17.0751384Z 
2025-12-10T09:20:17.0751802Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:17.0752284Z 
2025-12-10T09:20:17.0753942Z   console.log
2025-12-10T09:20:17.0754459Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:17.0754835Z 
2025-12-10T09:20:17.0755227Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:17.0755651Z 
2025-12-10T09:20:17.0755974Z   console.log
2025-12-10T09:20:17.0756370Z     ====================
2025-12-10T09:20:17.0756708Z 
2025-12-10T09:20:17.0757290Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:17.0757748Z 
2025-12-10T09:20:17.0763901Z [0mPOST /api/login [33m401[0m 90.908 ms - 31[0m
2025-12-10T09:20:17.0802929Z   console.log
2025-12-10T09:20:17.0803396Z     [CSRF] Skipping CSRF check for session
2025-12-10T09:20:17.0803731Z 
2025-12-10T09:20:17.0803913Z       at log (server.js:289:17)
2025-12-10T09:20:17.0804178Z 
2025-12-10T09:20:17.0814730Z   console.log
2025-12-10T09:20:17.0815122Z     [SESSION] Session check: {
2025-12-10T09:20:17.0815675Z       sessionID: 'KHPTDgzRntYgTi6t7iW3vPdL68kOdR5A',
2025-12-10T09:20:17.0816201Z       authenticated: false,
2025-12-10T09:20:17.0816584Z       username: undefined,
2025-12-10T09:20:17.0816956Z       role: undefined
2025-12-10T09:20:17.0817269Z     }
2025-12-10T09:20:17.0817434Z 
2025-12-10T09:20:17.0817630Z       at log (routes/api.js:131:13)
2025-12-10T09:20:17.0817912Z 
2025-12-10T09:20:17.0826231Z   console.log
2025-12-10T09:20:17.0826704Z     === API DEBUG LOG ===
2025-12-10T09:20:17.0826956Z 
2025-12-10T09:20:17.0827354Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:17.0827832Z 
2025-12-10T09:20:17.0836751Z   console.log
2025-12-10T09:20:17.0837455Z     GET /session - 200 (3ms)
2025-12-10T09:20:17.0838597Z 
2025-12-10T09:20:17.0839066Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:17.0839856Z 
2025-12-10T09:20:17.0847806Z   console.log
2025-12-10T09:20:17.0848445Z     Session: { id: 'KHPTDgzRntYg...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:17.0848970Z 
2025-12-10T09:20:17.0849539Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:17.0850051Z 
2025-12-10T09:20:17.0858284Z   console.log
2025-12-10T09:20:17.0858772Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:17.0859128Z 
2025-12-10T09:20:17.0859689Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:17.0860174Z 
2025-12-10T09:20:17.0867448Z   console.log
2025-12-10T09:20:17.0867913Z     ====================
2025-12-10T09:20:17.0868157Z 
2025-12-10T09:20:17.0868553Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:17.0869037Z 
2025-12-10T09:20:17.0873045Z [0mGET /api/session [32m200[0m 7.834 ms - 23[0m
2025-12-10T09:20:17.0946835Z   console.log
2025-12-10T09:20:17.0947235Z     [CSRF] Token request: {
2025-12-10T09:20:17.0947757Z       sessionID: 'A-F6c3S_znBJA7D4U3VKJffERrBQWyPh',
2025-12-10T09:20:17.0948259Z       authenticated: false,
2025-12-10T09:20:17.0948627Z       username: 'NOT_SET',
2025-12-10T09:20:17.0948991Z       hasCookies: false,
2025-12-10T09:20:17.0949582Z       timestamp: '2025-12-10T09:20:17.092Z'
2025-12-10T09:20:17.0950360Z     }
2025-12-10T09:20:17.0950737Z 
2025-12-10T09:20:17.0950917Z       at log (server.js:236:13)
2025-12-10T09:20:17.0951170Z 
2025-12-10T09:20:17.0953573Z   console.log
2025-12-10T09:20:17.0954002Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:17.0954573Z       sessionID: 'A-F6c3S_znBJA7D4U3VKJffERrBQWyPh',
2025-12-10T09:20:17.0955050Z       tokenLength: 64,
2025-12-10T09:20:17.0955338Z       tokenPrefix: 'cb8c7cb2...',
2025-12-10T09:20:17.0955615Z       cookieName: 'csrf-token',
2025-12-10T09:20:17.0956026Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:17.0956823Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:17.0957201Z     }
2025-12-10T09:20:17.0957303Z 
2025-12-10T09:20:17.0957409Z       at log (server.js:266:13)
2025-12-10T09:20:17.0957566Z 
2025-12-10T09:20:17.0963400Z   console.log
2025-12-10T09:20:17.0963765Z     === API DEBUG LOG ===
2025-12-10T09:20:17.0963999Z 
2025-12-10T09:20:17.0964408Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:17.0964734Z 
2025-12-10T09:20:17.0972452Z   console.log
2025-12-10T09:20:17.0972861Z     GET /api/csrf-token - 200 (4ms)
2025-12-10T09:20:17.0973151Z 
2025-12-10T09:20:17.0973521Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:17.0973967Z 
2025-12-10T09:20:17.0982077Z   console.log
2025-12-10T09:20:17.0982810Z     Session: { id: 'A-F6c3S_znBJ...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:17.0983282Z 
2025-12-10T09:20:17.0983615Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:17.0983893Z 
2025-12-10T09:20:17.0991251Z   console.log
2025-12-10T09:20:17.0992617Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:17.0992956Z 
2025-12-10T09:20:17.0993331Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:17.0993779Z 
2025-12-10T09:20:17.1000121Z   console.log
2025-12-10T09:20:17.1000585Z     ====================
2025-12-10T09:20:17.1000815Z 
2025-12-10T09:20:17.1001180Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:17.1001624Z 
2025-12-10T09:20:17.1005305Z [0mGET /api/csrf-token [32m200[0m 8.031 ms - 80[0m
2025-12-10T09:20:17.1041529Z   console.log
2025-12-10T09:20:17.1042130Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.1042565Z       path: '/logout',
2025-12-10T09:20:17.1042814Z       method: 'POST',
2025-12-10T09:20:17.1043015Z       session: {
2025-12-10T09:20:17.1043293Z         sessionID: 'CkR0WkAvKa4T-s8xhMYW2llXNzReUHcZ',
2025-12-10T09:20:17.1043599Z         authenticated: false,
2025-12-10T09:20:17.1043834Z         username: 'NOT_SET'
2025-12-10T09:20:17.1044030Z       },
2025-12-10T09:20:17.1044372Z       tokens: { headerPresent: false, cookiePresent: false, headerSource: 'NONE' }
2025-12-10T09:20:17.1044737Z     }
2025-12-10T09:20:17.1044830Z 
2025-12-10T09:20:17.1044950Z       at log (server.js:360:13)
2025-12-10T09:20:17.1045101Z 
2025-12-10T09:20:17.1121356Z   console.error
2025-12-10T09:20:17.1121789Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:17.1122208Z       path: '/logout',
2025-12-10T09:20:17.1122551Z       method: 'POST',
2025-12-10T09:20:17.1123368Z       failureReason: 'CSRF token missing from request header (neither CSRF-Token nor X-CSRF-Token present)',
2025-12-10T09:20:17.1123956Z       session: {
2025-12-10T09:20:17.1124249Z         sessionID: 'CkR0WkAvKa4T-s8xhMYW2llXNzReUHcZ',
2025-12-10T09:20:17.1124586Z         authenticated: false,
2025-12-10T09:20:17.1124839Z         username: 'NOT_SET'
2025-12-10T09:20:17.1125068Z       },
2025-12-10T09:20:17.1125249Z       validation: {
2025-12-10T09:20:17.1125497Z         headerTokenPresent: false,
2025-12-10T09:20:17.1125794Z         cookieTokenPresent: false,
2025-12-10T09:20:17.1126058Z         tokensMatch: true,
2025-12-10T09:20:17.1126611Z         sessionAuthenticated: false,
2025-12-10T09:20:17.1127015Z         allCookiesPresent: []
2025-12-10T09:20:17.1127260Z       }
2025-12-10T09:20:17.1127435Z     }
2025-12-10T09:20:17.1127533Z 
2025-12-10T09:20:17.1127816Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:17.1128117Z      [90m 413 |[39m         
2025-12-10T09:20:17.1128817Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:17.1129796Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:17.1130155Z      [90m 415 |[39m         
2025-12-10T09:20:17.1130630Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:17.1131426Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:17.1131932Z 
2025-12-10T09:20:17.1132183Z       at error (server.js:414:17)
2025-12-10T09:20:17.1133106Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.1133932Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:17.1134580Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:17.1135314Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:17.1136070Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:17.1136621Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:17.1137056Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.1137549Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:17.1137921Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:17.1138354Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:17.1151673Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:17.1152482Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:17.1153171Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:17.1153548Z 
2025-12-10T09:20:17.1153689Z   console.log
2025-12-10T09:20:17.1154000Z     === API DEBUG LOG ===
2025-12-10T09:20:17.1154224Z 
2025-12-10T09:20:17.1154594Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:17.1155028Z 
2025-12-10T09:20:17.1155147Z   console.log
2025-12-10T09:20:17.1155455Z     POST /logout - 403 (10ms)
2025-12-10T09:20:17.1155697Z 
2025-12-10T09:20:17.1155922Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:17.1156185Z 
2025-12-10T09:20:17.1156267Z   console.log
2025-12-10T09:20:17.1156619Z     Session: { id: 'CkR0WkAvKa4T...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:17.1157021Z 
2025-12-10T09:20:17.1157460Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:17.1157978Z 
2025-12-10T09:20:17.1158134Z   console.log
2025-12-10T09:20:17.1158567Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:17.1158908Z 
2025-12-10T09:20:17.1159431Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:17.1159869Z 
2025-12-10T09:20:17.1166242Z   console.log
2025-12-10T09:20:17.1166567Z     ====================
2025-12-10T09:20:17.1166790Z 
2025-12-10T09:20:17.1167162Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:17.1167604Z 
2025-12-10T09:20:17.1172054Z [0mPOST /api/logout [33m403[0m 14.227 ms - 102[0m
2025-12-10T09:20:17.1217610Z   console.log
2025-12-10T09:20:17.1218315Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.1218869Z       path: '/logout',
2025-12-10T09:20:17.1219497Z       method: 'POST',
2025-12-10T09:20:17.1219897Z       session: {
2025-12-10T09:20:17.1220441Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.1221296Z         authenticated: true,
2025-12-10T09:20:17.1221859Z         username: 'admin'
2025-12-10T09:20:17.1222091Z       },
2025-12-10T09:20:17.1222440Z       tokens: { headerPresent: false, cookiePresent: true, headerSource: 'NONE' }
2025-12-10T09:20:17.1222799Z     }
2025-12-10T09:20:17.1222898Z 
2025-12-10T09:20:17.1223015Z       at log (server.js:360:13)
2025-12-10T09:20:17.1223175Z 
2025-12-10T09:20:17.1289491Z   console.error
2025-12-10T09:20:17.1289938Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:17.1290362Z       path: '/logout',
2025-12-10T09:20:17.1290693Z       method: 'POST',
2025-12-10T09:20:17.1291488Z       failureReason: 'CSRF token missing from request header (neither CSRF-Token nor X-CSRF-Token present)',
2025-12-10T09:20:17.1292228Z       session: {
2025-12-10T09:20:17.1292663Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.1293149Z         authenticated: true,
2025-12-10T09:20:17.1293519Z         username: 'admin'
2025-12-10T09:20:17.1293858Z       },
2025-12-10T09:20:17.1294148Z       validation: {
2025-12-10T09:20:17.1294527Z         headerTokenPresent: false,
2025-12-10T09:20:17.1294976Z         cookieTokenPresent: true,
2025-12-10T09:20:17.1295232Z         tokensMatch: false,
2025-12-10T09:20:17.1295488Z         sessionAuthenticated: true,
2025-12-10T09:20:17.1295830Z         allCookiesPresent: [ 'connect.sid', 'csrf-token' ]
2025-12-10T09:20:17.1296126Z       }
2025-12-10T09:20:17.1296291Z     }
2025-12-10T09:20:17.1296387Z 
2025-12-10T09:20:17.1296670Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:17.1296967Z      [90m 413 |[39m         
2025-12-10T09:20:17.1297803Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:17.1298607Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:17.1298938Z      [90m 415 |[39m         
2025-12-10T09:20:17.1299809Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:17.1300656Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:17.1301253Z 
2025-12-10T09:20:17.1301439Z       at error (server.js:414:17)
2025-12-10T09:20:17.1302141Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.1302963Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:17.1303603Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:17.1304165Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:17.1304761Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:17.1305162Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:17.1305604Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.1306278Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:17.1306667Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:17.1307265Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:17.1307845Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:17.1308229Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:17.1308600Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:17.1308813Z 
2025-12-10T09:20:17.1308899Z   console.log
2025-12-10T09:20:17.1309134Z     === API DEBUG LOG ===
2025-12-10T09:20:17.1309553Z 
2025-12-10T09:20:17.1309951Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:17.1310437Z 
2025-12-10T09:20:17.1310609Z   console.log
2025-12-10T09:20:17.1310936Z     POST /logout - 403 (9ms)
2025-12-10T09:20:17.1311190Z 
2025-12-10T09:20:17.1311859Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:17.1312477Z 
2025-12-10T09:20:17.1319381Z   console.log
2025-12-10T09:20:17.1320879Z     Session: { id: 'MoCUYGLNfRwo...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.1321314Z 
2025-12-10T09:20:17.1321687Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:17.1322154Z 
2025-12-10T09:20:17.1330573Z   console.log
2025-12-10T09:20:17.1333689Z     CSRF: { header: '[MISSING]', cookie: '[PRESENT]' }
2025-12-10T09:20:17.1334298Z 
2025-12-10T09:20:17.1334912Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:17.1336508Z 
2025-12-10T09:20:17.1336929Z   console.log
2025-12-10T09:20:17.1338393Z     [Audit] Event logged: {
2025-12-10T09:20:17.1338835Z       eventType: 'auth.login.success',
2025-12-10T09:20:17.1339450Z       username: 'admin',
2025-12-10T09:20:17.1339885Z       timestamp: '2025-12-10T09:20:17.130Z'
2025-12-10T09:20:17.1340329Z     }
2025-12-10T09:20:17.1340493Z 
2025-12-10T09:20:17.1340725Z       at log (services/auditLog.js:106:17)
2025-12-10T09:20:17.1341038Z 
2025-12-10T09:20:17.1341177Z   console.log
2025-12-10T09:20:17.1341488Z     ====================
2025-12-10T09:20:17.1343033Z 
2025-12-10T09:20:17.1343451Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:17.1343927Z 
2025-12-10T09:20:17.1344778Z   console.log
2025-12-10T09:20:17.1345353Z     [LOGIN] Login successful: {
2025-12-10T09:20:17.1346191Z       username: 'admin',
2025-12-10T09:20:17.1346933Z       role: 'viewer',
2025-12-10T09:20:17.1347294Z       sessionID: '[REDACTED]',
2025-12-10T09:20:17.1347727Z       authenticated: true,
2025-12-10T09:20:17.1350795Z       cookieMaxAge: 86399796,
2025-12-10T09:20:17.1351298Z       cookieExpires: 2025-12-11T09:20:16.929Z
2025-12-10T09:20:17.1351694Z     }
2025-12-10T09:20:17.1351858Z 
2025-12-10T09:20:17.1352165Z       at Immediate.log [as _onImmediate] (routes/api.js:64:25)
2025-12-10T09:20:17.1352566Z 
2025-12-10T09:20:17.1357919Z   console.log
2025-12-10T09:20:17.1359625Z     === API DEBUG LOG ===
2025-12-10T09:20:17.1359892Z 
2025-12-10T09:20:17.1360410Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:17.1360874Z 
2025-12-10T09:20:17.1361008Z   console.log
2025-12-10T09:20:17.1361330Z     POST /login - 200 (206ms)
2025-12-10T09:20:17.1361583Z 
2025-12-10T09:20:17.1361949Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:17.1362387Z 
2025-12-10T09:20:17.1362519Z   console.log
2025-12-10T09:20:17.1363098Z     Session: { id: 'gc0vkxJHY0Xw...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:17.1363579Z 
2025-12-10T09:20:17.1363946Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:17.1364397Z 
2025-12-10T09:20:17.1364534Z   console.log
2025-12-10T09:20:17.1364961Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:17.1365312Z 
2025-12-10T09:20:17.1365674Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:17.1366110Z 
2025-12-10T09:20:17.1368884Z   console.log
2025-12-10T09:20:17.1369500Z     ====================
2025-12-10T09:20:17.1369811Z 
2025-12-10T09:20:17.1371314Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:17.1371782Z 
2025-12-10T09:20:17.1372342Z [0mPOST /api/logout [33m403[0m 14.124 ms - 102[0m
2025-12-10T09:20:17.1376847Z [0mPOST /api/login [32m200[0m 210.760 ms - 89[0m
2025-12-10T09:20:17.1413037Z   console.log
2025-12-10T09:20:17.1414381Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.1414831Z       path: '/logout',
2025-12-10T09:20:17.1415167Z       method: 'POST',
2025-12-10T09:20:17.1415478Z       session: {
2025-12-10T09:20:17.1415921Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.1416412Z         authenticated: true,
2025-12-10T09:20:17.1416719Z         username: 'admin'
2025-12-10T09:20:17.1417182Z       },
2025-12-10T09:20:17.1417355Z       tokens: {
2025-12-10T09:20:17.1417688Z         headerPresent: true,
2025-12-10T09:20:17.1417931Z         cookiePresent: true,
2025-12-10T09:20:17.1418177Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:17.1418405Z       }
2025-12-10T09:20:17.1418563Z     }
2025-12-10T09:20:17.1418654Z 
2025-12-10T09:20:17.1418767Z       at log (server.js:360:13)
2025-12-10T09:20:17.1418918Z 
2025-12-10T09:20:17.1423550Z   console.log
2025-12-10T09:20:17.1424807Z     [CSRF] Token request: {
2025-12-10T09:20:17.1425574Z       sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.1426085Z       authenticated: true,
2025-12-10T09:20:17.1426448Z       username: 'admin',
2025-12-10T09:20:17.1426765Z       hasCookies: true,
2025-12-10T09:20:17.1427025Z       timestamp: '2025-12-10T09:20:17.141Z'
2025-12-10T09:20:17.1427269Z     }
2025-12-10T09:20:17.1427363Z 
2025-12-10T09:20:17.1427473Z       at log (server.js:236:13)
2025-12-10T09:20:17.1427620Z 
2025-12-10T09:20:17.1433438Z   console.log
2025-12-10T09:20:17.1434796Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:17.1435382Z       sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.1435874Z       tokenLength: 64,
2025-12-10T09:20:17.1436262Z       tokenPrefix: 'ca3d8b7d...',
2025-12-10T09:20:17.1436717Z       cookieName: 'csrf-token',
2025-12-10T09:20:17.1437170Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:17.1437922Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:17.1438304Z     }
2025-12-10T09:20:17.1438399Z 
2025-12-10T09:20:17.1438504Z       at log (server.js:266:13)
2025-12-10T09:20:17.1438662Z 
2025-12-10T09:20:17.1444248Z   console.log
2025-12-10T09:20:17.1444730Z     === API DEBUG LOG ===
2025-12-10T09:20:17.1444961Z 
2025-12-10T09:20:17.1445350Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:17.1445793Z 
2025-12-10T09:20:17.1453478Z   console.log
2025-12-10T09:20:17.1453899Z     GET /api/csrf-token - 200 (3ms)
2025-12-10T09:20:17.1454192Z 
2025-12-10T09:20:17.1454564Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:17.1455005Z 
2025-12-10T09:20:17.1462993Z   console.log
2025-12-10T09:20:17.1463583Z     Session: { id: 'gc0vkxJHY0Xw...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.1464047Z 
2025-12-10T09:20:17.1464288Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:17.1464560Z 
2025-12-10T09:20:17.1472416Z   console.log
2025-12-10T09:20:17.1472992Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:17.1473342Z 
2025-12-10T09:20:17.1473713Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:17.1474157Z 
2025-12-10T09:20:17.1480944Z   console.log
2025-12-10T09:20:17.1481363Z     ====================
2025-12-10T09:20:17.1481714Z 
2025-12-10T09:20:17.1482128Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:17.1482588Z 
2025-12-10T09:20:17.1491491Z [0mGET /api/csrf-token [32m200[0m 8.578 ms - 80[0m
2025-12-10T09:20:17.1495532Z   console.error
2025-12-10T09:20:17.1495950Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:17.1498565Z       path: '/logout',
2025-12-10T09:20:17.1498914Z       method: 'POST',
2025-12-10T09:20:17.1499735Z       failureReason: 'CSRF token mismatch: header token does not match cookie token',
2025-12-10T09:20:17.1500129Z       session: {
2025-12-10T09:20:17.1500407Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.1500704Z         authenticated: true,
2025-12-10T09:20:17.1500932Z         username: 'admin'
2025-12-10T09:20:17.1501147Z       },
2025-12-10T09:20:17.1501321Z       validation: {
2025-12-10T09:20:17.1501543Z         headerTokenPresent: true,
2025-12-10T09:20:17.1501817Z         cookieTokenPresent: true,
2025-12-10T09:20:17.1502059Z         tokensMatch: false,
2025-12-10T09:20:17.1502531Z         sessionAuthenticated: true,
2025-12-10T09:20:17.1502974Z         allCookiesPresent: [ 'connect.sid', 'csrf-token' ]
2025-12-10T09:20:17.1503261Z       }
2025-12-10T09:20:17.1503419Z     }
2025-12-10T09:20:17.1503510Z 
2025-12-10T09:20:17.1503740Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:17.1504025Z      [90m 413 |[39m         
2025-12-10T09:20:17.1504651Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:17.1505235Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:17.1505550Z      [90m 415 |[39m         
2025-12-10T09:20:17.1505975Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:17.1506563Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:17.1507017Z 
2025-12-10T09:20:17.1507236Z       at error (server.js:414:17)
2025-12-10T09:20:17.1508125Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.1508984Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:17.1509791Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:17.1510544Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:17.1511217Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:17.1511565Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:17.1512009Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.1512492Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:17.1512873Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:17.1513309Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:17.1513761Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:17.1514154Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:17.1514533Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:17.1514744Z 
2025-12-10T09:20:17.1514871Z   console.log
2025-12-10T09:20:17.1515060Z     === API DEBUG LOG ===
2025-12-10T09:20:17.1515195Z 
2025-12-10T09:20:17.1515406Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:17.1515667Z 
2025-12-10T09:20:17.1517456Z   console.log
2025-12-10T09:20:17.1517808Z     POST /logout - 403 (10ms)
2025-12-10T09:20:17.1518062Z 
2025-12-10T09:20:17.1518449Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:17.1518743Z 
2025-12-10T09:20:17.1527680Z   console.log
2025-12-10T09:20:17.1528280Z     Session: { id: 'MoCUYGLNfRwo...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.1528758Z 
2025-12-10T09:20:17.1529134Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:17.1529922Z 
2025-12-10T09:20:17.1537568Z   console.log
2025-12-10T09:20:17.1538172Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:17.1538536Z 
2025-12-10T09:20:17.1538951Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:17.1539550Z 
2025-12-10T09:20:17.1539740Z   console.log
2025-12-10T09:20:17.1540294Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.1540762Z       path: '/plugins/install',
2025-12-10T09:20:17.1541138Z       method: 'POST',
2025-12-10T09:20:17.1541460Z       session: {
2025-12-10T09:20:17.1541911Z         sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.1542404Z         authenticated: true,
2025-12-10T09:20:17.1542776Z         username: 'admin'
2025-12-10T09:20:17.1543104Z       },
2025-12-10T09:20:17.1543372Z       tokens: {
2025-12-10T09:20:17.1543681Z         headerPresent: true,
2025-12-10T09:20:17.1544306Z         cookiePresent: true,
2025-12-10T09:20:17.1544881Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:17.1545261Z       }
2025-12-10T09:20:17.1545523Z     }
2025-12-10T09:20:17.1545694Z 
2025-12-10T09:20:17.1545881Z       at log (server.js:360:13)
2025-12-10T09:20:17.1546168Z 
2025-12-10T09:20:17.1547033Z   console.log
2025-12-10T09:20:17.1547435Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:17.1547907Z       path: '/plugins/install',
2025-12-10T09:20:17.1548273Z       method: 'POST',
2025-12-10T09:20:17.1548592Z       session: {
2025-12-10T09:20:17.1549046Z         sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.1549722Z         authenticated: true,
2025-12-10T09:20:17.1550087Z         username: 'admin'
2025-12-10T09:20:17.1550414Z       },
2025-12-10T09:20:17.1550857Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:17.1551220Z     }
2025-12-10T09:20:17.1551317Z 
2025-12-10T09:20:17.1551453Z       at log (server.js:441:13)
2025-12-10T09:20:17.1551600Z 
2025-12-10T09:20:17.1551678Z   console.log
2025-12-10T09:20:17.1551863Z     ====================
2025-12-10T09:20:17.1551993Z 
2025-12-10T09:20:17.1552211Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:17.1552467Z 
2025-12-10T09:20:17.1558998Z [0mPOST /api/logout [33m403[0m 15.648 ms - 102[0m
2025-12-10T09:20:17.1568126Z   console.log
2025-12-10T09:20:17.1568829Z     [AUTH] Authentication check: {
2025-12-10T09:20:17.1569671Z       path: '/install',
2025-12-10T09:20:17.1570023Z       method: 'POST',
2025-12-10T09:20:17.1570492Z       sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.1570985Z       hasSession: true,
2025-12-10T09:20:17.1571329Z       authenticated: true,
2025-12-10T09:20:17.1571691Z       username: 'admin',
2025-12-10T09:20:17.1572025Z       hasCookies: true,
2025-12-10T09:20:17.1572333Z       timestamp: '2025-12-10T09:20:17.155Z'
2025-12-10T09:20:17.1572587Z     }
2025-12-10T09:20:17.1572694Z 
2025-12-10T09:20:17.1572809Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:17.1572971Z 
2025-12-10T09:20:17.1584926Z   console.log
2025-12-10T09:20:17.1585357Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:17.1585687Z 
2025-12-10T09:20:17.1585866Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:17.1586136Z 
2025-12-10T09:20:17.1596195Z   console.log
2025-12-10T09:20:17.1596785Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:17.1597390Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:17.1597850Z       customName: undefined,
2025-12-10T09:20:17.1598272Z       selectedOption: undefined,
2025-12-10T09:20:17.1598785Z       sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.1599468Z       authenticated: true,
2025-12-10T09:20:17.1599831Z       username: 'admin',
2025-12-10T09:20:17.1600161Z       csrf: {
2025-12-10T09:20:17.1600807Z         headerValue: 'ca3d8b7d00b46d80c0cba70f9489642930678a91df6e6ad3e3e9caad1efd0951',
2025-12-10T09:20:17.1601913Z         cookieValue: 'ca3d8b7d00b46d80c0cba70f9489642930678a91df6e6ad3e3e9caad1efd0951',
2025-12-10T09:20:17.1602602Z         headerPresent: true,
2025-12-10T09:20:17.1602981Z         cookiePresent: true
2025-12-10T09:20:17.1603320Z       },
2025-12-10T09:20:17.1603670Z       timestamp: '2025-12-10T09:20:17.158Z'
2025-12-10T09:20:17.1604089Z     }
2025-12-10T09:20:17.1604261Z 
2025-12-10T09:20:17.1604461Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:17.1604750Z 
2025-12-10T09:20:17.1604874Z   console.log
2025-12-10T09:20:17.1605290Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:17.1605855Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:17.1606318Z       status: 'installed',
2025-12-10T09:20:17.1606733Z       pluginName: 'TestPlugin',
2025-12-10T09:20:17.1607107Z       version: '1.0.0'
2025-12-10T09:20:17.1607403Z     }
2025-12-10T09:20:17.1607558Z 
2025-12-10T09:20:17.1607744Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:17.1608310Z 
2025-12-10T09:20:17.1608446Z   console.log
2025-12-10T09:20:17.1608998Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.1609658Z       path: '/commands/history',
2025-12-10T09:20:17.1610076Z       method: 'POST',
2025-12-10T09:20:17.1610416Z       session: {
2025-12-10T09:20:17.1610867Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.1611358Z         authenticated: true,
2025-12-10T09:20:17.1611716Z         username: 'admin'
2025-12-10T09:20:17.1612036Z       },
2025-12-10T09:20:17.1612298Z       tokens: {
2025-12-10T09:20:17.1612606Z         headerPresent: true,
2025-12-10T09:20:17.1612961Z         cookiePresent: true,
2025-12-10T09:20:17.1613369Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:17.1613751Z       }
2025-12-10T09:20:17.1614028Z     }
2025-12-10T09:20:17.1614193Z 
2025-12-10T09:20:17.1614372Z       at log (server.js:360:13)
2025-12-10T09:20:17.1614636Z 
2025-12-10T09:20:17.1614756Z   console.log
2025-12-10T09:20:17.1615080Z     === API DEBUG LOG ===
2025-12-10T09:20:17.1615302Z 
2025-12-10T09:20:17.1615683Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:17.1616124Z 
2025-12-10T09:20:17.1616262Z   console.log
2025-12-10T09:20:17.1616567Z     POST /install - 200 (8ms)
2025-12-10T09:20:17.1616814Z 
2025-12-10T09:20:17.1617164Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:17.1617596Z 
2025-12-10T09:20:17.1617710Z   console.log
2025-12-10T09:20:17.1618061Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:17.1618510Z       path: '/commands/history',
2025-12-10T09:20:17.1618909Z       method: 'POST',
2025-12-10T09:20:17.1619426Z       session: {
2025-12-10T09:20:17.1619870Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.1620346Z         authenticated: true,
2025-12-10T09:20:17.1620700Z         username: 'admin'
2025-12-10T09:20:17.1621020Z       },
2025-12-10T09:20:17.1621583Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:17.1622211Z     }
2025-12-10T09:20:17.1622376Z 
2025-12-10T09:20:17.1622556Z       at log (server.js:441:13)
2025-12-10T09:20:17.1622798Z 
2025-12-10T09:20:17.1622914Z   console.log
2025-12-10T09:20:17.1623451Z     Session: { id: 'gc0vkxJHY0Xw...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.1623896Z 
2025-12-10T09:20:17.1624251Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:17.1624682Z 
2025-12-10T09:20:17.1624818Z   console.log
2025-12-10T09:20:17.1625236Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:17.1625596Z 
2025-12-10T09:20:17.1625854Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:17.1626112Z 
2025-12-10T09:20:17.1626182Z   console.log
2025-12-10T09:20:17.1626446Z     ====================
2025-12-10T09:20:17.1626670Z 
2025-12-10T09:20:17.1626889Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:17.1627154Z 
2025-12-10T09:20:17.1633110Z [0mPOST /api/plugins/install [32m200[0m 11.350 ms - 66[0m
2025-12-10T09:20:17.1637411Z   console.log
2025-12-10T09:20:17.1637820Z     [AUTH] Authentication check: {
2025-12-10T09:20:17.1638231Z       path: '/history',
2025-12-10T09:20:17.1638576Z       method: 'POST',
2025-12-10T09:20:17.1639126Z       sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.1639950Z       hasSession: true,
2025-12-10T09:20:17.1640255Z       authenticated: true,
2025-12-10T09:20:17.1640487Z       username: 'admin',
2025-12-10T09:20:17.1640710Z       hasCookies: true,
2025-12-10T09:20:17.1640961Z       timestamp: '2025-12-10T09:20:17.161Z'
2025-12-10T09:20:17.1641206Z     }
2025-12-10T09:20:17.1641305Z 
2025-12-10T09:20:17.1641414Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:17.1641571Z 
2025-12-10T09:20:17.1655575Z   console.log
2025-12-10T09:20:17.1656028Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:17.1656358Z 
2025-12-10T09:20:17.1656805Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:17.1657076Z 
2025-12-10T09:20:17.1672506Z   console.log
2025-12-10T09:20:17.1672927Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.1673403Z       path: '/plugins/install',
2025-12-10T09:20:17.1673772Z       method: 'POST',
2025-12-10T09:20:17.1674088Z       session: {
2025-12-10T09:20:17.1674531Z         sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.1675026Z         authenticated: true,
2025-12-10T09:20:17.1675391Z         username: 'admin'
2025-12-10T09:20:17.1675638Z       },
2025-12-10T09:20:17.1675987Z       tokens: { headerPresent: false, cookiePresent: true, headerSource: 'NONE' }
2025-12-10T09:20:17.1676341Z     }
2025-12-10T09:20:17.1676436Z 
2025-12-10T09:20:17.1676545Z       at log (server.js:360:13)
2025-12-10T09:20:17.1676699Z 
2025-12-10T09:20:17.1688029Z   console.log
2025-12-10T09:20:17.1688375Z     === API DEBUG LOG ===
2025-12-10T09:20:17.1688616Z 
2025-12-10T09:20:17.1688989Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:17.1689633Z 
2025-12-10T09:20:17.1697121Z   console.log
2025-12-10T09:20:17.1697466Z     POST /history - 200 (9ms)
2025-12-10T09:20:17.1697733Z 
2025-12-10T09:20:17.1698101Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:17.1698537Z 
2025-12-10T09:20:17.1706239Z   console.log
2025-12-10T09:20:17.1706962Z     Session: { id: 'MoCUYGLNfRwo...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.1707419Z 
2025-12-10T09:20:17.1707767Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:17.1708042Z 
2025-12-10T09:20:17.1715001Z   console.log
2025-12-10T09:20:17.1716454Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:17.1716854Z 
2025-12-10T09:20:17.1717220Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:17.1717667Z 
2025-12-10T09:20:17.1723490Z   console.log
2025-12-10T09:20:17.1723958Z     ====================
2025-12-10T09:20:17.1724181Z 
2025-12-10T09:20:17.1724568Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:17.1725015Z 
2025-12-10T09:20:17.1736509Z [0mPOST /api/commands/history [32m200[0m 14.553 ms - 16[0m
2025-12-10T09:20:17.1762450Z   console.error
2025-12-10T09:20:17.1762879Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:17.1763334Z       path: '/plugins/install',
2025-12-10T09:20:17.1763714Z       method: 'POST',
2025-12-10T09:20:17.1764491Z       failureReason: 'CSRF token missing from request header (neither CSRF-Token nor X-CSRF-Token present)',
2025-12-10T09:20:17.1765238Z       session: {
2025-12-10T09:20:17.1765693Z         sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.1766190Z         authenticated: true,
2025-12-10T09:20:17.1766558Z         username: 'admin'
2025-12-10T09:20:17.1766882Z       },
2025-12-10T09:20:17.1767157Z       validation: {
2025-12-10T09:20:17.1767534Z         headerTokenPresent: false,
2025-12-10T09:20:17.1768007Z         cookieTokenPresent: true,
2025-12-10T09:20:17.1768285Z         tokensMatch: false,
2025-12-10T09:20:17.1768552Z         sessionAuthenticated: true,
2025-12-10T09:20:17.1768880Z         allCookiesPresent: [ 'connect.sid', 'csrf-token' ]
2025-12-10T09:20:17.1769325Z       }
2025-12-10T09:20:17.1769489Z     }
2025-12-10T09:20:17.1769582Z 
2025-12-10T09:20:17.1769816Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:17.1770101Z      [90m 413 |[39m         
2025-12-10T09:20:17.1770726Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:17.1771311Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:17.1771630Z      [90m 415 |[39m         
2025-12-10T09:20:17.1772060Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:17.1772643Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:17.1773288Z 
2025-12-10T09:20:17.1773404Z       at error (server.js:414:17)
2025-12-10T09:20:17.1773822Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.1774406Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:17.1775093Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:17.1775872Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:17.1776633Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:17.1777212Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:17.1777946Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.1778769Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:17.1779394Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:17.1780203Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:17.1780994Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:17.1781638Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:17.1782272Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:17.1782631Z 
2025-12-10T09:20:17.1782778Z   console.log
2025-12-10T09:20:17.1783074Z     === API DEBUG LOG ===
2025-12-10T09:20:17.1783297Z 
2025-12-10T09:20:17.1783663Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:17.1784136Z 
2025-12-10T09:20:17.1784270Z   console.log
2025-12-10T09:20:17.1784660Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.1785128Z       path: '/commands/history',
2025-12-10T09:20:17.1785499Z       method: 'POST',
2025-12-10T09:20:17.1785820Z       session: {
2025-12-10T09:20:17.1786253Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.1786750Z         authenticated: true,
2025-12-10T09:20:17.1787106Z         username: 'admin'
2025-12-10T09:20:17.1787433Z       },
2025-12-10T09:20:17.1787674Z       tokens: {
2025-12-10T09:20:17.1787872Z         headerPresent: true,
2025-12-10T09:20:17.1788086Z         cookiePresent: true,
2025-12-10T09:20:17.1788335Z         headerSource: 'X-CSRF-Token'
2025-12-10T09:20:17.1788682Z       }
2025-12-10T09:20:17.1788972Z     }
2025-12-10T09:20:17.1789379Z 
2025-12-10T09:20:17.1789600Z       at log (server.js:360:13)
2025-12-10T09:20:17.1789865Z 
2025-12-10T09:20:17.1790005Z   console.log
2025-12-10T09:20:17.1790371Z     POST /plugins/install - 403 (11ms)
2025-12-10T09:20:17.1790659Z 
2025-12-10T09:20:17.1791018Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:17.1791459Z 
2025-12-10T09:20:17.1791585Z   console.log
2025-12-10T09:20:17.1791935Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:17.1792380Z       path: '/commands/history',
2025-12-10T09:20:17.1792748Z       method: 'POST',
2025-12-10T09:20:17.1793070Z       session: {
2025-12-10T09:20:17.1793503Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.1794019Z         authenticated: true,
2025-12-10T09:20:17.1794394Z         username: 'admin'
2025-12-10T09:20:17.1794717Z       },
2025-12-10T09:20:17.1795266Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:17.1795838Z     }
2025-12-10T09:20:17.1795990Z 
2025-12-10T09:20:17.1796158Z       at log (server.js:441:13)
2025-12-10T09:20:17.1796400Z 
2025-12-10T09:20:17.1796525Z   console.log
2025-12-10T09:20:17.1797057Z     Session: { id: 'gc0vkxJHY0Xw...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.1797478Z 
2025-12-10T09:20:17.1797698Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:17.1797953Z 
2025-12-10T09:20:17.1803305Z   console.log
2025-12-10T09:20:17.1803916Z     CSRF: { header: '[MISSING]', cookie: '[PRESENT]' }
2025-12-10T09:20:17.1804528Z 
2025-12-10T09:20:17.1805066Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:17.1805522Z 
2025-12-10T09:20:17.1809511Z   console.log
2025-12-10T09:20:17.1809924Z     [AUTH] Authentication check: {
2025-12-10T09:20:17.1810346Z       path: '/history',
2025-12-10T09:20:17.1810680Z       method: 'POST',
2025-12-10T09:20:17.1811097Z       sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.1811593Z       hasSession: true,
2025-12-10T09:20:17.1811984Z       authenticated: true,
2025-12-10T09:20:17.1812367Z       username: 'admin',
2025-12-10T09:20:17.1812719Z       hasCookies: true,
2025-12-10T09:20:17.1813142Z       timestamp: '2025-12-10T09:20:17.179Z'
2025-12-10T09:20:17.1813542Z     }
2025-12-10T09:20:17.1813692Z 
2025-12-10T09:20:17.1813875Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:17.1814129Z 
2025-12-10T09:20:17.1814268Z   console.log
2025-12-10T09:20:17.1814571Z     ====================
2025-12-10T09:20:17.1814777Z 
2025-12-10T09:20:17.1815149Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:17.1815604Z 
2025-12-10T09:20:17.1825646Z   console.log
2025-12-10T09:20:17.1826130Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:17.1826476Z 
2025-12-10T09:20:17.1826679Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:17.1826959Z 
2025-12-10T09:20:17.1843364Z   console.log
2025-12-10T09:20:17.1846615Z     === API DEBUG LOG ===
2025-12-10T09:20:17.1847364Z 
2025-12-10T09:20:17.1848842Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:17.1849476Z 
2025-12-10T09:20:17.1849614Z   console.log
2025-12-10T09:20:17.1849940Z     POST /history - 200 (7ms)
2025-12-10T09:20:17.1850193Z 
2025-12-10T09:20:17.1850478Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:17.1850745Z 
2025-12-10T09:20:17.1854514Z   console.log
2025-12-10T09:20:17.1855143Z     Session: { id: 'MoCUYGLNfRwo...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.1855613Z 
2025-12-10T09:20:17.1855982Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:17.1856423Z 
2025-12-10T09:20:17.1857644Z [0mPOST /api/plugins/install [33m403[0m 16.395 ms - 102[0m
2025-12-10T09:20:17.1863704Z   console.log
2025-12-10T09:20:17.1864159Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:17.1864504Z 
2025-12-10T09:20:17.1864876Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:17.1865322Z 
2025-12-10T09:20:17.1872341Z   console.log
2025-12-10T09:20:17.1872682Z     ====================
2025-12-10T09:20:17.1872904Z 
2025-12-10T09:20:17.1873281Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:17.1873774Z 
2025-12-10T09:20:17.1886255Z [0mPOST /api/commands/history [32m200[0m 11.917 ms - 16[0m
2025-12-10T09:20:17.1901360Z   console.log
2025-12-10T09:20:17.1901838Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.1902336Z       path: '/plugins/install',
2025-12-10T09:20:17.1902711Z       method: 'POST',
2025-12-10T09:20:17.1903050Z       session: {
2025-12-10T09:20:17.1903494Z         sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.1903997Z         authenticated: true,
2025-12-10T09:20:17.1904378Z         username: 'admin'
2025-12-10T09:20:17.1904721Z       },
2025-12-10T09:20:17.1905011Z       tokens: {
2025-12-10T09:20:17.1905342Z         headerPresent: true,
2025-12-10T09:20:17.1905745Z         cookiePresent: false,
2025-12-10T09:20:17.1906154Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:17.1906531Z       }
2025-12-10T09:20:17.1906799Z     }
2025-12-10T09:20:17.1906989Z 
2025-12-10T09:20:17.1907174Z       at log (server.js:360:13)
2025-12-10T09:20:17.1907424Z 
2025-12-10T09:20:17.1953339Z   console.log
2025-12-10T09:20:17.1953983Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.1954470Z       path: '/commands/history',
2025-12-10T09:20:17.1955217Z       method: 'POST',
2025-12-10T09:20:17.1955708Z       session: {
2025-12-10T09:20:17.1956155Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.1956634Z         authenticated: true,
2025-12-10T09:20:17.1957010Z         username: 'admin'
2025-12-10T09:20:17.1957332Z       },
2025-12-10T09:20:17.1957603Z       tokens: {
2025-12-10T09:20:17.1957912Z         headerPresent: true,
2025-12-10T09:20:17.1958289Z         cookiePresent: true,
2025-12-10T09:20:17.1958700Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:17.1959080Z       }
2025-12-10T09:20:17.1959515Z     }
2025-12-10T09:20:17.1959674Z 
2025-12-10T09:20:17.1960051Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.1960495Z 
2025-12-10T09:20:17.1960614Z   console.log
2025-12-10T09:20:17.1960981Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:17.1961434Z       path: '/commands/history',
2025-12-10T09:20:17.1961810Z       method: 'POST',
2025-12-10T09:20:17.1962141Z       session: {
2025-12-10T09:20:17.1962578Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.1963074Z         authenticated: true,
2025-12-10T09:20:17.1963439Z         username: 'admin'
2025-12-10T09:20:17.1963823Z       },
2025-12-10T09:20:17.1964392Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:17.1966208Z     }
2025-12-10T09:20:17.1966422Z 
2025-12-10T09:20:17.1966838Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.1967303Z 
2025-12-10T09:20:17.1967957Z   console.log
2025-12-10T09:20:17.1968321Z     [AUTH] Authentication check: {
2025-12-10T09:20:17.1968736Z       path: '/history',
2025-12-10T09:20:17.1969078Z       method: 'POST',
2025-12-10T09:20:17.1969741Z       sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.1970222Z       hasSession: true,
2025-12-10T09:20:17.1970574Z       authenticated: true,
2025-12-10T09:20:17.1970950Z       username: 'admin',
2025-12-10T09:20:17.1971295Z       hasCookies: true,
2025-12-10T09:20:17.1971699Z       timestamp: '2025-12-10T09:20:17.194Z'
2025-12-10T09:20:17.1972114Z     }
2025-12-10T09:20:17.1972271Z 
2025-12-10T09:20:17.1972651Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.1973104Z 
2025-12-10T09:20:17.1980506Z   console.error
2025-12-10T09:20:17.1981201Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:17.1982562Z       path: '/plugins/install',
2025-12-10T09:20:17.1982961Z       method: 'POST',
2025-12-10T09:20:17.1983507Z       failureReason: 'CSRF cookie missing from request',
2025-12-10T09:20:17.1983987Z       session: {
2025-12-10T09:20:17.1984451Z         sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.1984970Z         authenticated: true,
2025-12-10T09:20:17.1985352Z         username: 'admin'
2025-12-10T09:20:17.1985679Z       },
2025-12-10T09:20:17.1985963Z       validation: {
2025-12-10T09:20:17.1986353Z         headerTokenPresent: true,
2025-12-10T09:20:17.1986818Z         cookieTokenPresent: false,
2025-12-10T09:20:17.1987227Z         tokensMatch: false,
2025-12-10T09:20:17.1987655Z         sessionAuthenticated: true,
2025-12-10T09:20:17.1988147Z         allCookiesPresent: [ 'connect.sid' ]
2025-12-10T09:20:17.1988564Z       }
2025-12-10T09:20:17.1988822Z     }
2025-12-10T09:20:17.1988974Z 
2025-12-10T09:20:17.1989540Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:17.1990056Z      [90m 413 |[39m         
2025-12-10T09:20:17.1991145Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:17.1992105Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:17.1992616Z      [90m 415 |[39m         
2025-12-10T09:20:17.1993329Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:17.1994359Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:17.1995296Z 
2025-12-10T09:20:17.1995493Z       at error (server.js:414:17)
2025-12-10T09:20:17.1996198Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.1997055Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:17.1997713Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:17.1998485Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:17.1999464Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:17.2000079Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:17.2000826Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.2001663Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:17.2002320Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:17.2003093Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:17.2003874Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:17.2004541Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:17.2005191Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:17.2005575Z 
2025-12-10T09:20:17.2007319Z   console.log
2025-12-10T09:20:17.2007803Z     === API DEBUG LOG ===
2025-12-10T09:20:17.2008060Z 
2025-12-10T09:20:17.2008442Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:17.2008896Z 
2025-12-10T09:20:17.2009019Z   console.log
2025-12-10T09:20:17.2009552Z     POST /plugins/install - 403 (11ms)
2025-12-10T09:20:17.2009847Z 
2025-12-10T09:20:17.2010240Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:17.2010714Z 
2025-12-10T09:20:17.2010860Z   console.log
2025-12-10T09:20:17.2011265Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:17.2011596Z 
2025-12-10T09:20:17.2011964Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2012420Z 
2025-12-10T09:20:17.2012554Z   console.log
2025-12-10T09:20:17.2012904Z     === API DEBUG LOG ===
2025-12-10T09:20:17.2013134Z 
2025-12-10T09:20:17.2013522Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2013962Z 
2025-12-10T09:20:17.2014080Z   console.log
2025-12-10T09:20:17.2014624Z     Session: { id: 'gc0vkxJHY0Xw...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.2015074Z 
2025-12-10T09:20:17.2015432Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:17.2015880Z 
2025-12-10T09:20:17.2016060Z   console.log
2025-12-10T09:20:17.2016371Z     POST /history - 200 (9ms)
2025-12-10T09:20:17.2016620Z 
2025-12-10T09:20:17.2016981Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2017426Z 
2025-12-10T09:20:17.2021635Z   console.log
2025-12-10T09:20:17.2022123Z     CSRF: { header: '[PRESENT]', cookie: '[MISSING]' }
2025-12-10T09:20:17.2022486Z 
2025-12-10T09:20:17.2022873Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:17.2023343Z 
2025-12-10T09:20:17.2024465Z   console.log
2025-12-10T09:20:17.2025437Z     Session: { id: 'MoCUYGLNfRwo...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.2026079Z 
2025-12-10T09:20:17.2026625Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2027246Z 
2025-12-10T09:20:17.2031561Z   console.log
2025-12-10T09:20:17.2033304Z     ====================
2025-12-10T09:20:17.2034404Z 
2025-12-10T09:20:17.2037227Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:17.2037737Z 
2025-12-10T09:20:17.2037886Z   console.log
2025-12-10T09:20:17.2038342Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:17.2038955Z 
2025-12-10T09:20:17.2039713Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2040194Z 
2025-12-10T09:20:17.2042089Z [0mPOST /api/plugins/install [33m403[0m 15.238 ms - 102[0m
2025-12-10T09:20:17.2047559Z   console.log
2025-12-10T09:20:17.2047892Z     ====================
2025-12-10T09:20:17.2048118Z 
2025-12-10T09:20:17.2052093Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2052578Z 
2025-12-10T09:20:17.2078838Z [0mPOST /api/commands/history [32m200[0m 13.927 ms - 16[0m
2025-12-10T09:20:17.2084664Z   console.log
2025-12-10T09:20:17.2085088Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.2085592Z       path: '/plugins/install',
2025-12-10T09:20:17.2085985Z       method: 'POST',
2025-12-10T09:20:17.2086334Z       session: {
2025-12-10T09:20:17.2086788Z         sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.2087320Z         authenticated: true,
2025-12-10T09:20:17.2087700Z         username: 'admin'
2025-12-10T09:20:17.2088026Z       },
2025-12-10T09:20:17.2088285Z       tokens: {
2025-12-10T09:20:17.2088596Z         headerPresent: true,
2025-12-10T09:20:17.2088965Z         cookiePresent: true,
2025-12-10T09:20:17.2089675Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:17.2090054Z       }
2025-12-10T09:20:17.2090309Z     }
2025-12-10T09:20:17.2090458Z 
2025-12-10T09:20:17.2090638Z       at log (server.js:360:13)
2025-12-10T09:20:17.2090877Z 
2025-12-10T09:20:17.2117785Z   console.log
2025-12-10T09:20:17.2118212Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.2118638Z       path: '/logout',
2025-12-10T09:20:17.2118970Z       method: 'POST',
2025-12-10T09:20:17.2119443Z       session: {
2025-12-10T09:20:17.2119880Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.2120355Z         authenticated: true,
2025-12-10T09:20:17.2120722Z         username: 'admin'
2025-12-10T09:20:17.2121061Z       },
2025-12-10T09:20:17.2121337Z       tokens: {
2025-12-10T09:20:17.2121596Z         headerPresent: true,
2025-12-10T09:20:17.2121837Z         cookiePresent: true,
2025-12-10T09:20:17.2122104Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:17.2122338Z       }
2025-12-10T09:20:17.2122491Z     }
2025-12-10T09:20:17.2122593Z 
2025-12-10T09:20:17.2122696Z       at log (server.js:360:13)
2025-12-10T09:20:17.2122850Z 
2025-12-10T09:20:17.2162552Z   console.error
2025-12-10T09:20:17.2162979Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:17.2163460Z       path: '/plugins/install',
2025-12-10T09:20:17.2163839Z       method: 'POST',
2025-12-10T09:20:17.2164465Z       failureReason: 'CSRF token mismatch: header token does not match cookie token',
2025-12-10T09:20:17.2165078Z       session: {
2025-12-10T09:20:17.2165522Z         sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.2166004Z         authenticated: true,
2025-12-10T09:20:17.2166368Z         username: 'admin'
2025-12-10T09:20:17.2166700Z       },
2025-12-10T09:20:17.2166972Z       validation: {
2025-12-10T09:20:17.2167332Z         headerTokenPresent: true,
2025-12-10T09:20:17.2167766Z         cookieTokenPresent: true,
2025-12-10T09:20:17.2168126Z         tokensMatch: false,
2025-12-10T09:20:17.2168376Z         sessionAuthenticated: true,
2025-12-10T09:20:17.2168700Z         allCookiesPresent: [ 'connect.sid', 'csrf-token' ]
2025-12-10T09:20:17.2168981Z       }
2025-12-10T09:20:17.2169139Z     }
2025-12-10T09:20:17.2169471Z 
2025-12-10T09:20:17.2169707Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:17.2169986Z      [90m 413 |[39m         
2025-12-10T09:20:17.2170606Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:17.2171179Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:17.2171483Z      [90m 415 |[39m         
2025-12-10T09:20:17.2171898Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:17.2173070Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:17.2173604Z 
2025-12-10T09:20:17.2173807Z       at error (server.js:414:17)
2025-12-10T09:20:17.2174509Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.2175354Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:17.2175999Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:17.2176739Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:17.2177364Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:17.2177729Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:17.2178172Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.2178669Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:17.2179056Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:17.2179624Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:17.2180073Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:17.2180453Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:17.2180846Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:17.2181059Z 
2025-12-10T09:20:17.2181156Z   console.log
2025-12-10T09:20:17.2181395Z     === API DEBUG LOG ===
2025-12-10T09:20:17.2181635Z 
2025-12-10T09:20:17.2182015Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:17.2182486Z 
2025-12-10T09:20:17.2182619Z   console.log
2025-12-10T09:20:17.2182990Z     POST /plugins/install - 403 (10ms)
2025-12-10T09:20:17.2183290Z 
2025-12-10T09:20:17.2183654Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:17.2184094Z 
2025-12-10T09:20:17.2190146Z   console.log
2025-12-10T09:20:17.2190743Z     Session: { id: 'gc0vkxJHY0Xw...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.2191194Z 
2025-12-10T09:20:17.2191542Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:17.2191817Z 
2025-12-10T09:20:17.2198002Z   console.error
2025-12-10T09:20:17.2198417Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:17.2198852Z       path: '/logout',
2025-12-10T09:20:17.2199364Z       method: 'POST',
2025-12-10T09:20:17.2200037Z       failureReason: 'CSRF token mismatch: header token does not match cookie token',
2025-12-10T09:20:17.2200670Z       session: {
2025-12-10T09:20:17.2201219Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.2201960Z         authenticated: true,
2025-12-10T09:20:17.2216493Z         username: 'admin'
2025-12-10T09:20:17.2216924Z       },
2025-12-10T09:20:17.2217237Z       validation: {
2025-12-10T09:20:17.2217631Z         headerTokenPresent: true,
2025-12-10T09:20:17.2218108Z         cookieTokenPresent: true,
2025-12-10T09:20:17.2218507Z         tokensMatch: false,
2025-12-10T09:20:17.2218918Z         sessionAuthenticated: true,
2025-12-10T09:20:17.2219664Z         allCookiesPresent: [ 'connect.sid', 'csrf-token' ]
2025-12-10T09:20:17.2220176Z       }
2025-12-10T09:20:17.2220444Z     }
2025-12-10T09:20:17.2220598Z 
2025-12-10T09:20:17.2220920Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:17.2221392Z      [90m 413 |[39m         
2025-12-10T09:20:17.2222446Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:17.2223399Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:17.2223927Z      [90m 415 |[39m         
2025-12-10T09:20:17.2224384Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:17.2225335Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:17.2225626Z 
2025-12-10T09:20:17.2225860Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2226226Z       at error (server.js:414:17)
2025-12-10T09:20:17.2226639Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.2227124Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:17.2227504Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:17.2227947Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:17.2228703Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:17.2229517Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:17.2230277Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.2231174Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:17.2231798Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:17.2232251Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:17.2232708Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:17.2233114Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:17.2233510Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:17.2233728Z 
2025-12-10T09:20:17.2233814Z   console.log
2025-12-10T09:20:17.2234073Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:17.2234279Z 
2025-12-10T09:20:17.2234495Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:17.2234755Z 
2025-12-10T09:20:17.2234847Z   console.log
2025-12-10T09:20:17.2235043Z     ====================
2025-12-10T09:20:17.2235175Z 
2025-12-10T09:20:17.2235394Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:17.2235649Z 
2025-12-10T09:20:17.2235723Z   console.log
2025-12-10T09:20:17.2235915Z     === API DEBUG LOG ===
2025-12-10T09:20:17.2236052Z 
2025-12-10T09:20:17.2236261Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:17.2236509Z 
2025-12-10T09:20:17.2236590Z   console.log
2025-12-10T09:20:17.2236778Z     POST /logout - 403 (10ms)
2025-12-10T09:20:17.2236923Z 
2025-12-10T09:20:17.2237127Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:17.2237380Z 
2025-12-10T09:20:17.2237710Z [0mPOST /api/plugins/install [33m403[0m 14.982 ms - 102[0m
2025-12-10T09:20:17.2238216Z   console.log
2025-12-10T09:20:17.2238814Z     Session: { id: 'MoCUYGLNfRwo...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.2239449Z 
2025-12-10T09:20:17.2239825Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:17.2240269Z 
2025-12-10T09:20:17.2240409Z   console.log
2025-12-10T09:20:17.2240820Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:17.2241158Z 
2025-12-10T09:20:17.2241508Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:17.2241943Z 
2025-12-10T09:20:17.2248745Z   console.log
2025-12-10T09:20:17.2249067Z     ====================
2025-12-10T09:20:17.2249447Z 
2025-12-10T09:20:17.2249827Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:17.2250265Z 
2025-12-10T09:20:17.2261850Z [0mPOST /api/logout [33m403[0m 15.589 ms - 102[0m
2025-12-10T09:20:17.2265344Z   console.log
2025-12-10T09:20:17.2265771Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.2266243Z       path: '/plugins/install',
2025-12-10T09:20:17.2266632Z       method: 'POST',
2025-12-10T09:20:17.2266955Z       session: {
2025-12-10T09:20:17.2267411Z         sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.2268165Z         authenticated: true,
2025-12-10T09:20:17.2268782Z         username: 'admin'
2025-12-10T09:20:17.2269066Z       },
2025-12-10T09:20:17.2269478Z       tokens: {
2025-12-10T09:20:17.2269673Z         headerPresent: true,
2025-12-10T09:20:17.2269912Z         cookiePresent: true,
2025-12-10T09:20:17.2270168Z         headerSource: 'X-CSRF-Token'
2025-12-10T09:20:17.2270402Z       }
2025-12-10T09:20:17.2270555Z     }
2025-12-10T09:20:17.2270650Z 
2025-12-10T09:20:17.2270755Z       at log (server.js:360:13)
2025-12-10T09:20:17.2270908Z 
2025-12-10T09:20:17.2274312Z   console.log
2025-12-10T09:20:17.2274721Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:17.2275198Z       path: '/plugins/install',
2025-12-10T09:20:17.2275575Z       method: 'POST',
2025-12-10T09:20:17.2275896Z       session: {
2025-12-10T09:20:17.2276346Z         sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.2276848Z         authenticated: true,
2025-12-10T09:20:17.2277226Z         username: 'admin'
2025-12-10T09:20:17.2277558Z       },
2025-12-10T09:20:17.2278120Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:17.2278494Z     }
2025-12-10T09:20:17.2278591Z 
2025-12-10T09:20:17.2278707Z       at log (server.js:441:13)
2025-12-10T09:20:17.2278856Z 
2025-12-10T09:20:17.2297309Z   console.log
2025-12-10T09:20:17.2297717Z     [AUTH] Authentication check: {
2025-12-10T09:20:17.2298128Z       path: '/install',
2025-12-10T09:20:17.2298469Z       method: 'POST',
2025-12-10T09:20:17.2298927Z       sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.2299742Z       hasSession: true,
2025-12-10T09:20:17.2300096Z       authenticated: true,
2025-12-10T09:20:17.2300462Z       username: 'admin',
2025-12-10T09:20:17.2300708Z       hasCookies: true,
2025-12-10T09:20:17.2300959Z       timestamp: '2025-12-10T09:20:17.227Z'
2025-12-10T09:20:17.2301195Z     }
2025-12-10T09:20:17.2301285Z 
2025-12-10T09:20:17.2301409Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:17.2301577Z 
2025-12-10T09:20:17.2307790Z   console.log
2025-12-10T09:20:17.2308218Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.2308689Z       path: '/commands/history',
2025-12-10T09:20:17.2309072Z       method: 'POST',
2025-12-10T09:20:17.2309577Z       session: {
2025-12-10T09:20:17.2310015Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.2310496Z         authenticated: true,
2025-12-10T09:20:17.2310867Z         username: 'admin'
2025-12-10T09:20:17.2311154Z       },
2025-12-10T09:20:17.2311325Z       tokens: {
2025-12-10T09:20:17.2311516Z         headerPresent: true,
2025-12-10T09:20:17.2311739Z         cookiePresent: true,
2025-12-10T09:20:17.2312005Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:17.2312233Z       }
2025-12-10T09:20:17.2312387Z     }
2025-12-10T09:20:17.2312486Z 
2025-12-10T09:20:17.2312711Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2312993Z 
2025-12-10T09:20:17.2313900Z   console.log
2025-12-10T09:20:17.2314353Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:17.2314681Z 
2025-12-10T09:20:17.2314864Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:17.2315126Z 
2025-12-10T09:20:17.2318710Z   console.log
2025-12-10T09:20:17.2319124Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:17.2319751Z       path: '/commands/history',
2025-12-10T09:20:17.2320144Z       method: 'POST',
2025-12-10T09:20:17.2320351Z       session: {
2025-12-10T09:20:17.2320631Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.2320938Z         authenticated: true,
2025-12-10T09:20:17.2321163Z         username: 'admin'
2025-12-10T09:20:17.2321367Z       },
2025-12-10T09:20:17.2321712Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:17.2322071Z     }
2025-12-10T09:20:17.2322163Z 
2025-12-10T09:20:17.2322385Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2322930Z 
2025-12-10T09:20:17.2327371Z   console.log
2025-12-10T09:20:17.2328072Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:17.2328672Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:17.2329131Z       customName: undefined,
2025-12-10T09:20:17.2329720Z       selectedOption: undefined,
2025-12-10T09:20:17.2330240Z       sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.2330738Z       authenticated: true,
2025-12-10T09:20:17.2331105Z       username: 'admin',
2025-12-10T09:20:17.2331458Z       csrf: {
2025-12-10T09:20:17.2332128Z         headerValue: 'ca3d8b7d00b46d80c0cba70f9489642930678a91df6e6ad3e3e9caad1efd0951',
2025-12-10T09:20:17.2333140Z         cookieValue: 'ca3d8b7d00b46d80c0cba70f9489642930678a91df6e6ad3e3e9caad1efd0951',
2025-12-10T09:20:17.2333812Z         headerPresent: true,
2025-12-10T09:20:17.2334184Z         cookiePresent: true
2025-12-10T09:20:17.2334516Z       },
2025-12-10T09:20:17.2334860Z       timestamp: '2025-12-10T09:20:17.231Z'
2025-12-10T09:20:17.2335267Z     }
2025-12-10T09:20:17.2335392Z 
2025-12-10T09:20:17.2335525Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:17.2335704Z 
2025-12-10T09:20:17.2335796Z   console.log
2025-12-10T09:20:17.2336209Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:17.2336826Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:17.2337290Z       status: 'installed',
2025-12-10T09:20:17.2337690Z       pluginName: 'TestPlugin',
2025-12-10T09:20:17.2338053Z       version: '1.0.0'
2025-12-10T09:20:17.2338365Z     }
2025-12-10T09:20:17.2338545Z 
2025-12-10T09:20:17.2338754Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:17.2339063Z 
2025-12-10T09:20:17.2339426Z   console.log
2025-12-10T09:20:17.2339919Z     === API DEBUG LOG ===
2025-12-10T09:20:17.2340144Z 
2025-12-10T09:20:17.2340507Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:17.2340953Z 
2025-12-10T09:20:17.2341085Z   console.log
2025-12-10T09:20:17.2341438Z     [AUTH] Authentication check: {
2025-12-10T09:20:17.2341897Z       path: '/history',
2025-12-10T09:20:17.2342252Z       method: 'POST',
2025-12-10T09:20:17.2342704Z       sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.2343206Z       hasSession: true,
2025-12-10T09:20:17.2343542Z       authenticated: true,
2025-12-10T09:20:17.2343893Z       username: 'admin',
2025-12-10T09:20:17.2344234Z       hasCookies: true,
2025-12-10T09:20:17.2344617Z       timestamp: '2025-12-10T09:20:17.231Z'
2025-12-10T09:20:17.2345000Z     }
2025-12-10T09:20:17.2345153Z 
2025-12-10T09:20:17.2345511Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2345982Z 
2025-12-10T09:20:17.2346124Z   console.log
2025-12-10T09:20:17.2346600Z     POST /install - 200 (8ms)
2025-12-10T09:20:17.2346848Z 
2025-12-10T09:20:17.2347217Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:17.2347653Z 
2025-12-10T09:20:17.2347779Z   console.log
2025-12-10T09:20:17.2348328Z     Session: { id: 'gc0vkxJHY0Xw...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.2348778Z 
2025-12-10T09:20:17.2349128Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:17.2349735Z 
2025-12-10T09:20:17.2349868Z   console.log
2025-12-10T09:20:17.2350445Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:17.2350790Z 
2025-12-10T09:20:17.2351158Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:17.2351588Z 
2025-12-10T09:20:17.2353316Z   console.log
2025-12-10T09:20:17.2353742Z     ====================
2025-12-10T09:20:17.2353965Z 
2025-12-10T09:20:17.2354326Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:17.2354770Z 
2025-12-10T09:20:17.2358845Z   console.log
2025-12-10T09:20:17.2359436Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:17.2359772Z 
2025-12-10T09:20:17.2360278Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2360677Z 
2025-12-10T09:20:17.2375747Z   console.log
2025-12-10T09:20:17.2376963Z     === API DEBUG LOG ===
2025-12-10T09:20:17.2377209Z 
2025-12-10T09:20:17.2377601Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2378059Z 
2025-12-10T09:20:17.2383366Z   console.log
2025-12-10T09:20:17.2383980Z     POST /history - 200 (8ms)
2025-12-10T09:20:17.2384483Z 
2025-12-10T09:20:17.2386252Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2387481Z 
2025-12-10T09:20:17.2388322Z [0mPOST /api/plugins/install [32m200[0m 11.131 ms - 66[0m
2025-12-10T09:20:17.2398973Z   console.log
2025-12-10T09:20:17.2403615Z     Session: { id: 'MoCUYGLNfRwo...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.2406789Z 
2025-12-10T09:20:17.2407447Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2408791Z 
2025-12-10T09:20:17.2408938Z   console.log
2025-12-10T09:20:17.2409597Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:17.2409949Z 
2025-12-10T09:20:17.2410339Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2410797Z 
2025-12-10T09:20:17.2416794Z   console.log
2025-12-10T09:20:17.2418077Z     ====================
2025-12-10T09:20:17.2418472Z 
2025-12-10T09:20:17.2419074Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2420064Z 
2025-12-10T09:20:17.2428328Z [0mPOST /api/commands/history [32m200[0m 13.581 ms - 16[0m
2025-12-10T09:20:17.2434488Z   console.log
2025-12-10T09:20:17.2435089Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.2436976Z       path: '/plugins/install',
2025-12-10T09:20:17.2437389Z       method: 'POST',
2025-12-10T09:20:17.2437717Z       session: {
2025-12-10T09:20:17.2438179Z         sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.2438719Z         authenticated: true,
2025-12-10T09:20:17.2439102Z         username: 'admin'
2025-12-10T09:20:17.2439633Z       },
2025-12-10T09:20:17.2439915Z       tokens: {
2025-12-10T09:20:17.2440246Z         headerPresent: true,
2025-12-10T09:20:17.2440628Z         cookiePresent: true,
2025-12-10T09:20:17.2441059Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:17.2441448Z       }
2025-12-10T09:20:17.2441709Z     }
2025-12-10T09:20:17.2441863Z 
2025-12-10T09:20:17.2442249Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2442719Z 
2025-12-10T09:20:17.2444496Z   console.log
2025-12-10T09:20:17.2445024Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:17.2445742Z       path: '/plugins/install',
2025-12-10T09:20:17.2446580Z       method: 'POST',
2025-12-10T09:20:17.2446914Z       session: {
2025-12-10T09:20:17.2447363Z         sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.2447860Z         authenticated: true,
2025-12-10T09:20:17.2448236Z         username: 'admin'
2025-12-10T09:20:17.2448558Z       },
2025-12-10T09:20:17.2449123Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:17.2449890Z     }
2025-12-10T09:20:17.2450046Z 
2025-12-10T09:20:17.2450417Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2450871Z 
2025-12-10T09:20:17.2465722Z   console.log
2025-12-10T09:20:17.2466140Z     [AUTH] Authentication check: {
2025-12-10T09:20:17.2466559Z       path: '/install',
2025-12-10T09:20:17.2466885Z       method: 'POST',
2025-12-10T09:20:17.2467346Z       sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.2467833Z       hasSession: true,
2025-12-10T09:20:17.2468173Z       authenticated: true,
2025-12-10T09:20:17.2468518Z       username: 'admin',
2025-12-10T09:20:17.2468855Z       hasCookies: true,
2025-12-10T09:20:17.2469459Z       timestamp: '2025-12-10T09:20:17.244Z'
2025-12-10T09:20:17.2469729Z     }
2025-12-10T09:20:17.2470079Z 
2025-12-10T09:20:17.2470472Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2470762Z 
2025-12-10T09:20:17.2476826Z   console.log
2025-12-10T09:20:17.2477258Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.2477754Z       path: '/commands/history',
2025-12-10T09:20:17.2478143Z       method: 'POST',
2025-12-10T09:20:17.2478463Z       session: {
2025-12-10T09:20:17.2478896Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.2479636Z         authenticated: true,
2025-12-10T09:20:17.2480018Z         username: 'admin'
2025-12-10T09:20:17.2480355Z       },
2025-12-10T09:20:17.2480539Z       tokens: {
2025-12-10T09:20:17.2480735Z         headerPresent: true,
2025-12-10T09:20:17.2480962Z         cookiePresent: true,
2025-12-10T09:20:17.2481205Z         headerSource: 'X-CSRF-Token'
2025-12-10T09:20:17.2481441Z       }
2025-12-10T09:20:17.2481600Z     }
2025-12-10T09:20:17.2481692Z 
2025-12-10T09:20:17.2481948Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2482220Z 
2025-12-10T09:20:17.2484507Z   console.log
2025-12-10T09:20:17.2485179Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:17.2485562Z 
2025-12-10T09:20:17.2485952Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2486406Z 
2025-12-10T09:20:17.2488075Z   console.log
2025-12-10T09:20:17.2488507Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:17.2488974Z       path: '/commands/history',
2025-12-10T09:20:17.2489567Z       method: 'POST',
2025-12-10T09:20:17.2489877Z       session: {
2025-12-10T09:20:17.2490313Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.2490796Z         authenticated: true,
2025-12-10T09:20:17.2491162Z         username: 'admin'
2025-12-10T09:20:17.2491496Z       },
2025-12-10T09:20:17.2491863Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:17.2492243Z     }
2025-12-10T09:20:17.2492338Z 
2025-12-10T09:20:17.2492581Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2492842Z 
2025-12-10T09:20:17.2498225Z   console.log
2025-12-10T09:20:17.2499813Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:17.2500395Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:17.2500856Z       customName: undefined,
2025-12-10T09:20:17.2501279Z       selectedOption: undefined,
2025-12-10T09:20:17.2501765Z       sessionID: 'gc0vkxJHY0XwQpLNIPpGYj0djUqkjkPy',
2025-12-10T09:20:17.2502063Z       authenticated: true,
2025-12-10T09:20:17.2502306Z       username: 'admin',
2025-12-10T09:20:17.2502516Z       csrf: {
2025-12-10T09:20:17.2502905Z         headerValue: 'ca3d8b7d00b46d80c0cba70f9489642930678a91df6e6ad3e3e9caad1efd0951',
2025-12-10T09:20:17.2503559Z         cookieValue: 'ca3d8b7d00b46d80c0cba70f9489642930678a91df6e6ad3e3e9caad1efd0951',
2025-12-10T09:20:17.2504298Z         headerPresent: true,
2025-12-10T09:20:17.2504853Z         cookiePresent: true
2025-12-10T09:20:17.2505204Z       },
2025-12-10T09:20:17.2505545Z       timestamp: '2025-12-10T09:20:17.248Z'
2025-12-10T09:20:17.2505937Z     }
2025-12-10T09:20:17.2506090Z 
2025-12-10T09:20:17.2506450Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2506883Z 
2025-12-10T09:20:17.2507021Z   console.log
2025-12-10T09:20:17.2507452Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:17.2508046Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:17.2508508Z       status: 'installed',
2025-12-10T09:20:17.2508909Z       pluginName: 'TestPlugin',
2025-12-10T09:20:17.2509448Z       version: '1.0.0'
2025-12-10T09:20:17.2509749Z     }
2025-12-10T09:20:17.2509904Z 
2025-12-10T09:20:17.2510264Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2510709Z 
2025-12-10T09:20:17.2510838Z   console.log
2025-12-10T09:20:17.2511189Z     [AUTH] Authentication check: {
2025-12-10T09:20:17.2511899Z       path: '/history',
2025-12-10T09:20:17.2512231Z       method: 'POST',
2025-12-10T09:20:17.2512616Z       sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.2513139Z       hasSession: true,
2025-12-10T09:20:17.2513638Z       authenticated: true,
2025-12-10T09:20:17.2514007Z       username: 'admin',
2025-12-10T09:20:17.2514342Z       hasCookies: true,
2025-12-10T09:20:17.2514735Z       timestamp: '2025-12-10T09:20:17.248Z'
2025-12-10T09:20:17.2515121Z     }
2025-12-10T09:20:17.2515269Z 
2025-12-10T09:20:17.2515629Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2516058Z 
2025-12-10T09:20:17.2516185Z   console.log
2025-12-10T09:20:17.2516494Z     === API DEBUG LOG ===
2025-12-10T09:20:17.2516642Z 
2025-12-10T09:20:17.2516856Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2517114Z 
2025-12-10T09:20:17.2519389Z   console.log
2025-12-10T09:20:17.2519803Z     POST /install - 200 (10ms)
2025-12-10T09:20:17.2520060Z 
2025-12-10T09:20:17.2520451Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2520889Z 
2025-12-10T09:20:17.2525352Z   console.log
2025-12-10T09:20:17.2525945Z     Session: { id: 'gc0vkxJHY0Xw...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.2526417Z 
2025-12-10T09:20:17.2526793Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2527236Z 
2025-12-10T09:20:17.2527369Z   console.log
2025-12-10T09:20:17.2527791Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:17.2528113Z 
2025-12-10T09:20:17.2528478Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2528906Z 
2025-12-10T09:20:17.2531603Z   console.log
2025-12-10T09:20:17.2532236Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:17.2532579Z 
2025-12-10T09:20:17.2532859Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2533135Z 
2025-12-10T09:20:17.2536865Z   console.log
2025-12-10T09:20:17.2537353Z     ====================
2025-12-10T09:20:17.2537571Z 
2025-12-10T09:20:17.2537980Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2538421Z 
2025-12-10T09:20:17.2541730Z   console.log
2025-12-10T09:20:17.2542178Z     === API DEBUG LOG ===
2025-12-10T09:20:17.2542564Z 
2025-12-10T09:20:17.2543176Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2543632Z 
2025-12-10T09:20:17.2549323Z [0mPOST /api/plugins/install [32m200[0m 13.369 ms - 66[0m
2025-12-10T09:20:17.2552789Z   console.log
2025-12-10T09:20:17.2553230Z     POST /history - 200 (8ms)
2025-12-10T09:20:17.2553588Z 
2025-12-10T09:20:17.2553960Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2554397Z 
2025-12-10T09:20:17.2563905Z   console.log
2025-12-10T09:20:17.2564542Z     Session: { id: 'MoCUYGLNfRwo...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.2565053Z 
2025-12-10T09:20:17.2565447Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2565888Z 
2025-12-10T09:20:17.2574876Z   console.log
2025-12-10T09:20:17.2575553Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:17.2576378Z 
2025-12-10T09:20:17.2576874Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2577335Z 
2025-12-10T09:20:17.2585119Z   console.log
2025-12-10T09:20:17.2585467Z     ====================
2025-12-10T09:20:17.2585685Z 
2025-12-10T09:20:17.2586060Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2586385Z 
2025-12-10T09:20:17.2597238Z [0mPOST /api/commands/history [32m200[0m 13.504 ms - 16[0m
2025-12-10T09:20:17.2670512Z   console.log
2025-12-10T09:20:17.2671005Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.2671907Z       path: '/logout',
2025-12-10T09:20:17.2672240Z       method: 'POST',
2025-12-10T09:20:17.2672747Z       session: {
2025-12-10T09:20:17.2673194Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.2673621Z         authenticated: true,
2025-12-10T09:20:17.2673863Z         username: 'admin'
2025-12-10T09:20:17.2674070Z       },
2025-12-10T09:20:17.2674243Z       tokens: {
2025-12-10T09:20:17.2674442Z         headerPresent: true,
2025-12-10T09:20:17.2674664Z         cookiePresent: true,
2025-12-10T09:20:17.2674913Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:17.2675141Z       }
2025-12-10T09:20:17.2675297Z     }
2025-12-10T09:20:17.2675388Z 
2025-12-10T09:20:17.2675499Z       at log (server.js:360:13)
2025-12-10T09:20:17.2675507Z 
2025-12-10T09:20:17.2752042Z   console.error
2025-12-10T09:20:17.2752286Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:17.2752431Z       path: '/logout',
2025-12-10T09:20:17.2752577Z       method: 'POST',
2025-12-10T09:20:17.2753052Z       failureReason: 'CSRF token mismatch: header token does not match cookie token',
2025-12-10T09:20:17.2753199Z       session: {
2025-12-10T09:20:17.2753473Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.2753619Z         authenticated: true,
2025-12-10T09:20:17.2753765Z         username: 'admin'
2025-12-10T09:20:17.2753880Z       },
2025-12-10T09:20:17.2754014Z       validation: {
2025-12-10T09:20:17.2754208Z         headerTokenPresent: true,
2025-12-10T09:20:17.2754392Z         cookieTokenPresent: true,
2025-12-10T09:20:17.2754539Z         tokensMatch: false,
2025-12-10T09:20:17.2754730Z         sessionAuthenticated: true,
2025-12-10T09:20:17.2755021Z         allCookiesPresent: [ 'connect.sid', 'csrf-token' ]
2025-12-10T09:20:17.2755138Z       }
2025-12-10T09:20:17.2755257Z     }
2025-12-10T09:20:17.2755270Z 
2025-12-10T09:20:17.2755708Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:17.2755929Z      [90m 413 |[39m         
2025-12-10T09:20:17.2756814Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:17.2757144Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:17.2757385Z      [90m 415 |[39m         
2025-12-10T09:20:17.2757719Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:17.2758087Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:17.2758096Z 
2025-12-10T09:20:17.2758343Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2758469Z       at error (server.js:414:17)
2025-12-10T09:20:17.2758757Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.2758978Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:17.2759141Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:17.2759692Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:17.2759896Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:17.2760051Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:17.2760340Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.2760554Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:17.2760725Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:17.2761003Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:17.2761199Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:17.2761389Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:17.2761582Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:17.2761828Z 
2025-12-10T09:20:17.2763967Z   console.log
2025-12-10T09:20:17.2764427Z     === API DEBUG LOG ===
2025-12-10T09:20:17.2764447Z 
2025-12-10T09:20:17.2764847Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:17.2764860Z 
2025-12-10T09:20:17.2772706Z   console.log
2025-12-10T09:20:17.2772880Z     POST /logout - 403 (14ms)
2025-12-10T09:20:17.2772901Z 
2025-12-10T09:20:17.2773284Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:17.2773295Z 
2025-12-10T09:20:17.2781856Z   console.log
2025-12-10T09:20:17.2782275Z     Session: { id: 'MoCUYGLNfRwo...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.2782287Z 
2025-12-10T09:20:17.2782647Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:17.2782658Z 
2025-12-10T09:20:17.2790883Z   console.log
2025-12-10T09:20:17.2791162Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:17.2791175Z 
2025-12-10T09:20:17.2791568Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:17.2791587Z 
2025-12-10T09:20:17.2799589Z   console.log
2025-12-10T09:20:17.2799754Z     ====================
2025-12-10T09:20:17.2799768Z 
2025-12-10T09:20:17.2800169Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:17.2800182Z 
2025-12-10T09:20:17.2813502Z [0mPOST /api/logout [33m403[0m 18.074 ms - 102[0m
2025-12-10T09:20:17.2858177Z   console.log
2025-12-10T09:20:17.2858430Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.2858620Z       path: '/commands/history',
2025-12-10T09:20:17.2858764Z       method: 'POST',
2025-12-10T09:20:17.2858885Z       session: {
2025-12-10T09:20:17.2859357Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.2859513Z         authenticated: true,
2025-12-10T09:20:17.2859654Z         username: 'admin'
2025-12-10T09:20:17.2859769Z       },
2025-12-10T09:20:17.2860191Z       tokens: { headerPresent: false, cookiePresent: true, headerSource: 'NONE' }
2025-12-10T09:20:17.2860335Z     }
2025-12-10T09:20:17.2860355Z 
2025-12-10T09:20:17.2860524Z       at log (server.js:360:13)
2025-12-10T09:20:17.2860534Z 
2025-12-10T09:20:17.2946356Z   console.error
2025-12-10T09:20:17.2947437Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:17.2947899Z       path: '/commands/history',
2025-12-10T09:20:17.2948238Z       method: 'POST',
2025-12-10T09:20:17.2949006Z       failureReason: 'CSRF token missing from request header (neither CSRF-Token nor X-CSRF-Token present)',
2025-12-10T09:20:17.2949379Z       session: {
2025-12-10T09:20:17.2949727Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.2949928Z         authenticated: true,
2025-12-10T09:20:17.2950097Z         username: 'admin'
2025-12-10T09:20:17.2950250Z       },
2025-12-10T09:20:17.2950407Z       validation: {
2025-12-10T09:20:17.2950647Z         headerTokenPresent: false,
2025-12-10T09:20:17.2950893Z         cookieTokenPresent: true,
2025-12-10T09:20:17.2951098Z         tokensMatch: false,
2025-12-10T09:20:17.2951364Z         sessionAuthenticated: true,
2025-12-10T09:20:17.2951724Z         allCookiesPresent: [ 'connect.sid', 'csrf-token' ]
2025-12-10T09:20:17.2951882Z       }
2025-12-10T09:20:17.2952028Z     }
2025-12-10T09:20:17.2952045Z 
2025-12-10T09:20:17.2952561Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:17.2952855Z      [90m 413 |[39m         
2025-12-10T09:20:17.2954102Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:17.2954511Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:17.2954785Z      [90m 415 |[39m         
2025-12-10T09:20:17.2965323Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:17.2966044Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:17.2966501Z 
2025-12-10T09:20:17.2967148Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.2967366Z       at error (server.js:414:17)
2025-12-10T09:20:17.2967816Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.2968163Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:17.2968448Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:17.2968875Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:17.2969420Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:17.2969661Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:17.2970120Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.2970568Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:17.2970824Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:17.2971274Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:17.2971578Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:17.2971895Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:17.2972194Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:17.2972210Z 
2025-12-10T09:20:17.2972365Z   console.log
2025-12-10T09:20:17.2972519Z     === API DEBUG LOG ===
2025-12-10T09:20:17.2972531Z 
2025-12-10T09:20:17.2972921Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:17.2972935Z 
2025-12-10T09:20:17.2973063Z   console.log
2025-12-10T09:20:17.2973281Z     POST /commands/history - 403 (11ms)
2025-12-10T09:20:17.2973293Z 
2025-12-10T09:20:17.2973685Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:17.2973697Z 
2025-12-10T09:20:17.2984701Z   console.log
2025-12-10T09:20:17.2988471Z     Session: { id: 'MoCUYGLNfRwo...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.2989837Z 
2025-12-10T09:20:17.2990764Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:17.2991113Z 
2025-12-10T09:20:17.2991403Z   console.log
2025-12-10T09:20:17.2991883Z     CSRF: { header: '[MISSING]', cookie: '[PRESENT]' }
2025-12-10T09:20:17.2992071Z 
2025-12-10T09:20:17.2992756Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:17.2993429Z 
2025-12-10T09:20:17.2993776Z   console.log
2025-12-10T09:20:17.2994112Z     ====================
2025-12-10T09:20:17.2994270Z 
2025-12-10T09:20:17.2994919Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:17.2995676Z 
2025-12-10T09:20:17.3002113Z [0mPOST /api/commands/history [33m403[0m 15.409 ms - 102[0m
2025-12-10T09:20:17.3048159Z   console.log
2025-12-10T09:20:17.3049371Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.3051209Z       path: '/commands/history',
2025-12-10T09:20:17.3051362Z       method: 'POST',
2025-12-10T09:20:17.3051493Z       session: {
2025-12-10T09:20:17.3051769Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.3051916Z         authenticated: true,
2025-12-10T09:20:17.3052059Z         username: 'admin'
2025-12-10T09:20:17.3052169Z       },
2025-12-10T09:20:17.3052296Z       tokens: {
2025-12-10T09:20:17.3052434Z         headerPresent: true,
2025-12-10T09:20:17.3052578Z         cookiePresent: true,
2025-12-10T09:20:17.3052760Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:17.3052873Z       }
2025-12-10T09:20:17.3052988Z     }
2025-12-10T09:20:17.3053001Z 
2025-12-10T09:20:17.3053389Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.3053400Z 
2025-12-10T09:20:17.3059405Z   console.log
2025-12-10T09:20:17.3059814Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:17.3060168Z       path: '/commands/history',
2025-12-10T09:20:17.3061238Z       method: 'POST',
2025-12-10T09:20:17.3062231Z       session: {
2025-12-10T09:20:17.3062680Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.3063040Z         authenticated: true,
2025-12-10T09:20:17.3063321Z         username: 'admin'
2025-12-10T09:20:17.3063528Z       },
2025-12-10T09:20:17.3064142Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:17.3064391Z     }
2025-12-10T09:20:17.3064419Z 
2025-12-10T09:20:17.3064795Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.3064807Z 
2025-12-10T09:20:17.3077376Z   console.log
2025-12-10T09:20:17.3077843Z     [AUTH] Authentication check: {
2025-12-10T09:20:17.3078223Z       path: '/history',
2025-12-10T09:20:17.3078602Z       method: 'POST',
2025-12-10T09:20:17.3079419Z       sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.3080134Z       hasSession: true,
2025-12-10T09:20:17.3080467Z       authenticated: true,
2025-12-10T09:20:17.3080750Z       username: 'admin',
2025-12-10T09:20:17.3082180Z       hasCookies: true,
2025-12-10T09:20:17.3082387Z       timestamp: '2025-12-10T09:20:17.305Z'
2025-12-10T09:20:17.3082511Z     }
2025-12-10T09:20:17.3082525Z 
2025-12-10T09:20:17.3082910Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.3082921Z 
2025-12-10T09:20:17.3094597Z   console.log
2025-12-10T09:20:17.3095096Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:17.3095334Z 
2025-12-10T09:20:17.3095993Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.3096283Z 
2025-12-10T09:20:17.3107761Z   console.log
2025-12-10T09:20:17.3108143Z     === API DEBUG LOG ===
2025-12-10T09:20:17.3108774Z 
2025-12-10T09:20:17.3109663Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.3110866Z 
2025-12-10T09:20:17.3118760Z   console.log
2025-12-10T09:20:17.3119125Z     POST /history - 200 (7ms)
2025-12-10T09:20:17.3120542Z 
2025-12-10T09:20:17.3121220Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.3121341Z 
2025-12-10T09:20:17.3128532Z   console.log
2025-12-10T09:20:17.3129390Z     Session: { id: 'MoCUYGLNfRwo...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.3129670Z 
2025-12-10T09:20:17.3130251Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.3130493Z 
2025-12-10T09:20:17.3138524Z   console.log
2025-12-10T09:20:17.3139017Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:17.3139415Z 
2025-12-10T09:20:17.3140277Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.3140677Z 
2025-12-10T09:20:17.3149756Z   console.log
2025-12-10T09:20:17.3150450Z     ====================
2025-12-10T09:20:17.3150952Z 
2025-12-10T09:20:17.3151497Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.3151799Z 
2025-12-10T09:20:17.3158791Z [0mPOST /api/commands/history [32m200[0m 12.772 ms - 16[0m
2025-12-10T09:20:17.3195906Z   console.log
2025-12-10T09:20:17.3196378Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:17.3196803Z       path: '/commands/history',
2025-12-10T09:20:17.3197977Z       method: 'POST',
2025-12-10T09:20:17.3198371Z       session: {
2025-12-10T09:20:17.3198818Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.3199354Z         authenticated: true,
2025-12-10T09:20:17.3199744Z         username: 'admin'
2025-12-10T09:20:17.3200070Z       },
2025-12-10T09:20:17.3200637Z       tokens: {
2025-12-10T09:20:17.3201106Z         headerPresent: true,
2025-12-10T09:20:17.3201557Z         cookiePresent: true,
2025-12-10T09:20:17.3201948Z         headerSource: 'X-CSRF-Token'
2025-12-10T09:20:17.3202269Z       }
2025-12-10T09:20:17.3202588Z     }
2025-12-10T09:20:17.3202816Z 
2025-12-10T09:20:17.3203523Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.3206106Z 
2025-12-10T09:20:17.3209375Z   console.log
2025-12-10T09:20:17.3209623Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:17.3209828Z       path: '/commands/history',
2025-12-10T09:20:17.3209966Z       method: 'POST',
2025-12-10T09:20:17.3210102Z       session: {
2025-12-10T09:20:17.3210378Z         sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.3210534Z         authenticated: true,
2025-12-10T09:20:17.3210671Z         username: 'admin'
2025-12-10T09:20:17.3210790Z       },
2025-12-10T09:20:17.3211237Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:17.3211357Z     }
2025-12-10T09:20:17.3211371Z 
2025-12-10T09:20:17.3211763Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.3211776Z 
2025-12-10T09:20:17.3225737Z   console.log
2025-12-10T09:20:17.3226897Z     [AUTH] Authentication check: {
2025-12-10T09:20:17.3227313Z       path: '/history',
2025-12-10T09:20:17.3228097Z       method: 'POST',
2025-12-10T09:20:17.3228566Z       sessionID: 'MoCUYGLNfRwo_IE3VHBJxD8bqWXJzze7',
2025-12-10T09:20:17.3228938Z       hasSession: true,
2025-12-10T09:20:17.3230250Z       authenticated: true,
2025-12-10T09:20:17.3230581Z       username: 'admin',
2025-12-10T09:20:17.3230898Z       hasCookies: true,
2025-12-10T09:20:17.3231234Z       timestamp: '2025-12-10T09:20:17.320Z'
2025-12-10T09:20:17.3231539Z     }
2025-12-10T09:20:17.3232046Z 
2025-12-10T09:20:17.3232687Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.3233176Z 
2025-12-10T09:20:17.3241904Z   console.log
2025-12-10T09:20:17.3242687Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:17.3242914Z 
2025-12-10T09:20:17.3243527Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.3243763Z 
2025-12-10T09:20:17.3255188Z   console.log
2025-12-10T09:20:17.3256104Z     === API DEBUG LOG ===
2025-12-10T09:20:17.3256312Z 
2025-12-10T09:20:17.3256915Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.3257387Z 
2025-12-10T09:20:17.3265460Z   console.log
2025-12-10T09:20:17.3265855Z     POST /history - 200 (7ms)
2025-12-10T09:20:17.3266421Z 
2025-12-10T09:20:17.3267004Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.3267675Z 
2025-12-10T09:20:17.3276367Z   console.log
2025-12-10T09:20:17.3276993Z     Session: { id: 'MoCUYGLNfRwo...', authenticated: true, username: 'admin' }
2025-12-10T09:20:17.3277520Z 
2025-12-10T09:20:17.3278130Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.3278383Z 
2025-12-10T09:20:17.3286843Z   console.log
2025-12-10T09:20:17.3287336Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:17.3287640Z 
2025-12-10T09:20:17.3288767Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.3289117Z 
2025-12-10T09:20:17.3296659Z   console.log
2025-12-10T09:20:17.3296979Z     ====================
2025-12-10T09:20:17.3297197Z 
2025-12-10T09:20:17.3297784Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:17.3298206Z 
2025-12-10T09:20:17.3331154Z [0mPOST /api/commands/history [32m200[0m 12.435 ms - 16[0m
2025-12-10T09:20:17.3899315Z PASS __tests__/csrf-cookie-regression.test.js
2025-12-10T09:20:17.3900124Z   CSRF Cookie Regression Tests
2025-12-10T09:20:17.3900638Z     /api/csrf-token endpoint cookie behavior
2025-12-10T09:20:17.3901602Z       ✓ should set Set-Cookie header when returning CSRF token (18 ms)
2025-12-10T09:20:17.3902570Z       ✓ should set csrf-token cookie with httpOnly: false for client-side access (16 ms)
2025-12-10T09:20:17.3903446Z       ✓ should set csrf-token cookie with sameSite: lax (8 ms)
2025-12-10T09:20:17.3904155Z       ✓ should set csrf-token cookie with Path=/ (9 ms)
2025-12-10T09:20:17.3904971Z       ✓ should return token value in JSON response (11 ms)
2025-12-10T09:20:17.3905568Z       ✓ should set cookie value containing the JSON token (9 ms)
2025-12-10T09:20:17.3905981Z     Plugin install with CSRF cookie + header validation
2025-12-10T09:20:17.3906496Z       ✓ should succeed when valid session + cookie + header are provided (14 ms)
2025-12-10T09:20:17.3907043Z       ✓ should fail with 403 when CSRF header is missing (cookie only) (23 ms)
2025-12-10T09:20:17.3907560Z       ✓ should fail with 403 when CSRF cookie is missing (header only) (18 ms)
2025-12-10T09:20:17.3908029Z       ✓ should fail with 403 when CSRF token is invalid (18 ms)
2025-12-10T09:20:17.3908527Z       ✓ should work with X-CSRF-Token header (alternative header name) (16 ms)
2025-12-10T09:20:17.3909090Z       ✓ should log CSRF cookie and header presence in plugin install endpoint (17 ms)
2025-12-10T09:20:17.3909894Z     CSRF middleware order validation
2025-12-10T09:20:17.3910407Z       ✓ should have cookie-parser middleware before CSRF middleware
2025-12-10T09:20:17.3910677Z 
2025-12-10T09:20:17.4680535Z PASS __tests__/middleware/csrf.test.js
2025-12-10T09:20:17.4681153Z   CSRF Protection Middleware
2025-12-10T09:20:17.4681566Z     CSRF token endpoint
2025-12-10T09:20:17.4682307Z       ✓ should return a CSRF token (11 ms)
2025-12-10T09:20:17.4683087Z       ✓ should set csrf-token cookie with correct attributes (11 ms)
2025-12-10T09:20:17.4683773Z     CSRF validation on protected endpoints
2025-12-10T09:20:17.4684482Z       ✓ should skip CSRF validation for /api/login (94 ms)
2025-12-10T09:20:17.4685253Z       ✓ should skip CSRF validation for /api/session GET (13 ms)
2025-12-10T09:20:17.4686075Z       ✓ should skip CSRF validation for /api/csrf-token GET (11 ms)
2025-12-10T09:20:17.4686628Z     CSRF validation failures
2025-12-10T09:20:17.4687454Z       ✓ should return 403 when CSRF token is missing on protected POST endpoint (17 ms)
2025-12-10T09:20:17.4688524Z       ✓ should return 403 when CSRF header is missing but cookie is present (19 ms)
2025-12-10T09:20:17.4689648Z       ✓ should return 403 when CSRF token is invalid (19 ms)
2025-12-10T09:20:17.4690187Z     CSRF validation success
2025-12-10T09:20:17.4691069Z       ✓ should pass CSRF validation when valid token is provided in CSRF-Token header (18 ms)
2025-12-10T09:20:17.4692281Z       ✓ should pass CSRF validation when valid token is provided in X-CSRF-Token header (15 ms)
2025-12-10T09:20:17.4693001Z     CSRF validation logging
2025-12-10T09:20:17.4693741Z       ✓ should log CSRF validation success for protected endpoints (19 ms)
2025-12-10T09:20:17.4694579Z       ✓ should log CSRF validation failure details (18 ms)
2025-12-10T09:20:17.4695364Z       ✓ should log session details in CSRF validation logs (17 ms)
2025-12-10T09:20:17.4696137Z       ✓ should log token presence and header source (17 ms)
2025-12-10T09:20:17.4697020Z       ✓ should log specific failure reason when CSRF validation fails (22 ms)
2025-12-10T09:20:17.4698144Z       ✓ should log missing header as failure reason when session is authenticated (18 ms)
2025-12-10T09:20:17.4699346Z       ✓ should support both CSRF-Token and X-CSRF-Token headers (33 ms)
2025-12-10T09:20:17.4699816Z 
2025-12-10T09:20:17.5618485Z PASS __tests__/config/rbac-automation.test.js
2025-12-10T09:20:17.5619794Z   Automation RBAC
2025-12-10T09:20:17.5620366Z     Permission Definitions
2025-12-10T09:20:17.5628417Z       ✓ should have all required automation permissions defined (1 ms)
2025-12-10T09:20:17.5629033Z     Owner Role Permissions
2025-12-10T09:20:17.5629834Z       ✓ should have all automation permissions (1 ms)
2025-12-10T09:20:17.5630329Z     Admin Role Permissions
2025-12-10T09:20:17.5630856Z       ✓ should have all automation permissions
2025-12-10T09:20:17.5631346Z     Moderator Role Permissions
2025-12-10T09:20:17.5632026Z       ✓ should have execute, view, and history permissions (1 ms)
2025-12-10T09:20:17.5632822Z       ✓ should NOT have create, edit, or delete permissions
2025-12-10T09:20:17.5633318Z     Viewer Role Permissions
2025-12-10T09:20:17.5634435Z       ✓ should have view and history permissions only (4 ms)
2025-12-10T09:20:17.5635538Z       ✓ should NOT have create, edit, delete, or execute permissions
2025-12-10T09:20:17.5636125Z     Permission Matrix
2025-12-10T09:20:17.5636898Z       ✓ should enforce automation:create permission correctly across all roles (1 ms)
2025-12-10T09:20:17.5637973Z       ✓ should enforce automation:edit permission correctly across all roles (1 ms)
2025-12-10T09:20:17.5638961Z       ✓ should enforce automation:delete permission correctly across all roles
2025-12-10T09:20:17.5640213Z       ✓ should enforce automation:execute permission correctly across all roles (1 ms)
2025-12-10T09:20:17.5641294Z       ✓ should enforce automation:view permission correctly across all roles (1 ms)
2025-12-10T09:20:17.5642387Z       ✓ should enforce automation:history permission correctly across all roles (1 ms)
2025-12-10T09:20:17.5643037Z     Edge Cases
2025-12-10T09:20:17.5643512Z       ✓ should return false for invalid role
2025-12-10T09:20:17.5644155Z       ✓ should return false for null role (1 ms)
2025-12-10T09:20:17.5644765Z       ✓ should return false for undefined role
2025-12-10T09:20:17.5645418Z       ✓ should return false for invalid permission
2025-12-10T09:20:17.5645909Z     Case Sensitivity
2025-12-10T09:20:17.5646433Z       ✓ should handle lowercase role names
2025-12-10T09:20:17.5647023Z       ✓ should handle uppercase role names
2025-12-10T09:20:17.5647640Z       ✓ should handle mixed case role names (1 ms)
2025-12-10T09:20:17.5648144Z     Privilege Hierarchy
2025-12-10T09:20:17.5648763Z       ✓ owner should have all permissions that admin has
2025-12-10T09:20:17.5649771Z       ✓ admin should have all permissions that moderator has (1 ms)
2025-12-10T09:20:17.5650610Z       ✓ moderator should have all permissions that viewer has
2025-12-10T09:20:17.5651128Z     Security Principles
2025-12-10T09:20:17.5651788Z       ✓ should follow principle of least privilege for viewer
2025-12-10T09:20:17.5652720Z       ✓ should allow moderators to execute but not modify tasks (1 ms)
2025-12-10T09:20:17.5653654Z       ✓ should require admin or higher for task management (1 ms)
2025-12-10T09:20:17.5654092Z 
2025-12-10T09:20:17.6378180Z   console.error
2025-12-10T09:20:17.6382653Z     Error creating API key: Error: Invalid scopes provided
2025-12-10T09:20:17.6383652Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/apiKeys.test.js:164:23)
2025-12-10T09:20:17.6384879Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:397:39
2025-12-10T09:20:17.6386372Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:404:13)
2025-12-10T09:20:17.6388065Z         at Object.mockConstructor (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:148:19)
2025-12-10T09:20:17.6390334Z         at Object.createApiKey (eval at _createMockFunction (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:566:31), <anonymous>:3:58)
2025-12-10T09:20:17.6392093Z         at createApiKey (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/routes/apiKeys.js:123:42)
2025-12-10T09:20:17.6393755Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.6395354Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:17.6397009Z         at middleware (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express-validator/lib/middlewares/check.js:16:13)
2025-12-10T09:20:17.6398352Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:17.6424289Z 
2025-12-10T09:20:17.6424883Z     [0m [90m 136 |[39m             })[33m;[39m
2025-12-10T09:20:17.6425795Z      [90m 137 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:17.6426890Z     [31m[1m>[22m[39m[90m 138 |[39m             console[33m.[39merror([32m'Error creating API key:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:17.6427783Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:17.6428472Z      [90m 139 |[39m             res[33m.[39mstatus([35m500[39m)[33m.[39mjson({
2025-12-10T09:20:17.6429433Z      [90m 140 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m
2025-12-10T09:20:17.6430475Z      [90m 141 |[39m                 error[33m:[39m error[33m.[39mmessage [33m||[39m [32m'Failed to create API key'[39m[0m
2025-12-10T09:20:17.6430989Z 
2025-12-10T09:20:17.6431187Z       at error (routes/apiKeys.js:138:21)
2025-12-10T09:20:17.6431859Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:17.6432674Z       at next (node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:17.6433469Z       at middleware (node_modules/express-validator/lib/middlewares/check.js:16:13)
2025-12-10T09:20:17.6433963Z 
2025-12-10T09:20:17.6686621Z   console.error
2025-12-10T09:20:17.6707431Z     Error searching plugins: Error: Network error
2025-12-10T09:20:17.6708833Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/services/marketplaceService.test.js:78:45)
2025-12-10T09:20:17.6710918Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:17.6712074Z         at new Promise (<anonymous>)
2025-12-10T09:20:17.6713293Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:17.6715133Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:17.6716461Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:17.6717816Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:17.6720185Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:17.6722342Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:17.6724630Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:17.6726561Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:17.6729450Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:17.6732201Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:17.6734375Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:17.6736367Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:17.6738284Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:17.6740090Z 
2025-12-10T09:20:17.6742645Z     [0m [90m 77 |[39m         [36mreturn[39m results[33m;[39m
2025-12-10T09:20:17.6749856Z      [90m 78 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:17.6751038Z     [31m[1m>[22m[39m[90m 79 |[39m         console[33m.[39merror([32m'Error searching plugins:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:17.6752000Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:17.6753201Z      [90m 80 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m`Marketplace search failed: ${error.message}`[39m)[33m;[39m
2025-12-10T09:20:17.6754095Z      [90m 81 |[39m     }
2025-12-10T09:20:17.6754521Z      [90m 82 |[39m }[0m
2025-12-10T09:20:17.6754747Z 
2025-12-10T09:20:17.6755186Z       at Object.error [as searchPlugins] (services/marketplaceService.js:79:17)
2025-12-10T09:20:17.6756100Z       at Object.<anonymous> (__tests__/services/marketplaceService.test.js:80:13)
2025-12-10T09:20:17.6756610Z 
2025-12-10T09:20:17.6838380Z PASS __tests__/routes/apiKeys.test.js
2025-12-10T09:20:17.6838933Z   API Key Routes
2025-12-10T09:20:17.6839530Z     GET /api/api-keys
2025-12-10T09:20:17.6840138Z       ✓ should return list of API keys (4 ms)
2025-12-10T09:20:17.6840593Z     GET /api/api-keys/scopes
2025-12-10T09:20:17.6841112Z       ✓ should return available scopes (2 ms)
2025-12-10T09:20:17.6841554Z     GET /api/api-keys/:id
2025-12-10T09:20:17.6842060Z       ✓ should return specific API key (2 ms)
2025-12-10T09:20:17.6842683Z       ✓ should return 404 for non-existent key (3 ms)
2025-12-10T09:20:17.6843140Z     POST /api/api-keys
2025-12-10T09:20:17.6843653Z       ✓ should create API key with valid data (7 ms)
2025-12-10T09:20:17.6844248Z       ✓ should validate required fields (3 ms)
2025-12-10T09:20:17.6844841Z       ✓ should validate scopes is an array (2 ms)
2025-12-10T09:20:17.6845423Z       ✓ should handle service errors (25 ms)
2025-12-10T09:20:17.6845844Z     PATCH /api/api-keys/:id
2025-12-10T09:20:17.6846325Z       ✓ should update API key (3 ms)
2025-12-10T09:20:17.6846906Z       ✓ should return 404 for non-existent key (2 ms)
2025-12-10T09:20:17.6847514Z       ✓ should validate update fields (2 ms)
2025-12-10T09:20:17.6847950Z     DELETE /api/api-keys/:id
2025-12-10T09:20:17.6848441Z       ✓ should revoke API key (2 ms)
2025-12-10T09:20:17.6849031Z       ✓ should return 404 for non-existent key (2 ms)
2025-12-10T09:20:17.6849723Z     GET /api/api-keys/:id/logs
2025-12-10T09:20:17.6850232Z       ✓ should return usage logs (1 ms)
2025-12-10T09:20:17.6850804Z       ✓ should accept limit parameter (2 ms)
2025-12-10T09:20:17.6851391Z       ✓ should validate limit parameter (2 ms)
2025-12-10T09:20:17.6851863Z     GET /api/api-keys/:id/stats
2025-12-10T09:20:17.6852398Z       ✓ should return usage statistics (2 ms)
2025-12-10T09:20:17.6852994Z       ✓ should accept date range parameters (3 ms)
2025-12-10T09:20:17.6853733Z       ✓ should use default date range if not provided (2 ms)
2025-12-10T09:20:17.6854242Z 
2025-12-10T09:20:17.6904557Z   console.error
2025-12-10T09:20:17.6906738Z     Error fetching plugin details: Error: Invalid platform specified
2025-12-10T09:20:17.6908149Z         at Object.getPluginDetails (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/services/marketplaceService.js:101:19)
2025-12-10T09:20:17.6910364Z         at Object.getPluginDetails (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/services/marketplaceService.test.js:165:36)
2025-12-10T09:20:17.6912351Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:17.6913566Z         at new Promise (<anonymous>)
2025-12-10T09:20:17.6914845Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:17.6917809Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:17.6920100Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:17.6921515Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:17.6923375Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:17.6925337Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:17.6927287Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:17.6929085Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:17.6931528Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:17.6934015Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:17.6936071Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:17.6937854Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:17.6939844Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:17.6940805Z 
2025-12-10T09:20:17.6941186Z     [0m [90m 102 |[39m         }
2025-12-10T09:20:17.6941861Z      [90m 103 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:17.6943103Z     [31m[1m>[22m[39m[90m 104 |[39m         console[33m.[39merror([32m'Error fetching plugin details:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:17.6944185Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:17.6945444Z      [90m 105 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to fetch plugin details: ${error.message}`[39m)[33m;[39m
2025-12-10T09:20:17.6946383Z      [90m 106 |[39m     }
2025-12-10T09:20:17.6946847Z      [90m 107 |[39m }[0m
2025-12-10T09:20:17.6947095Z 
2025-12-10T09:20:17.6947548Z       at Object.error [as getPluginDetails] (services/marketplaceService.js:104:17)
2025-12-10T09:20:17.6948551Z       at Object.getPluginDetails (__tests__/services/marketplaceService.test.js:165:36)
2025-12-10T09:20:17.6949117Z 
2025-12-10T09:20:17.7138756Z FAIL __tests__/services/marketplaceService.test.js
2025-12-10T09:20:17.7141080Z   Marketplace Service
2025-12-10T09:20:17.7141498Z     searchPlugins
2025-12-10T09:20:17.7142285Z       ✓ should search Modrinth successfully (3 ms)
2025-12-10T09:20:17.7143002Z       ✓ should search Hangar successfully (1 ms)
2025-12-10T09:20:17.7143692Z       ✓ should handle search errors gracefully (38 ms)
2025-12-10T09:20:17.7144320Z       ✕ should apply filters correctly (1 ms)
2025-12-10T09:20:17.7144620Z     getPluginDetails
2025-12-10T09:20:17.7144940Z       ✓ should get Modrinth plugin details
2025-12-10T09:20:17.7145295Z       ✓ should handle invalid platform (3 ms)
2025-12-10T09:20:17.7145566Z     getPluginVersions
2025-12-10T09:20:17.7145850Z       ✓ should get plugin versions (1 ms)
2025-12-10T09:20:17.7146167Z       ✓ should filter by game version
2025-12-10T09:20:17.7146411Z     getFeaturedPlugins
2025-12-10T09:20:17.7146692Z       ✓ should get featured plugins (1 ms)
2025-12-10T09:20:17.7146940Z     getCategories
2025-12-10T09:20:17.7147198Z       ✓ should return category lists (1 ms)
2025-12-10T09:20:17.7147735Z 
2025-12-10T09:20:17.7148215Z   ● Marketplace Service › searchPlugins › should apply filters correctly
2025-12-10T09:20:17.7148498Z 
2025-12-10T09:20:17.7148662Z     expect(jest.fn()).toHaveBeenCalledWith(...expected)
2025-12-10T09:20:17.7148877Z 
2025-12-10T09:20:17.7149025Z     Expected: StringContaining "categories:admin"
2025-12-10T09:20:17.7151115Z     Received: "https://api.modrinth.com/v2/search?query=test&limit=10&offset=0&facets=%5B%5B%22project_type%3Aplugin%22%5D%5D&facets=%5B%5B%22categories%3Aadmin%22%5D%5D&facets=%5B%5B%22versions%3A1.20.1%22%5D%5D&index=downloads", {"maxRedirects": 3, "timeout": 10000}
2025-12-10T09:20:17.7152346Z 
2025-12-10T09:20:17.7152540Z     Number of calls: 1
2025-12-10T09:20:17.7152731Z 
2025-12-10T09:20:17.7153020Z     [0m [90m 102 |[39m             })[33m;[39m
2025-12-10T09:20:17.7153404Z      [90m 103 |[39m
2025-12-10T09:20:17.7154379Z     [31m[1m>[22m[39m[90m 104 |[39m             expect(axios[33m.[39m[36mget[39m)[33m.[39mtoHaveBeenCalledWith(
2025-12-10T09:20:17.7155598Z      [90m     |[39m                               [31m[1m^[22m[39m
2025-12-10T09:20:17.7156755Z      [90m 105 |[39m                 expect[33m.[39mstringContaining([32m'categories:admin'[39m)
2025-12-10T09:20:17.7157630Z      [90m 106 |[39m             )[33m;[39m
2025-12-10T09:20:17.7158778Z      [90m 107 |[39m         })[33m;[39m[0m
2025-12-10T09:20:17.7175430Z 
2025-12-10T09:20:17.7176046Z       at Object.toHaveBeenCalledWith (__tests__/services/marketplaceService.test.js:104:31)
2025-12-10T09:20:17.7176671Z 
2025-12-10T09:20:17.7495365Z PASS __tests__/config/rbac-webhooks.test.js
2025-12-10T09:20:17.7495796Z   Webhook RBAC Permissions
2025-12-10T09:20:17.7496045Z     Owner Role
2025-12-10T09:20:17.7496940Z       ✓ should have all webhook permissions (1 ms)
2025-12-10T09:20:17.7497442Z       ✓ should have all inbound webhook permissions
2025-12-10T09:20:17.7497780Z     Admin Role
2025-12-10T09:20:17.7503451Z       ✓ should have all webhook permissions (1 ms)
2025-12-10T09:20:17.7503955Z       ✓ should have all inbound webhook permissions
2025-12-10T09:20:17.7504236Z     Moderator Role
2025-12-10T09:20:17.7504518Z       ✓ should have limited webhook permissions
2025-12-10T09:20:17.7505173Z       ✓ should have view-only inbound webhook permissions (1 ms)
2025-12-10T09:20:17.7505712Z     Viewer Role
2025-12-10T09:20:17.7506287Z       ✓ should have view-only webhook permissions (1 ms)
2025-12-10T09:20:17.7507023Z       ✓ should have view-only inbound webhook permissions
2025-12-10T09:20:17.7507554Z     Permission Hierarchy
2025-12-10T09:20:17.7508214Z       ✓ Owner should have more permissions than Admin (1 ms)
2025-12-10T09:20:17.7508971Z       ✓ Admin should have more permissions than Moderator
2025-12-10T09:20:17.7509921Z       ✓ Moderator should have more permissions than Viewer
2025-12-10T09:20:17.7510440Z     Webhook Creation Workflow
2025-12-10T09:20:17.7511016Z       ✓ Admin can create and manage webhooks
2025-12-10T09:20:17.7511836Z       ✓ Moderator can only view and trigger existing webhooks (1 ms)
2025-12-10T09:20:17.7512648Z       ✓ Viewer cannot modify or trigger webhooks (1 ms)
2025-12-10T09:20:17.7513150Z     Inbound Webhook Workflow
2025-12-10T09:20:17.7513792Z       ✓ Admin can create and manage inbound webhooks (1 ms)
2025-12-10T09:20:17.7514457Z       ✓ Moderator can only view inbound webhooks
2025-12-10T09:20:17.7515062Z       ✓ Viewer has minimal inbound webhook access
2025-12-10T09:20:17.7515513Z     Webhook Logs Access
2025-12-10T09:20:17.7516001Z       ✓ All roles can view webhook logs (4 ms)
2025-12-10T09:20:17.7516489Z     Integration with Other Features
2025-12-10T09:20:17.7517266Z       ✓ Webhook permissions are separate from automation permissions (1 ms)
2025-12-10T09:20:17.7518147Z       ✓ Moderator can execute automations and trigger webhooks
2025-12-10T09:20:17.7518551Z 
2025-12-10T09:20:17.7937204Z   console.log
2025-12-10T09:20:17.7938296Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:17.7939855Z 
2025-12-10T09:20:17.7940305Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:17.7940811Z 
2025-12-10T09:20:17.7968870Z   console.log
2025-12-10T09:20:17.7969764Z     Database connection closed
2025-12-10T09:20:17.7970064Z 
2025-12-10T09:20:17.7970459Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:17.7970923Z 
2025-12-10T09:20:17.8057149Z   console.log
2025-12-10T09:20:17.8058545Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:17.8059886Z 
2025-12-10T09:20:17.8060524Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:17.8062179Z 
2025-12-10T09:20:17.8089481Z   console.log
2025-12-10T09:20:17.8089896Z     Database connection closed
2025-12-10T09:20:17.8090163Z 
2025-12-10T09:20:17.8090512Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:17.8090827Z 
2025-12-10T09:20:17.8106555Z PASS __tests__/config/rbac-backup.test.js
2025-12-10T09:20:17.8107147Z   RBAC - Backup Permissions
2025-12-10T09:20:17.8107572Z     Permission definitions
2025-12-10T09:20:17.8108334Z       ✓ should define all backup permissions (1 ms)
2025-12-10T09:20:17.8108716Z     Owner role
2025-12-10T09:20:17.8109449Z       ✓ should have all backup permissions (1 ms)
2025-12-10T09:20:17.8109930Z     Admin role
2025-12-10T09:20:17.8110437Z       ✓ should have all backup permissions (1 ms)
2025-12-10T09:20:17.8110905Z     Moderator role
2025-12-10T09:20:17.8111633Z       ✓ should have limited backup permissions (view and download only) (3 ms)
2025-12-10T09:20:17.8112225Z     Viewer role
2025-12-10T09:20:17.8112819Z       ✓ should have view-only backup permissions (1 ms)
2025-12-10T09:20:17.8113337Z     Permission hierarchy
2025-12-10T09:20:17.8113980Z       ✓ should grant more permissions to higher roles (1 ms)
2025-12-10T09:20:17.8114572Z     Critical permissions
2025-12-10T09:20:17.8115319Z       ✓ should restrict restore permission to admin and above (1 ms)
2025-12-10T09:20:17.8116165Z       ✓ should restrict delete permission to admin and above
2025-12-10T09:20:17.8116939Z       ✓ should restrict migration permissions to admin and above
2025-12-10T09:20:17.8117465Z     Permission format
2025-12-10T09:20:17.8117989Z       ✓ should follow naming convention (2 ms)
2025-12-10T09:20:17.8118584Z       ✓ should have unique permission values
2025-12-10T09:20:17.8118888Z 
2025-12-10T09:20:17.8181891Z   console.log
2025-12-10T09:20:17.8183379Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:17.8184208Z 
2025-12-10T09:20:17.8184621Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:17.8185101Z 
2025-12-10T09:20:17.8215348Z   console.log
2025-12-10T09:20:17.8215987Z     Database connection closed
2025-12-10T09:20:17.8216353Z 
2025-12-10T09:20:17.8216769Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:17.8217263Z 
2025-12-10T09:20:17.8287125Z   console.log
2025-12-10T09:20:17.8288061Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:17.8288539Z 
2025-12-10T09:20:17.8288786Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:17.8289084Z 
2025-12-10T09:20:17.8324746Z   console.log
2025-12-10T09:20:17.8325145Z     Database connection closed
2025-12-10T09:20:17.8325421Z 
2025-12-10T09:20:17.8325788Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:17.8326220Z 
2025-12-10T09:20:17.8393527Z   console.log
2025-12-10T09:20:17.8395187Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:17.8395967Z 
2025-12-10T09:20:17.8396715Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:17.8397373Z 
2025-12-10T09:20:17.8437233Z   console.log
2025-12-10T09:20:17.8437642Z     Database connection closed
2025-12-10T09:20:17.8437912Z 
2025-12-10T09:20:17.8438296Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:17.8438729Z 
2025-12-10T09:20:17.8508363Z   console.log
2025-12-10T09:20:17.8509809Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:17.8510617Z 
2025-12-10T09:20:17.8511040Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:17.8511529Z 
2025-12-10T09:20:17.8558265Z   console.log
2025-12-10T09:20:17.8558671Z     Database connection closed
2025-12-10T09:20:17.8558943Z 
2025-12-10T09:20:17.8559538Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:17.8559992Z 
2025-12-10T09:20:17.8628817Z   console.log
2025-12-10T09:20:17.8629958Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:17.8630680Z 
2025-12-10T09:20:17.8631067Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:17.8631491Z 
2025-12-10T09:20:17.9177775Z   console.log
2025-12-10T09:20:17.9178476Z     Database connection closed
2025-12-10T09:20:17.9178765Z 
2025-12-10T09:20:17.9179140Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:17.9179808Z 
2025-12-10T09:20:17.9247535Z   console.log
2025-12-10T09:20:17.9248841Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:17.9252113Z 
2025-12-10T09:20:17.9252527Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:17.9252919Z 
2025-12-10T09:20:17.9330137Z   console.warn
2025-12-10T09:20:17.9331984Z     Cannot end session for 12345678-1234-1234-1234-123456789abc: no active session
2025-12-10T09:20:17.9332838Z 
2025-12-10T09:20:17.9333594Z     [0m [90m 395 |[39m         
2025-12-10T09:20:17.9335004Z      [90m 396 |[39m         [36mif[39m ([33m![39mplayer [33m||[39m [33m![39mplayer[33m.[39mcurrent_session_start) {
2025-12-10T09:20:17.9336632Z     [31m[1m>[22m[39m[90m 397 |[39m             console[33m.[39mwarn([32m`Cannot end session for ${uuid}: no active session`[39m)[33m;[39m
2025-12-10T09:20:17.9337868Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:17.9338802Z      [90m 398 |[39m             [36mreturn[39m [35m0[39m[33m;[39m
2025-12-10T09:20:17.9339961Z      [90m 399 |[39m         }
2025-12-10T09:20:17.9341037Z      [90m 400 |[39m[0m
2025-12-10T09:20:17.9341439Z 
2025-12-10T09:20:17.9344802Z       at DatabaseService.warn [as endSession] (services/database.js:397:21)
2025-12-10T09:20:17.9345648Z       at Object.endSession (__tests__/services/database.test.js:152:46)
2025-12-10T09:20:17.9346116Z 
2025-12-10T09:20:17.9364235Z   console.log
2025-12-10T09:20:17.9364871Z     Database connection closed
2025-12-10T09:20:17.9366067Z 
2025-12-10T09:20:17.9366477Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:17.9366953Z 
2025-12-10T09:20:17.9423941Z   console.log
2025-12-10T09:20:17.9425250Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:17.9426020Z 
2025-12-10T09:20:17.9426445Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:17.9426754Z 
2025-12-10T09:20:17.9970361Z   console.log
2025-12-10T09:20:17.9971400Z     Database connection closed
2025-12-10T09:20:17.9974230Z 
2025-12-10T09:20:17.9974865Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:17.9975749Z 
2025-12-10T09:20:18.0046651Z   console.log
2025-12-10T09:20:18.0047612Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:18.0048750Z 
2025-12-10T09:20:18.0049024Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.0049539Z 
2025-12-10T09:20:18.0083771Z   console.log
2025-12-10T09:20:18.0084165Z     Database connection closed
2025-12-10T09:20:18.0084438Z 
2025-12-10T09:20:18.0084800Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.0085242Z 
2025-12-10T09:20:18.0147584Z   console.log
2025-12-10T09:20:18.0148572Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:18.0149481Z 
2025-12-10T09:20:18.0149765Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.0150094Z 
2025-12-10T09:20:18.0179030Z   console.log
2025-12-10T09:20:18.0179629Z     Database connection closed
2025-12-10T09:20:18.0179910Z 
2025-12-10T09:20:18.0180328Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.0180803Z 
2025-12-10T09:20:18.0224106Z   console.log
2025-12-10T09:20:18.0225088Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:18.0225869Z 
2025-12-10T09:20:18.0226303Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.0226788Z 
2025-12-10T09:20:18.0254504Z   console.log
2025-12-10T09:20:18.0255304Z     Database connection closed
2025-12-10T09:20:18.0256104Z 
2025-12-10T09:20:18.0256784Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.0257990Z 
2025-12-10T09:20:18.0311936Z   console.log
2025-12-10T09:20:18.0312924Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:18.0313697Z 
2025-12-10T09:20:18.0314116Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.0314623Z 
2025-12-10T09:20:18.0347649Z   console.log
2025-12-10T09:20:18.0348110Z     Database connection closed
2025-12-10T09:20:18.0348408Z 
2025-12-10T09:20:18.0348805Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.0349496Z 
2025-12-10T09:20:18.0396559Z   console.log
2025-12-10T09:20:18.0397536Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:18.0398315Z 
2025-12-10T09:20:18.0398729Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.0399419Z 
2025-12-10T09:20:18.0457516Z   console.log
2025-12-10T09:20:18.0457927Z     Database connection closed
2025-12-10T09:20:18.0458194Z 
2025-12-10T09:20:18.0458561Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.0459034Z 
2025-12-10T09:20:18.0528444Z   console.log
2025-12-10T09:20:18.0529732Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:18.0530535Z 
2025-12-10T09:20:18.0530920Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.0531380Z 
2025-12-10T09:20:18.0614506Z   console.log
2025-12-10T09:20:18.0614971Z     Database connection closed
2025-12-10T09:20:18.0615286Z 
2025-12-10T09:20:18.0615685Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.0616164Z 
2025-12-10T09:20:18.0681731Z   console.log
2025-12-10T09:20:18.0682672Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:18.0683190Z 
2025-12-10T09:20:18.0683438Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.0683733Z 
2025-12-10T09:20:18.0721716Z   console.log
2025-12-10T09:20:18.0722597Z     Database connection closed
2025-12-10T09:20:18.0724746Z 
2025-12-10T09:20:18.0725908Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.0727348Z 
2025-12-10T09:20:18.0950708Z PASS __tests__/services/database.test.js
2025-12-10T09:20:18.0951657Z   DatabaseService
2025-12-10T09:20:18.0952113Z     initialize
2025-12-10T09:20:18.0952934Z       ✓ should create database file (19 ms)
2025-12-10T09:20:18.0953676Z       ✓ should create players table (12 ms)
2025-12-10T09:20:18.0954229Z     upsertPlayer
2025-12-10T09:20:18.0954821Z       ✓ should insert a new player (12 ms)
2025-12-10T09:20:18.0955606Z       ✓ should update existing player username (11 ms)
2025-12-10T09:20:18.0956204Z     startSession
2025-12-10T09:20:18.0956936Z       ✓ should start a session and increment session count (11 ms)
2025-12-10T09:20:18.0957907Z       ✓ should increment session count on multiple sessions (12 ms)
2025-12-10T09:20:18.0958565Z     endSession
2025-12-10T09:20:18.0959404Z       ✓ should end session and update total playtime (62 ms)
2025-12-10T09:20:18.0960362Z       ✓ should return 0 if no active session (19 ms)
2025-12-10T09:20:18.0961011Z     updateLastSeen
2025-12-10T09:20:18.0961683Z       ✓ should update last_seen timestamp (60 ms)
2025-12-10T09:20:18.0962357Z     getPlayerByUuid
2025-12-10T09:20:18.0963034Z       ✓ should retrieve player by UUID (12 ms)
2025-12-10T09:20:18.0963933Z       ✓ should return null for non-existent player (9 ms)
2025-12-10T09:20:18.0964661Z     getPlayerByUsername
2025-12-10T09:20:18.0965394Z       ✓ should retrieve player by username (7 ms)
2025-12-10T09:20:18.0966049Z     getAllPlayers
2025-12-10T09:20:18.0966743Z       ✓ should return all players sorted by playtime (9 ms)
2025-12-10T09:20:18.0967609Z       ✓ should return empty array when no players (11 ms)
2025-12-10T09:20:18.0968269Z     getActivePlayers
2025-12-10T09:20:18.0969066Z       ✓ should return only players with active sessions (16 ms)
2025-12-10T09:20:18.0969996Z     getPlayerCount
2025-12-10T09:20:18.0970710Z       ✓ should return correct player count (11 ms)
2025-12-10T09:20:18.0971317Z 
2025-12-10T09:20:18.0981137Z   console.log
2025-12-10T09:20:18.0982009Z     [Session] Cookie configuration: {
2025-12-10T09:20:18.0982854Z       secure: false,
2025-12-10T09:20:18.0983432Z       nodeEnv: 'test',
2025-12-10T09:20:18.0984194Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:18.0985132Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:18.0985973Z     }
2025-12-10T09:20:18.0986372Z 
2025-12-10T09:20:18.0986818Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:18.0987418Z 
2025-12-10T09:20:18.2666329Z   console.warn
2025-12-10T09:20:18.2677692Z     plugins.json not found at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/test-data/plugins.json, returning empty plugin list
2025-12-10T09:20:18.2678779Z 
2025-12-10T09:20:18.2679932Z     [0m [90m  98 |[39m             [36mawait[39m fs[33m.[39maccess([33mPLUGINS_JSON[39m)[33m;[39m
2025-12-10T09:20:18.2680888Z      [90m  99 |[39m         } [36mcatch[39m (accessError) {
2025-12-10T09:20:18.2682356Z     [31m[1m>[22m[39m[90m 100 |[39m             console[33m.[39mwarn([32m`plugins.json not found at ${PLUGINS_JSON}, returning empty plugin list`[39m)[33m;[39m
2025-12-10T09:20:18.2684019Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:18.2686531Z      [90m 101 |[39m             [36mreturn[39m [][33m;[39m
2025-12-10T09:20:18.2687771Z      [90m 102 |[39m         }
2025-12-10T09:20:18.2688767Z      [90m 103 |[39m         [0m
2025-12-10T09:20:18.2689450Z 
2025-12-10T09:20:18.2689902Z       at Object.warn [as getAllPlugins] (services/pluginManager.js:100:21)
2025-12-10T09:20:18.2690800Z       at Object.<anonymous> (__tests__/services/pluginManager.test.js:60:29)
2025-12-10T09:20:18.2691257Z 
2025-12-10T09:20:18.2699944Z   console.log
2025-12-10T09:20:18.2700468Z     [Test] Session middleware initialized (memory store)
2025-12-10T09:20:18.2700849Z 
2025-12-10T09:20:18.2701064Z       at Object.log (server.js:142:13)
2025-12-10T09:20:18.2701734Z 
2025-12-10T09:20:18.2707062Z   console.log
2025-12-10T09:20:18.2708032Z     [Session] Initialization status: {
2025-12-10T09:20:18.2708734Z       nodeEnv: 'test',
2025-12-10T09:20:18.2710245Z       sessionSecretSet: true,
2025-12-10T09:20:18.2710674Z       redisConfigured: false,
2025-12-10T09:20:18.2711083Z       middlewareApplied: true
2025-12-10T09:20:18.2711457Z     }
2025-12-10T09:20:18.2711615Z 
2025-12-10T09:20:18.2711822Z       at Object.log (server.js:155:9)
2025-12-10T09:20:18.2712118Z 
2025-12-10T09:20:18.2715506Z   console.log
2025-12-10T09:20:18.2716619Z     [CSRF] Cookie configuration: {
2025-12-10T09:20:18.2717204Z       secure: false,
2025-12-10T09:20:18.2717720Z       nodeEnv: 'test',
2025-12-10T09:20:18.2718371Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:18.2718910Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:18.2719599Z     }
2025-12-10T09:20:18.2719772Z 
2025-12-10T09:20:18.2720004Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:18.2720364Z 
2025-12-10T09:20:18.2741079Z   console.error
2025-12-10T09:20:18.2742138Z     plugins.json is empty at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/test-data/plugins.json
2025-12-10T09:20:18.2742940Z 
2025-12-10T09:20:18.2743424Z     [0m [90m 106 |[39m         [90m// Validate content is not empty[39m
2025-12-10T09:20:18.2744564Z      [90m 107 |[39m         [36mif[39m ([33m![39mcontent [33m||[39m content[33m.[39mtrim()[33m.[39mlength [33m===[39m [35m0[39m) {
2025-12-10T09:20:18.2745949Z     [31m[1m>[22m[39m[90m 108 |[39m             console[33m.[39merror([32m`plugins.json is empty at ${PLUGINS_JSON}`[39m)[33m;[39m
2025-12-10T09:20:18.2746954Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:18.2747501Z      [90m 109 |[39m             [36mreturn[39m [][33m;[39m
2025-12-10T09:20:18.2747841Z      [90m 110 |[39m         }
2025-12-10T09:20:18.2748122Z      [90m 111 |[39m         [0m
2025-12-10T09:20:18.2748309Z 
2025-12-10T09:20:18.2748562Z       at Object.error [as getAllPlugins] (services/pluginManager.js:108:21)
2025-12-10T09:20:18.2749068Z       at Object.<anonymous> (__tests__/services/pluginManager.test.js:66:29)
2025-12-10T09:20:18.2791956Z 
2025-12-10T09:20:18.2792537Z [0mGET /api/csrf-token [32m200[0m 2.479 ms - 80[0m
2025-12-10T09:20:18.2842465Z [0mGET /api/csrf-token [32m200[0m 1.083 ms - 80[0m
2025-12-10T09:20:18.2861333Z   console.error
2025-12-10T09:20:18.2862064Z     Failed to parse plugins.json: Unexpected token i in JSON at position 1 {
2025-12-10T09:20:18.2863473Z       file: '/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/test-data/plugins.json',
2025-12-10T09:20:18.2864429Z       contentPreview: '{invalid json',
2025-12-10T09:20:18.2864862Z       contentLength: 13,
2025-12-10T09:20:18.2865434Z       parseErrorLine: 'Unexpected token i in JSON at position 1'
2025-12-10T09:20:18.2865949Z     }
2025-12-10T09:20:18.2866138Z 
2025-12-10T09:20:18.2867003Z     [0m [90m 116 |[39m             [90m// Sanitize content preview - only show first 100 chars and mask potential secrets[39m
2025-12-10T09:20:18.2868285Z      [90m 117 |[39m             [36mconst[39m preview [33m=[39m content[33m.[39msubstring([35m0[39m[33m,[39m [35m100[39m)[33m.[39mreplace([35m/(['"])([^'"]{8,})(['"])/g[39m[33m,[39m [32m'$1***$3'[39m)[33m;[39m
2025-12-10T09:20:18.2870318Z     [31m[1m>[22m[39m[90m 118 |[39m             console[33m.[39merror([32m`Failed to parse plugins.json: ${parseError.message}`[39m[33m,[39m {
2025-12-10T09:20:18.2871167Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:18.2871624Z      [90m 119 |[39m                 file[33m:[39m [33mPLUGINS_JSON[39m[33m,[39m
2025-12-10T09:20:18.2872099Z      [90m 120 |[39m                 contentPreview[33m:[39m preview[33m,[39m
2025-12-10T09:20:18.2872633Z      [90m 121 |[39m                 contentLength[33m:[39m content[33m.[39mlength[33m,[39m[0m
2025-12-10T09:20:18.2873392Z 
2025-12-10T09:20:18.2874088Z       at Object.error [as getAllPlugins] (services/pluginManager.js:118:21)
2025-12-10T09:20:18.2875038Z       at Object.<anonymous> (__tests__/services/pluginManager.test.js:72:29)
2025-12-10T09:20:18.2875396Z 
2025-12-10T09:20:18.2880827Z [0mGET /api/csrf-token [32m200[0m 1.121 ms - 80[0m
2025-12-10T09:20:18.2904119Z   console.log
2025-12-10T09:20:18.2904861Z     Admin password changed detected, regenerating users.json...
2025-12-10T09:20:18.2905282Z 
2025-12-10T09:20:18.2905469Z       at log (auth/auth.js:164:21)
2025-12-10T09:20:18.2905773Z 
2025-12-10T09:20:18.3010493Z   console.error
2025-12-10T09:20:18.3011744Z     plugins.json is empty at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/test-data/plugins.json
2025-12-10T09:20:18.3012591Z 
2025-12-10T09:20:18.3013179Z     [0m [90m 106 |[39m         [90m// Validate content is not empty[39m
2025-12-10T09:20:18.3014444Z      [90m 107 |[39m         [36mif[39m ([33m![39mcontent [33m||[39m content[33m.[39mtrim()[33m.[39mlength [33m===[39m [35m0[39m) {
2025-12-10T09:20:18.3015846Z     [31m[1m>[22m[39m[90m 108 |[39m             console[33m.[39merror([32m`plugins.json is empty at ${PLUGINS_JSON}`[39m)[33m;[39m
2025-12-10T09:20:18.3016744Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:18.3017338Z      [90m 109 |[39m             [36mreturn[39m [][33m;[39m
2025-12-10T09:20:18.3017928Z      [90m 110 |[39m         }
2025-12-10T09:20:18.3018338Z      [90m 111 |[39m         [0m
2025-12-10T09:20:18.3018610Z 
2025-12-10T09:20:18.3018939Z       at Object.error [as getAllPlugins] (services/pluginManager.js:108:21)
2025-12-10T09:20:18.3019759Z       at Object.<anonymous> (__tests__/services/pluginManager.test.js:102:29)
2025-12-10T09:20:18.3020245Z 
2025-12-10T09:20:18.3606870Z   console.error
2025-12-10T09:20:18.3608805Z     Plugin uninstall failed: {
2025-12-10T09:20:18.3609573Z       pluginName: 'NonExistentPlugin',
2025-12-10T09:20:18.3610113Z       deleteConfigs: false,
2025-12-10T09:20:18.3610551Z       error: 'Plugin not found',
2025-12-10T09:20:18.3611039Z       stack: 'Error: Plugin not found\n' +
2025-12-10T09:20:18.3612168Z         '    at Object.uninstallPlugin (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/services/pluginManager.js:613:19)\n' +
2025-12-10T09:20:18.3614085Z         '    at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/services/pluginManager.test.js:187:13)'
2025-12-10T09:20:18.3615155Z     }
2025-12-10T09:20:18.3615319Z 
2025-12-10T09:20:18.3616155Z     [0m [90m 649 |[39m         [36mreturn[39m { status[33m:[39m [32m'success'[39m }[33m;[39m
2025-12-10T09:20:18.3617052Z      [90m 650 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:18.3617798Z     [31m[1m>[22m[39m[90m 651 |[39m         console[33m.[39merror([32m'Plugin uninstall failed:'[39m[33m,[39m {
2025-12-10T09:20:18.3618742Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:18.3619492Z      [90m 652 |[39m             pluginName[33m,[39m
2025-12-10T09:20:18.3620165Z      [90m 653 |[39m             deleteConfigs[33m,[39m
2025-12-10T09:20:18.3621000Z      [90m 654 |[39m             error[33m:[39m error[33m.[39mmessage[33m,[39m[0m
2025-12-10T09:20:18.3621421Z 
2025-12-10T09:20:18.3621839Z       at Object.error [as uninstallPlugin] (services/pluginManager.js:651:17)
2025-12-10T09:20:18.3622716Z       at Object.<anonymous> (__tests__/services/pluginManager.test.js:187:13)
2025-12-10T09:20:18.3623200Z 
2025-12-10T09:20:18.3709069Z PASS __tests__/services/pluginManager.test.js
2025-12-10T09:20:18.3709831Z   Plugin Manager - Error Handling
2025-12-10T09:20:18.3710258Z     getAllPlugins
2025-12-10T09:20:18.3711016Z       ✓ should return empty array when plugins.json does not exist (22 ms)
2025-12-10T09:20:18.3711882Z       ✓ should return empty array when plugins.json is empty (9 ms)
2025-12-10T09:20:18.3713346Z       ✓ should return empty array when plugins.json contains invalid JSON (10 ms)
2025-12-10T09:20:18.3714203Z       ✓ should return empty array when plugins.json is missing plugins array (2 ms)
2025-12-10T09:20:18.3714749Z       ✓ should return plugins when plugins.json is valid (1 ms)
2025-12-10T09:20:18.3715146Z       ✓ should handle non-object JSON (3 ms)
2025-12-10T09:20:18.3715496Z       ✓ should handle whitespace-only file (7 ms)
2025-12-10T09:20:18.3715769Z     checkHealth
2025-12-10T09:20:18.3716149Z       ✓ should return unhealthy when plugins.json does not exist (1 ms)
2025-12-10T09:20:18.3716646Z       ✓ should return unhealthy when plugins.json is empty (1 ms)
2025-12-10T09:20:18.3717138Z       ✓ should return unhealthy when plugins.json has invalid JSON (1 ms)
2025-12-10T09:20:18.3717651Z       ✓ should return unhealthy when plugins directory does not exist (2 ms)
2025-12-10T09:20:18.3718199Z       ✓ should return healthy when both plugins.json and directory are valid (2 ms)
2025-12-10T09:20:18.3718778Z       ✓ should return unhealthy when plugins.json has invalid structure (2 ms)
2025-12-10T09:20:18.3719465Z       ✓ should detect non-writable directory (2 ms)
2025-12-10T09:20:18.3719825Z     uninstallPlugin - error handling
2025-12-10T09:20:18.3720290Z       ✓ should fail when plugin does not exist in plugins.json (46 ms)
2025-12-10T09:20:18.3720543Z 
2025-12-10T09:20:18.3920280Z   console.log
2025-12-10T09:20:18.3921579Z     Updated admin user with new password. Please keep your password secure!
2025-12-10T09:20:18.3922826Z 
2025-12-10T09:20:18.3923256Z       at log (auth/auth.js:179:21)
2025-12-10T09:20:18.3923985Z 
2025-12-10T09:20:18.3968517Z   console.log
2025-12-10T09:20:18.3969563Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:18.3970155Z 
2025-12-10T09:20:18.3970427Z       at log (server.js:284:17)
2025-12-10T09:20:18.3970710Z 
2025-12-10T09:20:18.3983957Z   console.log
2025-12-10T09:20:18.3985306Z     [LOGIN] Login attempt: {
2025-12-10T09:20:18.3985804Z       username: 'admin',
2025-12-10T09:20:18.3986498Z       sessionID: 'sptD1OyVu5KkMG2FoDQWRwfDrIVUS5b3',
2025-12-10T09:20:18.3987169Z       hasSession: true,
2025-12-10T09:20:18.3987720Z       timestamp: '2025-12-10T09:20:18.397Z'
2025-12-10T09:20:18.3988315Z     }
2025-12-10T09:20:18.3988589Z 
2025-12-10T09:20:18.3988969Z       at log (routes/api.js:15:13)
2025-12-10T09:20:18.3989530Z 
2025-12-10T09:20:18.4881725Z   console.log
2025-12-10T09:20:18.4883320Z     [Audit] Event logged: {
2025-12-10T09:20:18.4883804Z       eventType: 'auth.login.success',
2025-12-10T09:20:18.4884226Z       username: 'admin',
2025-12-10T09:20:18.4884641Z       timestamp: '2025-12-10T09:20:18.487Z'
2025-12-10T09:20:18.4885019Z     }
2025-12-10T09:20:18.4885173Z 
2025-12-10T09:20:18.4885366Z       at log (services/auditLog.js:106:17)
2025-12-10T09:20:18.4885659Z 
2025-12-10T09:20:18.4886111Z   console.log
2025-12-10T09:20:18.4886462Z     [LOGIN] Login successful: {
2025-12-10T09:20:18.4887018Z       username: 'admin',
2025-12-10T09:20:18.4887659Z       role: 'owner',
2025-12-10T09:20:18.4888121Z       sessionID: '[REDACTED]',
2025-12-10T09:20:18.4888542Z       authenticated: true,
2025-12-10T09:20:18.4888926Z       cookieMaxAge: 86399907,
2025-12-10T09:20:18.4889631Z       cookieExpires: 2025-12-11T09:20:18.395Z
2025-12-10T09:20:18.4890074Z     }
2025-12-10T09:20:18.4890248Z 
2025-12-10T09:20:18.4890558Z       at Immediate.log [as _onImmediate] (routes/api.js:64:25)
2025-12-10T09:20:18.4890963Z 
2025-12-10T09:20:18.4893200Z   console.log
2025-12-10T09:20:18.4893572Z     === API DEBUG LOG ===
2025-12-10T09:20:18.4893919Z 
2025-12-10T09:20:18.4894557Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:18.4895109Z 
2025-12-10T09:20:18.4897268Z   console.log
2025-12-10T09:20:18.4897671Z     POST /login - 200 (94ms)
2025-12-10T09:20:18.4897956Z 
2025-12-10T09:20:18.4898373Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:18.4899397Z 
2025-12-10T09:20:18.4901488Z   console.log
2025-12-10T09:20:18.4902409Z     Session: { id: 'sptD1OyVu5Kk...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:18.4902966Z 
2025-12-10T09:20:18.4903384Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:18.4903881Z 
2025-12-10T09:20:18.4908814Z   console.log
2025-12-10T09:20:18.4910429Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:18.4912548Z 
2025-12-10T09:20:18.4913211Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:18.4914039Z 
2025-12-10T09:20:18.4914616Z   console.log
2025-12-10T09:20:18.4915334Z     ====================
2025-12-10T09:20:18.4915939Z 
2025-12-10T09:20:18.4916560Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:18.4917691Z 
2025-12-10T09:20:18.4921739Z [0mPOST /api/login [32m200[0m 98.391 ms - 88[0m
2025-12-10T09:20:18.4955307Z   console.log
2025-12-10T09:20:18.4956624Z     [CSRF] Token request: {
2025-12-10T09:20:18.4957206Z       sessionID: 'sptD1OyVu5KkMG2FoDQWRwfDrIVUS5b3',
2025-12-10T09:20:18.4957751Z       authenticated: true,
2025-12-10T09:20:18.4958140Z       username: 'admin',
2025-12-10T09:20:18.4958504Z       hasCookies: true,
2025-12-10T09:20:18.4958937Z       timestamp: '2025-12-10T09:20:18.494Z'
2025-12-10T09:20:18.4959586Z     }
2025-12-10T09:20:18.4959752Z 
2025-12-10T09:20:18.4959943Z       at log (server.js:236:13)
2025-12-10T09:20:18.4960193Z 
2025-12-10T09:20:18.4964380Z   console.log
2025-12-10T09:20:18.4964850Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:18.4965470Z       sessionID: 'sptD1OyVu5KkMG2FoDQWRwfDrIVUS5b3',
2025-12-10T09:20:18.4965997Z       tokenLength: 64,
2025-12-10T09:20:18.4966424Z       tokenPrefix: 'bb90f866...',
2025-12-10T09:20:18.4966891Z       cookieName: 'csrf-token',
2025-12-10T09:20:18.4967621Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:18.4968948Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:18.4969862Z     }
2025-12-10T09:20:18.4970050Z 
2025-12-10T09:20:18.4970245Z       at log (server.js:266:13)
2025-12-10T09:20:18.4970516Z 
2025-12-10T09:20:18.4974711Z   console.log
2025-12-10T09:20:18.4977048Z     === API DEBUG LOG ===
2025-12-10T09:20:18.4977313Z 
2025-12-10T09:20:18.4979093Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:18.4980741Z 
2025-12-10T09:20:18.4982437Z   console.log
2025-12-10T09:20:18.4983085Z     GET /api/csrf-token - 200 (3ms)
2025-12-10T09:20:18.4983888Z 
2025-12-10T09:20:18.4984941Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:18.4985860Z 
2025-12-10T09:20:18.4992768Z   console.log
2025-12-10T09:20:18.4993752Z     Session: { id: 'sptD1OyVu5Kk...', authenticated: true, username: 'admin' }
2025-12-10T09:20:18.4995118Z 
2025-12-10T09:20:18.4995715Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:18.4996780Z 
2025-12-10T09:20:18.5001708Z   console.log
2025-12-10T09:20:18.5002139Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:18.5002506Z 
2025-12-10T09:20:18.5002912Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:18.5003395Z 
2025-12-10T09:20:18.5010726Z   console.log
2025-12-10T09:20:18.5011555Z     ====================
2025-12-10T09:20:18.5012415Z 
2025-12-10T09:20:18.5013008Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:18.5013845Z 
2025-12-10T09:20:18.5020297Z [0mGET /api/csrf-token [32m200[0m 7.319 ms - 80[0m
2025-12-10T09:20:18.5054881Z [0mPOST /api/logout [33m403[0m 1.132 ms - 102[0m
2025-12-10T09:20:18.5113563Z [0mPOST /api/logout [32m200[0m 1.723 ms - 52[0m
2025-12-10T09:20:18.5244478Z   console.error
2025-12-10T09:20:18.5245439Z     Error searching marketplace: Error: Search failed
2025-12-10T09:20:18.5247863Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/marketplace.test.js:60:17)
2025-12-10T09:20:18.5250296Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:18.5251928Z         at new Promise (<anonymous>)
2025-12-10T09:20:18.5253640Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:18.5255725Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:18.5263273Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:18.5264637Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:18.5266477Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:18.5268405Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:18.5270548Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:18.5272315Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:18.5274482Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:18.5276914Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:18.5279015Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:18.5280989Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:18.5282735Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:18.5283641Z 
2025-12-10T09:20:18.5284116Z     [0m [90m 59 |[39m         })[33m;[39m
2025-12-10T09:20:18.5284700Z      [90m 60 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:18.5285793Z     [31m[1m>[22m[39m[90m 61 |[39m         console[33m.[39merror([32m'Error searching marketplace:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:18.5286755Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:18.5287508Z      [90m 62 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({
2025-12-10T09:20:18.5288255Z      [90m 63 |[39m             success[33m:[39m [36mfalse[39m[33m,[39m
2025-12-10T09:20:18.5289097Z      [90m 64 |[39m             error[33m:[39m [32m'Failed to search marketplace'[39m[33m,[39m[0m
2025-12-10T09:20:18.5289699Z 
2025-12-10T09:20:18.5289914Z       at error (routes/marketplace.js:61:17)
2025-12-10T09:20:18.5290206Z 
2025-12-10T09:20:18.5337350Z [0mPOST /api/login [33m429[0m 3.686 ms - 175[0m
2025-12-10T09:20:18.5377643Z [0mPOST /api/login [33m401[0m 17.261 ms - 31[0m
2025-12-10T09:20:18.5384528Z [0mPOST /api/login [33m401[0m 16.234 ms - 31[0m
2025-12-10T09:20:18.5388832Z [0mPOST /api/login [33m401[0m 15.269 ms - 31[0m
2025-12-10T09:20:18.5394577Z [0mPOST /api/login [33m401[0m 14.664 ms - 31[0m
2025-12-10T09:20:18.5412628Z [0mPOST /api/login [33m401[0m 11.343 ms - 31[0m
2025-12-10T09:20:18.5437836Z   console.error
2025-12-10T09:20:18.5438346Z     Error fetching plugin details: Error: Not found
2025-12-10T09:20:18.5440132Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/marketplace.test.js:124:17)
2025-12-10T09:20:18.5442083Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:18.5443330Z         at new Promise (<anonymous>)
2025-12-10T09:20:18.5444550Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:18.5446422Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:18.5452375Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:18.5457839Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:18.5459931Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:18.5461927Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:18.5463823Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:18.5465586Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:18.5467660Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:18.5470424Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:18.5472447Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:18.5474211Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:18.5475986Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:18.5476910Z 
2025-12-10T09:20:18.5477280Z     [0m [90m 93 |[39m         })[33m;[39m
2025-12-10T09:20:18.5477930Z      [90m 94 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:18.5479345Z     [31m[1m>[22m[39m[90m 95 |[39m         console[33m.[39merror([32m'Error fetching plugin details:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:18.5480452Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:18.5481238Z      [90m 96 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({
2025-12-10T09:20:18.5482067Z      [90m 97 |[39m             success[33m:[39m [36mfalse[39m[33m,[39m
2025-12-10T09:20:18.5483022Z      [90m 98 |[39m             error[33m:[39m [32m'Failed to fetch plugin details'[39m[33m,[39m[0m
2025-12-10T09:20:18.5483508Z 
2025-12-10T09:20:18.5483743Z       at error (routes/marketplace.js:95:17)
2025-12-10T09:20:18.5484061Z 
2025-12-10T09:20:18.5484492Z [0mGET /api/csrf-token [32m200[0m 1.251 ms - 80[0m
2025-12-10T09:20:18.5641955Z   console.error
2025-12-10T09:20:18.5651769Z     Error fetching featured plugins: Error: Failed
2025-12-10T09:20:18.5653126Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/marketplace.test.js:210:17)
2025-12-10T09:20:18.5655657Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:18.5656830Z         at new Promise (<anonymous>)
2025-12-10T09:20:18.5658028Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:18.5660152Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:18.5661486Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:18.5662794Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:18.5664606Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:18.5666560Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:18.5668471Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:18.5670217Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:18.5672069Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:18.5674440Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:18.5676508Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:18.5678317Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:18.5680311Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:18.5681235Z 
2025-12-10T09:20:18.5681743Z     [0m [90m 170 |[39m         })[33m;[39m
2025-12-10T09:20:18.5682370Z      [90m 171 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:18.5683558Z     [31m[1m>[22m[39m[90m 172 |[39m         console[33m.[39merror([32m'Error fetching featured plugins:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:18.5684561Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:18.5685334Z      [90m 173 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({
2025-12-10T09:20:18.5686188Z      [90m 174 |[39m             success[33m:[39m [36mfalse[39m[33m,[39m
2025-12-10T09:20:18.5687186Z      [90m 175 |[39m             error[33m:[39m [32m'Failed to fetch featured plugins'[39m[33m,[39m[0m
2025-12-10T09:20:18.5687698Z 
2025-12-10T09:20:18.5687929Z       at error (routes/marketplace.js:172:17)
2025-12-10T09:20:18.5688239Z 
2025-12-10T09:20:18.5716386Z   console.error
2025-12-10T09:20:18.5716944Z     Error fetching categories: Error: Failed
2025-12-10T09:20:18.5723593Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/marketplace.test.js:241:17)
2025-12-10T09:20:18.5725355Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:18.5726434Z         at new Promise (<anonymous>)
2025-12-10T09:20:18.5727578Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:18.5729948Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:18.5731123Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:18.5732258Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:18.5733808Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:18.5735599Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:18.5737272Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:18.5738801Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:18.5741011Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:18.5742999Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:18.5744191Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:18.5745149Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:18.5746150Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:18.5746686Z 
2025-12-10T09:20:18.5746960Z     [0m [90m 192 |[39m         })[33m;[39m
2025-12-10T09:20:18.5747311Z      [90m 193 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:18.5747956Z     [31m[1m>[22m[39m[90m 194 |[39m         console[33m.[39merror([32m'Error fetching categories:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:18.5748485Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:18.5748901Z      [90m 195 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({
2025-12-10T09:20:18.5749672Z      [90m 196 |[39m             success[33m:[39m [36mfalse[39m[33m,[39m
2025-12-10T09:20:18.5750463Z      [90m 197 |[39m             error[33m:[39m [32m'Failed to fetch categories'[39m[33m,[39m[0m
2025-12-10T09:20:18.5750851Z 
2025-12-10T09:20:18.5751162Z       at error (routes/marketplace.js:194:17)
2025-12-10T09:20:18.5751441Z 
2025-12-10T09:20:18.5825397Z PASS __tests__/routes/marketplace.test.js
2025-12-10T09:20:18.5827783Z   Marketplace Routes
2025-12-10T09:20:18.5828188Z     GET /api/marketplace/search
2025-12-10T09:20:18.5828886Z       ✓ should search plugins successfully (17 ms)
2025-12-10T09:20:18.5830648Z       ✓ should handle search errors (7 ms)
2025-12-10T09:20:18.5831258Z       ✓ should apply default parameters (5 ms)
2025-12-10T09:20:18.5831810Z     GET /api/marketplace/plugin/:platform/:pluginId
2025-12-10T09:20:18.5832469Z       ✓ should get plugin details successfully (3 ms)
2025-12-10T09:20:18.5833076Z       ✓ should reject invalid platform (3 ms)
2025-12-10T09:20:18.5833633Z       ✓ should handle fetch errors (4 ms)
2025-12-10T09:20:18.5834219Z     GET /api/marketplace/plugin/:platform/:pluginId/versions
2025-12-10T09:20:18.5834919Z       ✓ should get plugin versions successfully (2 ms)
2025-12-10T09:20:18.5835557Z       ✓ should pass gameVersion filter (3 ms)
2025-12-10T09:20:18.5836138Z       ✓ should reject invalid platform (3 ms)
2025-12-10T09:20:18.5837112Z     GET /api/marketplace/featured
2025-12-10T09:20:18.5837728Z       ✓ should get featured plugins successfully (7 ms)
2025-12-10T09:20:18.5838349Z       ✓ should apply limit parameter (3 ms)
2025-12-10T09:20:18.5838888Z       ✓ should handle errors (4 ms)
2025-12-10T09:20:18.5839518Z     GET /api/marketplace/categories
2025-12-10T09:20:18.5840095Z       ✓ should get categories successfully (3 ms)
2025-12-10T09:20:18.5840637Z       ✓ should handle errors (5 ms)
2025-12-10T09:20:18.5840899Z 
2025-12-10T09:20:18.6730130Z PASS __tests__/diagnostics/logging.test.js
2025-12-10T09:20:18.6738476Z   Enhanced Diagnostic Logging
2025-12-10T09:20:18.6739077Z     CSRF Token Endpoint Logging
2025-12-10T09:20:18.6741094Z       ✓ should log session and cookie information (8 ms)
2025-12-10T09:20:18.6741908Z       ✓ should log token generation details (4 ms)
2025-12-10T09:20:18.6742833Z       ✓ should include development-only fields in development mode (3 ms)
2025-12-10T09:20:18.6743625Z     CSRF Validation Logging
2025-12-10T09:20:18.6744550Z       ✓ should log detailed information on CSRF validation failure (4 ms)
2025-12-10T09:20:18.6745409Z       ✓ should log success on valid CSRF token (9 ms)
2025-12-10T09:20:18.6745910Z     Rate Limiter Logging
2025-12-10T09:20:18.6746612Z       ✓ should log rate limit events with detailed information (26 ms)
2025-12-10T09:20:18.6748382Z     Development vs Production Logging
2025-12-10T09:20:18.6749468Z       ✓ should include sensitive data only in development mode (3 ms)
2025-12-10T09:20:18.6749931Z 
2025-12-10T09:20:18.7682808Z   console.log
2025-12-10T09:20:18.7684990Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:18.7685803Z 
2025-12-10T09:20:18.7686196Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.7686661Z 
2025-12-10T09:20:18.7693962Z   console.log
2025-12-10T09:20:18.7694592Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:18.7694973Z 
2025-12-10T09:20:18.7695474Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:18.7696011Z 
2025-12-10T09:20:18.7704800Z   console.log
2025-12-10T09:20:18.7705254Z     Player tracker initialized with 0 players
2025-12-10T09:20:18.7705576Z 
2025-12-10T09:20:18.7706034Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:18.7706552Z 
2025-12-10T09:20:18.7745207Z   console.log
2025-12-10T09:20:18.7745615Z     Database connection closed
2025-12-10T09:20:18.7745890Z 
2025-12-10T09:20:18.7746256Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.7746702Z 
2025-12-10T09:20:18.7755339Z   console.log
2025-12-10T09:20:18.7757642Z     Player tracker shutdown complete
2025-12-10T09:20:18.7757968Z 
2025-12-10T09:20:18.7758432Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:18.7758885Z 
2025-12-10T09:20:18.7831598Z   console.log
2025-12-10T09:20:18.7832614Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:18.7833428Z 
2025-12-10T09:20:18.7833812Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.7834273Z 
2025-12-10T09:20:18.7842167Z   console.log
2025-12-10T09:20:18.7842656Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:18.7843149Z 
2025-12-10T09:20:18.7843674Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:18.7844260Z 
2025-12-10T09:20:18.7852535Z   console.log
2025-12-10T09:20:18.7852988Z     Player tracker initialized with 0 players
2025-12-10T09:20:18.7853331Z 
2025-12-10T09:20:18.7853746Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:18.7854124Z 
2025-12-10T09:20:18.7884058Z   console.log
2025-12-10T09:20:18.7884737Z     Database connection closed
2025-12-10T09:20:18.7885009Z 
2025-12-10T09:20:18.7885554Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.7886003Z 
2025-12-10T09:20:18.7894297Z   console.log
2025-12-10T09:20:18.7894696Z     Player tracker shutdown complete
2025-12-10T09:20:18.7894997Z 
2025-12-10T09:20:18.7895412Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:18.7895812Z 
2025-12-10T09:20:18.7964970Z   console.log
2025-12-10T09:20:18.7966368Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:18.7967366Z 
2025-12-10T09:20:18.7967833Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.7968401Z 
2025-12-10T09:20:18.7976087Z   console.log
2025-12-10T09:20:18.7976678Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:18.7977042Z 
2025-12-10T09:20:18.7977588Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:18.7977988Z 
2025-12-10T09:20:18.7986968Z   console.log
2025-12-10T09:20:18.7987413Z     Player tracker initialized with 0 players
2025-12-10T09:20:18.7987746Z 
2025-12-10T09:20:18.7988212Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:18.7988744Z 
2025-12-10T09:20:18.7999859Z   console.log
2025-12-10T09:20:18.8000483Z     Player joined: NewPlayer (UUID: uuid-newplayer)
2025-12-10T09:20:18.8000870Z 
2025-12-10T09:20:18.8001373Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:18.8001958Z 
2025-12-10T09:20:18.8021337Z   console.log
2025-12-10T09:20:18.8022879Z     Ended session for NewPlayer
2025-12-10T09:20:18.8023194Z 
2025-12-10T09:20:18.8023842Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:219:29)
2025-12-10T09:20:18.8024375Z 
2025-12-10T09:20:18.8046484Z   console.log
2025-12-10T09:20:18.8046981Z     Database connection closed
2025-12-10T09:20:18.8047291Z 
2025-12-10T09:20:18.8047699Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.8048169Z 
2025-12-10T09:20:18.8054109Z   console.log
2025-12-10T09:20:18.8054767Z     Player tracker shutdown complete
2025-12-10T09:20:18.8055083Z 
2025-12-10T09:20:18.8055569Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:18.8056139Z 
2025-12-10T09:20:18.8121690Z   console.log
2025-12-10T09:20:18.8122679Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:18.8123174Z 
2025-12-10T09:20:18.8123411Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.8132828Z 
2025-12-10T09:20:18.8133015Z   console.log
2025-12-10T09:20:18.8133459Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:18.8133803Z 
2025-12-10T09:20:18.8134183Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:18.8134523Z 
2025-12-10T09:20:18.8143825Z   console.log
2025-12-10T09:20:18.8144252Z     Player tracker initialized with 0 players
2025-12-10T09:20:18.8144577Z 
2025-12-10T09:20:18.8145025Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:18.8145544Z 
2025-12-10T09:20:18.8152700Z   console.log
2025-12-10T09:20:18.8153229Z     Player joined: ReturningPlayer (UUID: uuid-returningplayer)
2025-12-10T09:20:18.8153651Z 
2025-12-10T09:20:18.8153960Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:18.8154280Z 
2025-12-10T09:20:18.8162279Z   console.log
2025-12-10T09:20:18.8162712Z     Player left: ReturningPlayer (session: 0s)
2025-12-10T09:20:18.8163034Z 
2025-12-10T09:20:18.8163487Z       at PlayerTrackerService.log [as playerLeft] (services/playerTracker.js:146:21)
2025-12-10T09:20:18.8164283Z 
2025-12-10T09:20:18.8169448Z   console.log
2025-12-10T09:20:18.8170218Z     Player joined: ReturningPlayer (UUID: uuid-returningplayer)
2025-12-10T09:20:18.8170614Z 
2025-12-10T09:20:18.8170906Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:18.8171233Z 
2025-12-10T09:20:18.8184592Z   console.log
2025-12-10T09:20:18.8184992Z     Ended session for ReturningPlayer
2025-12-10T09:20:18.8185280Z 
2025-12-10T09:20:18.8185725Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:219:29)
2025-12-10T09:20:18.8186230Z 
2025-12-10T09:20:18.8214607Z   console.log
2025-12-10T09:20:18.8214995Z     Database connection closed
2025-12-10T09:20:18.8215255Z 
2025-12-10T09:20:18.8215635Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.8215931Z 
2025-12-10T09:20:18.8224968Z   console.log
2025-12-10T09:20:18.8225356Z     Player tracker shutdown complete
2025-12-10T09:20:18.8225666Z 
2025-12-10T09:20:18.8226134Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:18.8226654Z 
2025-12-10T09:20:18.8307838Z   console.log
2025-12-10T09:20:18.8308935Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:18.8309997Z 
2025-12-10T09:20:18.8310411Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.8310896Z 
2025-12-10T09:20:18.8315983Z   console.log
2025-12-10T09:20:18.8316722Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:18.8317107Z 
2025-12-10T09:20:18.8317626Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:18.8318226Z 
2025-12-10T09:20:18.8324085Z   console.log
2025-12-10T09:20:18.8324765Z     Player tracker initialized with 0 players
2025-12-10T09:20:18.8325133Z 
2025-12-10T09:20:18.8325626Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:18.8326219Z 
2025-12-10T09:20:18.8331525Z   console.log
2025-12-10T09:20:18.8332252Z     Player joined: ActivePlayer (UUID: uuid-activeplayer)
2025-12-10T09:20:18.8332666Z 
2025-12-10T09:20:18.8333183Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:18.8333769Z 
2025-12-10T09:20:18.8342828Z   console.log
2025-12-10T09:20:18.8343517Z     Ended session for ActivePlayer
2025-12-10T09:20:18.8343942Z 
2025-12-10T09:20:18.8344494Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:219:29)
2025-12-10T09:20:18.8345138Z 
2025-12-10T09:20:18.8367188Z   console.log
2025-12-10T09:20:18.8367615Z     Database connection closed
2025-12-10T09:20:18.8367903Z 
2025-12-10T09:20:18.8368312Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.8368780Z 
2025-12-10T09:20:18.8374684Z   console.log
2025-12-10T09:20:18.8375438Z     Player tracker shutdown complete
2025-12-10T09:20:18.8375971Z 
2025-12-10T09:20:18.8377004Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:18.8378043Z 
2025-12-10T09:20:18.8448885Z   console.log
2025-12-10T09:20:18.8450320Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:18.8451149Z 
2025-12-10T09:20:18.8451638Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.8452122Z 
2025-12-10T09:20:18.8457541Z   console.log
2025-12-10T09:20:18.8458028Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:18.8458407Z 
2025-12-10T09:20:18.8458911Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:18.8459760Z 
2025-12-10T09:20:18.8465839Z   console.log
2025-12-10T09:20:18.8466279Z     Player tracker initialized with 0 players
2025-12-10T09:20:18.8466605Z 
2025-12-10T09:20:18.8467080Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:18.8468229Z 
2025-12-10T09:20:18.8473374Z   console.log
2025-12-10T09:20:18.8473873Z     Player joined: LeavingPlayer (UUID: uuid-leavingplayer)
2025-12-10T09:20:18.8474238Z 
2025-12-10T09:20:18.8474709Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:18.8475220Z 
2025-12-10T09:20:18.8695477Z   console.log
2025-12-10T09:20:18.8696086Z     [Session] Cookie configuration: {
2025-12-10T09:20:18.8696623Z       secure: false,
2025-12-10T09:20:18.8697033Z       nodeEnv: 'test',
2025-12-10T09:20:18.8697522Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:18.8698197Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:18.8698762Z     }
2025-12-10T09:20:18.8698959Z 
2025-12-10T09:20:18.8699491Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:18.8699751Z 
2025-12-10T09:20:18.8992741Z   console.log
2025-12-10T09:20:18.8994321Z     Player left: LeavingPlayer (session: 0s)
2025-12-10T09:20:18.8994732Z 
2025-12-10T09:20:18.8995231Z       at PlayerTrackerService.log [as playerLeft] (services/playerTracker.js:146:21)
2025-12-10T09:20:18.8995777Z 
2025-12-10T09:20:18.9052817Z   console.log
2025-12-10T09:20:18.9054517Z     Database connection closed
2025-12-10T09:20:18.9054820Z 
2025-12-10T09:20:18.9055238Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.9055752Z 
2025-12-10T09:20:18.9059529Z   console.log
2025-12-10T09:20:18.9060242Z     Player tracker shutdown complete
2025-12-10T09:20:18.9060569Z 
2025-12-10T09:20:18.9061056Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:18.9061588Z 
2025-12-10T09:20:18.9113566Z   console.log
2025-12-10T09:20:18.9114664Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:18.9115524Z 
2025-12-10T09:20:18.9115943Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.9116485Z 
2025-12-10T09:20:18.9121087Z   console.log
2025-12-10T09:20:18.9121837Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:18.9122236Z 
2025-12-10T09:20:18.9122752Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:18.9123345Z 
2025-12-10T09:20:18.9128944Z   console.log
2025-12-10T09:20:18.9129783Z     Player tracker initialized with 0 players
2025-12-10T09:20:18.9130167Z 
2025-12-10T09:20:18.9130824Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:18.9131399Z 
2025-12-10T09:20:18.9147081Z   console.warn
2025-12-10T09:20:18.9147778Z     Player left but no session found: NoSessionPlayer
2025-12-10T09:20:18.9148410Z 
2025-12-10T09:20:18.9149433Z     [0m [90m 131 |[39m                     uuid [33m=[39m player[33m.[39muuid[33m;[39m
2025-12-10T09:20:18.9150289Z      [90m 132 |[39m                 } [36melse[39m {
2025-12-10T09:20:18.9151553Z     [31m[1m>[22m[39m[90m 133 |[39m                     console[33m.[39mwarn([32m`Player left but no session found: ${username}`[39m)[33m;[39m
2025-12-10T09:20:18.9152627Z      [90m     |[39m                             [31m[1m^[22m[39m
2025-12-10T09:20:18.9153395Z      [90m 134 |[39m                     [36mreturn[39m[33m;[39m
2025-12-10T09:20:18.9154051Z      [90m 135 |[39m                 }
2025-12-10T09:20:18.9154651Z      [90m 136 |[39m             }[0m
2025-12-10T09:20:18.9154936Z 
2025-12-10T09:20:18.9155439Z       at PlayerTrackerService.warn [as playerLeft] (services/playerTracker.js:133:29)
2025-12-10T09:20:18.9156390Z       at Object.playerLeft (__tests__/services/playerTracker.test.js:137:40)
2025-12-10T09:20:18.9156888Z 
2025-12-10T09:20:18.9184226Z   console.log
2025-12-10T09:20:18.9195172Z     Database connection closed
2025-12-10T09:20:18.9195469Z 
2025-12-10T09:20:18.9195850Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.9196627Z 
2025-12-10T09:20:18.9197889Z   console.log
2025-12-10T09:20:18.9198345Z     Player tracker shutdown complete
2025-12-10T09:20:18.9198651Z 
2025-12-10T09:20:18.9199114Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:18.9199890Z 
2025-12-10T09:20:18.9303417Z   console.log
2025-12-10T09:20:18.9304592Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:18.9305452Z 
2025-12-10T09:20:18.9305867Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.9306332Z 
2025-12-10T09:20:18.9311899Z   console.log
2025-12-10T09:20:18.9312386Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:18.9312758Z 
2025-12-10T09:20:18.9313256Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:18.9313845Z 
2025-12-10T09:20:18.9320039Z   console.log
2025-12-10T09:20:18.9320862Z     Player tracker initialized with 0 players
2025-12-10T09:20:18.9321396Z 
2025-12-10T09:20:18.9321942Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:18.9322516Z 
2025-12-10T09:20:18.9328064Z   console.log
2025-12-10T09:20:18.9328897Z     Player joined: Player1 (UUID: uuid-player1)
2025-12-10T09:20:18.9329742Z 
2025-12-10T09:20:18.9330309Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:18.9330895Z 
2025-12-10T09:20:18.9334420Z   console.log
2025-12-10T09:20:18.9335112Z     Player joined: Player2 (UUID: uuid-player2)
2025-12-10T09:20:18.9335470Z 
2025-12-10T09:20:18.9335958Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:18.9336536Z 
2025-12-10T09:20:18.9348022Z   console.log
2025-12-10T09:20:18.9348403Z     Ended session for Player1
2025-12-10T09:20:18.9348693Z 
2025-12-10T09:20:18.9349541Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:219:29)
2025-12-10T09:20:18.9350143Z 
2025-12-10T09:20:18.9356710Z   console.log
2025-12-10T09:20:18.9357273Z     Ended session for Player2
2025-12-10T09:20:18.9357560Z 
2025-12-10T09:20:18.9358021Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:219:29)
2025-12-10T09:20:18.9358373Z 
2025-12-10T09:20:18.9383777Z   console.log
2025-12-10T09:20:18.9384205Z     Database connection closed
2025-12-10T09:20:18.9384490Z 
2025-12-10T09:20:18.9384895Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.9385356Z 
2025-12-10T09:20:18.9391144Z   console.log
2025-12-10T09:20:18.9391831Z     Player tracker shutdown complete
2025-12-10T09:20:18.9392285Z 
2025-12-10T09:20:18.9392824Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:18.9393374Z 
2025-12-10T09:20:18.9444610Z   console.log
2025-12-10T09:20:18.9445727Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:18.9446612Z 
2025-12-10T09:20:18.9447039Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.9447526Z 
2025-12-10T09:20:18.9453143Z   console.log
2025-12-10T09:20:18.9453850Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:18.9454235Z 
2025-12-10T09:20:18.9454756Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:18.9455332Z 
2025-12-10T09:20:18.9461775Z   console.log
2025-12-10T09:20:18.9462984Z     Player tracker initialized with 0 players
2025-12-10T09:20:18.9463739Z 
2025-12-10T09:20:18.9464484Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:18.9465536Z 
2025-12-10T09:20:18.9487973Z   console.log
2025-12-10T09:20:18.9490216Z     Database connection closed
2025-12-10T09:20:18.9490509Z 
2025-12-10T09:20:18.9490914Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.9491813Z 
2025-12-10T09:20:18.9497086Z   console.log
2025-12-10T09:20:18.9498972Z     Player tracker shutdown complete
2025-12-10T09:20:18.9501117Z 
2025-12-10T09:20:18.9501802Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:18.9503016Z 
2025-12-10T09:20:18.9554253Z   console.log
2025-12-10T09:20:18.9555248Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:18.9556034Z 
2025-12-10T09:20:18.9556419Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.9556925Z 
2025-12-10T09:20:18.9564818Z   console.log
2025-12-10T09:20:18.9565370Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:18.9565972Z 
2025-12-10T09:20:18.9566473Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:18.9567039Z 
2025-12-10T09:20:18.9575282Z   console.log
2025-12-10T09:20:18.9575714Z     Player tracker initialized with 0 players
2025-12-10T09:20:18.9576039Z 
2025-12-10T09:20:18.9576442Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:18.9576780Z 
2025-12-10T09:20:18.9583738Z   console.log
2025-12-10T09:20:18.9584340Z     Player joined: OnlinePlayer1 (UUID: uuid-onlineplayer1)
2025-12-10T09:20:18.9584731Z 
2025-12-10T09:20:18.9585208Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:18.9585732Z 
2025-12-10T09:20:18.9591435Z   console.log
2025-12-10T09:20:18.9591938Z     Player joined: OnlinePlayer2 (UUID: uuid-onlineplayer2)
2025-12-10T09:20:18.9592324Z 
2025-12-10T09:20:18.9592704Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:18.9597809Z 
2025-12-10T09:20:18.9597970Z   console.log
2025-12-10T09:20:18.9598480Z     Player joined: OfflinePlayer (UUID: uuid-offlineplayer)
2025-12-10T09:20:18.9598894Z 
2025-12-10T09:20:18.9599603Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:18.9600163Z 
2025-12-10T09:20:18.9603686Z   console.log
2025-12-10T09:20:18.9604127Z     Player left: OfflinePlayer (session: 0s)
2025-12-10T09:20:18.9604451Z 
2025-12-10T09:20:18.9604915Z       at PlayerTrackerService.log [as playerLeft] (services/playerTracker.js:146:21)
2025-12-10T09:20:18.9605433Z 
2025-12-10T09:20:18.9620472Z   console.log
2025-12-10T09:20:18.9620982Z     Ended session for OnlinePlayer1
2025-12-10T09:20:18.9621282Z 
2025-12-10T09:20:18.9621730Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:219:29)
2025-12-10T09:20:18.9622238Z 
2025-12-10T09:20:18.9632236Z   console.log
2025-12-10T09:20:18.9632771Z     Ended session for OnlinePlayer2
2025-12-10T09:20:18.9633074Z 
2025-12-10T09:20:18.9633555Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:219:29)
2025-12-10T09:20:18.9634091Z 
2025-12-10T09:20:18.9683493Z   console.log
2025-12-10T09:20:18.9683837Z     Database connection closed
2025-12-10T09:20:18.9684118Z 
2025-12-10T09:20:18.9684476Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.9684896Z 
2025-12-10T09:20:18.9685014Z   console.log
2025-12-10T09:20:18.9685361Z     Player tracker shutdown complete
2025-12-10T09:20:18.9685602Z 
2025-12-10T09:20:18.9686035Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:18.9686542Z 
2025-12-10T09:20:18.9734974Z   console.log
2025-12-10T09:20:18.9735960Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:18.9736447Z 
2025-12-10T09:20:18.9736695Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.9736973Z 
2025-12-10T09:20:18.9745251Z   console.log
2025-12-10T09:20:18.9745699Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:18.9746346Z 
2025-12-10T09:20:18.9747015Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:18.9747574Z 
2025-12-10T09:20:18.9755291Z   console.log
2025-12-10T09:20:18.9755728Z     Player tracker initialized with 0 players
2025-12-10T09:20:18.9756049Z 
2025-12-10T09:20:18.9756496Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:18.9757016Z 
2025-12-10T09:20:18.9792477Z   console.log
2025-12-10T09:20:18.9792878Z     Database connection closed
2025-12-10T09:20:18.9793142Z 
2025-12-10T09:20:18.9793510Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.9793938Z 
2025-12-10T09:20:18.9801861Z   console.log
2025-12-10T09:20:18.9802267Z     Player tracker shutdown complete
2025-12-10T09:20:18.9802559Z 
2025-12-10T09:20:18.9802998Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:18.9803554Z 
2025-12-10T09:20:18.9864549Z   console.log
2025-12-10T09:20:18.9865895Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:18.9866785Z 
2025-12-10T09:20:18.9867202Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.9867690Z 
2025-12-10T09:20:18.9873398Z   console.log
2025-12-10T09:20:18.9874269Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:18.9874669Z 
2025-12-10T09:20:18.9875191Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:18.9875769Z 
2025-12-10T09:20:18.9881600Z   console.log
2025-12-10T09:20:18.9882273Z     Player tracker initialized with 0 players
2025-12-10T09:20:18.9882614Z 
2025-12-10T09:20:18.9883109Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:18.9883646Z 
2025-12-10T09:20:18.9907557Z   console.log
2025-12-10T09:20:18.9908213Z     Database connection closed
2025-12-10T09:20:18.9908522Z 
2025-12-10T09:20:18.9908933Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:18.9909606Z 
2025-12-10T09:20:18.9915287Z   console.log
2025-12-10T09:20:18.9915901Z     Player tracker shutdown complete
2025-12-10T09:20:18.9916224Z 
2025-12-10T09:20:18.9916696Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:18.9917263Z 
2025-12-10T09:20:18.9971692Z   console.log
2025-12-10T09:20:18.9972693Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:18.9973178Z 
2025-12-10T09:20:18.9973423Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:18.9973704Z 
2025-12-10T09:20:18.9981930Z   console.log
2025-12-10T09:20:18.9982366Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:18.9982713Z 
2025-12-10T09:20:18.9983209Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:18.9983763Z 
2025-12-10T09:20:18.9991759Z   console.log
2025-12-10T09:20:18.9992191Z     Player tracker initialized with 0 players
2025-12-10T09:20:18.9992523Z 
2025-12-10T09:20:18.9992976Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:18.9993391Z 
2025-12-10T09:20:19.0021009Z   console.log
2025-12-10T09:20:19.0021393Z     Database connection closed
2025-12-10T09:20:19.0021653Z 
2025-12-10T09:20:19.0022013Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:19.0022458Z 
2025-12-10T09:20:19.0030691Z   console.log
2025-12-10T09:20:19.0031094Z     Player tracker shutdown complete
2025-12-10T09:20:19.0031387Z 
2025-12-10T09:20:19.0031836Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:19.0032363Z 
2025-12-10T09:20:19.0097626Z   console.log
2025-12-10T09:20:19.0099468Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:19.0100204Z 
2025-12-10T09:20:19.0100522Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:19.0100860Z 
2025-12-10T09:20:19.0107641Z   console.log
2025-12-10T09:20:19.0108103Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:19.0108475Z 
2025-12-10T09:20:19.0109000Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:19.0109779Z 
2025-12-10T09:20:19.0117671Z   console.log
2025-12-10T09:20:19.0118131Z     Player tracker initialized with 0 players
2025-12-10T09:20:19.0118485Z 
2025-12-10T09:20:19.0118912Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:19.0119540Z 
2025-12-10T09:20:19.0146384Z   console.log
2025-12-10T09:20:19.0146774Z     Database connection closed
2025-12-10T09:20:19.0147041Z 
2025-12-10T09:20:19.0147427Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:19.0147881Z 
2025-12-10T09:20:19.0155727Z   console.log
2025-12-10T09:20:19.0156129Z     Player tracker shutdown complete
2025-12-10T09:20:19.0156419Z 
2025-12-10T09:20:19.0156851Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:19.0157398Z 
2025-12-10T09:20:19.0217364Z   console.log
2025-12-10T09:20:19.0218363Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:19.0219347Z 
2025-12-10T09:20:19.0219738Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:19.0220211Z 
2025-12-10T09:20:19.0220397Z   console.log
2025-12-10T09:20:19.0220914Z     [Test] Session middleware initialized (memory store)
2025-12-10T09:20:19.0221288Z 
2025-12-10T09:20:19.0221496Z       at Object.log (server.js:142:13)
2025-12-10T09:20:19.0221782Z 
2025-12-10T09:20:19.0228112Z   console.log
2025-12-10T09:20:19.0228562Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:19.0228901Z 
2025-12-10T09:20:19.0229563Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:19.0230113Z 
2025-12-10T09:20:19.0230849Z   console.log
2025-12-10T09:20:19.0231358Z     [Session] Initialization status: {
2025-12-10T09:20:19.0231784Z       nodeEnv: 'test',
2025-12-10T09:20:19.0232134Z       sessionSecretSet: true,
2025-12-10T09:20:19.0232519Z       redisConfigured: false,
2025-12-10T09:20:19.0232903Z       middlewareApplied: true
2025-12-10T09:20:19.0233250Z     }
2025-12-10T09:20:19.0233401Z 
2025-12-10T09:20:19.0233593Z       at Object.log (server.js:155:9)
2025-12-10T09:20:19.0233880Z 
2025-12-10T09:20:19.0238838Z   console.log
2025-12-10T09:20:19.0239551Z     Player tracker initialized with 0 players
2025-12-10T09:20:19.0239887Z 
2025-12-10T09:20:19.0240338Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:19.0240887Z 
2025-12-10T09:20:19.0241114Z   console.log
2025-12-10T09:20:19.0242114Z     [CSRF] Cookie configuration: {
2025-12-10T09:20:19.0242529Z       secure: false,
2025-12-10T09:20:19.0242854Z       nodeEnv: 'test',
2025-12-10T09:20:19.0243250Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:19.0243791Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:19.0244238Z     }
2025-12-10T09:20:19.0244387Z 
2025-12-10T09:20:19.0244605Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:19.0244902Z 
2025-12-10T09:20:19.0247799Z   console.log
2025-12-10T09:20:19.0248407Z     Player joined: TestPlayer1 (UUID: uuid-testplayer1)
2025-12-10T09:20:19.0248771Z 
2025-12-10T09:20:19.0249400Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:19.0249936Z 
2025-12-10T09:20:19.0256320Z   console.log
2025-12-10T09:20:19.0256790Z     Player joined: TestPlayer2 (UUID: uuid-testplayer2)
2025-12-10T09:20:19.0257405Z 
2025-12-10T09:20:19.0257845Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:19.0258188Z 
2025-12-10T09:20:19.0264091Z   console.log
2025-12-10T09:20:19.0264487Z     Ended session for TestPlayer1
2025-12-10T09:20:19.0264922Z 
2025-12-10T09:20:19.0265379Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:219:29)
2025-12-10T09:20:19.0265894Z 
2025-12-10T09:20:19.0269994Z   console.log
2025-12-10T09:20:19.0270371Z     Ended session for TestPlayer2
2025-12-10T09:20:19.0270651Z 
2025-12-10T09:20:19.0271074Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:219:29)
2025-12-10T09:20:19.0271393Z 
2025-12-10T09:20:19.0313527Z   console.log
2025-12-10T09:20:19.0315940Z     Database connection closed
2025-12-10T09:20:19.0317285Z 
2025-12-10T09:20:19.0318713Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:19.0319935Z 
2025-12-10T09:20:19.0321445Z   console.log
2025-12-10T09:20:19.0322003Z     Player tracker shutdown complete
2025-12-10T09:20:19.0322334Z 
2025-12-10T09:20:19.0322795Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:19.0323319Z 
2025-12-10T09:20:19.0323451Z   console.log
2025-12-10T09:20:19.0324371Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:19.0325147Z 
2025-12-10T09:20:19.0325518Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:19.0325897Z 
2025-12-10T09:20:19.0332529Z   console.log
2025-12-10T09:20:19.0333024Z     Database connection closed
2025-12-10T09:20:19.0333361Z 
2025-12-10T09:20:19.0333991Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:19.0334483Z 
2025-12-10T09:20:19.0341463Z   console.log
2025-12-10T09:20:19.0341871Z     Player tracker shutdown complete
2025-12-10T09:20:19.0342170Z 
2025-12-10T09:20:19.0342657Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:19.0343181Z 
2025-12-10T09:20:19.0424819Z   console.log
2025-12-10T09:20:19.0425234Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:19.0425552Z 
2025-12-10T09:20:19.0425725Z       at log (server.js:284:17)
2025-12-10T09:20:19.0425976Z 
2025-12-10T09:20:19.0447497Z   console.log
2025-12-10T09:20:19.0447862Z     [LOGIN] Login attempt: {
2025-12-10T09:20:19.0448369Z       username: 'admin',
2025-12-10T09:20:19.0448885Z       sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.0449526Z       hasSession: true,
2025-12-10T09:20:19.0449804Z       timestamp: '2025-12-10T09:20:19.043Z'
2025-12-10T09:20:19.0450184Z     }
2025-12-10T09:20:19.0450288Z 
2025-12-10T09:20:19.0450462Z       at log (routes/api.js:15:13)
2025-12-10T09:20:19.0450701Z 
2025-12-10T09:20:19.0537112Z PASS __tests__/services/playerTracker.test.js
2025-12-10T09:20:19.0538826Z   PlayerTrackerService
2025-12-10T09:20:19.0539407Z     initialize
2025-12-10T09:20:19.0549700Z       ✓ should initialize database (20 ms)
2025-12-10T09:20:19.0550409Z       ✓ should start heartbeat timer (14 ms)
2025-12-10T09:20:19.0550867Z     playerJoined
2025-12-10T09:20:19.0551449Z       ✓ should create new player record on first join (16 ms)
2025-12-10T09:20:19.0552241Z       ✓ should increment session count for returning player (17 ms)
2025-12-10T09:20:19.0552938Z       ✓ should track active session (15 ms)
2025-12-10T09:20:19.0553343Z     playerLeft
2025-12-10T09:20:19.0553851Z       ✓ should update player stats when leaving (68 ms)
2025-12-10T09:20:19.0554655Z       ✓ should handle leaving without active session gracefully (14 ms)
2025-12-10T09:20:19.0555214Z     getAllPlayers
2025-12-10T09:20:19.0555700Z       ✓ should return all tracked players (20 ms)
2025-12-10T09:20:19.0556358Z       ✓ should return empty array when no players (10 ms)
2025-12-10T09:20:19.0556816Z     getOnlinePlayers
2025-12-10T09:20:19.0557318Z       ✓ should return only online players (18 ms)
2025-12-10T09:20:19.0558262Z     formatDuration
2025-12-10T09:20:19.0558956Z       ✓ should format seconds (13 ms)
2025-12-10T09:20:19.0559664Z       ✓ should format minutes (11 ms)
2025-12-10T09:20:19.0560171Z       ✓ should format hours (12 ms)
2025-12-10T09:20:19.0560673Z       ✓ should format days (12 ms)
2025-12-10T09:20:19.0561048Z     heartbeat
2025-12-10T09:20:19.0561590Z       ○ skipped should update active sessions on heartbeat
2025-12-10T09:20:19.0562055Z     shutdown
2025-12-10T09:20:19.0562570Z       ✓ should end all active sessions on shutdown (19 ms)
2025-12-10T09:20:19.0562915Z 
2025-12-10T09:20:19.1036996Z   console.log
2025-12-10T09:20:19.1037873Z     [BearerAuth] Valid API key: { id: 'key-1', name: 'Test Key', prefix: undefined }
2025-12-10T09:20:19.1039531Z 
2025-12-10T09:20:19.1040883Z       at log (auth/bearerAuth.js:75:17)
2025-12-10T09:20:19.1042273Z 
2025-12-10T09:20:19.1085500Z   console.log
2025-12-10T09:20:19.1086195Z     [BearerAuth] Invalid or expired API key
2025-12-10T09:20:19.1086614Z 
2025-12-10T09:20:19.1086867Z       at log (auth/bearerAuth.js:62:17)
2025-12-10T09:20:19.1087272Z 
2025-12-10T09:20:19.1108840Z   console.log
2025-12-10T09:20:19.1111954Z     [Auth] Authentication check: {
2025-12-10T09:20:19.1112438Z       path: undefined,
2025-12-10T09:20:19.1112814Z       method: undefined,
2025-12-10T09:20:19.1113223Z       hasBearerToken: true,
2025-12-10T09:20:19.1113603Z       hasSession: true,
2025-12-10T09:20:19.1114014Z       sessionAuthenticated: false
2025-12-10T09:20:19.1114414Z     }
2025-12-10T09:20:19.1114569Z 
2025-12-10T09:20:19.1114772Z       at log (auth/bearerAuth.js:90:13)
2025-12-10T09:20:19.1115075Z 
2025-12-10T09:20:19.1120077Z   console.log
2025-12-10T09:20:19.1122047Z     [BearerAuth] Valid API key: { id: 'key-1', name: 'Test Key', prefix: undefined }
2025-12-10T09:20:19.1122798Z 
2025-12-10T09:20:19.1123941Z       at log (auth/bearerAuth.js:75:17)
2025-12-10T09:20:19.1124413Z 
2025-12-10T09:20:19.1128899Z   console.log
2025-12-10T09:20:19.1129941Z     [Auth] API key authentication successful
2025-12-10T09:20:19.1131091Z 
2025-12-10T09:20:19.1131519Z       at log (auth/bearerAuth.js:101:17)
2025-12-10T09:20:19.1131863Z 
2025-12-10T09:20:19.1143610Z   console.log
2025-12-10T09:20:19.1144707Z     [Auth] Authentication check: {
2025-12-10T09:20:19.1145550Z       path: undefined,
2025-12-10T09:20:19.1146209Z       method: undefined,
2025-12-10T09:20:19.1146660Z       hasBearerToken: undefined,
2025-12-10T09:20:19.1147062Z       hasSession: true,
2025-12-10T09:20:19.1147472Z       sessionAuthenticated: true
2025-12-10T09:20:19.1147851Z     }
2025-12-10T09:20:19.1148007Z 
2025-12-10T09:20:19.1148217Z       at log (auth/bearerAuth.js:90:13)
2025-12-10T09:20:19.1148526Z 
2025-12-10T09:20:19.1156006Z   console.log
2025-12-10T09:20:19.1157313Z     [Auth] Session authentication successful: testuser
2025-12-10T09:20:19.1158081Z 
2025-12-10T09:20:19.1158514Z       at log (auth/bearerAuth.js:116:17)
2025-12-10T09:20:19.1158861Z 
2025-12-10T09:20:19.1168375Z   console.log
2025-12-10T09:20:19.1168818Z     [Auth] Authentication check: {
2025-12-10T09:20:19.1169462Z       path: undefined,
2025-12-10T09:20:19.1169832Z       method: undefined,
2025-12-10T09:20:19.1170256Z       hasBearerToken: undefined,
2025-12-10T09:20:19.1170668Z       hasSession: true,
2025-12-10T09:20:19.1171100Z       sessionAuthenticated: false
2025-12-10T09:20:19.1171498Z     }
2025-12-10T09:20:19.1171656Z 
2025-12-10T09:20:19.1171863Z       at log (auth/bearerAuth.js:90:13)
2025-12-10T09:20:19.1172158Z 
2025-12-10T09:20:19.1176642Z   console.log
2025-12-10T09:20:19.1177694Z     [Auth] Authentication failed: no valid API key, *** or session
2025-12-10T09:20:19.1178175Z 
2025-12-10T09:20:19.1178404Z       at log (auth/bearerAuth.js:122:13)
2025-12-10T09:20:19.1178721Z 
2025-12-10T09:20:19.1330228Z PASS __tests__/auth/apiKeyAuth.test.js
2025-12-10T09:20:19.1331254Z   *** with API Keys
2025-12-10T09:20:19.1331822Z     verifyApiKey
2025-12-10T09:20:19.1332540Z       ✓ should verify valid API key (7 ms)
2025-12-10T09:20:19.1333832Z       ✓ should return null for invalid API key (1 ms)
2025-12-10T09:20:19.1334533Z       ✓ should return null for non-mcs_ prefixed token (1 ms)
2025-12-10T09:20:19.1335198Z       ✓ should return null when no authorization header
2025-12-10T09:20:19.1336006Z       ✓ should return null for non-***
2025-12-10T09:20:19.1336442Z     requireAuthOrToken
2025-12-10T09:20:19.1336983Z       ✓ should authenticate with valid API key (4 ms)
2025-12-10T09:20:19.1337690Z       ✓ should fallback to session auth when no API key (2 ms)
2025-12-10T09:20:19.1338434Z       ✓ should return 401 when no valid authentication (3 ms)
2025-12-10T09:20:19.1338920Z     requireApiScope
2025-12-10T09:20:19.1339923Z       ✓ should allow request with required scope
2025-12-10T09:20:19.1340667Z       ✓ should reject request without required scope (1 ms)
2025-12-10T09:20:19.1341335Z       ✓ should skip scope check for non-API key auth
2025-12-10T09:20:19.1341989Z       ✓ should return 403 when API key is missing (1 ms)
2025-12-10T09:20:19.1342360Z 
2025-12-10T09:20:19.1427442Z   console.log
2025-12-10T09:20:19.1427810Z     [Audit] Event logged: {
2025-12-10T09:20:19.1428259Z       eventType: 'auth.login.success',
2025-12-10T09:20:19.1428672Z       username: 'admin',
2025-12-10T09:20:19.1429081Z       timestamp: '2025-12-10T09:20:19.141Z'
2025-12-10T09:20:19.1429672Z     }
2025-12-10T09:20:19.1429825Z 
2025-12-10T09:20:19.1430032Z       at log (services/auditLog.js:106:17)
2025-12-10T09:20:19.1430326Z 
2025-12-10T09:20:19.1434474Z   console.log
2025-12-10T09:20:19.1434860Z     [LOGIN] Login successful: {
2025-12-10T09:20:19.1435253Z       username: 'admin',
2025-12-10T09:20:19.1435597Z       role: 'owner',
2025-12-10T09:20:19.1435963Z       sessionID: '[REDACTED]',
2025-12-10T09:20:19.1436336Z       authenticated: true,
2025-12-10T09:20:19.1436706Z       cookieMaxAge: 86399898,
2025-12-10T09:20:19.1437161Z       cookieExpires: 2025-12-11T09:20:19.040Z
2025-12-10T09:20:19.1437569Z     }
2025-12-10T09:20:19.1437745Z 
2025-12-10T09:20:19.1438017Z       at Immediate.log [as _onImmediate] (routes/api.js:64:25)
2025-12-10T09:20:19.1438262Z 
2025-12-10T09:20:19.1443313Z   console.log
2025-12-10T09:20:19.1443664Z     === API DEBUG LOG ===
2025-12-10T09:20:19.1443900Z 
2025-12-10T09:20:19.1444272Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:19.1444725Z 
2025-12-10T09:20:19.1448464Z   console.log
2025-12-10T09:20:19.1448811Z     POST /login - 200 (104ms)
2025-12-10T09:20:19.1449061Z 
2025-12-10T09:20:19.1449630Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:19.1450076Z 
2025-12-10T09:20:19.1454335Z   console.log
2025-12-10T09:20:19.1454939Z     Session: { id: 'mcCJdkijv6h8...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:19.1455406Z 
2025-12-10T09:20:19.1455779Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:19.1456230Z 
2025-12-10T09:20:19.1460000Z   console.log
2025-12-10T09:20:19.1460727Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:19.1461274Z 
2025-12-10T09:20:19.1461858Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:19.1462935Z 
2025-12-10T09:20:19.1471569Z   console.log
2025-12-10T09:20:19.1471928Z     ====================
2025-12-10T09:20:19.1472168Z 
2025-12-10T09:20:19.1472559Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:19.1473029Z 
2025-12-10T09:20:19.1481981Z [0mPOST /api/login [32m200[0m 111.876 ms - 88[0m
2025-12-10T09:20:19.1533785Z   console.log
2025-12-10T09:20:19.1534303Z     [CSRF] Token request: {
2025-12-10T09:20:19.1534825Z       sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.1535338Z       authenticated: true,
2025-12-10T09:20:19.1535584Z       username: 'admin',
2025-12-10T09:20:19.1535822Z       hasCookies: true,
2025-12-10T09:20:19.1536098Z       timestamp: '2025-12-10T09:20:19.151Z'
2025-12-10T09:20:19.1536602Z     }
2025-12-10T09:20:19.1536714Z 
2025-12-10T09:20:19.1536962Z       at log (server.js:236:13)
2025-12-10T09:20:19.1537129Z 
2025-12-10T09:20:19.1545687Z   console.log
2025-12-10T09:20:19.1546106Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:19.1546692Z       sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.1547131Z       tokenLength: 64,
2025-12-10T09:20:19.1547384Z       tokenPrefix: '845e6d59...',
2025-12-10T09:20:19.1547662Z       cookieName: 'csrf-token',
2025-12-10T09:20:19.1548058Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:19.1548812Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:19.1549416Z     }
2025-12-10T09:20:19.1549529Z 
2025-12-10T09:20:19.1549637Z       at log (server.js:266:13)
2025-12-10T09:20:19.1549793Z 
2025-12-10T09:20:19.1558606Z   console.log
2025-12-10T09:20:19.1558959Z     === API DEBUG LOG ===
2025-12-10T09:20:19.1559383Z 
2025-12-10T09:20:19.1559834Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:19.1560329Z 
2025-12-10T09:20:19.1570233Z   console.log
2025-12-10T09:20:19.1570755Z     GET /api/csrf-token - 200 (4ms)
2025-12-10T09:20:19.1571042Z 
2025-12-10T09:20:19.1571408Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:19.1571803Z 
2025-12-10T09:20:19.1581802Z   console.log
2025-12-10T09:20:19.1582407Z     Session: { id: 'mcCJdkijv6h8...', authenticated: true, username: 'admin' }
2025-12-10T09:20:19.1582870Z 
2025-12-10T09:20:19.1583236Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:19.1583677Z 
2025-12-10T09:20:19.1592822Z   console.log
2025-12-10T09:20:19.1593284Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:19.1593620Z 
2025-12-10T09:20:19.1593995Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:19.1594317Z 
2025-12-10T09:20:19.1604587Z   console.log
2025-12-10T09:20:19.1604913Z     ====================
2025-12-10T09:20:19.1605152Z 
2025-12-10T09:20:19.1605535Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:19.1605976Z 
2025-12-10T09:20:19.1615568Z [0mGET /api/csrf-token [32m200[0m 10.148 ms - 80[0m
2025-12-10T09:20:19.1679863Z   console.log
2025-12-10T09:20:19.1680779Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:19.1681288Z       path: '/plugins/install',
2025-12-10T09:20:19.1681683Z       method: 'POST',
2025-12-10T09:20:19.1682006Z       session: {
2025-12-10T09:20:19.1682459Z         sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.1682968Z         authenticated: true,
2025-12-10T09:20:19.1683340Z         username: 'admin'
2025-12-10T09:20:19.1683663Z       },
2025-12-10T09:20:19.1684174Z       tokens: { headerPresent: false, cookiePresent: false, headerSource: 'NONE' }
2025-12-10T09:20:19.1684596Z     }
2025-12-10T09:20:19.1684703Z 
2025-12-10T09:20:19.1684858Z       at log (server.js:360:13)
2025-12-10T09:20:19.1685023Z 
2025-12-10T09:20:19.1755718Z   console.error
2025-12-10T09:20:19.1757193Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:19.1757707Z       path: '/plugins/install',
2025-12-10T09:20:19.1758119Z       method: 'POST',
2025-12-10T09:20:19.1758966Z       failureReason: 'CSRF token missing from request header (neither CSRF-Token nor X-CSRF-Token present)',
2025-12-10T09:20:19.1760018Z       session: {
2025-12-10T09:20:19.1760499Z         sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.1761024Z         authenticated: true,
2025-12-10T09:20:19.1761419Z         username: 'admin'
2025-12-10T09:20:19.1761759Z       },
2025-12-10T09:20:19.1762039Z       validation: {
2025-12-10T09:20:19.1762424Z         headerTokenPresent: false,
2025-12-10T09:20:19.1762888Z         cookieTokenPresent: false,
2025-12-10T09:20:19.1763296Z         tokensMatch: true,
2025-12-10T09:20:19.1763711Z         sessionAuthenticated: true,
2025-12-10T09:20:19.1765092Z         allCookiesPresent: [ 'connect.sid', 'Path', 'Expires', 'SameSite' ]
2025-12-10T09:20:19.1765736Z       }
2025-12-10T09:20:19.1766020Z     }
2025-12-10T09:20:19.1766185Z 
2025-12-10T09:20:19.1766642Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:19.1767173Z      [90m 413 |[39m         
2025-12-10T09:20:19.1768324Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:19.1769590Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:19.1770183Z      [90m 415 |[39m         
2025-12-10T09:20:19.1770965Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:19.1772000Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:19.1772499Z 
2025-12-10T09:20:19.1772683Z       at error (server.js:414:17)
2025-12-10T09:20:19.1773435Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:19.1774338Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:19.1775041Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:19.1775825Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:19.1776651Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:19.1777278Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:19.1778067Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:19.1778947Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:19.1779852Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:19.1780627Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:19.1781418Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:19.1782118Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:19.1782792Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:19.1783197Z 
2025-12-10T09:20:19.1783357Z   console.log
2025-12-10T09:20:19.1783706Z     === API DEBUG LOG ===
2025-12-10T09:20:19.1783963Z 
2025-12-10T09:20:19.1784354Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:19.1784815Z 
2025-12-10T09:20:19.1784952Z   console.log
2025-12-10T09:20:19.1785352Z     POST /plugins/install - 403 (10ms)
2025-12-10T09:20:19.1785658Z 
2025-12-10T09:20:19.1786042Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:19.1786512Z 
2025-12-10T09:20:19.1786656Z   console.log
2025-12-10T09:20:19.1787237Z     Session: { id: 'mcCJdkijv6h8...', authenticated: true, username: 'admin' }
2025-12-10T09:20:19.1787709Z 
2025-12-10T09:20:19.1788093Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:19.1788567Z 
2025-12-10T09:20:19.1794071Z   console.log
2025-12-10T09:20:19.1795484Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:19.1795857Z 
2025-12-10T09:20:19.1796267Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:19.1796745Z 
2025-12-10T09:20:19.1802236Z   console.log
2025-12-10T09:20:19.1802876Z     ====================
2025-12-10T09:20:19.1803416Z 
2025-12-10T09:20:19.1804166Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:19.1805304Z 
2025-12-10T09:20:19.1872972Z [0mPOST /api/plugins/install [33m403[0m 15.598 ms - 102[0m
2025-12-10T09:20:19.1905547Z   console.log
2025-12-10T09:20:19.1906296Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:19.1906918Z       path: '/plugins/install',
2025-12-10T09:20:19.1907398Z       method: 'POST',
2025-12-10T09:20:19.1907795Z       session: {
2025-12-10T09:20:19.1908673Z         sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.1909670Z         authenticated: true,
2025-12-10T09:20:19.1910048Z         username: 'admin'
2025-12-10T09:20:19.1910268Z       },
2025-12-10T09:20:19.1910437Z       tokens: {
2025-12-10T09:20:19.1910637Z         headerPresent: true,
2025-12-10T09:20:19.1910865Z         cookiePresent: true,
2025-12-10T09:20:19.1911114Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:19.1911339Z       }
2025-12-10T09:20:19.1911498Z     }
2025-12-10T09:20:19.1911599Z 
2025-12-10T09:20:19.1911710Z       at log (server.js:360:13)
2025-12-10T09:20:19.1911859Z 
2025-12-10T09:20:19.1986597Z   console.error
2025-12-10T09:20:19.1987510Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:19.1988440Z       path: '/plugins/install',
2025-12-10T09:20:19.1991215Z       method: 'POST',
2025-12-10T09:20:19.1991994Z       failureReason: 'CSRF token mismatch: header token does not match cookie token',
2025-12-10T09:20:19.1992658Z       session: {
2025-12-10T09:20:19.1993160Z         sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.1993703Z         authenticated: true,
2025-12-10T09:20:19.1994104Z         username: 'admin'
2025-12-10T09:20:19.1994451Z       },
2025-12-10T09:20:19.1994746Z       validation: {
2025-12-10T09:20:19.1995141Z         headerTokenPresent: true,
2025-12-10T09:20:19.1995619Z         cookieTokenPresent: true,
2025-12-10T09:20:19.1996037Z         tokensMatch: false,
2025-12-10T09:20:19.1996480Z         sessionAuthenticated: true,
2025-12-10T09:20:19.2003568Z         allCookiesPresent: [ 'connect.sid', 'Path', 'Expires', 'SameSite', 'csrf-token' ]
2025-12-10T09:20:19.2004237Z       }
2025-12-10T09:20:19.2004500Z     }
2025-12-10T09:20:19.2004667Z 
2025-12-10T09:20:19.2005031Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:19.2005518Z      [90m 413 |[39m         
2025-12-10T09:20:19.2006610Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:19.2013048Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:19.2013593Z      [90m 415 |[39m         
2025-12-10T09:20:19.2014341Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:19.2015364Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:19.2015856Z 
2025-12-10T09:20:19.2016036Z       at error (server.js:414:17)
2025-12-10T09:20:19.2016723Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:19.2017553Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:19.2018203Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:19.2018969Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:19.2019950Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:19.2020574Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:19.2021355Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:19.2022184Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:19.2022848Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:19.2023606Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:19.2024383Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:19.2025053Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:19.2025714Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:19.2026104Z 
2025-12-10T09:20:19.2026248Z   console.log
2025-12-10T09:20:19.2026556Z     === API DEBUG LOG ===
2025-12-10T09:20:19.2026779Z 
2025-12-10T09:20:19.2027146Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:19.2027887Z 
2025-12-10T09:20:19.2028027Z   console.log
2025-12-10T09:20:19.2028581Z     POST /plugins/install - 403 (10ms)
2025-12-10T09:20:19.2028890Z 
2025-12-10T09:20:19.2029439Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:19.2029886Z 
2025-12-10T09:20:19.2031225Z   console.log
2025-12-10T09:20:19.2031945Z     Session: { id: 'mcCJdkijv6h8...', authenticated: true, username: 'admin' }
2025-12-10T09:20:19.2032583Z 
2025-12-10T09:20:19.2033705Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:19.2034368Z 
2025-12-10T09:20:19.2034658Z   console.log
2025-12-10T09:20:19.2035247Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:19.2036297Z 
2025-12-10T09:20:19.2036881Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:19.2037495Z 
2025-12-10T09:20:19.2037790Z   console.log
2025-12-10T09:20:19.2038244Z     ====================
2025-12-10T09:20:19.2038618Z 
2025-12-10T09:20:19.2039144Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:19.2039972Z 
2025-12-10T09:20:19.2048145Z [0mPOST /api/plugins/install [33m403[0m 15.726 ms - 102[0m
2025-12-10T09:20:19.2091158Z   console.log
2025-12-10T09:20:19.2091910Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:19.2092401Z       path: '/plugins/install',
2025-12-10T09:20:19.2092747Z       method: 'POST',
2025-12-10T09:20:19.2092954Z       session: {
2025-12-10T09:20:19.2093242Z         sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2093550Z         authenticated: true,
2025-12-10T09:20:19.2093789Z         username: 'admin'
2025-12-10T09:20:19.2093991Z       },
2025-12-10T09:20:19.2094156Z       tokens: {
2025-12-10T09:20:19.2094345Z         headerPresent: true,
2025-12-10T09:20:19.2094572Z         cookiePresent: true,
2025-12-10T09:20:19.2094830Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:19.2095061Z       }
2025-12-10T09:20:19.2095257Z     }
2025-12-10T09:20:19.2095358Z 
2025-12-10T09:20:19.2095470Z       at log (server.js:360:13)
2025-12-10T09:20:19.2095625Z 
2025-12-10T09:20:19.2099123Z   console.log
2025-12-10T09:20:19.2100766Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:19.2101106Z       path: '/plugins/install',
2025-12-10T09:20:19.2101346Z       method: 'POST',
2025-12-10T09:20:19.2101551Z       session: {
2025-12-10T09:20:19.2101829Z         sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2102133Z         authenticated: true,
2025-12-10T09:20:19.2102356Z         username: 'admin'
2025-12-10T09:20:19.2102557Z       },
2025-12-10T09:20:19.2102907Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:19.2103267Z     }
2025-12-10T09:20:19.2103359Z 
2025-12-10T09:20:19.2103471Z       at log (server.js:441:13)
2025-12-10T09:20:19.2103622Z 
2025-12-10T09:20:19.2121906Z   console.log
2025-12-10T09:20:19.2122305Z     [AUTH] Authentication check: {
2025-12-10T09:20:19.2122731Z       path: '/install',
2025-12-10T09:20:19.2123067Z       method: 'POST',
2025-12-10T09:20:19.2123526Z       sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2124007Z       hasSession: true,
2025-12-10T09:20:19.2124348Z       authenticated: true,
2025-12-10T09:20:19.2124696Z       username: 'admin',
2025-12-10T09:20:19.2125032Z       hasCookies: true,
2025-12-10T09:20:19.2125323Z       timestamp: '2025-12-10T09:20:19.210Z'
2025-12-10T09:20:19.2125563Z     }
2025-12-10T09:20:19.2125660Z 
2025-12-10T09:20:19.2125775Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:19.2125933Z 
2025-12-10T09:20:19.2137374Z   console.log
2025-12-10T09:20:19.2137945Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:19.2138282Z 
2025-12-10T09:20:19.2138459Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:19.2138725Z 
2025-12-10T09:20:19.2192053Z   console.log
2025-12-10T09:20:19.2192923Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:19.2195612Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:19.2196756Z       customName: undefined,
2025-12-10T09:20:19.2197697Z       selectedOption: undefined,
2025-12-10T09:20:19.2198531Z       sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2202307Z       authenticated: true,
2025-12-10T09:20:19.2202721Z       username: 'admin',
2025-12-10T09:20:19.2203096Z       csrf: {
2025-12-10T09:20:19.2203770Z         headerValue: '845e6d59635be3497571f77592edb6df5442f123e47c5f55bbb0e1633adf4a72',
2025-12-10T09:20:19.2204878Z         cookieValue: '845e6d59635be3497571f77592edb6df5442f123e47c5f55bbb0e1633adf4a72',
2025-12-10T09:20:19.2205643Z         headerPresent: true,
2025-12-10T09:20:19.2206069Z         cookiePresent: true
2025-12-10T09:20:19.2206431Z       },
2025-12-10T09:20:19.2206820Z       timestamp: '2025-12-10T09:20:19.215Z'
2025-12-10T09:20:19.2207241Z     }
2025-12-10T09:20:19.2207401Z 
2025-12-10T09:20:19.2207617Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:19.2207933Z 
2025-12-10T09:20:19.2208092Z   console.log
2025-12-10T09:20:19.2208575Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:19.2209428Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:19.2209934Z       status: 'installed',
2025-12-10T09:20:19.2210372Z       pluginName: 'TestPlugin',
2025-12-10T09:20:19.2210789Z       version: '1.0.0'
2025-12-10T09:20:19.2211124Z     }
2025-12-10T09:20:19.2211292Z 
2025-12-10T09:20:19.2211495Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:19.2211807Z 
2025-12-10T09:20:19.2211947Z   console.log
2025-12-10T09:20:19.2212278Z     === API DEBUG LOG ===
2025-12-10T09:20:19.2212533Z 
2025-12-10T09:20:19.2212932Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:19.2213415Z 
2025-12-10T09:20:19.2214585Z   console.log
2025-12-10T09:20:19.2215396Z     POST /install - 200 (13ms)
2025-12-10T09:20:19.2215936Z 
2025-12-10T09:20:19.2217183Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:19.2217938Z 
2025-12-10T09:20:19.2218301Z   console.log
2025-12-10T09:20:19.2219363Z     Session: { id: 'mcCJdkijv6h8...', authenticated: true, username: 'admin' }
2025-12-10T09:20:19.2220107Z 
2025-12-10T09:20:19.2220698Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:19.2223984Z 
2025-12-10T09:20:19.2224324Z   console.log
2025-12-10T09:20:19.2225194Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:19.2226839Z 
2025-12-10T09:20:19.2227714Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:19.2228386Z 
2025-12-10T09:20:19.2228675Z   console.log
2025-12-10T09:20:19.2229039Z     ====================
2025-12-10T09:20:19.2229529Z 
2025-12-10T09:20:19.2229950Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:19.2230439Z 
2025-12-10T09:20:19.2231119Z [0mPOST /api/plugins/install [32m200[0m 15.130 ms - 66[0m
2025-12-10T09:20:19.2256380Z   console.log
2025-12-10T09:20:19.2257058Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:19.2257622Z       path: '/plugins/install',
2025-12-10T09:20:19.2258025Z       method: 'POST',
2025-12-10T09:20:19.2258363Z       session: {
2025-12-10T09:20:19.2258844Z         sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2259580Z         authenticated: true,
2025-12-10T09:20:19.2259984Z         username: 'admin'
2025-12-10T09:20:19.2260320Z       },
2025-12-10T09:20:19.2260607Z       tokens: {
2025-12-10T09:20:19.2260940Z         headerPresent: true,
2025-12-10T09:20:19.2261333Z         cookiePresent: true,
2025-12-10T09:20:19.2261728Z         headerSource: 'X-CSRF-Token'
2025-12-10T09:20:19.2262148Z       }
2025-12-10T09:20:19.2262435Z     }
2025-12-10T09:20:19.2262599Z 
2025-12-10T09:20:19.2262795Z       at log (server.js:360:13)
2025-12-10T09:20:19.2263065Z 
2025-12-10T09:20:19.2263458Z   console.log
2025-12-10T09:20:19.2264069Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:19.2266463Z       path: '/plugins/install',
2025-12-10T09:20:19.2267196Z       method: 'POST',
2025-12-10T09:20:19.2267782Z       session: {
2025-12-10T09:20:19.2268275Z         sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2268827Z         authenticated: true,
2025-12-10T09:20:19.2269468Z         username: 'admin'
2025-12-10T09:20:19.2269844Z       },
2025-12-10T09:20:19.2270442Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:19.2271072Z     }
2025-12-10T09:20:19.2271241Z 
2025-12-10T09:20:19.2271423Z       at log (server.js:441:13)
2025-12-10T09:20:19.2271680Z 
2025-12-10T09:20:19.2281749Z   console.log
2025-12-10T09:20:19.2284106Z     [AUTH] Authentication check: {
2025-12-10T09:20:19.2284552Z       path: '/install',
2025-12-10T09:20:19.2285555Z       method: 'POST',
2025-12-10T09:20:19.2286291Z       sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2286867Z       hasSession: true,
2025-12-10T09:20:19.2287255Z       authenticated: true,
2025-12-10T09:20:19.2287655Z       username: 'admin',
2025-12-10T09:20:19.2288021Z       hasCookies: true,
2025-12-10T09:20:19.2288451Z       timestamp: '2025-12-10T09:20:19.226Z'
2025-12-10T09:20:19.2288857Z     }
2025-12-10T09:20:19.2289026Z 
2025-12-10T09:20:19.2289500Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:19.2289808Z 
2025-12-10T09:20:19.2293666Z   console.log
2025-12-10T09:20:19.2294475Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:19.2295860Z 
2025-12-10T09:20:19.2296099Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:19.2296403Z 
2025-12-10T09:20:19.2301974Z   console.log
2025-12-10T09:20:19.2302468Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:19.2303112Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:19.2303622Z       customName: undefined,
2025-12-10T09:20:19.2304079Z       selectedOption: undefined,
2025-12-10T09:20:19.2304645Z       sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2305197Z       authenticated: true,
2025-12-10T09:20:19.2305616Z       username: 'admin',
2025-12-10T09:20:19.2305991Z       csrf: {
2025-12-10T09:20:19.2306631Z         headerValue: '845e6d59635be3497571f77592edb6df5442f123e47c5f55bbb0e1633adf4a72',
2025-12-10T09:20:19.2307895Z         cookieValue: '845e6d59635be3497571f77592edb6df5442f123e47c5f55bbb0e1633adf4a72',
2025-12-10T09:20:19.2308683Z         headerPresent: true,
2025-12-10T09:20:19.2309109Z         cookiePresent: true
2025-12-10T09:20:19.2309713Z       },
2025-12-10T09:20:19.2310113Z       timestamp: '2025-12-10T09:20:19.229Z'
2025-12-10T09:20:19.2310557Z     }
2025-12-10T09:20:19.2310739Z 
2025-12-10T09:20:19.2310960Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:19.2311278Z 
2025-12-10T09:20:19.2311433Z   console.log
2025-12-10T09:20:19.2311893Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:19.2312528Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:19.2313029Z       status: 'installed',
2025-12-10T09:20:19.2313493Z       pluginName: 'TestPlugin',
2025-12-10T09:20:19.2313918Z       version: '1.0.0'
2025-12-10T09:20:19.2314262Z     }
2025-12-10T09:20:19.2314448Z 
2025-12-10T09:20:19.2314652Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:19.2314942Z 
2025-12-10T09:20:19.2315092Z   console.log
2025-12-10T09:20:19.2315428Z     === API DEBUG LOG ===
2025-12-10T09:20:19.2315669Z 
2025-12-10T09:20:19.2316066Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:19.2316547Z 
2025-12-10T09:20:19.2316687Z   console.log
2025-12-10T09:20:19.2317033Z     POST /install - 200 (6ms)
2025-12-10T09:20:19.2317314Z 
2025-12-10T09:20:19.2317678Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:19.2318135Z 
2025-12-10T09:20:19.2319034Z   console.log
2025-12-10T09:20:19.2319871Z     Session: { id: 'mcCJdkijv6h8...', authenticated: true, username: 'admin' }
2025-12-10T09:20:19.2320373Z 
2025-12-10T09:20:19.2320777Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:19.2321611Z 
2025-12-10T09:20:19.2322477Z   console.log
2025-12-10T09:20:19.2322987Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:19.2323367Z 
2025-12-10T09:20:19.2323697Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:19.2324139Z 
2025-12-10T09:20:19.2325393Z   console.log
2025-12-10T09:20:19.2326136Z     ====================
2025-12-10T09:20:19.2326516Z 
2025-12-10T09:20:19.2326826Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:19.2327175Z 
2025-12-10T09:20:19.2334161Z [0mPOST /api/plugins/install [32m200[0m 8.293 ms - 66[0m
2025-12-10T09:20:19.2365136Z   console.log
2025-12-10T09:20:19.2366094Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:19.2367982Z       path: '/plugins/install',
2025-12-10T09:20:19.2368399Z       method: 'POST',
2025-12-10T09:20:19.2368734Z       session: {
2025-12-10T09:20:19.2369414Z         sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2369962Z         authenticated: true,
2025-12-10T09:20:19.2370348Z         username: 'admin'
2025-12-10T09:20:19.2370683Z       },
2025-12-10T09:20:19.2370959Z       tokens: {
2025-12-10T09:20:19.2371283Z         headerPresent: true,
2025-12-10T09:20:19.2371684Z         cookiePresent: true,
2025-12-10T09:20:19.2372137Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:19.2372561Z       }
2025-12-10T09:20:19.2372861Z     }
2025-12-10T09:20:19.2373025Z 
2025-12-10T09:20:19.2373203Z       at log (server.js:360:13)
2025-12-10T09:20:19.2373483Z 
2025-12-10T09:20:19.2374327Z   console.log
2025-12-10T09:20:19.2374956Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:19.2375965Z       path: '/plugins/install',
2025-12-10T09:20:19.2376674Z       method: 'POST',
2025-12-10T09:20:19.2377263Z       session: {
2025-12-10T09:20:19.2377775Z         sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2378313Z         authenticated: true,
2025-12-10T09:20:19.2378749Z         username: 'admin'
2025-12-10T09:20:19.2379118Z       },
2025-12-10T09:20:19.2379993Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:19.2380674Z     }
2025-12-10T09:20:19.2380861Z 
2025-12-10T09:20:19.2381078Z       at log (server.js:441:13)
2025-12-10T09:20:19.2381358Z 
2025-12-10T09:20:19.2387605Z   console.log
2025-12-10T09:20:19.2388503Z     [AUTH] Authentication check: {
2025-12-10T09:20:19.2388956Z       path: '/install',
2025-12-10T09:20:19.2389526Z       method: 'POST',
2025-12-10T09:20:19.2390050Z       sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2390590Z       hasSession: true,
2025-12-10T09:20:19.2390984Z       authenticated: true,
2025-12-10T09:20:19.2391382Z       username: 'admin',
2025-12-10T09:20:19.2391753Z       hasCookies: true,
2025-12-10T09:20:19.2392177Z       timestamp: '2025-12-10T09:20:19.237Z'
2025-12-10T09:20:19.2392624Z     }
2025-12-10T09:20:19.2392804Z 
2025-12-10T09:20:19.2393019Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:19.2393312Z 
2025-12-10T09:20:19.2400560Z   console.log
2025-12-10T09:20:19.2401269Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:19.2401633Z 
2025-12-10T09:20:19.2401849Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:19.2402147Z 
2025-12-10T09:20:19.2407907Z   console.log
2025-12-10T09:20:19.2485053Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:19.2491378Z       url: undefined,
2025-12-10T09:20:19.2491804Z       customName: undefined,
2025-12-10T09:20:19.2492282Z       selectedOption: undefined,
2025-12-10T09:20:19.2492843Z       sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2493361Z       authenticated: true,
2025-12-10T09:20:19.2493741Z       username: 'admin',
2025-12-10T09:20:19.2494106Z       csrf: {
2025-12-10T09:20:19.2494774Z         headerValue: '845e6d59635be3497571f77592edb6df5442f123e47c5f55bbb0e1633adf4a72',
2025-12-10T09:20:19.2495844Z         cookieValue: '845e6d59635be3497571f77592edb6df5442f123e47c5f55bbb0e1633adf4a72',
2025-12-10T09:20:19.2497228Z         headerPresent: true,
2025-12-10T09:20:19.2497684Z         cookiePresent: true
2025-12-10T09:20:19.2498044Z       },
2025-12-10T09:20:19.2498418Z       timestamp: '2025-12-10T09:20:19.240Z'
2025-12-10T09:20:19.2498832Z     }
2025-12-10T09:20:19.2498999Z 
2025-12-10T09:20:19.2499428Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:19.2499737Z 
2025-12-10T09:20:19.2499868Z   console.log
2025-12-10T09:20:19.2500403Z     [PLUGIN_INSTALL_API] Install request failed: URL is required
2025-12-10T09:20:19.2500831Z 
2025-12-10T09:20:19.2501034Z       at log (routes/plugins.js:143:21)
2025-12-10T09:20:19.2501327Z 
2025-12-10T09:20:19.2501457Z   console.log
2025-12-10T09:20:19.2501771Z     === API DEBUG LOG ===
2025-12-10T09:20:19.2502005Z 
2025-12-10T09:20:19.2502390Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:19.2502860Z 
2025-12-10T09:20:19.2502984Z   console.log
2025-12-10T09:20:19.2503322Z     POST /install - 400 (7ms)
2025-12-10T09:20:19.2503574Z 
2025-12-10T09:20:19.2503961Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:19.2504412Z 
2025-12-10T09:20:19.2504542Z   console.log
2025-12-10T09:20:19.2505102Z     Session: { id: 'mcCJdkijv6h8...', authenticated: true, username: 'admin' }
2025-12-10T09:20:19.2505580Z 
2025-12-10T09:20:19.2511634Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:19.2512188Z 
2025-12-10T09:20:19.2512334Z   console.log
2025-12-10T09:20:19.2512788Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:19.2513147Z 
2025-12-10T09:20:19.2513539Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:19.2514023Z 
2025-12-10T09:20:19.2514176Z   console.log
2025-12-10T09:20:19.2514505Z     ====================
2025-12-10T09:20:19.2514753Z 
2025-12-10T09:20:19.2515141Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:19.2515645Z 
2025-12-10T09:20:19.2516357Z [0mPOST /api/plugins/install [33m400[0m 9.806 ms - 85[0m
2025-12-10T09:20:19.2516926Z   console.log
2025-12-10T09:20:19.2517401Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:19.2517898Z       path: '/plugins/install',
2025-12-10T09:20:19.2518301Z       method: 'POST',
2025-12-10T09:20:19.2518638Z       session: {
2025-12-10T09:20:19.2519099Z         sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2519834Z         authenticated: true,
2025-12-10T09:20:19.2520230Z         username: 'admin'
2025-12-10T09:20:19.2524278Z       },
2025-12-10T09:20:19.2524598Z       tokens: {
2025-12-10T09:20:19.2524934Z         headerPresent: true,
2025-12-10T09:20:19.2525330Z         cookiePresent: true,
2025-12-10T09:20:19.2525769Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:19.2526160Z       }
2025-12-10T09:20:19.2526417Z     }
2025-12-10T09:20:19.2526578Z 
2025-12-10T09:20:19.2526755Z       at log (server.js:360:13)
2025-12-10T09:20:19.2527030Z 
2025-12-10T09:20:19.2527174Z   console.log
2025-12-10T09:20:19.2527565Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:19.2528045Z       path: '/plugins/install',
2025-12-10T09:20:19.2528423Z       method: 'POST',
2025-12-10T09:20:19.2528751Z       session: {
2025-12-10T09:20:19.2529402Z         sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2529930Z         authenticated: true,
2025-12-10T09:20:19.2530305Z         username: 'admin'
2025-12-10T09:20:19.2530641Z       },
2025-12-10T09:20:19.2531261Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:19.2531931Z     }
2025-12-10T09:20:19.2532135Z 
2025-12-10T09:20:19.2532366Z       at log (server.js:441:13)
2025-12-10T09:20:19.2532652Z 
2025-12-10T09:20:19.2534368Z   console.log
2025-12-10T09:20:19.2538516Z     [AUTH] Authentication check: {
2025-12-10T09:20:19.2538949Z       path: '/install',
2025-12-10T09:20:19.2539498Z       method: 'POST',
2025-12-10T09:20:19.2540275Z       sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2540969Z       hasSession: true,
2025-12-10T09:20:19.2541353Z       authenticated: true,
2025-12-10T09:20:19.2541728Z       username: 'admin',
2025-12-10T09:20:19.2542080Z       hasCookies: true,
2025-12-10T09:20:19.2542481Z       timestamp: '2025-12-10T09:20:19.251Z'
2025-12-10T09:20:19.2542888Z     }
2025-12-10T09:20:19.2543045Z 
2025-12-10T09:20:19.2543230Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:19.2543495Z 
2025-12-10T09:20:19.2549677Z   console.log
2025-12-10T09:20:19.2553793Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:19.2554165Z 
2025-12-10T09:20:19.2554372Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:19.2554682Z 
2025-12-10T09:20:19.2556875Z   console.log
2025-12-10T09:20:19.2562155Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:19.2562869Z       url: 'https://example.com/test-plugin.jar',
2025-12-10T09:20:19.2563424Z       customName: undefined,
2025-12-10T09:20:19.2563911Z       selectedOption: undefined,
2025-12-10T09:20:19.2567973Z       sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2568560Z       authenticated: true,
2025-12-10T09:20:19.2568979Z       username: 'admin',
2025-12-10T09:20:19.2569546Z       csrf: {
2025-12-10T09:20:19.2570224Z         headerValue: '845e6d59635be3497571f77592edb6df5442f123e47c5f55bbb0e1633adf4a72',
2025-12-10T09:20:19.2571339Z         cookieValue: '845e6d59635be3497571f77592edb6df5442f123e47c5f55bbb0e1633adf4a72',
2025-12-10T09:20:19.2572098Z         headerPresent: true,
2025-12-10T09:20:19.2572521Z         cookiePresent: true
2025-12-10T09:20:19.2572896Z       },
2025-12-10T09:20:19.2573282Z       timestamp: '2025-12-10T09:20:19.254Z'
2025-12-10T09:20:19.2573698Z     }
2025-12-10T09:20:19.2573858Z 
2025-12-10T09:20:19.2574088Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:19.2574408Z 
2025-12-10T09:20:19.2574548Z   console.log
2025-12-10T09:20:19.2575041Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:19.2575704Z       url: 'https://example.com/test-plugin.jar',
2025-12-10T09:20:19.2576478Z       status: 'installed',
2025-12-10T09:20:19.2576927Z       pluginName: 'TestPlugin',
2025-12-10T09:20:19.2577322Z       version: '1.0.0'
2025-12-10T09:20:19.2577666Z     }
2025-12-10T09:20:19.2577835Z 
2025-12-10T09:20:19.2578069Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:19.2578396Z 
2025-12-10T09:20:19.2578569Z   console.log
2025-12-10T09:20:19.2578903Z     === API DEBUG LOG ===
2025-12-10T09:20:19.2579340Z 
2025-12-10T09:20:19.2580075Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:19.2580559Z 
2025-12-10T09:20:19.2580702Z   console.log
2025-12-10T09:20:19.2581062Z     POST /install - 200 (7ms)
2025-12-10T09:20:19.2581322Z 
2025-12-10T09:20:19.2581704Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:19.2582146Z 
2025-12-10T09:20:19.2582288Z   console.log
2025-12-10T09:20:19.2582838Z     Session: { id: 'mcCJdkijv6h8...', authenticated: true, username: 'admin' }
2025-12-10T09:20:19.2583311Z 
2025-12-10T09:20:19.2584073Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:19.2584541Z 
2025-12-10T09:20:19.2584678Z   console.log
2025-12-10T09:20:19.2585121Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:19.2585461Z 
2025-12-10T09:20:19.2585845Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:19.2586324Z 
2025-12-10T09:20:19.2586487Z   console.log
2025-12-10T09:20:19.2586789Z     ====================
2025-12-10T09:20:19.2587018Z 
2025-12-10T09:20:19.2587411Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:19.2587887Z 
2025-12-10T09:20:19.2588867Z [0mPOST /api/plugins/install [32m200[0m 9.328 ms - 66[0m
2025-12-10T09:20:19.2620671Z   console.log
2025-12-10T09:20:19.2622318Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:19.2622852Z       path: '/plugins/install',
2025-12-10T09:20:19.2623594Z       method: 'POST',
2025-12-10T09:20:19.2624162Z       session: {
2025-12-10T09:20:19.2624655Z         sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2625181Z         authenticated: true,
2025-12-10T09:20:19.2625571Z         username: 'admin'
2025-12-10T09:20:19.2625910Z       },
2025-12-10T09:20:19.2626188Z       tokens: {
2025-12-10T09:20:19.2626511Z         headerPresent: true,
2025-12-10T09:20:19.2626903Z         cookiePresent: true,
2025-12-10T09:20:19.2627367Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:19.2627795Z       }
2025-12-10T09:20:19.2628079Z     }
2025-12-10T09:20:19.2628254Z 
2025-12-10T09:20:19.2628440Z       at log (server.js:360:13)
2025-12-10T09:20:19.2628705Z 
2025-12-10T09:20:19.2630150Z   console.log
2025-12-10T09:20:19.2630891Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:19.2631768Z       path: '/plugins/install',
2025-12-10T09:20:19.2633139Z       method: 'POST',
2025-12-10T09:20:19.2633654Z       session: {
2025-12-10T09:20:19.2634336Z         sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2635058Z         authenticated: true,
2025-12-10T09:20:19.2636154Z         username: 'admin'
2025-12-10T09:20:19.2636702Z       },
2025-12-10T09:20:19.2637492Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:19.2638313Z     }
2025-12-10T09:20:19.2638629Z 
2025-12-10T09:20:19.2638958Z       at log (server.js:441:13)
2025-12-10T09:20:19.2639732Z 
2025-12-10T09:20:19.2646136Z   console.log
2025-12-10T09:20:19.2647191Z     [AUTH] Authentication check: {
2025-12-10T09:20:19.2648210Z       path: '/install',
2025-12-10T09:20:19.2648771Z       method: 'POST',
2025-12-10T09:20:19.2650981Z       sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2651518Z       hasSession: true,
2025-12-10T09:20:19.2651887Z       authenticated: true,
2025-12-10T09:20:19.2652285Z       username: 'admin',
2025-12-10T09:20:19.2652649Z       hasCookies: true,
2025-12-10T09:20:19.2653076Z       timestamp: '2025-12-10T09:20:19.262Z'
2025-12-10T09:20:19.2653489Z     }
2025-12-10T09:20:19.2653647Z 
2025-12-10T09:20:19.2653828Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:19.2654105Z 
2025-12-10T09:20:19.2662793Z   console.log
2025-12-10T09:20:19.2665248Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:19.2665608Z 
2025-12-10T09:20:19.2665801Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:19.2666076Z 
2025-12-10T09:20:19.2669723Z   console.log
2025-12-10T09:20:19.2670477Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:19.2671418Z       url: 'https://example.com/invalid.jar',
2025-12-10T09:20:19.2672778Z       customName: undefined,
2025-12-10T09:20:19.2673524Z       selectedOption: undefined,
2025-12-10T09:20:19.2674142Z       sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2674702Z       authenticated: true,
2025-12-10T09:20:19.2675140Z       username: 'admin',
2025-12-10T09:20:19.2675670Z       csrf: {
2025-12-10T09:20:19.2676381Z         headerValue: '845e6d59635be3497571f77592edb6df5442f123e47c5f55bbb0e1633adf4a72',
2025-12-10T09:20:19.2677474Z         cookieValue: '845e6d59635be3497571f77592edb6df5442f123e47c5f55bbb0e1633adf4a72',
2025-12-10T09:20:19.2678220Z         headerPresent: true,
2025-12-10T09:20:19.2678638Z         cookiePresent: true
2025-12-10T09:20:19.2679029Z       },
2025-12-10T09:20:19.2679658Z       timestamp: '2025-12-10T09:20:19.266Z'
2025-12-10T09:20:19.2680101Z     }
2025-12-10T09:20:19.2680269Z 
2025-12-10T09:20:19.2680483Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:19.2680806Z 
2025-12-10T09:20:19.2731024Z   console.error
2025-12-10T09:20:19.2732785Z     [PLUGIN_INSTALL_API] Install request failed with error: {
2025-12-10T09:20:19.2733820Z       url: 'https://example.com/invalid.jar',
2025-12-10T09:20:19.2734593Z       error: 'Invalid plugin file',
2025-12-10T09:20:19.2735611Z       stack: 'Error: Invalid plugin file\n' +
2025-12-10T09:20:19.2737241Z         '    at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/plugins-csrf.test.js:168:17)\n' +
2025-12-10T09:20:19.2739643Z         '    at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)\n' +
2025-12-10T09:20:19.2740858Z         '    at new Promise (<anonymous>)\n' +
2025-12-10T09:20:19.2742123Z         '    at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)\n' +
2025-12-10T09:20:19.2743891Z         '    at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)\n' +
2025-12-10T09:20:19.2745234Z         '    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n' +
2025-12-10T09:20:19.2746595Z         '    at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)\n' +
2025-12-10T09:20:19.2748454Z         '    at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)\n' +
2025-12-10T09:20:19.2750674Z         '    at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)\n' +
2025-12-10T09:20:19.2752624Z         '    at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)\n' +
2025-12-10T09:20:19.2754386Z         '    at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)\n' +
2025-12-10T09:20:19.2756552Z         '    at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n' +
2025-12-10T09:20:19.2758974Z         '    at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n' +
2025-12-10T09:20:19.2762014Z         '    at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)\n' +
2025-12-10T09:20:19.2763834Z         '    at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)\n' +
2025-12-10T09:20:19.2765651Z         '    at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)'
2025-12-10T09:20:19.2766711Z     }
2025-12-10T09:20:19.2766891Z 
2025-12-10T09:20:19.2767554Z     [0m [90m 165 |[39m         res[33m.[39mjson(result)[33m;[39m
2025-12-10T09:20:19.2768282Z      [90m 166 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:19.2769846Z     [31m[1m>[22m[39m[90m 167 |[39m         console[33m.[39merror([32m'[PLUGIN_INSTALL_API] Install request failed with error:'[39m[33m,[39m {
2025-12-10T09:20:19.2770924Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:19.2774442Z      [90m 168 |[39m             url[33m:[39m req[33m.[39mbody[33m.[39murl[33m,[39m
2025-12-10T09:20:19.2775437Z      [90m 169 |[39m             error[33m:[39m error[33m.[39mmessage[33m,[39m
2025-12-10T09:20:19.2776332Z      [90m 170 |[39m             stack[33m:[39m error[33m.[39mstack[0m
2025-12-10T09:20:19.2776728Z 
2025-12-10T09:20:19.2776965Z       at error (routes/plugins.js:167:17)
2025-12-10T09:20:19.2777278Z 
2025-12-10T09:20:19.2777412Z   console.log
2025-12-10T09:20:19.2777751Z     === API DEBUG LOG ===
2025-12-10T09:20:19.2777990Z 
2025-12-10T09:20:19.2778385Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:19.2778857Z 
2025-12-10T09:20:19.2779002Z   console.log
2025-12-10T09:20:19.2779938Z     POST /install - 400 (11ms)
2025-12-10T09:20:19.2780216Z 
2025-12-10T09:20:19.2780839Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:19.2781342Z 
2025-12-10T09:20:19.2781471Z   console.log
2025-12-10T09:20:19.2782061Z     Session: { id: 'mcCJdkijv6h8...', authenticated: true, username: 'admin' }
2025-12-10T09:20:19.2782527Z 
2025-12-10T09:20:19.2782922Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:19.2783380Z 
2025-12-10T09:20:19.2783514Z   console.log
2025-12-10T09:20:19.2783945Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:19.2784305Z 
2025-12-10T09:20:19.2784680Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:19.2785141Z 
2025-12-10T09:20:19.2785263Z   console.log
2025-12-10T09:20:19.2785563Z     ====================
2025-12-10T09:20:19.2785782Z 
2025-12-10T09:20:19.2786161Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:19.2786626Z 
2025-12-10T09:20:19.2787198Z [0mPOST /api/plugins/install [33m400[0m 13.526 ms - 150[0m
2025-12-10T09:20:19.2795685Z   console.log
2025-12-10T09:20:19.2796111Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:19.2796612Z       path: '/plugins/install',
2025-12-10T09:20:19.2797004Z       method: 'POST',
2025-12-10T09:20:19.2797334Z       session: {
2025-12-10T09:20:19.2797782Z         sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2798290Z         authenticated: true,
2025-12-10T09:20:19.2798679Z         username: 'admin'
2025-12-10T09:20:19.2799040Z       },
2025-12-10T09:20:19.2799543Z       tokens: {
2025-12-10T09:20:19.2799883Z         headerPresent: true,
2025-12-10T09:20:19.2800320Z         cookiePresent: true,
2025-12-10T09:20:19.2800771Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:19.2801164Z       }
2025-12-10T09:20:19.2801447Z     }
2025-12-10T09:20:19.2801614Z 
2025-12-10T09:20:19.2802003Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:19.2802477Z 
2025-12-10T09:20:19.2805920Z   console.log
2025-12-10T09:20:19.2807641Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:19.2809974Z       path: '/plugins/install',
2025-12-10T09:20:19.2814250Z       method: 'POST',
2025-12-10T09:20:19.2814604Z       session: {
2025-12-10T09:20:19.2815075Z         sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2815587Z         authenticated: true,
2025-12-10T09:20:19.2815975Z         username: 'admin'
2025-12-10T09:20:19.2816316Z       },
2025-12-10T09:20:19.2816906Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:19.2817569Z     }
2025-12-10T09:20:19.2817728Z 
2025-12-10T09:20:19.2818127Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:19.2818621Z 
2025-12-10T09:20:19.2821279Z   console.log
2025-12-10T09:20:19.2825163Z     [AUTH] Authentication check: {
2025-12-10T09:20:19.2825624Z       path: '/install',
2025-12-10T09:20:19.2825998Z       method: 'POST',
2025-12-10T09:20:19.2826499Z       sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2827012Z       hasSession: true,
2025-12-10T09:20:19.2827372Z       authenticated: true,
2025-12-10T09:20:19.2827736Z       username: 'admin',
2025-12-10T09:20:19.2828081Z       hasCookies: true,
2025-12-10T09:20:19.2828485Z       timestamp: '2025-12-10T09:20:19.280Z'
2025-12-10T09:20:19.2828886Z     }
2025-12-10T09:20:19.2829039Z 
2025-12-10T09:20:19.2829643Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:19.2830108Z 
2025-12-10T09:20:19.2835978Z   console.log
2025-12-10T09:20:19.2836690Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:19.2838689Z 
2025-12-10T09:20:19.2839551Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:19.2840047Z 
2025-12-10T09:20:19.2845446Z   console.log
2025-12-10T09:20:19.2846607Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:19.2849939Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:19.2852854Z       customName: undefined,
2025-12-10T09:20:19.2853319Z       selectedOption: undefined,
2025-12-10T09:20:19.2853865Z       sessionID: 'mcCJdkijv6h8tr2mvYcxhX6gs4gE-ddZ',
2025-12-10T09:20:19.2854375Z       authenticated: true,
2025-12-10T09:20:19.2854774Z       username: 'admin',
2025-12-10T09:20:19.2855145Z       csrf: {
2025-12-10T09:20:19.2855866Z         headerValue: '845e6d59635be3497571f77592edb6df5442f123e47c5f55bbb0e1633adf4a72',
2025-12-10T09:20:19.2856952Z         cookieValue: '845e6d59635be3497571f77592edb6df5442f123e47c5f55bbb0e1633adf4a72',
2025-12-10T09:20:19.2857995Z         headerPresent: true,
2025-12-10T09:20:19.2858406Z         cookiePresent: true
2025-12-10T09:20:19.2858761Z       },
2025-12-10T09:20:19.2859118Z       timestamp: '2025-12-10T09:20:19.283Z'
2025-12-10T09:20:19.2859716Z     }
2025-12-10T09:20:19.2859897Z 
2025-12-10T09:20:19.2860322Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:19.2860865Z 
2025-12-10T09:20:19.2861008Z   console.log
2025-12-10T09:20:19.2861495Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:19.2862340Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:19.2862815Z       status: 'installed',
2025-12-10T09:20:19.2863255Z       pluginName: 'TestPlugin',
2025-12-10T09:20:19.2863675Z       version: '1.0.0'
2025-12-10T09:20:19.2864001Z     }
2025-12-10T09:20:19.2864159Z 
2025-12-10T09:20:19.2864536Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:19.2865007Z 
2025-12-10T09:20:19.2865157Z   console.log
2025-12-10T09:20:19.2865512Z     === API DEBUG LOG ===
2025-12-10T09:20:19.2865756Z 
2025-12-10T09:20:19.2866186Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:19.2866673Z 
2025-12-10T09:20:19.2866824Z   console.log
2025-12-10T09:20:19.2867183Z     POST /install - 200 (8ms)
2025-12-10T09:20:19.2867677Z 
2025-12-10T09:20:19.2868081Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:19.2868563Z 
2025-12-10T09:20:19.2868714Z   console.log
2025-12-10T09:20:19.2869492Z     Session: { id: 'mcCJdkijv6h8...', authenticated: true, username: 'admin' }
2025-12-10T09:20:19.2869965Z 
2025-12-10T09:20:19.2870351Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:19.2870819Z 
2025-12-10T09:20:19.2873131Z   console.log
2025-12-10T09:20:19.2873746Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:19.2875031Z 
2025-12-10T09:20:19.2875452Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:19.2875948Z 
2025-12-10T09:20:19.2877799Z   console.log
2025-12-10T09:20:19.2878168Z     ====================
2025-12-10T09:20:19.2878417Z 
2025-12-10T09:20:19.2878842Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:19.2879539Z 
2025-12-10T09:20:19.2886925Z [0mPOST /api/plugins/install [32m200[0m 10.939 ms - 66[0m
2025-12-10T09:20:19.4165848Z PASS __tests__/routes/automation.test.js
2025-12-10T09:20:19.4166844Z   Automation Routes
2025-12-10T09:20:19.4168085Z     GET /api/automation/tasks
2025-12-10T09:20:19.4169903Z       ✓ should return list of tasks (8 ms)
2025-12-10T09:20:19.4170695Z     POST /api/automation/tasks
2025-12-10T09:20:19.4172057Z       ✓ should validate required fields (9 ms)
2025-12-10T09:20:19.4173070Z       ✓ should create task with valid data (4 ms)
2025-12-10T09:20:19.4174007Z     PUT /api/automation/tasks/:id
2025-12-10T09:20:19.4175228Z       ✓ should update task (4 ms)
2025-12-10T09:20:19.4176247Z       ✓ should return 400 if no valid fields to update (9 ms)
2025-12-10T09:20:19.4177090Z     DELETE /api/automation/tasks/:id
2025-12-10T09:20:19.4178267Z       ✓ should delete task successfully (3 ms)
2025-12-10T09:20:19.4179318Z     POST /api/automation/tasks/:id/execute
2025-12-10T09:20:19.4180620Z       ✓ should execute task manually (4 ms)
2025-12-10T09:20:19.4181698Z     GET /api/automation/history
2025-12-10T09:20:19.4182660Z       ✓ should return execution history (3 ms)
2025-12-10T09:20:19.4183844Z       ✓ should filter history by task_type (3 ms)
2025-12-10T09:20:19.4184782Z     GET /api/automation/validate-cron
2025-12-10T09:20:19.4186081Z       ✓ should validate cron expression (4 ms)
2025-12-10T09:20:19.4187116Z       ✓ should require expression parameter (3 ms)
2025-12-10T09:20:19.4187937Z 
2025-12-10T09:20:19.4430547Z PASS __tests__/routes/plugins-csrf.test.js
2025-12-10T09:20:19.4431168Z   Plugin Install API with CSRF Protection
2025-12-10T09:20:19.4431684Z     CSRF protection on /api/plugins/install
2025-12-10T09:20:19.4432583Z       ✓ should return 403 when CSRF token is missing (24 ms)
2025-12-10T09:20:19.4433285Z       ✓ should return 403 when CSRF token is invalid (19 ms)
2025-12-10T09:20:19.4434138Z       ✓ should accept valid CSRF token and proceed with plugin install logic (18 ms)
2025-12-10T09:20:19.4434974Z       ✓ should work with X-CSRF-Token header (10 ms)
2025-12-10T09:20:19.4435565Z     Plugin install endpoint functionality with valid CSRF
2025-12-10T09:20:19.4436210Z       ✓ should return 400 when URL is missing (14 ms)
2025-12-10T09:20:19.4437038Z       ✓ should call pluginManager.installFromUrl when CSRF and auth pass (12 ms)
2025-12-10T09:20:19.4437923Z       ✓ should handle plugin installation errors appropriately (16 ms)
2025-12-10T09:20:19.4438548Z     CSRF validation logging for plugin install
2025-12-10T09:20:19.4439502Z       ✓ should log CSRF validation details for plugin install requests (14 ms)
2025-12-10T09:20:19.4439942Z 
2025-12-10T09:20:19.5078006Z PASS __tests__/config/rbac.test.js
2025-12-10T09:20:19.5078567Z   RBAC Configuration
2025-12-10T09:20:19.5078904Z     isValidRole
2025-12-10T09:20:19.5079809Z       ✓ should validate owner role (1 ms)
2025-12-10T09:20:19.5080391Z       ✓ should validate admin role
2025-12-10T09:20:19.5080987Z       ✓ should validate moderator role
2025-12-10T09:20:19.5081537Z       ✓ should validate viewer role
2025-12-10T09:20:19.5082077Z       ✓ should reject invalid roles (1 ms)
2025-12-10T09:20:19.5082487Z     hasPermission
2025-12-10T09:20:19.5082935Z       ✓ should grant owner all permissions
2025-12-10T09:20:19.5083564Z       ✓ should grant admin server control permissions
2025-12-10T09:20:19.5084210Z       ✓ should deny admin owner-only permissions
2025-12-10T09:20:19.5084881Z       ✓ should grant moderator player management permissions
2025-12-10T09:20:19.5085588Z       ✓ should deny moderator server control permissions
2025-12-10T09:20:19.5086274Z       ✓ should grant viewer read-only permissions (1 ms)
2025-12-10T09:20:19.5086891Z       ✓ should deny viewer write permissions
2025-12-10T09:20:19.5087463Z       ✓ should return false for invalid inputs
2025-12-10T09:20:19.5087910Z     hasHigherOrEqualRole
2025-12-10T09:20:19.5088558Z       ✓ should confirm owner has higher role than all others (1 ms)
2025-12-10T09:20:19.5089711Z       ✓ should confirm admin has higher role than moderator and viewer (1 ms)
2025-12-10T09:20:19.5090495Z       ✓ should deny admin has higher role than owner
2025-12-10T09:20:19.5091187Z       ✓ should confirm moderator has higher role than viewer
2025-12-10T09:20:19.5091991Z       ✓ should deny moderator has higher role than admin or owner (1 ms)
2025-12-10T09:20:19.5092658Z       ✓ should handle invalid inputs
2025-12-10T09:20:19.5093063Z     getRolePermissions
2025-12-10T09:20:19.5093596Z       ✓ should return all permissions for owner (1 ms)
2025-12-10T09:20:19.5094333Z       ✓ should return appropriate permissions for each role (1 ms)
2025-12-10T09:20:19.5095022Z       ✓ should return empty array for invalid role
2025-12-10T09:20:19.5095363Z 
2025-12-10T09:20:19.5605331Z   console.log
2025-12-10T09:20:19.5606328Z     Creating new users.json...
2025-12-10T09:20:19.5606684Z 
2025-12-10T09:20:19.5607093Z       at Object.log [as initializeUsers] (auth/auth.js:185:17)
2025-12-10T09:20:19.5607795Z 
2025-12-10T09:20:19.6101113Z   console.error
2025-12-10T09:20:19.6102185Z     [PluginIntegrations] Dynmap configuration error: Plugin not ready
2025-12-10T09:20:19.6102701Z 
2025-12-10T09:20:19.6103194Z     [0m [90m 189 |[39m         })[33m;[39m
2025-12-10T09:20:19.6103839Z      [90m 190 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:19.6105345Z     [31m[1m>[22m[39m[90m 191 |[39m         console[33m.[39merror([32m'[PluginIntegrations] Dynmap configuration error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:19.6106562Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:19.6107114Z      [90m 192 |[39m         
2025-12-10T09:20:19.6108460Z      [90m 193 |[39m         res[33m.[39mstatus(error[33m.[39mmessage[33m.[39mincludes([32m'not ready'[39m) [33m?[39m [35m503[39m [33m:[39m [35m500[39m)[33m.[39mjson({
2025-12-10T09:20:19.6109965Z      [90m 194 |[39m             success[33m:[39m [36mfalse[39m[33m,[39m[0m
2025-12-10T09:20:19.6110415Z 
2025-12-10T09:20:19.6110683Z       at error (routes/pluginIntegrations.js:191:17)
2025-12-10T09:20:19.6111046Z 
2025-12-10T09:20:19.6189558Z   console.error
2025-12-10T09:20:19.6190188Z     [PluginIntegrations] Dynmap configuration error: Server error
2025-12-10T09:20:19.6190652Z 
2025-12-10T09:20:19.6191033Z     [0m [90m 189 |[39m         })[33m;[39m
2025-12-10T09:20:19.6191655Z      [90m 190 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:19.6193136Z     [31m[1m>[22m[39m[90m 191 |[39m         console[33m.[39merror([32m'[PluginIntegrations] Dynmap configuration error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:19.6194362Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:19.6194899Z      [90m 192 |[39m         
2025-12-10T09:20:19.6196262Z      [90m 193 |[39m         res[33m.[39mstatus(error[33m.[39mmessage[33m.[39mincludes([32m'not ready'[39m) [33m?[39m [35m503[39m [33m:[39m [35m500[39m)[33m.[39mjson({
2025-12-10T09:20:19.6197581Z      [90m 194 |[39m             success[33m:[39m [36mfalse[39m[33m,[39m[0m
2025-12-10T09:20:19.6197990Z 
2025-12-10T09:20:19.6198249Z       at error (routes/pluginIntegrations.js:191:17)
2025-12-10T09:20:19.6198606Z 
2025-12-10T09:20:19.6292570Z   console.error
2025-12-10T09:20:19.6293236Z     [PluginIntegrations] Dynmap enriched players error: Dynmap not ready
2025-12-10T09:20:19.6293754Z 
2025-12-10T09:20:19.6294110Z     [0m [90m 269 |[39m         })[33m;[39m
2025-12-10T09:20:19.6294727Z      [90m 270 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:19.6296233Z     [31m[1m>[22m[39m[90m 271 |[39m         console[33m.[39merror([32m'[PluginIntegrations] Dynmap enriched players error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:19.6297463Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:19.6297994Z      [90m 272 |[39m         
2025-12-10T09:20:19.6299527Z      [90m 273 |[39m         res[33m.[39mstatus(error[33m.[39mmessage[33m.[39mincludes([32m'not ready'[39m) [33m?[39m [35m503[39m [33m:[39m [35m500[39m)[33m.[39mjson({
2025-12-10T09:20:19.6300835Z      [90m 274 |[39m             success[33m:[39m [36mfalse[39m[33m,[39m[0m
2025-12-10T09:20:19.6301249Z 
2025-12-10T09:20:19.6301504Z       at error (routes/pluginIntegrations.js:271:17)
2025-12-10T09:20:19.6301857Z 
2025-12-10T09:20:19.6327480Z PASS __tests__/routes/pluginIntegrations-map.test.js
2025-12-10T09:20:19.6328101Z   Plugin Integrations - Map Endpoints
2025-12-10T09:20:19.6328604Z     GET /api/plugins/dynmap/configuration
2025-12-10T09:20:19.6329549Z       ✓ should return map configuration when successful (7 ms)
2025-12-10T09:20:19.6330329Z       ✓ should return 503 when plugin is not ready (12 ms)
2025-12-10T09:20:19.6330990Z       ✓ should return 500 on other errors (4 ms)
2025-12-10T09:20:19.6331530Z     GET /api/plugins/dynmap/players-enriched
2025-12-10T09:20:19.6332410Z       ✓ should return enriched player data combining Dynmap and tracker stats (3 ms)
2025-12-10T09:20:19.6333863Z       ✓ should handle players not in tracker (3 ms)
2025-12-10T09:20:19.6334569Z       ✓ should return 503 when Dynmap is not ready (4 ms)
2025-12-10T09:20:19.6334934Z 
2025-12-10T09:20:19.6610035Z   console.log
2025-12-10T09:20:19.6610786Z     Created default admin user with Owner role. Please keep your password secure!
2025-12-10T09:20:19.6611342Z 
2025-12-10T09:20:19.6611674Z       at Object.log [as initializeUsers] (auth/auth.js:200:17)
2025-12-10T09:20:19.6612073Z 
2025-12-10T09:20:19.6629343Z   console.log
2025-12-10T09:20:19.6630738Z     Creating new users.json...
2025-12-10T09:20:19.6631026Z 
2025-12-10T09:20:19.6631334Z       at Object.log [as initializeUsers] (auth/auth.js:185:17)
2025-12-10T09:20:19.6631725Z 
2025-12-10T09:20:19.7492467Z   console.log
2025-12-10T09:20:19.7493233Z     Created default admin user with Owner role. Please keep your password secure!
2025-12-10T09:20:19.7493800Z 
2025-12-10T09:20:19.7494127Z       at Object.log [as initializeUsers] (auth/auth.js:200:17)
2025-12-10T09:20:19.7494531Z 
2025-12-10T09:20:19.7503735Z   console.log
2025-12-10T09:20:19.7504327Z     Admin password changed detected, regenerating users.json...
2025-12-10T09:20:19.7504772Z 
2025-12-10T09:20:19.7505085Z       at Object.log [as initializeUsers] (auth/auth.js:164:21)
2025-12-10T09:20:19.7505481Z 
2025-12-10T09:20:19.8355306Z   console.log
2025-12-10T09:20:19.8356039Z     Updated admin user with new password. Please keep your password secure!
2025-12-10T09:20:19.8356522Z 
2025-12-10T09:20:19.8356994Z       at Object.log [as initializeUsers] (auth/auth.js:179:21)
2025-12-10T09:20:19.8357384Z 
2025-12-10T09:20:19.9203927Z   console.log
2025-12-10T09:20:19.9204284Z     Creating new users.json...
2025-12-10T09:20:19.9204463Z 
2025-12-10T09:20:19.9204665Z       at Object.log [as initializeUsers] (auth/auth.js:185:17)
2025-12-10T09:20:19.9204911Z 
2025-12-10T09:20:20.0048264Z   console.log
2025-12-10T09:20:20.0048956Z     Created default admin user with Owner role. Please keep your password secure!
2025-12-10T09:20:20.0049677Z 
2025-12-10T09:20:20.0049882Z       at Object.log [as initializeUsers] (auth/auth.js:200:17)
2025-12-10T09:20:20.0050118Z 
2025-12-10T09:20:20.0055771Z   console.log
2025-12-10T09:20:20.0056127Z     Using existing users.json (password unchanged)
2025-12-10T09:20:20.0056638Z 
2025-12-10T09:20:20.0056959Z       at Object.log [as initializeUsers] (auth/auth.js:181:21)
2025-12-10T09:20:20.0057378Z 
2025-12-10T09:20:20.0068369Z   console.log
2025-12-10T09:20:20.0068775Z     Creating new users.json...
2025-12-10T09:20:20.0069046Z 
2025-12-10T09:20:20.0069520Z       at Object.log [as initializeUsers] (auth/auth.js:185:17)
2025-12-10T09:20:20.0913037Z 
2025-12-10T09:20:20.0913287Z   console.log
2025-12-10T09:20:20.0914030Z     Created default admin user with Owner role. Please keep your password secure!
2025-12-10T09:20:20.0916121Z 
2025-12-10T09:20:20.0916847Z       at Object.log [as initializeUsers] (auth/auth.js:200:17)
2025-12-10T09:20:20.0917437Z 
2025-12-10T09:20:20.1806277Z   console.log
2025-12-10T09:20:20.1806861Z     Creating new users.json...
2025-12-10T09:20:20.1807248Z 
2025-12-10T09:20:20.1807745Z       at Object.log [as initializeUsers] (auth/auth.js:185:17)
2025-12-10T09:20:20.1808150Z 
2025-12-10T09:20:20.2644038Z   console.log
2025-12-10T09:20:20.2644761Z     Created default admin user with Owner role. Please keep your password secure!
2025-12-10T09:20:20.2645287Z 
2025-12-10T09:20:20.2645607Z       at Object.log [as initializeUsers] (auth/auth.js:200:17)
2025-12-10T09:20:20.2646002Z 
2025-12-10T09:20:20.3490535Z   console.log
2025-12-10T09:20:20.3490923Z     Creating new users.json...
2025-12-10T09:20:20.3491124Z 
2025-12-10T09:20:20.3491341Z       at Object.log [as initializeUsers] (auth/auth.js:185:17)
2025-12-10T09:20:20.3491615Z 
2025-12-10T09:20:20.4329737Z   console.log
2025-12-10T09:20:20.4330469Z     Created default admin user with Owner role. Please keep your password secure!
2025-12-10T09:20:20.4331374Z 
2025-12-10T09:20:20.4331942Z       at Object.log [as initializeUsers] (auth/auth.js:200:17)
2025-12-10T09:20:20.4332355Z 
2025-12-10T09:20:20.4447062Z FAIL __tests__/auth/auth.test.js
2025-12-10T09:20:20.4447624Z   Auth Module - Password Change Detection
2025-12-10T09:20:20.4448049Z     initializeUsers
2025-12-10T09:20:20.4448859Z       ✓ should create users.json if it does not exist (104 ms)
2025-12-10T09:20:20.4449909Z       ✓ should update users.json when password changes (257 ms)
2025-12-10T09:20:20.4450766Z       ✓ should not update users.json when password is unchanged (87 ms)
2025-12-10T09:20:20.4451326Z     verifyCredentials
2025-12-10T09:20:20.4451853Z       ✕ should verify correct credentials (170 ms)
2025-12-10T09:20:20.4452478Z       ✕ should reject incorrect password (169 ms)
2025-12-10T09:20:20.4453109Z       ✕ should reject non-existent username (85 ms)
2025-12-10T09:20:20.4453424Z 
2025-12-10T09:20:20.4454105Z   ● Auth Module - Password Change Detection › verifyCredentials › should verify correct credentials
2025-12-10T09:20:20.4454499Z 
2025-12-10T09:20:20.4454698Z     expect(received).toBe(expected) // Object.is equality
2025-12-10T09:20:20.4454918Z 
2025-12-10T09:20:20.4455002Z     Expected: true
2025-12-10T09:20:20.4455454Z     Received: {"createdAt": "2025-12-10T09:20:20.090Z", "lastLogin": undefined, "role": "owner", "username": "testuser"}
2025-12-10T09:20:20.4455814Z 
2025-12-10T09:20:20.4455971Z     [0m [90m 121 |[39m             
2025-12-10T09:20:20.4456768Z      [90m 122 |[39m             [36mconst[39m isValid [33m=[39m [36mawait[39m auth[33m.[39mverifyCredentials([32m'testuser'[39m[33m,[39m [32m'test-password-456'[39m)[33m;[39m
2025-12-10T09:20:20.4457590Z     [31m[1m>[22m[39m[90m 123 |[39m             expect(isValid)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-12-10T09:20:20.4458066Z      [90m     |[39m                             [31m[1m^[22m[39m
2025-12-10T09:20:20.4458385Z      [90m 124 |[39m             
2025-12-10T09:20:20.4458746Z      [90m 125 |[39m             [90m// Restore original values[39m
2025-12-10T09:20:20.4459580Z      [90m 126 |[39m             process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m=[39m originalPassword[33m;[39m[0m
2025-12-10T09:20:20.4459939Z 
2025-12-10T09:20:20.4460102Z       at Object.toBe (__tests__/auth/auth.test.js:123:29)
2025-12-10T09:20:20.4460307Z 
2025-12-10T09:20:20.4460699Z   ● Auth Module - Password Change Detection › verifyCredentials › should reject incorrect password
2025-12-10T09:20:20.4461041Z 
2025-12-10T09:20:20.4461208Z     expect(received).toBe(expected) // Object.is equality
2025-12-10T09:20:20.4461416Z 
2025-12-10T09:20:20.4461501Z     Expected: false
2025-12-10T09:20:20.4461689Z     Received: null
2025-12-10T09:20:20.4461809Z 
2025-12-10T09:20:20.4461947Z     [0m [90m 138 |[39m             
2025-12-10T09:20:20.4462718Z      [90m 139 |[39m             [36mconst[39m isValid [33m=[39m [36mawait[39m auth[33m.[39mverifyCredentials([32m'testuser'[39m[33m,[39m [32m'wrong-password'[39m)[33m;[39m
2025-12-10T09:20:20.4463533Z     [31m[1m>[22m[39m[90m 140 |[39m             expect(isValid)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
2025-12-10T09:20:20.4464009Z      [90m     |[39m                             [31m[1m^[22m[39m
2025-12-10T09:20:20.4464323Z      [90m 141 |[39m             
2025-12-10T09:20:20.4464682Z      [90m 142 |[39m             [90m// Restore original values[39m
2025-12-10T09:20:20.4465301Z      [90m 143 |[39m             process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m=[39m originalPassword[33m;[39m[0m
2025-12-10T09:20:20.4465668Z 
2025-12-10T09:20:20.4465827Z       at Object.toBe (__tests__/auth/auth.test.js:140:29)
2025-12-10T09:20:20.4466035Z 
2025-12-10T09:20:20.4466427Z   ● Auth Module - Password Change Detection › verifyCredentials › should reject non-existent username
2025-12-10T09:20:20.4466778Z 
2025-12-10T09:20:20.4466947Z     expect(received).toBe(expected) // Object.is equality
2025-12-10T09:20:20.4467428Z 
2025-12-10T09:20:20.4467514Z     Expected: false
2025-12-10T09:20:20.4467827Z     Received: null
2025-12-10T09:20:20.4467947Z 
2025-12-10T09:20:20.4468095Z     [0m [90m 153 |[39m             
2025-12-10T09:20:20.4468875Z      [90m 154 |[39m             [36mconst[39m isValid [33m=[39m [36mawait[39m auth[33m.[39mverifyCredentials([32m'nonexistent'[39m[33m,[39m [32m'test-password'[39m)[33m;[39m
2025-12-10T09:20:20.4469836Z     [31m[1m>[22m[39m[90m 155 |[39m             expect(isValid)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
2025-12-10T09:20:20.4470303Z      [90m     |[39m                             [31m[1m^[22m[39m
2025-12-10T09:20:20.4470610Z      [90m 156 |[39m             
2025-12-10T09:20:20.4470966Z      [90m 157 |[39m             [90m// Restore original password[39m
2025-12-10T09:20:20.4471604Z      [90m 158 |[39m             process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m=[39m originalPassword[33m;[39m[0m
2025-12-10T09:20:20.4471956Z 
2025-12-10T09:20:20.4472123Z       at Object.toBe (__tests__/auth/auth.test.js:155:29)
2025-12-10T09:20:20.4472324Z 
2025-12-10T09:20:20.5177082Z FAIL __tests__/services/integration.test.js
2025-12-10T09:20:20.5177693Z   System Integration
2025-12-10T09:20:20.5178050Z     Event Logger Integration
2025-12-10T09:20:20.5178842Z       ✕ should initialize event logger (1 ms)
2025-12-10T09:20:20.5179592Z       ✕ should log an event
2025-12-10T09:20:20.5180078Z       ✕ should query events
2025-12-10T09:20:20.5180526Z     Notification Service Integration
2025-12-10T09:20:20.5181193Z       ✕ should initialize notification service (1 ms)
2025-12-10T09:20:20.5181820Z       ✕ should get user preferences
2025-12-10T09:20:20.5182348Z       ✕ should update user preferences
2025-12-10T09:20:20.5182935Z       ✕ should create notification from event (1 ms)
2025-12-10T09:20:20.5183499Z       ✕ should get user notifications
2025-12-10T09:20:20.5183986Z       ✕ should get unread count
2025-12-10T09:20:20.5184498Z     Event Logger and Notification Integration
2025-12-10T09:20:20.5185180Z       ✕ should trigger notification when event is logged
2025-12-10T09:20:20.5185528Z 
2025-12-10T09:20:20.5186147Z   ● System Integration › Event Logger Integration › should initialize event logger
2025-12-10T09:20:20.5186681Z 
2025-12-10T09:20:20.5187217Z     Cannot find module '../services/eventLogger' from '__tests__/services/integration.test.js'
2025-12-10T09:20:20.5187793Z 
2025-12-10T09:20:20.5188000Z     However, Jest was able to find:
2025-12-10T09:20:20.5188452Z     	'./eventLogger.test.js'
2025-12-10T09:20:20.5188722Z 
2025-12-10T09:20:20.5189930Z     You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js', 'mjs', 'cjs', 'jsx', 'ts', 'tsx', 'json', 'node'].
2025-12-10T09:20:20.5190879Z 
2025-12-10T09:20:20.5191350Z     See https://jestjs.io/docs/configuration#modulefileextensions-arraystring
2025-12-10T09:20:20.5191854Z 
2025-12-10T09:20:20.5192537Z     [0m [90m 32 |[39m     describe([32m'Event Logger Integration'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:20.5193628Z      [90m 33 |[39m         test([32m'should initialize event logger'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:20.5195076Z     [31m[1m>[22m[39m[90m 34 |[39m             [36mconst[39m { eventLogger[33m:[39m logger } [33m=[39m require([32m'../services/eventLogger'[39m)[33m;[39m
2025-12-10T09:20:20.5196215Z      [90m    |[39m                                             [31m[1m^[22m[39m
2025-12-10T09:20:20.5197510Z      [90m 35 |[39m             logger[33m.[39mdbPath [33m=[39m path[33m.[39mjoin(__dirname[33m,[39m [32m'../data-test/events.db'[39m)[33m;[39m
2025-12-10T09:20:20.5198421Z      [90m 36 |[39m             
2025-12-10T09:20:20.5199642Z      [90m 37 |[39m             expect(() [33m=>[39m logger[33m.[39minitialize())[33m.[39mnot[33m.[39mtoThrow()[33m;[39m[0m
2025-12-10T09:20:20.5200208Z 
2025-12-10T09:20:20.5201338Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:20:20.5202257Z       at Object.require (__tests__/services/integration.test.js:34:45)
2025-12-10T09:20:20.5202692Z 
2025-12-10T09:20:20.5203221Z   ● System Integration › Event Logger Integration › should log an event
2025-12-10T09:20:20.5203686Z 
2025-12-10T09:20:20.5204203Z     Cannot find module '../services/eventLogger' from '__tests__/services/integration.test.js'
2025-12-10T09:20:20.5204782Z 
2025-12-10T09:20:20.5204972Z     However, Jest was able to find:
2025-12-10T09:20:20.5205405Z     	'./eventLogger.test.js'
2025-12-10T09:20:20.5205658Z 
2025-12-10T09:20:20.5206629Z     You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js', 'mjs', 'cjs', 'jsx', 'ts', 'tsx', 'json', 'node'].
2025-12-10T09:20:20.5207585Z 
2025-12-10T09:20:20.5208043Z     See https://jestjs.io/docs/configuration#modulefileextensions-arraystring
2025-12-10T09:20:20.5208582Z 
2025-12-10T09:20:20.5208823Z     [0m [90m 42 |[39m
2025-12-10T09:20:20.5209823Z      [90m 43 |[39m         test([32m'should log an event'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:20.5211629Z     [31m[1m>[22m[39m[90m 44 |[39m             [36mconst[39m { [33mEVENT_TYPES[39m[33m,[39m [33mEVENT_CATEGORIES[39m[33m,[39m [33mEVENT_SEVERITY[39m } [33m=[39m require([32m'../services/eventLogger'[39m)[33m;[39m
2025-12-10T09:20:20.5213186Z      [90m    |[39m                                                                       [31m[1m^[22m[39m
2025-12-10T09:20:20.5213848Z      [90m 45 |[39m             
2025-12-10T09:20:20.5214642Z      [90m 46 |[39m             [36mconst[39m eventId [33m=[39m eventLogger[33m.[39mlogEvent({
2025-12-10T09:20:20.5215850Z      [90m 47 |[39m                 eventType[33m:[39m [33mEVENT_TYPES[39m[33m.[39m[33mSYSTEM_INFO[39m[33m,[39m[0m
2025-12-10T09:20:20.5216410Z 
2025-12-10T09:20:20.5216945Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:20:20.5217973Z       at Object.require (__tests__/services/integration.test.js:44:71)
2025-12-10T09:20:20.5218424Z 
2025-12-10T09:20:20.5219012Z   ● System Integration › Event Logger Integration › should query events
2025-12-10T09:20:20.5219668Z 
2025-12-10T09:20:20.5220044Z     TypeError: Cannot read properties of undefined (reading 'queryEvents')
2025-12-10T09:20:20.5220516Z 
2025-12-10T09:20:20.5220731Z     [0m [90m 57 |[39m
2025-12-10T09:20:20.5221504Z      [90m 58 |[39m         test([32m'should query events'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:20.5222768Z     [31m[1m>[22m[39m[90m 59 |[39m             [36mconst[39m result [33m=[39m eventLogger[33m.[39mqueryEvents()[33m;[39m
2025-12-10T09:20:20.5223811Z      [90m    |[39m                                        [31m[1m^[22m[39m
2025-12-10T09:20:20.5224694Z      [90m 60 |[39m             expect(result)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:20:20.5225738Z      [90m 61 |[39m             expect(result[33m.[39mevents)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:20:20.5226951Z      [90m 62 |[39m             expect(result[33m.[39mtotal)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m[0m
2025-12-10T09:20:20.5227533Z 
2025-12-10T09:20:20.5227953Z       at Object.queryEvents (__tests__/services/integration.test.js:59:40)
2025-12-10T09:20:20.5228440Z 
2025-12-10T09:20:20.5229450Z   ● System Integration › Notification Service Integration › should initialize notification service
2025-12-10T09:20:20.5230125Z 
2025-12-10T09:20:20.5230741Z     Cannot find module '../services/notificationService' from '__tests__/services/integration.test.js'
2025-12-10T09:20:20.5231421Z 
2025-12-10T09:20:20.5232172Z     [0m [90m 66 |[39m     describe([32m'Notification Service Integration'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:20.5233462Z      [90m 67 |[39m         test([32m'should initialize notification service'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:20.5235562Z     [31m[1m>[22m[39m[90m 68 |[39m             [36mconst[39m service [33m=[39m require([32m'../services/notificationService'[39m)[33m;[39m
2025-12-10T09:20:20.5236716Z      [90m    |[39m                             [31m[1m^[22m[39m
2025-12-10T09:20:20.5238080Z      [90m 69 |[39m             service[33m.[39mdbPath [33m=[39m path[33m.[39mjoin(__dirname[33m,[39m [32m'../data-test/notifications.db'[39m)[33m;[39m
2025-12-10T09:20:20.5239118Z      [90m 70 |[39m             
2025-12-10T09:20:20.5240468Z      [90m 71 |[39m             expect(() [33m=>[39m service[33m.[39minitialize())[33m.[39mnot[33m.[39mtoThrow()[33m;[39m[0m
2025-12-10T09:20:20.5241108Z 
2025-12-10T09:20:20.5241646Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:20:20.5242623Z       at Object.require (__tests__/services/integration.test.js:68:29)
2025-12-10T09:20:20.5243240Z 
2025-12-10T09:20:20.5243981Z   ● System Integration › Notification Service Integration › should get user preferences
2025-12-10T09:20:20.5244585Z 
2025-12-10T09:20:20.5245068Z     TypeError: Cannot read properties of undefined (reading 'getUserPreferences')
2025-12-10T09:20:20.5245613Z 
2025-12-10T09:20:20.5245868Z     [0m [90m 76 |[39m
2025-12-10T09:20:20.5246712Z      [90m 77 |[39m         test([32m'should get user preferences'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:20.5248274Z     [31m[1m>[22m[39m[90m 78 |[39m             [36mconst[39m prefs [33m=[39m notificationService[33m.[39mgetUserPreferences([32m'testuser'[39m)[33m;[39m
2025-12-10T09:20:20.5249737Z      [90m    |[39m                                               [31m[1m^[22m[39m
2025-12-10T09:20:20.5250594Z      [90m 79 |[39m             expect(prefs)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:20:20.5251627Z      [90m 80 |[39m             expect(prefs[33m.[39menabled)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-12-10T09:20:20.5252821Z      [90m 81 |[39m             expect(prefs[33m.[39mchannels)[33m.[39mtoBeDefined()[33m;[39m[0m
2025-12-10T09:20:20.5253333Z 
2025-12-10T09:20:20.5253818Z       at Object.getUserPreferences (__tests__/services/integration.test.js:78:47)
2025-12-10T09:20:20.5254382Z 
2025-12-10T09:20:20.5255106Z   ● System Integration › Notification Service Integration › should update user preferences
2025-12-10T09:20:20.5255738Z 
2025-12-10T09:20:20.5256225Z     TypeError: Cannot read properties of undefined (reading 'updateUserPreferences')
2025-12-10T09:20:20.5256809Z 
2025-12-10T09:20:20.5257062Z     [0m [90m 83 |[39m
2025-12-10T09:20:20.5257954Z      [90m 84 |[39m         test([32m'should update user preferences'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:20.5259801Z     [31m[1m>[22m[39m[90m 85 |[39m             [36mconst[39m updated [33m=[39m notificationService[33m.[39mupdateUserPreferences([32m'testuser'[39m[33m,[39m {
2025-12-10T09:20:20.5261174Z      [90m    |[39m                                                 [31m[1m^[22m[39m
2025-12-10T09:20:20.5262106Z      [90m 86 |[39m                 severity_filter[33m:[39m [32m'warning'[39m[33m,[39m
2025-12-10T09:20:20.5263032Z      [90m 87 |[39m                 channels[33m:[39m [[32m'inbox'[39m]
2025-12-10T09:20:20.5263733Z      [90m 88 |[39m             })[33m;[39m[0m
2025-12-10T09:20:20.5264053Z 
2025-12-10T09:20:20.5264558Z       at Object.updateUserPreferences (__tests__/services/integration.test.js:85:49)
2025-12-10T09:20:20.5265114Z 
2025-12-10T09:20:20.5265898Z   ● System Integration › Notification Service Integration › should create notification from event
2025-12-10T09:20:20.5266541Z 
2025-12-10T09:20:20.5267097Z     Cannot find module '../services/eventLogger' from '__tests__/services/integration.test.js'
2025-12-10T09:20:20.5267708Z 
2025-12-10T09:20:20.5267923Z     However, Jest was able to find:
2025-12-10T09:20:20.5268385Z     	'./eventLogger.test.js'
2025-12-10T09:20:20.5268947Z 
2025-12-10T09:20:20.5270400Z     You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js', 'mjs', 'cjs', 'jsx', 'ts', 'tsx', 'json', 'node'].
2025-12-10T09:20:20.5271400Z 
2025-12-10T09:20:20.5271877Z     See https://jestjs.io/docs/configuration#modulefileextensions-arraystring
2025-12-10T09:20:20.5272427Z 
2025-12-10T09:20:20.5272688Z     [0m [90m 93 |[39m
2025-12-10T09:20:20.5273638Z      [90m 94 |[39m         test([32m'should create notification from event'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:20.5275630Z     [31m[1m>[22m[39m[90m 95 |[39m             [36mconst[39m { [33mEVENT_TYPES[39m[33m,[39m [33mEVENT_CATEGORIES[39m[33m,[39m [33mEVENT_SEVERITY[39m } [33m=[39m require([32m'../services/eventLogger'[39m)[33m;[39m
2025-12-10T09:20:20.5277225Z      [90m    |[39m                                                                       [31m[1m^[22m[39m
2025-12-10T09:20:20.5277898Z      [90m 96 |[39m             
2025-12-10T09:20:20.5278606Z      [90m 97 |[39m             [36mconst[39m event [33m=[39m {
2025-12-10T09:20:20.5279611Z      [90m 98 |[39m                 id[33m:[39m [35m1[39m[33m,[39m[0m
2025-12-10T09:20:20.5279992Z 
2025-12-10T09:20:20.5280538Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:20:20.5281513Z       at Object.require (__tests__/services/integration.test.js:95:71)
2025-12-10T09:20:20.5281954Z 
2025-12-10T09:20:20.5282658Z   ● System Integration › Notification Service Integration › should get user notifications
2025-12-10T09:20:20.5283255Z 
2025-12-10T09:20:20.5283737Z     TypeError: Cannot read properties of undefined (reading 'getUserNotifications')
2025-12-10T09:20:20.5284316Z 
2025-12-10T09:20:20.5284579Z     [0m [90m 110 |[39m
2025-12-10T09:20:20.5285484Z      [90m 111 |[39m         test([32m'should get user notifications'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:20.5287237Z     [31m[1m>[22m[39m[90m 112 |[39m             [36mconst[39m result [33m=[39m notificationService[33m.[39mgetUserNotifications([32m'testuser'[39m)[33m;[39m
2025-12-10T09:20:20.5288559Z      [90m     |[39m                                                [31m[1m^[22m[39m
2025-12-10T09:20:20.5289647Z      [90m 113 |[39m             expect(result)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:20:20.5290759Z      [90m 114 |[39m             expect(result[33m.[39mnotifications)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:20:20.5292043Z      [90m 115 |[39m             expect(result[33m.[39mtotal)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m[0m
2025-12-10T09:20:20.5292621Z 
2025-12-10T09:20:20.5293129Z       at Object.getUserNotifications (__tests__/services/integration.test.js:112:48)
2025-12-10T09:20:20.5293700Z 
2025-12-10T09:20:20.5294372Z   ● System Integration › Notification Service Integration › should get unread count
2025-12-10T09:20:20.5294930Z 
2025-12-10T09:20:20.5295888Z     TypeError: Cannot read properties of undefined (reading 'getUnreadCount')
2025-12-10T09:20:20.5296443Z 
2025-12-10T09:20:20.5296712Z     [0m [90m 117 |[39m
2025-12-10T09:20:20.5297558Z      [90m 118 |[39m         test([32m'should get unread count'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:20.5299092Z     [31m[1m>[22m[39m[90m 119 |[39m             [36mconst[39m count [33m=[39m notificationService[33m.[39mgetUnreadCount([32m'testuser'[39m)[33m;[39m
2025-12-10T09:20:20.5300542Z      [90m     |[39m                                               [31m[1m^[22m[39m
2025-12-10T09:20:20.5301604Z      [90m 120 |[39m             expect([36mtypeof[39m count)[33m.[39mtoBe([32m'number'[39m)[33m;[39m
2025-12-10T09:20:20.5302744Z      [90m 121 |[39m             expect(count)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
2025-12-10T09:20:20.5303566Z      [90m 122 |[39m         })[33m;[39m[0m
2025-12-10T09:20:20.5303967Z 
2025-12-10T09:20:20.5304404Z       at Object.getUnreadCount (__tests__/services/integration.test.js:119:47)
2025-12-10T09:20:20.5304932Z 
2025-12-10T09:20:20.5305844Z   ● System Integration › Event Logger and Notification Integration › should trigger notification when event is logged
2025-12-10T09:20:20.5306608Z 
2025-12-10T09:20:20.5307145Z     Cannot find module '../services/eventLogger' from '__tests__/services/integration.test.js'
2025-12-10T09:20:20.5307772Z 
2025-12-10T09:20:20.5307984Z     However, Jest was able to find:
2025-12-10T09:20:20.5308448Z     	'./eventLogger.test.js'
2025-12-10T09:20:20.5308713Z 
2025-12-10T09:20:20.5309934Z     You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js', 'mjs', 'cjs', 'jsx', 'ts', 'tsx', 'json', 'node'].
2025-12-10T09:20:20.5310496Z 
2025-12-10T09:20:20.5310761Z     See https://jestjs.io/docs/configuration#modulefileextensions-arraystring
2025-12-10T09:20:20.5311064Z 
2025-12-10T09:20:20.5311541Z     [0m [90m 125 |[39m     describe([32m'Event Logger and Notification Integration'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:20.5312329Z      [90m 126 |[39m         test([32m'should trigger notification when event is logged'[39m[33m,[39m (done) [33m=>[39m {
2025-12-10T09:20:20.5313412Z     [31m[1m>[22m[39m[90m 127 |[39m             [36mconst[39m { [33mEVENT_TYPES[39m[33m,[39m [33mEVENT_CATEGORIES[39m[33m,[39m [33mEVENT_SEVERITY[39m } [33m=[39m require([32m'../services/eventLogger'[39m)[33m;[39m
2025-12-10T09:20:20.5314228Z      [90m     |[39m                                                                       [31m[1m^[22m[39m
2025-12-10T09:20:20.5314572Z      [90m 128 |[39m             
2025-12-10T09:20:20.5314948Z      [90m 129 |[39m             [90m// Listen for notification event[39m
2025-12-10T09:20:20.5315671Z      [90m 130 |[39m             notificationService[33m.[39monce([32m'notification'[39m[33m,[39m ({ userId[33m,[39m notification }) [33m=>[39m {[0m
2025-12-10T09:20:20.5316110Z 
2025-12-10T09:20:20.5316407Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:20:20.5316933Z       at Object.require (__tests__/services/integration.test.js:127:71)
2025-12-10T09:20:20.5317181Z 
2025-12-10T09:20:20.5669059Z PASS __tests__/config/rbac-player-management.test.js
2025-12-10T09:20:20.5669909Z   Player Management RBAC Permissions
2025-12-10T09:20:20.5670408Z     New Player Management Permissions
2025-12-10T09:20:20.5671223Z       ✓ PLAYER_WARN permission exists (1 ms)
2025-12-10T09:20:20.5671873Z       ✓ PLAYER_MUTE permission exists
2025-12-10T09:20:20.5672502Z       ✓ PLAYER_UNMUTE permission exists (1 ms)
2025-12-10T09:20:20.5673133Z       ✓ PLAYER_TELEPORT permission exists
2025-12-10T09:20:20.5673743Z       ✓ PLAYER_VIEW_DETAILS permission exists
2025-12-10T09:20:20.5674372Z       ✓ PLAYER_VIEW_INVENTORY permission exists
2025-12-10T09:20:20.5675026Z       ✓ PLAYER_ACTION_HISTORY permission exists
2025-12-10T09:20:20.5675847Z     Owner Role Permissions
2025-12-10T09:20:20.5676677Z       ✓ Owner has all player management permissions (1 ms)
2025-12-10T09:20:20.5677196Z     Admin Role Permissions
2025-12-10T09:20:20.5677749Z       ✓ Admin has all player management permissions
2025-12-10T09:20:20.5678255Z     Moderator Role Permissions
2025-12-10T09:20:20.5678809Z       ✓ Moderator has player action permissions
2025-12-10T09:20:20.5679621Z       ✓ Moderator cannot view player inventory
2025-12-10T09:20:20.5680078Z     Viewer Role Permissions
2025-12-10T09:20:20.5680601Z       ✓ Viewer can view player details
2025-12-10T09:20:20.5681236Z       ✓ Viewer cannot perform player actions (1 ms)
2025-12-10T09:20:20.5681722Z     Whitelist Permissions
2025-12-10T09:20:20.5682260Z       ✓ Moderator can manage whitelist
2025-12-10T09:20:20.5682824Z       ✓ Admin can manage whitelist
2025-12-10T09:20:20.5683374Z       ✓ Viewer cannot manage whitelist
2025-12-10T09:20:20.5683672Z 
2025-12-10T09:20:20.6057358Z   console.log
2025-12-10T09:20:20.6057905Z     [RBAC] Permission granted: {
2025-12-10T09:20:20.6058385Z       username: undefined,
2025-12-10T09:20:20.6058773Z       role: 'owner',
2025-12-10T09:20:20.6059466Z       permission: 'server:start',
2025-12-10T09:20:20.6059899Z       path: '/test'
2025-12-10T09:20:20.6060203Z     }
2025-12-10T09:20:20.6060380Z 
2025-12-10T09:20:20.6060590Z       at log (middleware/rbac.js:51:17)
2025-12-10T09:20:20.6060915Z 
2025-12-10T09:20:20.6072617Z   console.log
2025-12-10T09:20:20.6073050Z     [RBAC] Permission denied: {
2025-12-10T09:20:20.6073562Z       username: undefined,
2025-12-10T09:20:20.6073931Z       role: 'viewer',
2025-12-10T09:20:20.6074329Z       permission: 'server:start',
2025-12-10T09:20:20.6074748Z       path: '/test',
2025-12-10T09:20:20.6075098Z       method: 'GET'
2025-12-10T09:20:20.6075415Z     }
2025-12-10T09:20:20.6075597Z 
2025-12-10T09:20:20.6075834Z       at log (middleware/rbac.js:37:21)
2025-12-10T09:20:20.6076149Z 
2025-12-10T09:20:20.6087354Z   console.log
2025-12-10T09:20:20.6087898Z     [RBAC] Permission check failed: Not authenticated
2025-12-10T09:20:20.6088298Z 
2025-12-10T09:20:20.6088520Z       at log (middleware/rbac.js:19:21)
2025-12-10T09:20:20.6088821Z 
2025-12-10T09:20:20.6098778Z   console.log
2025-12-10T09:20:20.6099535Z     [RBAC] Permission check failed: No role in session
2025-12-10T09:20:20.6099921Z 
2025-12-10T09:20:20.6100136Z       at log (middleware/rbac.js:28:21)
2025-12-10T09:20:20.6100453Z 
2025-12-10T09:20:20.6113726Z   console.log
2025-12-10T09:20:20.6114180Z     [RBAC] Permission granted: {
2025-12-10T09:20:20.6114623Z       username: undefined,
2025-12-10T09:20:20.6114989Z       role: 'owner',
2025-12-10T09:20:20.6115396Z       permission: 'server:start',
2025-12-10T09:20:20.6115827Z       path: '/test'
2025-12-10T09:20:20.6116162Z     }
2025-12-10T09:20:20.6116335Z 
2025-12-10T09:20:20.6116560Z       at log (middleware/rbac.js:51:17)
2025-12-10T09:20:20.6116888Z 
2025-12-10T09:20:20.6127134Z   console.log
2025-12-10T09:20:20.6127593Z     [RBAC] Role check passed: {
2025-12-10T09:20:20.6128024Z       username: undefined,
2025-12-10T09:20:20.6128410Z       role: 'admin',
2025-12-10T09:20:20.6128768Z       requiredRole: 'admin',
2025-12-10T09:20:20.6129404Z       path: '/test'
2025-12-10T09:20:20.6143837Z     }
2025-12-10T09:20:20.6144025Z 
2025-12-10T09:20:20.6144262Z       at log (middleware/rbac.js:103:17)
2025-12-10T09:20:20.6144592Z 
2025-12-10T09:20:20.6144762Z   console.log
2025-12-10T09:20:20.6145144Z     [RBAC] Role check passed: {
2025-12-10T09:20:20.6145574Z       username: undefined,
2025-12-10T09:20:20.6145963Z       role: 'owner',
2025-12-10T09:20:20.6146325Z       requiredRole: 'admin',
2025-12-10T09:20:20.6146730Z       path: '/test'
2025-12-10T09:20:20.6147061Z     }
2025-12-10T09:20:20.6147247Z 
2025-12-10T09:20:20.6147464Z       at log (middleware/rbac.js:103:17)
2025-12-10T09:20:20.6147777Z 
2025-12-10T09:20:20.6154982Z   console.log
2025-12-10T09:20:20.6155435Z     [RBAC] Role check failed: {
2025-12-10T09:20:20.6156110Z       username: undefined,
2025-12-10T09:20:20.6156408Z       userRole: 'moderator',
2025-12-10T09:20:20.6156838Z       requiredRole: 'admin',
2025-12-10T09:20:20.6157164Z       path: '/test',
2025-12-10T09:20:20.6157546Z       method: 'GET'
2025-12-10T09:20:20.6157944Z     }
2025-12-10T09:20:20.6158164Z 
2025-12-10T09:20:20.6158344Z       at log (middleware/rbac.js:89:21)
2025-12-10T09:20:20.6158568Z 
2025-12-10T09:20:20.6166442Z   console.log
2025-12-10T09:20:20.6166845Z     [RBAC] Role check passed: {
2025-12-10T09:20:20.6167261Z       username: undefined,
2025-12-10T09:20:20.6167554Z       role: 'owner',
2025-12-10T09:20:20.6167793Z       requiredRole: 'owner',
2025-12-10T09:20:20.6168050Z       path: '/test'
2025-12-10T09:20:20.6168286Z     }
2025-12-10T09:20:20.6168465Z 
2025-12-10T09:20:20.6168694Z       at log (middleware/rbac.js:103:17)
2025-12-10T09:20:20.6169049Z 
2025-12-10T09:20:20.6177275Z   console.log
2025-12-10T09:20:20.6177673Z     [RBAC] Role check failed: {
2025-12-10T09:20:20.6178103Z       username: undefined,
2025-12-10T09:20:20.6178404Z       userRole: 'admin',
2025-12-10T09:20:20.6178664Z       requiredRole: 'owner',
2025-12-10T09:20:20.6178922Z       path: '/test',
2025-12-10T09:20:20.6179349Z       method: 'GET'
2025-12-10T09:20:20.6179648Z     }
2025-12-10T09:20:20.6179836Z 
2025-12-10T09:20:20.6180076Z       at log (middleware/rbac.js:89:21)
2025-12-10T09:20:20.6180369Z 
2025-12-10T09:20:20.6192983Z PASS __tests__/middleware/rbac.test.js
2025-12-10T09:20:20.6193528Z   RBAC Middleware
2025-12-10T09:20:20.6193890Z     requirePermission
2025-12-10T09:20:20.6194895Z       ✓ should allow access when user has required permission (3 ms)
2025-12-10T09:20:20.6195761Z       ✓ should deny access when user lacks permission (1 ms)
2025-12-10T09:20:20.6196605Z       ✓ should deny access when user is not authenticated (1 ms)
2025-12-10T09:20:20.6197227Z       ✓ should deny access when session has no role (1 ms)
2025-12-10T09:20:20.6197586Z     checkPermission (alias)
2025-12-10T09:20:20.6197981Z       ✓ should be an alias for requirePermission
2025-12-10T09:20:20.6198449Z       ✓ should work the same as requirePermission (1 ms)
2025-12-10T09:20:20.6198787Z     requireRole
2025-12-10T09:20:20.6199396Z       ✓ should allow access when user has exact role (1 ms)
2025-12-10T09:20:20.6199945Z       ✓ should allow access when user has higher role (2 ms)
2025-12-10T09:20:20.6200426Z       ✓ should deny access when user has lower role (1 ms)
2025-12-10T09:20:20.6200749Z     requireOwner
2025-12-10T09:20:20.6201075Z       ✓ should allow access for owner role (1 ms)
2025-12-10T09:20:20.6201515Z       ✓ should deny access for non-owner roles (1 ms)
2025-12-10T09:20:20.6201745Z 
2025-12-10T09:20:20.7834855Z   console.log
2025-12-10T09:20:20.7835417Z     [Session] Cookie configuration: {
2025-12-10T09:20:20.7835861Z       secure: false,
2025-12-10T09:20:20.7836189Z       nodeEnv: 'test',
2025-12-10T09:20:20.7836576Z       cookieSecureOverride: 'undefined',
2025-12-10T09:20:20.7837146Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:20.7837670Z     }
2025-12-10T09:20:20.7837838Z 
2025-12-10T09:20:20.7838086Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:20.7838414Z 
2025-12-10T09:20:20.8014484Z PASS __tests__/auth/session.test.js
2025-12-10T09:20:20.8015126Z   Cookie Security Configuration
2025-12-10T09:20:20.8015609Z     shouldUseSecureCookies()
2025-12-10T09:20:20.8016470Z       ✓ should return false in development environment
2025-12-10T09:20:20.8017203Z       ✓ should return false in test environment
2025-12-10T09:20:20.8017929Z       ✓ should return true in production environment
2025-12-10T09:20:20.8018772Z       ✓ should return false when COOKIE_SECURE=false in production
2025-12-10T09:20:20.8019947Z       ✓ should return true when COOKIE_SECURE=true in development (1 ms)
2025-12-10T09:20:20.8020741Z       ✓ should return false when NODE_ENV is not set
2025-12-10T09:20:20.8021266Z     getCookieSecurityWarning()
2025-12-10T09:20:20.8021859Z       ✓ should return HTTPS warning for secure cookies
2025-12-10T09:20:20.8023212Z       ✓ should return HTTP allowed warning for non-secure cookies
2025-12-10T09:20:20.8023787Z     logCookieConfiguration()
2025-12-10T09:20:20.8024425Z       ✓ should log configuration with correct format (1 ms)
2025-12-10T09:20:20.8024987Z     Session middleware creation
2025-12-10T09:20:20.8025734Z       ✓ should successfully create session middleware with utility (62 ms)
2025-12-10T09:20:20.8026775Z       ✓ should throw error if getSessionMiddleware called before initialization (73 ms)
2025-12-10T09:20:20.8027311Z 
2025-12-10T09:20:20.8617399Z   console.warn
2025-12-10T09:20:20.8617957Z     Player NonExistentPlayer not found in Mojang API
2025-12-10T09:20:20.8618319Z 
2025-12-10T09:20:20.8618854Z     [0m [90m 48 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:20.8620237Z      [90m 49 |[39m             [36mif[39m (error[33m.[39mresponse [33m&&[39m error[33m.[39mresponse[33m.[39mstatus [33m===[39m [35m404[39m) {
2025-12-10T09:20:20.8621734Z     [31m[1m>[22m[39m[90m 50 |[39m                 console[33m.[39mwarn([32m`Player ${username} not found in Mojang API`[39m)[33m;[39m
2025-12-10T09:20:20.8622655Z      [90m    |[39m                         [31m[1m^[22m[39m
2025-12-10T09:20:20.8623345Z      [90m 51 |[39m                 [36mreturn[39m [36mnull[39m[33m;[39m
2025-12-10T09:20:20.8623909Z      [90m 52 |[39m             }
2025-12-10T09:20:20.8624364Z      [90m 53 |[39m             [0m
2025-12-10T09:20:20.8624625Z 
2025-12-10T09:20:20.8624946Z       at MojangService.warn [as getUuid] (services/mojang.js:50:25)
2025-12-10T09:20:20.8625675Z       at Object.<anonymous> (__tests__/services/mojang.test.js:59:26)
2025-12-10T09:20:20.8626084Z 
2025-12-10T09:20:20.8629104Z   console.error
2025-12-10T09:20:20.8629981Z     Error fetching UUID for TestPlayer: Network error
2025-12-10T09:20:20.8630376Z 
2025-12-10T09:20:20.8630762Z     [0m [90m 52 |[39m             }
2025-12-10T09:20:20.8631293Z      [90m 53 |[39m             
2025-12-10T09:20:20.8632627Z     [31m[1m>[22m[39m[90m 54 |[39m             console[33m.[39merror([32m`Error fetching UUID for ${username}:`[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:20.8633729Z      [90m    |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:20.8634674Z      [90m 55 |[39m             [90m// On error, generate a fallback UUID based on username[39m
2025-12-10T09:20:20.8635821Z      [90m 56 |[39m             [90m// This ensures we can still track players even if API is down[39m
2025-12-10T09:20:20.8637179Z      [90m 57 |[39m             [36mreturn[39m [36mthis[39m[33m.[39mgenerateFallbackUuid(username)[33m;[39m[0m
2025-12-10T09:20:20.8637767Z 
2025-12-10T09:20:20.8638152Z       at MojangService.error [as getUuid] (services/mojang.js:54:21)
2025-12-10T09:20:20.8639010Z       at Object.<anonymous> (__tests__/services/mojang.test.js:68:26)
2025-12-10T09:20:20.8639757Z 
2025-12-10T09:20:20.8646160Z   console.error
2025-12-10T09:20:20.8646676Z     Error fetching UUID for TestPlayer: Network error
2025-12-10T09:20:20.8647046Z 
2025-12-10T09:20:20.8647365Z     [0m [90m 52 |[39m             }
2025-12-10T09:20:20.8647876Z      [90m 53 |[39m             
2025-12-10T09:20:20.8649108Z     [31m[1m>[22m[39m[90m 54 |[39m             console[33m.[39merror([32m`Error fetching UUID for ${username}:`[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:20.8650417Z      [90m    |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:20.8651294Z      [90m 55 |[39m             [90m// On error, generate a fallback UUID based on username[39m
2025-12-10T09:20:20.8652333Z      [90m 56 |[39m             [90m// This ensures we can still track players even if API is down[39m
2025-12-10T09:20:20.8653528Z      [90m 57 |[39m             [36mreturn[39m [36mthis[39m[33m.[39mgenerateFallbackUuid(username)[33m;[39m[0m
2025-12-10T09:20:20.8654082Z 
2025-12-10T09:20:20.8654441Z       at MojangService.error [as getUuid] (services/mojang.js:54:21)
2025-12-10T09:20:20.8655816Z       at Object.<anonymous> (__tests__/services/mojang.test.js:78:27)
2025-12-10T09:20:20.8656245Z 
2025-12-10T09:20:20.8656385Z   console.error
2025-12-10T09:20:20.8656824Z     Error fetching UUID for TestPlayer: Network error
2025-12-10T09:20:20.8657180Z 
2025-12-10T09:20:20.8657455Z     [0m [90m 52 |[39m             }
2025-12-10T09:20:20.8657968Z      [90m 53 |[39m             
2025-12-10T09:20:20.8659393Z     [31m[1m>[22m[39m[90m 54 |[39m             console[33m.[39merror([32m`Error fetching UUID for ${username}:`[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:20.8660497Z      [90m    |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:20.8661368Z      [90m 55 |[39m             [90m// On error, generate a fallback UUID based on username[39m
2025-12-10T09:20:20.8662413Z      [90m 56 |[39m             [90m// This ensures we can still track players even if API is down[39m
2025-12-10T09:20:20.8663604Z      [90m 57 |[39m             [36mreturn[39m [36mthis[39m[33m.[39mgenerateFallbackUuid(username)[33m;[39m[0m
2025-12-10T09:20:20.8664156Z 
2025-12-10T09:20:20.8664517Z       at MojangService.error [as getUuid] (services/mojang.js:54:21)
2025-12-10T09:20:20.8665283Z       at Object.<anonymous> (__tests__/services/mojang.test.js:79:27)
2025-12-10T09:20:20.8665695Z 
2025-12-10T09:20:20.8693914Z PASS __tests__/services/mojang.test.js
2025-12-10T09:20:20.8694396Z   MojangService
2025-12-10T09:20:20.8694702Z     getUuid
2025-12-10T09:20:20.8695245Z       ✓ should fetch UUID from Mojang API (1 ms)
2025-12-10T09:20:20.8695741Z       ✓ should cache UUID results (1 ms)
2025-12-10T09:20:20.8696098Z       ✓ should handle 404 not found (2 ms)
2025-12-10T09:20:20.8696737Z       ✓ should generate fallback UUID on API error (2 ms)
2025-12-10T09:20:20.8697493Z       ✓ should generate same fallback UUID for same username (2 ms)
2025-12-10T09:20:20.8697991Z     formatUuid
2025-12-10T09:20:20.8698471Z       ✓ should format UUID with dashes (1 ms)
2025-12-10T09:20:20.8699059Z       ✓ should not modify already formatted UUID
2025-12-10T09:20:20.8699687Z     generateFallbackUuid
2025-12-10T09:20:20.8700188Z       ✓ should generate valid UUID format
2025-12-10T09:20:20.8700801Z       ✓ should be deterministic for same username (1 ms)
2025-12-10T09:20:20.8701351Z       ✓ should be case-insensitive
2025-12-10T09:20:20.8701690Z     clearCache
2025-12-10T09:20:20.8702038Z       ✓ should clear the cache
2025-12-10T09:20:20.8702251Z 
2025-12-10T09:20:20.9647710Z   console.log
2025-12-10T09:20:20.9648439Z     [TestPlugin] Configured: { enabled: true, baseUrl: 'http://localhost:8080', hasToken: true }
2025-12-10T09:20:20.9648895Z 
2025-12-10T09:20:20.9649465Z       at BasePluginAdapter.log [as configure] (services/adapters/baseAdapter.js:47:17)
2025-12-10T09:20:20.9649884Z 
2025-12-10T09:20:20.9727566Z   console.log
2025-12-10T09:20:20.9728093Z     [TestPlugin] Configured: { enabled: true, baseUrl: 'http://localhost:8080', hasToken: false }
2025-12-10T09:20:20.9728470Z 
2025-12-10T09:20:20.9728766Z       at BasePluginAdapter.log [as configure] (services/adapters/baseAdapter.js:47:17)
2025-12-10T09:20:20.9729066Z 
2025-12-10T09:20:20.9739940Z   console.log
2025-12-10T09:20:20.9740424Z     [TestPlugin] Configured: { enabled: false, baseUrl: null, hasToken: false }
2025-12-10T09:20:20.9740717Z 
2025-12-10T09:20:20.9740986Z       at BasePluginAdapter.log [as configure] (services/adapters/baseAdapter.js:47:17)
2025-12-10T09:20:20.9741299Z 
2025-12-10T09:20:20.9747348Z   console.log
2025-12-10T09:20:20.9747679Z     [TestPlugin] Adapter is disabled
2025-12-10T09:20:20.9747866Z 
2025-12-10T09:20:20.9748137Z       at BasePluginAdapter.log [as initialize] (services/adapters/baseAdapter.js:61:21)
2025-12-10T09:20:20.9748450Z 
2025-12-10T09:20:20.9759754Z   console.log
2025-12-10T09:20:20.9760296Z     [TestPlugin] Configured: { enabled: true, baseUrl: 'http://localhost:8080', hasToken: false }
2025-12-10T09:20:20.9760986Z 
2025-12-10T09:20:20.9761434Z       at BasePluginAdapter.log [as configure] (services/adapters/baseAdapter.js:47:17)
2025-12-10T09:20:20.9761738Z 
2025-12-10T09:20:20.9775725Z   console.log
2025-12-10T09:20:20.9776306Z     [TestPlugin] Configured: { enabled: true, baseUrl: 'http://localhost:8080', hasToken: false }
2025-12-10T09:20:20.9776650Z 
2025-12-10T09:20:20.9776921Z       at BasePluginAdapter.log [as configure] (services/adapters/baseAdapter.js:47:17)
2025-12-10T09:20:20.9777226Z 
2025-12-10T09:20:20.9789887Z   console.log
2025-12-10T09:20:20.9790581Z     [TestPlugin] Configured: { enabled: true, baseUrl: 'http://localhost:8080', hasToken: false }
2025-12-10T09:20:20.9791097Z 
2025-12-10T09:20:20.9791373Z       at BasePluginAdapter.log [as configure] (services/adapters/baseAdapter.js:47:17)
2025-12-10T09:20:20.9791677Z 
2025-12-10T09:20:23.9856367Z PASS __tests__/services/adapters/baseAdapter.test.js
2025-12-10T09:20:23.9857099Z   BasePluginAdapter
2025-12-10T09:20:23.9857514Z     constructor
2025-12-10T09:20:23.9858540Z       ✓ should create adapter with plugin name (1 ms)
2025-12-10T09:20:23.9859581Z       ✓ should set default configuration
2025-12-10T09:20:23.9860449Z       ✓ should throw error if no plugin name provided (10 ms)
2025-12-10T09:20:23.9860947Z     configure
2025-12-10T09:20:23.9861444Z       ✓ should update configuration (7 ms)
2025-12-10T09:20:23.9862185Z       ✓ should throw error if enabled without baseUrl (1 ms)
2025-12-10T09:20:23.9862898Z       ✓ should throw error for invalid config (1 ms)
2025-12-10T09:20:23.9863441Z     initialize
2025-12-10T09:20:23.9863982Z       ✓ should initialize when enabled (1 ms)
2025-12-10T09:20:23.9864699Z       ✓ should not initialize when disabled (2 ms)
2025-12-10T09:20:23.9865215Z     makeRequest
2025-12-10T09:20:23.9865780Z       ✓ should make successful GET request (2 ms)
2025-12-10T09:20:23.9866543Z       ✓ should throw error if adapter not ready (1 ms)
2025-12-10T09:20:23.9867221Z       ✓ should retry on network error (3005 ms)
2025-12-10T09:20:23.9867590Z 
2025-12-10T09:20:24.0288221Z PASS __tests__/config/rbac-analytics.test.js
2025-12-10T09:20:24.0288807Z   Analytics RBAC
2025-12-10T09:20:24.0289132Z     ANALYTICS_VIEW permission
2025-12-10T09:20:24.0290032Z       ✓ should be granted to owner
2025-12-10T09:20:24.0290357Z       ✓ should be granted to admin
2025-12-10T09:20:24.0290669Z       ✓ should be granted to moderator
2025-12-10T09:20:24.0290971Z       ✓ should be granted to viewer
2025-12-10T09:20:24.0291243Z     ANALYTICS_EXPORT permission
2025-12-10T09:20:24.0291529Z       ✓ should be granted to owner
2025-12-10T09:20:24.0291814Z       ✓ should be granted to admin
2025-12-10T09:20:24.0292108Z       ✓ should be denied to moderator
2025-12-10T09:20:24.0292407Z       ✓ should be denied to viewer
2025-12-10T09:20:24.0292660Z     ANALYTICS_MANAGE permission
2025-12-10T09:20:24.0292976Z       ✓ should be granted to owner (1 ms)
2025-12-10T09:20:24.0293285Z       ✓ should be granted to admin
2025-12-10T09:20:24.0293564Z       ✓ should be denied to moderator
2025-12-10T09:20:24.0293877Z       ✓ should be denied to viewer
2025-12-10T09:20:24.0294147Z     Analytics feature access summary
2025-12-10T09:20:24.0294478Z       ✓ should allow owner full analytics access
2025-12-10T09:20:24.0294854Z       ✓ should allow admin full analytics access (1 ms)
2025-12-10T09:20:24.0295255Z       ✓ should allow moderator view-only analytics access
2025-12-10T09:20:24.0295645Z       ✓ should allow viewer view-only analytics access
2025-12-10T09:20:24.0295837Z 
2025-12-10T09:20:24.0653206Z PASS __tests__/config/rbac-map.test.js
2025-12-10T09:20:24.0653747Z   RBAC - Map Permissions
2025-12-10T09:20:24.0654126Z     MAP_VIEW permission
2025-12-10T09:20:24.0654689Z       ✓ should exist as a permission
2025-12-10T09:20:24.0655103Z       ✓ viewer role should have MAP_VIEW permission (1 ms)
2025-12-10T09:20:24.0655522Z       ✓ moderator role should have MAP_VIEW permission
2025-12-10T09:20:24.0655899Z       ✓ admin role should have MAP_VIEW permission
2025-12-10T09:20:24.0656565Z       ✓ owner role should have MAP_VIEW permission
2025-12-10T09:20:24.0657032Z     MAP_PLAYER_TELEPORT permission
2025-12-10T09:20:24.0657355Z       ✓ should exist as a permission
2025-12-10T09:20:24.0657750Z       ✓ viewer role should NOT have MAP_PLAYER_TELEPORT permission
2025-12-10T09:20:24.0658229Z       ✓ moderator role should have MAP_PLAYER_TELEPORT permission
2025-12-10T09:20:24.0658691Z       ✓ admin role should have MAP_PLAYER_TELEPORT permission (3 ms)
2025-12-10T09:20:24.0659136Z       ✓ owner role should have MAP_PLAYER_TELEPORT permission
2025-12-10T09:20:24.0659789Z     MAP_PLAYER_INFO permission
2025-12-10T09:20:24.0660093Z       ✓ should exist as a permission
2025-12-10T09:20:24.0660439Z       ✓ viewer role should have MAP_PLAYER_INFO permission
2025-12-10T09:20:24.0660886Z       ✓ moderator role should have MAP_PLAYER_INFO permission (1 ms)
2025-12-10T09:20:24.0661321Z       ✓ admin role should have MAP_PLAYER_INFO permission
2025-12-10T09:20:24.0661710Z       ✓ owner role should have MAP_PLAYER_INFO permission
2025-12-10T09:20:24.0661921Z 
2025-12-10T09:20:24.1003581Z   console.error
2025-12-10T09:20:24.1004050Z     Error Handler: {
2025-12-10T09:20:24.1004483Z       message: 'Test error',
2025-12-10T09:20:24.1004937Z       statusCode: 400,
2025-12-10T09:20:24.1005344Z       path: '/test',
2025-12-10T09:20:24.1005728Z       method: 'GET',
2025-12-10T09:20:24.1006117Z       stack: undefined
2025-12-10T09:20:24.1006503Z     }
2025-12-10T09:20:24.1006694Z 
2025-12-10T09:20:24.1007127Z     [0m [90m 30 |[39m     
2025-12-10T09:20:24.1007880Z      [90m 31 |[39m     [90m// Log error details (but not in production with sensitive data)[39m
2025-12-10T09:20:24.1008707Z     [31m[1m>[22m[39m[90m 32 |[39m     console[33m.[39merror([32m'Error Handler:'[39m[33m,[39m {
2025-12-10T09:20:24.1009513Z      [90m    |[39m             [31m[1m^[22m[39m
2025-12-10T09:20:24.1010083Z      [90m 33 |[39m         message[33m:[39m err[33m.[39mmessage[33m,[39m
2025-12-10T09:20:24.1010707Z      [90m 34 |[39m         statusCode[33m:[39m statusCode[33m,[39m
2025-12-10T09:20:24.1011365Z      [90m 35 |[39m         path[33m:[39m req[33m.[39mpath[33m,[39m[0m
2025-12-10T09:20:24.1011654Z 
2025-12-10T09:20:24.1011831Z       at error (middleware/errorHandler.js:32:13)
2025-12-10T09:20:24.1012376Z       at Object.errorHandler (__tests__/middleware/errorHandler.test.js:30:7)
2025-12-10T09:20:24.1012740Z 
2025-12-10T09:20:24.1020143Z   console.error
2025-12-10T09:20:24.1020504Z     Error Handler: {
2025-12-10T09:20:24.1020773Z       message: 'Test error',
2025-12-10T09:20:24.1021055Z       statusCode: 500,
2025-12-10T09:20:24.1021313Z       path: '/test',
2025-12-10T09:20:24.1021558Z       method: 'GET',
2025-12-10T09:20:24.1021794Z       stack: undefined
2025-12-10T09:20:24.1022023Z     }
2025-12-10T09:20:24.1022147Z 
2025-12-10T09:20:24.1022322Z     [0m [90m 30 |[39m     
2025-12-10T09:20:24.1022917Z      [90m 31 |[39m     [90m// Log error details (but not in production with sensitive data)[39m
2025-12-10T09:20:24.1023731Z     [31m[1m>[22m[39m[90m 32 |[39m     console[33m.[39merror([32m'Error Handler:'[39m[33m,[39m {
2025-12-10T09:20:24.1024308Z      [90m    |[39m             [31m[1m^[22m[39m
2025-12-10T09:20:24.1024835Z      [90m 33 |[39m         message[33m:[39m err[33m.[39mmessage[33m,[39m
2025-12-10T09:20:24.1025389Z      [90m 34 |[39m         statusCode[33m:[39m statusCode[33m,[39m
2025-12-10T09:20:24.1025940Z      [90m 35 |[39m         path[33m:[39m req[33m.[39mpath[33m,[39m[0m
2025-12-10T09:20:24.1026220Z 
2025-12-10T09:20:24.1026390Z       at error (middleware/errorHandler.js:32:13)
2025-12-10T09:20:24.1026928Z       at Object.errorHandler (__tests__/middleware/errorHandler.test.js:49:7)
2025-12-10T09:20:24.1027286Z 
2025-12-10T09:20:24.1041648Z PASS __tests__/middleware/errorHandler.test.js
2025-12-10T09:20:24.1042151Z   Error Handler Middleware
2025-12-10T09:20:24.1042519Z     notFoundHandler
2025-12-10T09:20:24.1043015Z       ✓ should create a 404 error (1 ms)
2025-12-10T09:20:24.1043795Z     errorHandler
2025-12-10T09:20:24.1044546Z       ✓ should send error response with status code (3 ms)
2025-12-10T09:20:24.1045261Z       ✓ should not include stack trace in production (2 ms)
2025-12-10T09:20:24.1045735Z     asyncHandler
2025-12-10T09:20:24.1046157Z       ✓ should wrap async functions
2025-12-10T09:20:24.1046736Z       ✓ should catch errors from async functions
2025-12-10T09:20:24.1047063Z 
2025-12-10T09:20:24.3315866Z   console.log
2025-12-10T09:20:24.3316275Z     [Session] Cookie configuration: {
2025-12-10T09:20:24.3316561Z       secure: false,
2025-12-10T09:20:24.3316777Z       nodeEnv: 'test',
2025-12-10T09:20:24.3317023Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:24.3317359Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:24.3317646Z     }
2025-12-10T09:20:24.3317744Z 
2025-12-10T09:20:24.3317885Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:24.3318070Z 
2025-12-10T09:20:24.4426765Z   console.log
2025-12-10T09:20:24.4427270Z     [Test] Session middleware initialized (memory store)
2025-12-10T09:20:24.4427571Z 
2025-12-10T09:20:24.4427732Z       at Object.log (server.js:142:13)
2025-12-10T09:20:24.4427959Z 
2025-12-10T09:20:24.4432595Z   console.log
2025-12-10T09:20:24.4433033Z     [Session] Initialization status: {
2025-12-10T09:20:24.4433361Z       nodeEnv: 'test',
2025-12-10T09:20:24.4433630Z       sessionSecretSet: true,
2025-12-10T09:20:24.4433921Z       redisConfigured: false,
2025-12-10T09:20:24.4434211Z       middlewareApplied: true
2025-12-10T09:20:24.4434482Z     }
2025-12-10T09:20:24.4434597Z 
2025-12-10T09:20:24.4434751Z       at Object.log (server.js:155:9)
2025-12-10T09:20:24.4434959Z 
2025-12-10T09:20:24.4439476Z   console.log
2025-12-10T09:20:24.4439838Z     [CSRF] Cookie configuration: {
2025-12-10T09:20:24.4440113Z       secure: false,
2025-12-10T09:20:24.4440334Z       nodeEnv: 'test',
2025-12-10T09:20:24.4440594Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:24.4440970Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:24.4441286Z     }
2025-12-10T09:20:24.4441394Z 
2025-12-10T09:20:24.4441535Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:24.4441732Z 
2025-12-10T09:20:24.4512343Z   console.log
2025-12-10T09:20:24.4512785Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:24.4513022Z 
2025-12-10T09:20:24.4513160Z       at log (server.js:284:17)
2025-12-10T09:20:24.4513358Z 
2025-12-10T09:20:24.4527063Z   console.log
2025-12-10T09:20:24.4527380Z     === API DEBUG LOG ===
2025-12-10T09:20:24.4527546Z 
2025-12-10T09:20:24.4527820Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:24.4528138Z 
2025-12-10T09:20:24.4531724Z   console.log
2025-12-10T09:20:24.4532018Z     POST /login - 400 (2ms)
2025-12-10T09:20:24.4532200Z 
2025-12-10T09:20:24.4532468Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:24.4532788Z 
2025-12-10T09:20:24.4537391Z   console.log
2025-12-10T09:20:24.4537918Z     Session: { id: 'Y4KOkj0AaEhz...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:24.4538252Z 
2025-12-10T09:20:24.4538512Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:24.4538822Z 
2025-12-10T09:20:24.4542209Z   console.log
2025-12-10T09:20:24.4542623Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:24.4542869Z 
2025-12-10T09:20:24.4543126Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:24.4546423Z 
2025-12-10T09:20:24.4546556Z   console.log
2025-12-10T09:20:24.4546874Z     ====================
2025-12-10T09:20:24.4547026Z 
2025-12-10T09:20:24.4547287Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:24.4547597Z 
2025-12-10T09:20:24.4553021Z [0mPOST /api/login [33m400[0m 7.696 ms - 287[0m
2025-12-10T09:20:24.4587712Z   console.log
2025-12-10T09:20:24.4588095Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:24.4588609Z 
2025-12-10T09:20:24.4588895Z       at log (server.js:284:17)
2025-12-10T09:20:24.4589092Z 
2025-12-10T09:20:24.4596109Z   console.log
2025-12-10T09:20:24.4596502Z     [LOGIN] Login attempt: {
2025-12-10T09:20:24.4596930Z       username: 'a',
2025-12-10T09:20:24.4597438Z       sessionID: 'MACLi_neKynXgDlmA7wDWwJDvEEaeMWu',
2025-12-10T09:20:24.4597965Z       hasSession: true,
2025-12-10T09:20:24.4598408Z       timestamp: '2025-12-10T09:20:24.459Z'
2025-12-10T09:20:24.4598819Z     }
2025-12-10T09:20:24.4598979Z 
2025-12-10T09:20:24.4599360Z       at log (routes/api.js:15:13)
2025-12-10T09:20:24.4599659Z 
2025-12-10T09:20:24.4614372Z   console.error
2025-12-10T09:20:24.4615499Z     Error loading users: [Error: ENOENT: no such file or directory, open '/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/config/users.json'] {
2025-12-10T09:20:24.4616338Z       errno: -2,
2025-12-10T09:20:24.4616577Z       code: 'ENOENT',
2025-12-10T09:20:24.4616847Z       syscall: 'open',
2025-12-10T09:20:24.4617447Z       path: '/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/config/users.json'
2025-12-10T09:20:24.4618026Z     }
2025-12-10T09:20:24.4618149Z 
2025-12-10T09:20:24.4618616Z     [0m [90m 16 |[39m         [36mreturn[39m [33mJSON[39m[33m.[39mparse(data)[33m;[39m
2025-12-10T09:20:24.4619582Z      [90m 17 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:24.4620809Z     [31m[1m>[22m[39m[90m 18 |[39m         console[33m.[39merror([32m'Error loading users:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:24.4621896Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:24.4622509Z      [90m 19 |[39m         
2025-12-10T09:20:24.4623298Z      [90m 20 |[39m         [90m// Require ADMIN_PASSWORD to be set[39m
2025-12-10T09:20:24.4625381Z      [90m 21 |[39m         [36mif[39m ([33m![39mprocess[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m||[39m process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m===[39m [32m'change-this-secure-password'[39m) {[0m
2025-12-10T09:20:24.4626565Z 
2025-12-10T09:20:24.4626795Z       at error (auth/auth.js:18:17)
2025-12-10T09:20:24.4627435Z       at verifyCredentials (auth/auth.js:55:22)
2025-12-10T09:20:24.4627993Z       at routes/api.js:39:22
2025-12-10T09:20:24.4628262Z 
2025-12-10T09:20:24.5578137Z   console.log
2025-12-10T09:20:24.5578726Z     [LOGIN] Login failed: Invalid credentials for user: a
2025-12-10T09:20:24.5579102Z 
2025-12-10T09:20:24.5579487Z       at log (routes/api.js:83:21)
2025-12-10T09:20:24.5579747Z 
2025-12-10T09:20:24.5585104Z   console.log
2025-12-10T09:20:24.5585486Z     [Audit] Event logged: {
2025-12-10T09:20:24.5585950Z       eventType: 'auth.login.failure',
2025-12-10T09:20:24.5586414Z       username: 'a',
2025-12-10T09:20:24.5586851Z       timestamp: '2025-12-10T09:20:24.557Z'
2025-12-10T09:20:24.5587270Z     }
2025-12-10T09:20:24.5587447Z 
2025-12-10T09:20:24.5587663Z       at log (services/auditLog.js:106:17)
2025-12-10T09:20:24.5588022Z 
2025-12-10T09:20:24.5591613Z   console.log
2025-12-10T09:20:24.5592008Z     === API DEBUG LOG ===
2025-12-10T09:20:24.5592268Z 
2025-12-10T09:20:24.5592684Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:24.5593164Z 
2025-12-10T09:20:24.5595745Z   console.log
2025-12-10T09:20:24.5596131Z     POST /login - 401 (101ms)
2025-12-10T09:20:24.5596415Z 
2025-12-10T09:20:24.5596817Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:24.5597313Z 
2025-12-10T09:20:24.5600609Z   console.log
2025-12-10T09:20:24.5601285Z     Session: { id: 'MACLi_neKynX...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:24.5601867Z 
2025-12-10T09:20:24.5602396Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:24.5602969Z 
2025-12-10T09:20:24.5603801Z   console.log
2025-12-10T09:20:24.5604336Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:24.5605151Z 
2025-12-10T09:20:24.5605844Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:24.5606478Z 
2025-12-10T09:20:24.5607396Z   console.log
2025-12-10T09:20:24.5607959Z     ====================
2025-12-10T09:20:24.5608430Z 
2025-12-10T09:20:24.5608906Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:24.5609680Z 
2025-12-10T09:20:24.5614099Z [0mPOST /api/login [33m401[0m 103.353 ms - 31[0m
2025-12-10T09:20:24.5649634Z   console.log
2025-12-10T09:20:24.5650009Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:24.5650215Z 
2025-12-10T09:20:24.5650339Z       at log (server.js:284:17)
2025-12-10T09:20:24.5650497Z 
2025-12-10T09:20:24.5657951Z   console.log
2025-12-10T09:20:24.5658353Z     [LOGIN] Login attempt: {
2025-12-10T09:20:24.5658829Z       username: 'test@user.com',
2025-12-10T09:20:24.5659649Z       sessionID: 'kCoZpVD0sGELEmMZEaOaOv8j4bO4Jwr6',
2025-12-10T09:20:24.5660179Z       hasSession: true,
2025-12-10T09:20:24.5660625Z       timestamp: '2025-12-10T09:20:24.565Z'
2025-12-10T09:20:24.5661068Z     }
2025-12-10T09:20:24.5661239Z 
2025-12-10T09:20:24.5661445Z       at log (routes/api.js:15:13)
2025-12-10T09:20:24.5661733Z 
2025-12-10T09:20:24.5676616Z   console.error
2025-12-10T09:20:24.5677750Z     Error loading users: [Error: ENOENT: no such file or directory, open '/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/config/users.json'] {
2025-12-10T09:20:24.5678400Z       errno: -2,
2025-12-10T09:20:24.5678597Z       code: 'ENOENT',
2025-12-10T09:20:24.5678807Z       syscall: 'open',
2025-12-10T09:20:24.5679433Z       path: '/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/config/users.json'
2025-12-10T09:20:24.5679856Z     }
2025-12-10T09:20:24.5679958Z 
2025-12-10T09:20:24.5680377Z     [0m [90m 16 |[39m         [36mreturn[39m [33mJSON[39m[33m.[39mparse(data)[33m;[39m
2025-12-10T09:20:24.5680811Z      [90m 17 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:24.5681419Z     [31m[1m>[22m[39m[90m 18 |[39m         console[33m.[39merror([32m'Error loading users:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:24.5681931Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:24.5682222Z      [90m 19 |[39m         
2025-12-10T09:20:24.5682575Z      [90m 20 |[39m         [90m// Require ADMIN_PASSWORD to be set[39m
2025-12-10T09:20:24.5683567Z      [90m 21 |[39m         [36mif[39m ([33m![39mprocess[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m||[39m process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m===[39m [32m'change-this-secure-password'[39m) {[0m
2025-12-10T09:20:24.5684291Z 
2025-12-10T09:20:24.5684404Z       at error (auth/auth.js:18:17)
2025-12-10T09:20:24.5684700Z       at verifyCredentials (auth/auth.js:55:22)
2025-12-10T09:20:24.5684971Z       at routes/api.js:39:22
2025-12-10T09:20:24.5685112Z 
2025-12-10T09:20:24.6521444Z   console.log
2025-12-10T09:20:24.6522175Z     [LOGIN] Login failed: Invalid credentials for user: test@user.com
2025-12-10T09:20:24.6522775Z 
2025-12-10T09:20:24.6523034Z       at log (routes/api.js:83:21)
2025-12-10T09:20:24.6523370Z 
2025-12-10T09:20:24.6530367Z   console.log
2025-12-10T09:20:24.6530741Z     [Audit] Event logged: {
2025-12-10T09:20:24.6531276Z       eventType: 'auth.login.failure',
2025-12-10T09:20:24.6531798Z       username: 'test@user.com',
2025-12-10T09:20:24.6532288Z       timestamp: '2025-12-10T09:20:24.652Z'
2025-12-10T09:20:24.6532713Z     }
2025-12-10T09:20:24.6532873Z 
2025-12-10T09:20:24.6533095Z       at log (services/auditLog.js:106:17)
2025-12-10T09:20:24.6533412Z 
2025-12-10T09:20:24.6536725Z   console.log
2025-12-10T09:20:24.6537208Z     === API DEBUG LOG ===
2025-12-10T09:20:24.6537515Z 
2025-12-10T09:20:24.6537872Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:24.6538286Z 
2025-12-10T09:20:24.6541440Z   console.log
2025-12-10T09:20:24.6541837Z     POST /login - 401 (89ms)
2025-12-10T09:20:24.6542446Z 
2025-12-10T09:20:24.6543093Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:24.6543598Z 
2025-12-10T09:20:24.6545879Z   console.log
2025-12-10T09:20:24.6546529Z     Session: { id: 'kCoZpVD0sGEL...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:24.6547046Z 
2025-12-10T09:20:24.6547444Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:24.6547917Z 
2025-12-10T09:20:24.6549811Z   console.log
2025-12-10T09:20:24.6550299Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:24.6550662Z 
2025-12-10T09:20:24.6551072Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:24.6551536Z 
2025-12-10T09:20:24.6553962Z   console.log
2025-12-10T09:20:24.6554292Z     ====================
2025-12-10T09:20:24.6554527Z 
2025-12-10T09:20:24.6554902Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:24.6555370Z 
2025-12-10T09:20:24.6559797Z [0mPOST /api/login [33m401[0m 92.144 ms - 31[0m
2025-12-10T09:20:24.6591195Z   console.log
2025-12-10T09:20:24.6591615Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:24.6591923Z 
2025-12-10T09:20:24.6592115Z       at log (server.js:284:17)
2025-12-10T09:20:24.6592372Z 
2025-12-10T09:20:24.6600452Z   console.log
2025-12-10T09:20:24.6600830Z     === API DEBUG LOG ===
2025-12-10T09:20:24.6601091Z 
2025-12-10T09:20:24.6601498Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:24.6601983Z 
2025-12-10T09:20:24.6605480Z   console.log
2025-12-10T09:20:24.6605856Z     POST /login - 400 (1ms)
2025-12-10T09:20:24.6606113Z 
2025-12-10T09:20:24.6606522Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:24.6606996Z 
2025-12-10T09:20:24.6610705Z   console.log
2025-12-10T09:20:24.6611356Z     Session: { id: '5d4JbGaDKYjX...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:24.6611865Z 
2025-12-10T09:20:24.6612283Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:24.6612789Z 
2025-12-10T09:20:24.6616012Z   console.log
2025-12-10T09:20:24.6616501Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:24.6616863Z 
2025-12-10T09:20:24.6617267Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:24.6617748Z 
2025-12-10T09:20:24.6623118Z   console.log
2025-12-10T09:20:24.6623626Z     ====================
2025-12-10T09:20:24.6624139Z 
2025-12-10T09:20:24.6624575Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:24.6625079Z 
2025-12-10T09:20:24.6627011Z [0mPOST /api/login [33m400[0m 4.509 ms - 180[0m
2025-12-10T09:20:24.6655019Z   console.log
2025-12-10T09:20:24.6655411Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:24.6655619Z 
2025-12-10T09:20:24.6655741Z       at log (server.js:284:17)
2025-12-10T09:20:24.6655911Z 
2025-12-10T09:20:24.6663408Z   console.log
2025-12-10T09:20:24.6663761Z     === API DEBUG LOG ===
2025-12-10T09:20:24.6663989Z 
2025-12-10T09:20:24.6664383Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:24.6664715Z 
2025-12-10T09:20:24.6667962Z   console.log
2025-12-10T09:20:24.6668287Z     POST /login - 400 (2ms)
2025-12-10T09:20:24.6668449Z 
2025-12-10T09:20:24.6668677Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:24.6668955Z 
2025-12-10T09:20:24.6673516Z   console.log
2025-12-10T09:20:24.6674393Z     Session: { id: 'FkQsNMBRp3k0...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:24.6674919Z 
2025-12-10T09:20:24.6675325Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:24.6675800Z 
2025-12-10T09:20:24.6678469Z   console.log
2025-12-10T09:20:24.6679134Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:24.6679727Z 
2025-12-10T09:20:24.6680141Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:24.6680928Z 
2025-12-10T09:20:24.6684057Z   console.log
2025-12-10T09:20:24.6684853Z     ====================
2025-12-10T09:20:24.6685141Z 
2025-12-10T09:20:24.6685547Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:24.6686014Z 
2025-12-10T09:20:24.6689944Z [0mPOST /api/login [33m400[0m 4.423 ms - 94[0m
2025-12-10T09:20:24.7675539Z PASS __tests__/routes/login.test.js
2025-12-10T09:20:24.7676071Z   Login Error Handling
2025-12-10T09:20:24.7676520Z     POST /api/login - Error Format Handling
2025-12-10T09:20:24.7677516Z       ✓ should return validation errors in errors array format (12 ms)
2025-12-10T09:20:24.7678322Z       ✓ should accept single character usernames (106 ms)
2025-12-10T09:20:24.7679072Z       ✓ should accept usernames with @ and . characters (94 ms)
2025-12-10T09:20:24.7680144Z       ✓ should reject usernames with truly invalid characters (7 ms)
2025-12-10T09:20:24.7680852Z       ✓ should require password field (6 ms)
2025-12-10T09:20:24.7681199Z 
2025-12-10T09:20:25.0098178Z   console.log
2025-12-10T09:20:25.0098698Z     [Session] Cookie configuration: {
2025-12-10T09:20:25.0099398Z       secure: false,
2025-12-10T09:20:25.0099755Z       nodeEnv: 'test',
2025-12-10T09:20:25.0100172Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:25.0100816Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:25.0101305Z     }
2025-12-10T09:20:25.0101476Z 
2025-12-10T09:20:25.0101703Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:25.0102011Z 
2025-12-10T09:20:25.1323113Z   console.log
2025-12-10T09:20:25.1323744Z     [Test] Session middleware initialized (memory store)
2025-12-10T09:20:25.1324145Z 
2025-12-10T09:20:25.1324366Z       at Object.log (server.js:142:13)
2025-12-10T09:20:25.1324676Z 
2025-12-10T09:20:25.1329126Z   console.log
2025-12-10T09:20:25.1329766Z     [Session] Initialization status: {
2025-12-10T09:20:25.1330247Z       nodeEnv: 'test',
2025-12-10T09:20:25.1330683Z       sessionSecretSet: true,
2025-12-10T09:20:25.1331100Z       redisConfigured: false,
2025-12-10T09:20:25.1331521Z       middlewareApplied: true
2025-12-10T09:20:25.1331906Z     }
2025-12-10T09:20:25.1332072Z 
2025-12-10T09:20:25.1332284Z       at Object.log (server.js:155:9)
2025-12-10T09:20:25.1332584Z 
2025-12-10T09:20:25.1337386Z   console.log
2025-12-10T09:20:25.1337824Z     [CSRF] Cookie configuration: {
2025-12-10T09:20:25.1338262Z       secure: false,
2025-12-10T09:20:25.1338617Z       nodeEnv: 'test',
2025-12-10T09:20:25.1339043Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:25.1339855Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:25.1340338Z     }
2025-12-10T09:20:25.1340511Z 
2025-12-10T09:20:25.1340733Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:25.1341054Z 
2025-12-10T09:20:25.1534266Z   console.log
2025-12-10T09:20:25.1534908Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:25.1535336Z 
2025-12-10T09:20:25.1535909Z       at log (server.js:284:17)
2025-12-10T09:20:25.1536223Z 
2025-12-10T09:20:25.1536605Z   console.log
2025-12-10T09:20:25.1536983Z     === API DEBUG LOG ===
2025-12-10T09:20:25.1537249Z 
2025-12-10T09:20:25.1537649Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:25.1538083Z 
2025-12-10T09:20:25.1538210Z   console.log
2025-12-10T09:20:25.1542029Z     POST /login - 400 (4ms)
2025-12-10T09:20:25.1542299Z 
2025-12-10T09:20:25.1542706Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:25.1543168Z 
2025-12-10T09:20:25.1543310Z   console.log
2025-12-10T09:20:25.1543922Z     Session: { id: 'vGJFJ3Ri3B2K...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:25.1544406Z 
2025-12-10T09:20:25.1544795Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:25.1545273Z 
2025-12-10T09:20:25.1545410Z   console.log
2025-12-10T09:20:25.1545863Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:25.1546582Z 
2025-12-10T09:20:25.1547200Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:25.1547676Z 
2025-12-10T09:20:25.1547805Z   console.log
2025-12-10T09:20:25.1548076Z     ====================
2025-12-10T09:20:25.1548284Z 
2025-12-10T09:20:25.1548653Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:25.1549124Z 
2025-12-10T09:20:25.1549940Z [0mPOST /api/login [33m400[0m 13.513 ms - 287[0m
2025-12-10T09:20:25.1603538Z   console.log
2025-12-10T09:20:25.1603983Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:25.1604310Z 
2025-12-10T09:20:25.1604502Z       at log (server.js:284:17)
2025-12-10T09:20:25.1604781Z 
2025-12-10T09:20:25.1620102Z   console.log
2025-12-10T09:20:25.1620451Z     === API DEBUG LOG ===
2025-12-10T09:20:25.1620708Z 
2025-12-10T09:20:25.1621127Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:25.1621602Z 
2025-12-10T09:20:25.1627879Z   console.log
2025-12-10T09:20:25.1628271Z     POST /login - 400 (3ms)
2025-12-10T09:20:25.1628539Z 
2025-12-10T09:20:25.1628928Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:25.1629557Z 
2025-12-10T09:20:25.1636567Z   console.log
2025-12-10T09:20:25.1637381Z     Session: { id: '3Sze5qGCyu2g...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:25.1638000Z 
2025-12-10T09:20:25.1638411Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:25.1638832Z 
2025-12-10T09:20:25.1645395Z   console.log
2025-12-10T09:20:25.1645884Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:25.1646252Z 
2025-12-10T09:20:25.1646832Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:25.1647398Z 
2025-12-10T09:20:25.1652665Z   console.log
2025-12-10T09:20:25.1653025Z     ====================
2025-12-10T09:20:25.1653277Z 
2025-12-10T09:20:25.1653680Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:25.1654155Z 
2025-12-10T09:20:25.1660181Z [0mPOST /api/login [33m400[0m 7.792 ms - 94[0m
2025-12-10T09:20:25.1724124Z   console.log
2025-12-10T09:20:25.1724581Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:25.1724928Z 
2025-12-10T09:20:25.1725128Z       at log (server.js:284:17)
2025-12-10T09:20:25.1725408Z 
2025-12-10T09:20:25.1749837Z   console.log
2025-12-10T09:20:25.1750554Z     === API DEBUG LOG ===
2025-12-10T09:20:25.1751923Z 
2025-12-10T09:20:25.1752309Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:25.1752749Z 
2025-12-10T09:20:25.1752884Z   console.log
2025-12-10T09:20:25.1753198Z     POST /login - 400 (4ms)
2025-12-10T09:20:25.1753434Z 
2025-12-10T09:20:25.1753829Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:25.1754269Z 
2025-12-10T09:20:25.1758125Z   console.log
2025-12-10T09:20:25.1758695Z     Session: { id: 'C_GU7sbLiKCo...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:25.1759145Z 
2025-12-10T09:20:25.1759818Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:25.1760257Z 
2025-12-10T09:20:25.1767754Z   console.log
2025-12-10T09:20:25.1768189Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:25.1768502Z 
2025-12-10T09:20:25.1768844Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:25.1769429Z 
2025-12-10T09:20:25.1790765Z   console.log
2025-12-10T09:20:25.1791076Z     ====================
2025-12-10T09:20:25.1791294Z 
2025-12-10T09:20:25.1791657Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:25.1792089Z 
2025-12-10T09:20:25.1792630Z [0mPOST /api/login [33m400[0m 8.213 ms - 180[0m
2025-12-10T09:20:25.1831495Z   console.log
2025-12-10T09:20:25.1831881Z     [CSRF] Skipping CSRF check for session
2025-12-10T09:20:25.1832192Z 
2025-12-10T09:20:25.1832365Z       at log (server.js:289:17)
2025-12-10T09:20:25.1832942Z 
2025-12-10T09:20:25.1857264Z   console.log
2025-12-10T09:20:25.1857889Z     [SESSION] Session check: {
2025-12-10T09:20:25.1858420Z       sessionID: 'Z5UyatJLojA7S-38d6p-2kIBGnOSm3Sh',
2025-12-10T09:20:25.1858904Z       authenticated: false,
2025-12-10T09:20:25.1859425Z       username: undefined,
2025-12-10T09:20:25.1863190Z       role: undefined
2025-12-10T09:20:25.1863471Z     }
2025-12-10T09:20:25.1863607Z 
2025-12-10T09:20:25.1863782Z       at log (routes/api.js:131:13)
2025-12-10T09:20:25.1864035Z 
2025-12-10T09:20:25.1882770Z   console.log
2025-12-10T09:20:25.1883090Z     === API DEBUG LOG ===
2025-12-10T09:20:25.1883458Z 
2025-12-10T09:20:25.1883969Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:25.1884397Z 
2025-12-10T09:20:25.1905429Z   console.log
2025-12-10T09:20:25.1905761Z     GET /session - 200 (7ms)
2025-12-10T09:20:25.1906005Z 
2025-12-10T09:20:25.1906515Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:25.1906972Z 
2025-12-10T09:20:25.1927680Z   console.log
2025-12-10T09:20:25.1928258Z     Session: { id: 'Z5UyatJLojA7...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:25.1928716Z 
2025-12-10T09:20:25.1929066Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:25.1929653Z 
2025-12-10T09:20:25.1950901Z   console.log
2025-12-10T09:20:25.1951340Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:25.1951664Z 
2025-12-10T09:20:25.1952030Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:25.1952437Z 
2025-12-10T09:20:25.1973156Z   console.log
2025-12-10T09:20:25.1973441Z     ====================
2025-12-10T09:20:25.1973649Z 
2025-12-10T09:20:25.1973984Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:25.1974396Z 
2025-12-10T09:20:25.1981073Z [0mGET /api/session [32m200[0m 16.727 ms - 23[0m
2025-12-10T09:20:25.2176013Z   console.log
2025-12-10T09:20:25.2176506Z     [CSRF] Token request: {
2025-12-10T09:20:25.2177128Z       sessionID: 'xPW_fI2rvWZcMNM6exrJt96xp4pKe-vV',
2025-12-10T09:20:25.2177687Z       authenticated: false,
2025-12-10T09:20:25.2178120Z       username: 'NOT_SET',
2025-12-10T09:20:25.2178542Z       hasCookies: false,
2025-12-10T09:20:25.2179015Z       timestamp: '2025-12-10T09:20:25.214Z'
2025-12-10T09:20:25.2179684Z     }
2025-12-10T09:20:25.2179938Z 
2025-12-10T09:20:25.2180287Z       at log (server.js:236:13)
2025-12-10T09:20:25.2180576Z 
2025-12-10T09:20:25.2180715Z   console.log
2025-12-10T09:20:25.2181087Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:25.2181630Z       sessionID: 'xPW_fI2rvWZcMNM6exrJt96xp4pKe-vV',
2025-12-10T09:20:25.2182085Z       tokenLength: 64,
2025-12-10T09:20:25.2182453Z       tokenPrefix: '9ceab64d...',
2025-12-10T09:20:25.2182865Z       cookieName: 'csrf-token',
2025-12-10T09:20:25.2183512Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:25.2187135Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:25.2187758Z     }
2025-12-10T09:20:25.2187905Z 
2025-12-10T09:20:25.2188076Z       at log (server.js:266:13)
2025-12-10T09:20:25.2188317Z 
2025-12-10T09:20:25.2188426Z   console.log
2025-12-10T09:20:25.2188711Z     === API DEBUG LOG ===
2025-12-10T09:20:25.2188922Z 
2025-12-10T09:20:25.2189457Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:25.2189895Z 
2025-12-10T09:20:25.2194759Z   console.log
2025-12-10T09:20:25.2195113Z     GET /api/csrf-token - 200 (4ms)
2025-12-10T09:20:25.2195382Z 
2025-12-10T09:20:25.2195723Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:25.2196145Z 
2025-12-10T09:20:25.2204660Z   console.log
2025-12-10T09:20:25.2205207Z     Session: { id: 'xPW_fI2rvWZc...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:25.2205656Z 
2025-12-10T09:20:25.2206430Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:25.2207027Z 
2025-12-10T09:20:25.2214762Z   console.log
2025-12-10T09:20:25.2215188Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:25.2215522Z 
2025-12-10T09:20:25.2215888Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:25.2216323Z 
2025-12-10T09:20:25.2224160Z   console.log
2025-12-10T09:20:25.2224455Z     ====================
2025-12-10T09:20:25.2224656Z 
2025-12-10T09:20:25.2225140Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:25.2225663Z 
2025-12-10T09:20:25.2230482Z [0mGET /api/csrf-token [32m200[0m 8.600 ms - 80[0m
2025-12-10T09:20:25.2271589Z   console.log
2025-12-10T09:20:25.2271965Z     [CSRF] Token request: {
2025-12-10T09:20:25.2272505Z       sessionID: 'gJuc3qMYNw6igdIMzJGcfHkDjRNQkqoD',
2025-12-10T09:20:25.2273046Z       authenticated: false,
2025-12-10T09:20:25.2273446Z       username: 'NOT_SET',
2025-12-10T09:20:25.2273849Z       hasCookies: false,
2025-12-10T09:20:25.2274298Z       timestamp: '2025-12-10T09:20:25.226Z'
2025-12-10T09:20:25.2274721Z     }
2025-12-10T09:20:25.2274883Z 
2025-12-10T09:20:25.2275074Z       at log (server.js:236:13)
2025-12-10T09:20:25.2275339Z 
2025-12-10T09:20:25.2307034Z   console.log
2025-12-10T09:20:25.2307722Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:25.2308622Z       sessionID: 'gJuc3qMYNw6igdIMzJGcfHkDjRNQkqoD',
2025-12-10T09:20:25.2309616Z       tokenLength: 64,
2025-12-10T09:20:25.2310659Z       tokenPrefix: '95851f20...',
2025-12-10T09:20:25.2311383Z       cookieName: 'csrf-token',
2025-12-10T09:20:25.2312294Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:25.2313225Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:25.2313626Z     }
2025-12-10T09:20:25.2313727Z 
2025-12-10T09:20:25.2313853Z       at log (server.js:266:13)
2025-12-10T09:20:25.2314019Z 
2025-12-10T09:20:25.2317815Z   console.log
2025-12-10T09:20:25.2318148Z     === API DEBUG LOG ===
2025-12-10T09:20:25.2318302Z 
2025-12-10T09:20:25.2318532Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:25.2318805Z 
2025-12-10T09:20:25.2324844Z   console.log
2025-12-10T09:20:25.2325230Z     GET /api/csrf-token - 200 (5ms)
2025-12-10T09:20:25.2325513Z 
2025-12-10T09:20:25.2325900Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:25.2326172Z 
2025-12-10T09:20:25.2335753Z   console.log
2025-12-10T09:20:25.2336372Z     Session: { id: 'gJuc3qMYNw6i...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:25.2336842Z 
2025-12-10T09:20:25.2337212Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:25.2337663Z 
2025-12-10T09:20:25.2347233Z   console.log
2025-12-10T09:20:25.2347710Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:25.2348075Z 
2025-12-10T09:20:25.2348457Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:25.2348914Z 
2025-12-10T09:20:25.2356855Z   console.log
2025-12-10T09:20:25.2357191Z     ====================
2025-12-10T09:20:25.2357427Z 
2025-12-10T09:20:25.2357802Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:25.2358248Z 
2025-12-10T09:20:25.2361794Z [0mGET /api/csrf-token [32m200[0m 10.187 ms - 80[0m
2025-12-10T09:20:25.3342657Z PASS __tests__/routes/api.test.js
2025-12-10T09:20:25.3343176Z   API Routes
2025-12-10T09:20:25.3343496Z     POST /api/login
2025-12-10T09:20:25.3344276Z       ✓ should return 400 if username is missing (21 ms)
2025-12-10T09:20:25.3344980Z       ✓ should return 400 if password is missing (12 ms)
2025-12-10T09:20:25.3345767Z       ✓ should return 400 if username has invalid characters (12 ms)
2025-12-10T09:20:25.3346288Z     GET /api/session
2025-12-10T09:20:25.3346852Z       ✓ should return unauthenticated for new session (21 ms)
2025-12-10T09:20:25.3347804Z     GET /api/csrf-token
2025-12-10T09:20:25.3348511Z       ✓ should return a CSRF token (24 ms)
2025-12-10T09:20:25.3349373Z       ✓ should set a CSRF cookie in the response (13 ms)
2025-12-10T09:20:25.3349728Z 
2025-12-10T09:20:25.4061812Z PASS __tests__/middleware/validation.test.js
2025-12-10T09:20:25.4062372Z   Validation Middleware
2025-12-10T09:20:25.4062755Z     login validation
2025-12-10T09:20:25.4063386Z       ✓ should validate correct login credentials
2025-12-10T09:20:25.4063719Z     executeCommand validation
2025-12-10T09:20:25.4064095Z       ✓ should have command validation rules (1 ms)
2025-12-10T09:20:25.4064415Z     playerName validation
2025-12-10T09:20:25.4064755Z       ✓ should have player name validation rules
2025-12-10T09:20:25.4065048Z     filePath validation
2025-12-10T09:20:25.4065371Z       ✓ should have file path validation rules
2025-12-10T09:20:25.4065684Z     validate function
2025-12-10T09:20:25.4065987Z       ✓ should be a function (1 ms)
2025-12-10T09:20:25.4066204Z 
2025-12-10T09:20:42.9690478Z PASS __tests__/auth/session-startup.test.js (23.325 s)
2025-12-10T09:20:42.9716164Z   Session Startup Order
2025-12-10T09:20:42.9718551Z     Production mode (NODE_ENV=production)
2025-12-10T09:20:42.9722859Z       ✓ should fail if Redis is unavailable (no MemoryStore fallback) (11248 ms)
2025-12-10T09:20:42.9723493Z     Development mode (NODE_ENV=development)
2025-12-10T09:20:42.9724262Z       ✓ should fall back to MemoryStore if Redis unavailable (11351 ms)
2025-12-10T09:20:42.9724778Z     Test mode (NODE_ENV=test)
2025-12-10T09:20:42.9725466Z       ✓ should use MemoryStore without attempting Redis connection (172 ms)
2025-12-10T09:20:42.9725997Z     Session middleware access
2025-12-10T09:20:42.9726765Z       ✓ should create middleware immediately via initializeSessionMiddleware (140 ms)
2025-12-10T09:20:42.9727687Z       ✓ should return same middleware instance on subsequent calls (129 ms)
2025-12-10T09:20:42.9728281Z     Initialization order enforcement
2025-12-10T09:20:42.9729009Z       ✓ should initialize session middleware early for routes (120 ms)
2025-12-10T09:20:42.9729978Z       ✓ should upgrade to Redis during async initialization (124 ms)
2025-12-10T09:20:42.9730359Z 
2025-12-10T09:20:43.9607343Z ---------------------------|---------|----------|---------|---------|----------------------------------------------------------------------------------------------------------------------------------------------------------------
2025-12-10T09:20:43.9610026Z File                       | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                                                                                                              
2025-12-10T09:20:43.9611778Z ---------------------------|---------|----------|---------|---------|----------------------------------------------------------------------------------------------------------------------------------------------------------------
2025-12-10T09:20:43.9617062Z All files                  |   36.38 |    28.16 |   33.79 |    36.6 |                                                                                                                                                                
2025-12-10T09:20:43.9634198Z  auth                      |   59.09 |    56.25 |   57.77 |   60.41 |                                                                                                                                                                
2025-12-10T09:20:43.9635296Z   auth.js                  |   44.36 |     43.1 |    42.3 |   46.21 | 22-24,46-47,64,102-108,144,154-156,217-370                                                                                                                     
2025-12-10T09:20:43.9636549Z   bearerAuth.js            |   54.79 |    59.09 |   71.42 |   55.55 | 18-36,68,109-111,134-139,176-195                                                                                                                               
2025-12-10T09:20:43.9638389Z   session.js               |   76.64 |    67.24 |   83.33 |   76.64 | 27-44,143,147,158-182,240,317-321                                                                                                                              
2025-12-10T09:20:43.9639751Z  middleware                |   38.48 |    40.76 |   33.96 |   39.59 |                                                                                                                                                                
2025-12-10T09:20:43.9640768Z   auth.js                  |    5.63 |        0 |       0 |    6.06 | 14-370                                                                                                                                                         
2025-12-10T09:20:43.9641881Z   debugLogger.js           |   62.02 |    69.64 |   77.77 |   62.02 | 18,42,81-93,113-117,172,206-234                                                                                                                                
2025-12-10T09:20:43.9643085Z   errorHandler.js          |   94.73 |    66.66 |     100 |   94.44 | 26                                                                                                                                                             
2025-12-10T09:20:43.9644228Z   rateLimiter.js           |   52.94 |       50 |      20 |   52.94 | 52-58,74-81,97-103,120-128                                                                                                                                     
2025-12-10T09:20:43.9645359Z   rbac.js                  |   80.64 |     87.5 |   71.42 |   80.64 | 71-72,80-81,127-135                                                                                                                                            
2025-12-10T09:20:43.9646430Z   validation.js            |      50 |    15.38 |      50 |      50 | 64-82                                                                                                                                                          
2025-12-10T09:20:43.9647467Z  routes                    |   49.38 |    40.66 |   48.45 |   49.29 |                                                                                                                                                                
2025-12-10T09:20:43.9648632Z   analytics.js             |   83.33 |       90 |     100 |   83.33 | 44-45,67,106,122-123,145,161-162,203-204,227-228                                                                                                               
2025-12-10T09:20:43.9650080Z   api.js                   |    66.1 |    57.69 |   83.33 |    66.1 | 24-27,34-35,60-61,96-97,120,139,155-167                                                                                                                        
2025-12-10T09:20:43.9651318Z   apiKeys.js               |   81.92 |    83.33 |     100 |   81.92 | 30-31,55-56,88-89,190-191,224-225,264-265,287,310-311                                                                                                          
2025-12-10T09:20:43.9652496Z   audit.js                 |   15.38 |        0 |       0 |   15.38 | 27-81,93-133                                                                                                                                                   
2025-12-10T09:20:43.9653738Z   automation.js            |   70.93 |       76 |    87.5 |   70.93 | 38-39,48-58,93-94,129-130,147-148,168-169,183,191,195,199,206-207,230-231                                                                                      
2025-12-10T09:20:43.9655181Z   backups.js               |   84.29 |    93.75 |     100 |   84.29 | 56-57,139-140,177-181,198-199,217-218,234,245-246,274-275,293-294                                                                                              
2025-12-10T09:20:43.9656579Z   cicd.js                  |   70.33 |     61.4 |   83.33 |   69.44 | 38,149-150,211-212,245-246,261-290,322-323,338-365,403,419-420                                                                                                 
2025-12-10T09:20:43.9658453Z   commands.js              |   40.98 |    13.33 |    12.5 |   40.98 | 22-68,81-82,93,107,118-119,127-143,151-159                                                                                                                     
2025-12-10T09:20:43.9659846Z   files.js                 |   34.04 |    33.33 |       0 |   34.78 | 30-35,44-61,70-78,87-100                                                                                                                                       
2025-12-10T09:20:43.9661170Z   logging.js               |   17.69 |        0 |       0 |   18.01 | 42-52,68-74,91-96,116-160,173,199-205,217-223,238-254,266-272,287-303,315-321,341-352                                                                          
2025-12-10T09:20:43.9662514Z   marketplace.js           |   96.07 |      100 |     100 |   96.07 | 136-137                                                                                                                                                        
2025-12-10T09:20:43.9663980Z   players.js               |   45.65 |    28.16 |    42.1 |   45.85 | 20-25,55-90,99-135,144-187,196-207,216-227,236-247,256-272,281-323,381-382,394,432-433,445,472-473,514-515,537-538,547-559,577-578,590,629-630,642,649,680-681 
2025-12-10T09:20:43.9665742Z   pluginIntegrations.js    |    37.3 |       40 |   22.22 |    37.3 | 39-62,75-90,103-116,129-142,155-168,290-310,323-338,351-366,379-395,408-423,436-451,464-477,494-508,520-532                                                    
2025-12-10T09:20:43.9667461Z   plugins.js               |   38.73 |    36.84 |    42.1 |   38.63 | 20,32-35,84-95,123-125,155,183-185,202-262,283,302-306,323,335-340,378-389,398-403,412-423,434-603                                                             
2025-12-10T09:20:43.9668881Z   pluginsV2.js             |    22.5 |        0 |       0 |   22.78 | 28-75,84-116,125-151,160-187,196-218,230-254                                                                                                                   
2025-12-10T09:20:43.9670417Z   server.js                |   27.36 |        0 |       0 |   27.36 | 27-32,41-58,67-95,104-132,141-165,174-179,188-193,202-207,216-247                                                                                              
2025-12-10T09:20:43.9671758Z   users.js                 |   14.56 |        0 |       0 |   14.56 | 30-35,45-56,66-128,138-192,202-247,257-303,313-353                                                                                                             
2025-12-10T09:20:43.9673235Z   webhooks.js              |      62 |    47.61 |      70 |   61.48 | 36,65-66,80-96,134-135,161,202-203,261-262,288-289,307-321,339-340,370-371,385-401,439-440,460-481,495-507,536-537                                             
2025-12-10T09:20:43.9674600Z  services                  |   26.33 |    18.96 |   26.69 |   26.47 |                                                                                                                                                                
2025-12-10T09:20:43.9675703Z   analyticsService.js      |    5.14 |        0 |    4.34 |    5.18 | 36-553                                                                                                                                                         
2025-12-10T09:20:43.9676894Z   apiKeyService.js         |   92.75 |     80.7 |     100 |   93.93 | 53,150,277,292                                                                                                                                                 
2025-12-10T09:20:43.9678061Z   auditLog.js              |   20.68 |     6.45 |    12.5 |   23.07 | 78-82,112,138-213                                                                                                                                              
2025-12-10T09:20:43.9679690Z   automationService.js     |   11.11 |        0 |    4.54 |   11.25 | 54-506                                                                                                                                                         
2025-12-10T09:20:43.9681131Z   backupService.js         |    8.07 |      6.5 |    3.33 |    8.24 | 59-827                                                                                                                                                         
2025-12-10T09:20:43.9682455Z   database.js              |   36.52 |    11.31 |   40.98 |   36.53 | 31,44-45,484-1257,1364-1365,1374-1375,1379                                                                                                                     
2025-12-10T09:20:43.9683711Z   docker.js                |    4.65 |     4.34 |    8.33 |    4.65 | 13-209                                                                                                                                                         
2025-12-10T09:20:43.9684919Z   eventLogger.js           |   93.63 |    81.35 |     100 |   93.51 | 115,127-128,283-284,288-289                                                                                                                                    
2025-12-10T09:20:43.9686284Z   inboundWebhookService.js |    8.05 |        0 |    6.25 |    8.05 | 51-503                                                                                                                                                         
2025-12-10T09:20:43.9687511Z   jobQueue.js              |    6.02 |        0 |       0 |    6.41 | 16-224                                                                                                                                                         
2025-12-10T09:20:43.9688610Z   jobWorker.js             |    6.66 |        0 |       0 |    6.74 | 17-239                                                                                                                                                         
2025-12-10T09:20:43.9689935Z   logs.js                  |   14.89 |        0 |    12.5 |    17.5 | 16-104                                                                                                                                                         
2025-12-10T09:20:43.9691284Z   marketplaceService.js    |   67.16 |    49.58 |   60.52 |    66.4 | 23,71-72,97-99,121-129,164-165,310,314,331-341,364-430,438,440-441                                                                                             
2025-12-10T09:20:43.9692660Z   mojang.js                |   96.15 |    92.85 |     100 |   96.15 | 47                                                                                                                                                             
2025-12-10T09:20:43.9693807Z   notificationService.js   |     7.1 |        0 |    5.55 |    7.14 | 28-536                                                                                                                                                         
2025-12-10T09:20:43.9695094Z   playerTracker.js         |   76.74 |       75 |   66.66 |   77.64 | 32-33,42,46,66-75,88-89,108,131,148,173-182,221,233                                                                                                            
2025-12-10T09:20:43.9696407Z   pluginGateway.js         |   97.29 |      100 |     100 |   97.29 | 203-207                                                                                                                                                        
2025-12-10T09:20:43.9697820Z   pluginManager.js         |   21.32 |    20.32 |   17.24 |   21.34 | 19-86,129-130,135-185,201-593,607,616-649,665-770,825-827,855-1009                                                                                             
2025-12-10T09:20:43.9699377Z   pluginParser.js          |   10.81 |        0 |       0 |   11.11 | 11-93                                                                                                                                                          
2025-12-10T09:20:43.9700722Z   rcon.js                  |    9.25 |     12.5 |    6.25 |    9.43 | 18-165                                                                                                                                                         
2025-12-10T09:20:43.9701989Z   scheduler.js             |       0 |        0 |       0 |       0 | 1-218                                                                                                                                                          
2025-12-10T09:20:43.9703058Z   stats.js                 |   11.11 |        0 |    9.09 |   11.11 | 21-192                                                                                                                                                         
2025-12-10T09:20:43.9704144Z   urlParser.js             |     2.7 |        0 |       0 |    2.73 | 9-202                                                                                                                                                          
2025-12-10T09:20:43.9705345Z   webhookService.js        |    11.3 |        0 |    3.57 |   11.71 | 61-114,126-512                                                                                                                                                 
2025-12-10T09:20:43.9706543Z  services/adapters         |    19.8 |    21.64 |   15.78 |    19.4 |                                                                                                                                                                
2025-12-10T09:20:43.9707757Z   baseAdapter.js           |   69.49 |    67.44 |      60 |   68.42 | 82-98,134,139,141,163,175-210                                                                                                                                  
2025-12-10T09:20:43.9708993Z   dynmapAdapter.js         |       0 |        0 |       0 |       0 | 10-236                                                                                                                                                         
2025-12-10T09:20:43.9710412Z   essentialsxAdapter.js    |       0 |        0 |       0 |       0 | 11-276                                                                                                                                                         
2025-12-10T09:20:43.9712038Z ---------------------------|---------|----------|---------|---------|----------------------------------------------------------------------------------------------------------------------------------------------------------------
2025-12-10T09:20:44.0944152Z Summary of all failing tests
2025-12-10T09:20:44.0946456Z FAIL __tests__/services/pluginGateway.test.js
2025-12-10T09:20:44.0949849Z   ● PluginGateway › getConfig › should return null for non-configured adapter
2025-12-10T09:20:44.0950387Z 
2025-12-10T09:20:44.0950593Z     expect(received).toBeNull()
2025-12-10T09:20:44.0950862Z 
2025-12-10T09:20:44.0952403Z     Received: {"enabled": true}
2025-12-10T09:20:44.0952700Z 
2025-12-10T09:20:44.0958476Z     [0m [90m 172 |[39m         it([32m'should return null for non-configured adapter'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:44.0963908Z      [90m 173 |[39m             [36mconst[39m result [33m=[39m pluginGateway[33m.[39mgetConfig([32m'nonexistent'[39m)[33m;[39m
2025-12-10T09:20:44.0968461Z     [31m[1m>[22m[39m[90m 174 |[39m             expect(result)[33m.[39mtoBeNull()[33m;[39m
2025-12-10T09:20:44.0971864Z      [90m     |[39m                            [31m[1m^[22m[39m
2025-12-10T09:20:44.0973013Z      [90m 175 |[39m         })[33m;[39m
2025-12-10T09:20:44.0974767Z      [90m 176 |[39m     })[33m;[39m
2025-12-10T09:20:44.0975788Z      [90m 177 |[39m[0m
2025-12-10T09:20:44.0976114Z 
2025-12-10T09:20:44.0979791Z       at Object.toBeNull (__tests__/services/pluginGateway.test.js:174:28)
2025-12-10T09:20:44.0980296Z 
2025-12-10T09:20:44.0982013Z FAIL __tests__/services/marketplaceService.test.js
2025-12-10T09:20:44.0992164Z   ● Marketplace Service › searchPlugins › should apply filters correctly
2025-12-10T09:20:44.0993519Z 
2025-12-10T09:20:44.0994853Z     expect(jest.fn()).toHaveBeenCalledWith(...expected)
2025-12-10T09:20:44.0995259Z 
2025-12-10T09:20:44.0995774Z     Expected: StringContaining "categories:admin"
2025-12-10T09:20:44.1002594Z     Received: "https://api.modrinth.com/v2/search?query=test&limit=10&offset=0&facets=%5B%5B%22project_type%3Aplugin%22%5D%5D&facets=%5B%5B%22categories%3Aadmin%22%5D%5D&facets=%5B%5B%22versions%3A1.20.1%22%5D%5D&index=downloads", {"maxRedirects": 3, "timeout": 10000}
2025-12-10T09:20:44.1003985Z 
2025-12-10T09:20:44.1004989Z     Number of calls: 1
2025-12-10T09:20:44.1005220Z 
2025-12-10T09:20:44.1005563Z     [0m [90m 102 |[39m             })[33m;[39m
2025-12-10T09:20:44.1006051Z      [90m 103 |[39m
2025-12-10T09:20:44.1010899Z     [31m[1m>[22m[39m[90m 104 |[39m             expect(axios[33m.[39m[36mget[39m)[33m.[39mtoHaveBeenCalledWith(
2025-12-10T09:20:44.1012498Z      [90m     |[39m                               [31m[1m^[22m[39m
2025-12-10T09:20:44.1018883Z      [90m 105 |[39m                 expect[33m.[39mstringContaining([32m'categories:admin'[39m)
2025-12-10T09:20:44.1020206Z      [90m 106 |[39m             )[33m;[39m
2025-12-10T09:20:44.1022977Z      [90m 107 |[39m         })[33m;[39m[0m
2025-12-10T09:20:44.1023389Z 
2025-12-10T09:20:44.1026458Z       at Object.toHaveBeenCalledWith (__tests__/services/marketplaceService.test.js:104:31)
2025-12-10T09:20:44.1027139Z 
2025-12-10T09:20:44.1027802Z FAIL __tests__/auth/auth.test.js
2025-12-10T09:20:44.1032650Z   ● Auth Module - Password Change Detection › verifyCredentials › should verify correct credentials
2025-12-10T09:20:44.1033346Z 
2025-12-10T09:20:44.1033797Z     expect(received).toBe(expected) // Object.is equality
2025-12-10T09:20:44.1034195Z 
2025-12-10T09:20:44.1034366Z     Expected: true
2025-12-10T09:20:44.1038535Z     Received: {"createdAt": "2025-12-10T09:20:20.090Z", "lastLogin": undefined, "role": "owner", "username": "testuser"}
2025-12-10T09:20:44.1039365Z 
2025-12-10T09:20:44.1039711Z     [0m [90m 121 |[39m             
2025-12-10T09:20:44.1047927Z      [90m 122 |[39m             [36mconst[39m isValid [33m=[39m [36mawait[39m auth[33m.[39mverifyCredentials([32m'testuser'[39m[33m,[39m [32m'test-password-456'[39m)[33m;[39m
2025-12-10T09:20:44.1049660Z     [31m[1m>[22m[39m[90m 123 |[39m             expect(isValid)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-12-10T09:20:44.1052559Z      [90m     |[39m                             [31m[1m^[22m[39m
2025-12-10T09:20:44.1053440Z      [90m 124 |[39m             
2025-12-10T09:20:44.1055862Z      [90m 125 |[39m             [90m// Restore original values[39m
2025-12-10T09:20:44.1060977Z      [90m 126 |[39m             process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m=[39m originalPassword[33m;[39m[0m
2025-12-10T09:20:44.1061628Z 
2025-12-10T09:20:44.1064674Z       at Object.toBe (__tests__/auth/auth.test.js:123:29)
2025-12-10T09:20:44.1065595Z 
2025-12-10T09:20:44.1066574Z   ● Auth Module - Password Change Detection › verifyCredentials › should reject incorrect password
2025-12-10T09:20:44.1067442Z 
2025-12-10T09:20:44.1067893Z     expect(received).toBe(expected) // Object.is equality
2025-12-10T09:20:44.1069565Z 
2025-12-10T09:20:44.1070194Z     Expected: false
2025-12-10T09:20:44.1070548Z     Received: null
2025-12-10T09:20:44.1070744Z 
2025-12-10T09:20:44.1071042Z     [0m [90m 138 |[39m             
2025-12-10T09:20:44.1101201Z      [90m 139 |[39m             [36mconst[39m isValid [33m=[39m [36mawait[39m auth[33m.[39mverifyCredentials([32m'testuser'[39m[33m,[39m [32m'wrong-password'[39m)[33m;[39m
2025-12-10T09:20:44.1103340Z     [31m[1m>[22m[39m[90m 140 |[39m             expect(isValid)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
2025-12-10T09:20:44.1104764Z      [90m     |[39m                             [31m[1m^[22m[39m
2025-12-10T09:20:44.1105884Z      [90m 141 |[39m             
2025-12-10T09:20:44.1106856Z      [90m 142 |[39m             [90m// Restore original values[39m
2025-12-10T09:20:44.1108430Z      [90m 143 |[39m             process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m=[39m originalPassword[33m;[39m[0m
2025-12-10T09:20:44.1109041Z 
2025-12-10T09:20:44.1109492Z       at Object.toBe (__tests__/auth/auth.test.js:140:29)
2025-12-10T09:20:44.1109859Z 
2025-12-10T09:20:44.1110585Z   ● Auth Module - Password Change Detection › verifyCredentials › should reject non-existent username
2025-12-10T09:20:44.1111196Z 
2025-12-10T09:20:44.1111471Z     expect(received).toBe(expected) // Object.is equality
2025-12-10T09:20:44.1111834Z 
2025-12-10T09:20:44.1111962Z     Expected: false
2025-12-10T09:20:44.1112283Z     Received: null
2025-12-10T09:20:44.1112470Z 
2025-12-10T09:20:44.1112720Z     [0m [90m 153 |[39m             
2025-12-10T09:20:44.1114077Z      [90m 154 |[39m             [36mconst[39m isValid [33m=[39m [36mawait[39m auth[33m.[39mverifyCredentials([32m'nonexistent'[39m[33m,[39m [32m'test-password'[39m)[33m;[39m
2025-12-10T09:20:44.1115528Z     [31m[1m>[22m[39m[90m 155 |[39m             expect(isValid)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
2025-12-10T09:20:44.1116356Z      [90m     |[39m                             [31m[1m^[22m[39m
2025-12-10T09:20:44.1116898Z      [90m 156 |[39m             
2025-12-10T09:20:44.1117520Z      [90m 157 |[39m             [90m// Restore original password[39m
2025-12-10T09:20:44.1118614Z      [90m 158 |[39m             process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m=[39m originalPassword[33m;[39m[0m
2025-12-10T09:20:44.1119350Z 
2025-12-10T09:20:44.1119629Z       at Object.toBe (__tests__/auth/auth.test.js:155:29)
2025-12-10T09:20:44.1119973Z 
2025-12-10T09:20:44.1120226Z FAIL __tests__/services/integration.test.js
2025-12-10T09:20:44.1121094Z   ● System Integration › Event Logger Integration › should initialize event logger
2025-12-10T09:20:44.1121604Z 
2025-12-10T09:20:44.1122110Z     Cannot find module '../services/eventLogger' from '__tests__/services/integration.test.js'
2025-12-10T09:20:44.1122682Z 
2025-12-10T09:20:44.1122882Z     However, Jest was able to find:
2025-12-10T09:20:44.1123303Z     	'./eventLogger.test.js'
2025-12-10T09:20:44.1123544Z 
2025-12-10T09:20:44.1128728Z     You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js', 'mjs', 'cjs', 'jsx', 'ts', 'tsx', 'json', 'node'].
2025-12-10T09:20:44.1130333Z 
2025-12-10T09:20:44.1131213Z     See https://jestjs.io/docs/configuration#modulefileextensions-arraystring
2025-12-10T09:20:44.1132114Z 
2025-12-10T09:20:44.1133165Z     [0m [90m 32 |[39m     describe([32m'Event Logger Integration'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:44.1135239Z      [90m 33 |[39m         test([32m'should initialize event logger'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:44.1144434Z     [31m[1m>[22m[39m[90m 34 |[39m             [36mconst[39m { eventLogger[33m:[39m logger } [33m=[39m require([32m'../services/eventLogger'[39m)[33m;[39m
2025-12-10T09:20:44.1145607Z      [90m    |[39m                                             [31m[1m^[22m[39m
2025-12-10T09:20:44.1151409Z      [90m 35 |[39m             logger[33m.[39mdbPath [33m=[39m path[33m.[39mjoin(__dirname[33m,[39m [32m'../data-test/events.db'[39m)[33m;[39m
2025-12-10T09:20:44.1152377Z      [90m 36 |[39m             
2025-12-10T09:20:44.1153524Z      [90m 37 |[39m             expect(() [33m=>[39m logger[33m.[39minitialize())[33m.[39mnot[33m.[39mtoThrow()[33m;[39m[0m
2025-12-10T09:20:44.1154133Z 
2025-12-10T09:20:44.1155993Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:20:44.1158173Z       at Object.require (__tests__/services/integration.test.js:34:45)
2025-12-10T09:20:44.1158623Z 
2025-12-10T09:20:44.1160930Z   ● System Integration › Event Logger Integration › should log an event
2025-12-10T09:20:44.1161399Z 
2025-12-10T09:20:44.1162964Z     Cannot find module '../services/eventLogger' from '__tests__/services/integration.test.js'
2025-12-10T09:20:44.1163766Z 
2025-12-10T09:20:44.1164112Z     However, Jest was able to find:
2025-12-10T09:20:44.1164540Z     	'./eventLogger.test.js'
2025-12-10T09:20:44.1164756Z 
2025-12-10T09:20:44.1169390Z     You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js', 'mjs', 'cjs', 'jsx', 'ts', 'tsx', 'json', 'node'].
2025-12-10T09:20:44.1169999Z 
2025-12-10T09:20:44.1170475Z     See https://jestjs.io/docs/configuration#modulefileextensions-arraystring
2025-12-10T09:20:44.1170979Z 
2025-12-10T09:20:44.1171191Z     [0m [90m 42 |[39m
2025-12-10T09:20:44.1173546Z      [90m 43 |[39m         test([32m'should log an event'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:44.1179929Z     [31m[1m>[22m[39m[90m 44 |[39m             [36mconst[39m { [33mEVENT_TYPES[39m[33m,[39m [33mEVENT_CATEGORIES[39m[33m,[39m [33mEVENT_SEVERITY[39m } [33m=[39m require([32m'../services/eventLogger'[39m)[33m;[39m
2025-12-10T09:20:44.1181926Z      [90m    |[39m                                                                       [31m[1m^[22m[39m
2025-12-10T09:20:44.1182511Z      [90m 45 |[39m             
2025-12-10T09:20:44.1185173Z      [90m 46 |[39m             [36mconst[39m eventId [33m=[39m eventLogger[33m.[39mlogEvent({
2025-12-10T09:20:44.1188263Z      [90m 47 |[39m                 eventType[33m:[39m [33mEVENT_TYPES[39m[33m.[39m[33mSYSTEM_INFO[39m[33m,[39m[0m
2025-12-10T09:20:44.1188717Z 
2025-12-10T09:20:44.1190406Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:20:44.1191726Z       at Object.require (__tests__/services/integration.test.js:44:71)
2025-12-10T09:20:44.1192147Z 
2025-12-10T09:20:44.1193698Z   ● System Integration › Event Logger Integration › should query events
2025-12-10T09:20:44.1194159Z 
2025-12-10T09:20:44.1195200Z     TypeError: Cannot read properties of undefined (reading 'queryEvents')
2025-12-10T09:20:44.1195698Z 
2025-12-10T09:20:44.1195898Z     [0m [90m 57 |[39m
2025-12-10T09:20:44.1198263Z      [90m 58 |[39m         test([32m'should query events'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:44.1201777Z     [31m[1m>[22m[39m[90m 59 |[39m             [36mconst[39m result [33m=[39m eventLogger[33m.[39mqueryEvents()[33m;[39m
2025-12-10T09:20:44.1203143Z      [90m    |[39m                                        [31m[1m^[22m[39m
2025-12-10T09:20:44.1205364Z      [90m 60 |[39m             expect(result)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:20:44.1207756Z      [90m 61 |[39m             expect(result[33m.[39mevents)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:20:44.1210800Z      [90m 62 |[39m             expect(result[33m.[39mtotal)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m[0m
2025-12-10T09:20:44.1211261Z 
2025-12-10T09:20:44.1212106Z       at Object.queryEvents (__tests__/services/integration.test.js:59:40)
2025-12-10T09:20:44.1212567Z 
2025-12-10T09:20:44.1230254Z   ● System Integration › Notification Service Integration › should initialize notification service
2025-12-10T09:20:44.1230741Z 
2025-12-10T09:20:44.1234316Z     Cannot find module '../services/notificationService' from '__tests__/services/integration.test.js'
2025-12-10T09:20:44.1234875Z 
2025-12-10T09:20:44.1236669Z     [0m [90m 66 |[39m     describe([32m'Notification Service Integration'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:44.1239054Z      [90m 67 |[39m         test([32m'should initialize notification service'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:44.1242617Z     [31m[1m>[22m[39m[90m 68 |[39m             [36mconst[39m service [33m=[39m require([32m'../services/notificationService'[39m)[33m;[39m
2025-12-10T09:20:44.1243459Z      [90m    |[39m                             [31m[1m^[22m[39m
2025-12-10T09:20:44.1247753Z      [90m 69 |[39m             service[33m.[39mdbPath [33m=[39m path[33m.[39mjoin(__dirname[33m,[39m [32m'../data-test/notifications.db'[39m)[33m;[39m
2025-12-10T09:20:44.1248743Z      [90m 70 |[39m             
2025-12-10T09:20:44.1251305Z      [90m 71 |[39m             expect(() [33m=>[39m service[33m.[39minitialize())[33m.[39mnot[33m.[39mtoThrow()[33m;[39m[0m
2025-12-10T09:20:44.1252324Z 
2025-12-10T09:20:44.1252841Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:20:44.1254145Z       at Object.require (__tests__/services/integration.test.js:68:29)
2025-12-10T09:20:44.1254564Z 
2025-12-10T09:20:44.1256451Z   ● System Integration › Notification Service Integration › should get user preferences
2025-12-10T09:20:44.1256934Z 
2025-12-10T09:20:44.1257784Z     TypeError: Cannot read properties of undefined (reading 'getUserPreferences')
2025-12-10T09:20:44.1258289Z 
2025-12-10T09:20:44.1258491Z     [0m [90m 76 |[39m
2025-12-10T09:20:44.1260926Z      [90m 77 |[39m         test([32m'should get user preferences'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:44.1264925Z     [31m[1m>[22m[39m[90m 78 |[39m             [36mconst[39m prefs [33m=[39m notificationService[33m.[39mgetUserPreferences([32m'testuser'[39m)[33m;[39m
2025-12-10T09:20:44.1265988Z      [90m    |[39m                                               [31m[1m^[22m[39m
2025-12-10T09:20:44.1267866Z      [90m 79 |[39m             expect(prefs)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:20:44.1270439Z      [90m 80 |[39m             expect(prefs[33m.[39menabled)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-12-10T09:20:44.1272590Z      [90m 81 |[39m             expect(prefs[33m.[39mchannels)[33m.[39mtoBeDefined()[33m;[39m[0m
2025-12-10T09:20:44.1273063Z 
2025-12-10T09:20:44.1274011Z       at Object.getUserPreferences (__tests__/services/integration.test.js:78:47)
2025-12-10T09:20:44.1274522Z 
2025-12-10T09:20:44.1276201Z   ● System Integration › Notification Service Integration › should update user preferences
2025-12-10T09:20:44.1276707Z 
2025-12-10T09:20:44.1277653Z     TypeError: Cannot read properties of undefined (reading 'updateUserPreferences')
2025-12-10T09:20:44.1278170Z 
2025-12-10T09:20:44.1278368Z     [0m [90m 83 |[39m
2025-12-10T09:20:44.1280819Z      [90m 84 |[39m         test([32m'should update user preferences'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:44.1284912Z     [31m[1m>[22m[39m[90m 85 |[39m             [36mconst[39m updated [33m=[39m notificationService[33m.[39mupdateUserPreferences([32m'testuser'[39m[33m,[39m {
2025-12-10T09:20:44.1286023Z      [90m    |[39m                                                 [31m[1m^[22m[39m
2025-12-10T09:20:44.1288316Z      [90m 86 |[39m                 severity_filter[33m:[39m [32m'warning'[39m[33m,[39m
2025-12-10T09:20:44.1289814Z      [90m 87 |[39m                 channels[33m:[39m [[32m'inbox'[39m]
2025-12-10T09:20:44.1290844Z      [90m 88 |[39m             })[33m;[39m[0m
2025-12-10T09:20:44.1291158Z 
2025-12-10T09:20:44.1292959Z       at Object.updateUserPreferences (__tests__/services/integration.test.js:85:49)
2025-12-10T09:20:44.1293477Z 
2025-12-10T09:20:44.1295249Z   ● System Integration › Notification Service Integration › should create notification from event
2025-12-10T09:20:44.1295723Z 
2025-12-10T09:20:44.1296818Z     Cannot find module '../services/eventLogger' from '__tests__/services/integration.test.js'
2025-12-10T09:20:44.1297364Z 
2025-12-10T09:20:44.1297552Z     However, Jest was able to find:
2025-12-10T09:20:44.1297958Z     	'./eventLogger.test.js'
2025-12-10T09:20:44.1298206Z 
2025-12-10T09:20:44.1302817Z     You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js', 'mjs', 'cjs', 'jsx', 'ts', 'tsx', 'json', 'node'].
2025-12-10T09:20:44.1303438Z 
2025-12-10T09:20:44.1303864Z     See https://jestjs.io/docs/configuration#modulefileextensions-arraystring
2025-12-10T09:20:44.1304356Z 
2025-12-10T09:20:44.1304763Z     [0m [90m 93 |[39m
2025-12-10T09:20:44.1307288Z      [90m 94 |[39m         test([32m'should create notification from event'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:44.1312795Z     [31m[1m>[22m[39m[90m 95 |[39m             [36mconst[39m { [33mEVENT_TYPES[39m[33m,[39m [33mEVENT_CATEGORIES[39m[33m,[39m [33mEVENT_SEVERITY[39m } [33m=[39m require([32m'../services/eventLogger'[39m)[33m;[39m
2025-12-10T09:20:44.1314222Z      [90m    |[39m                                                                       [31m[1m^[22m[39m
2025-12-10T09:20:44.1314794Z      [90m 96 |[39m             
2025-12-10T09:20:44.1316460Z      [90m 97 |[39m             [36mconst[39m event [33m=[39m {
2025-12-10T09:20:44.1318006Z      [90m 98 |[39m                 id[33m:[39m [35m1[39m[33m,[39m[0m
2025-12-10T09:20:44.1318361Z 
2025-12-10T09:20:44.1320196Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:20:44.1321391Z       at Object.require (__tests__/services/integration.test.js:95:71)
2025-12-10T09:20:44.1321816Z 
2025-12-10T09:20:44.1323686Z   ● System Integration › Notification Service Integration › should get user notifications
2025-12-10T09:20:44.1324173Z 
2025-12-10T09:20:44.1325171Z     TypeError: Cannot read properties of undefined (reading 'getUserNotifications')
2025-12-10T09:20:44.1325701Z 
2025-12-10T09:20:44.1325896Z     [0m [90m 110 |[39m
2025-12-10T09:20:44.1328336Z      [90m 111 |[39m         test([32m'should get user notifications'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:44.1332467Z     [31m[1m>[22m[39m[90m 112 |[39m             [36mconst[39m result [33m=[39m notificationService[33m.[39mgetUserNotifications([32m'testuser'[39m)[33m;[39m
2025-12-10T09:20:44.1333635Z      [90m     |[39m                                                [31m[1m^[22m[39m
2025-12-10T09:20:44.1335587Z      [90m 113 |[39m             expect(result)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:20:44.1338010Z      [90m 114 |[39m             expect(result[33m.[39mnotifications)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:20:44.1340681Z      [90m 115 |[39m             expect(result[33m.[39mtotal)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m[0m
2025-12-10T09:20:44.1341144Z 
2025-12-10T09:20:44.1342046Z       at Object.getUserNotifications (__tests__/services/integration.test.js:112:48)
2025-12-10T09:20:44.1342580Z 
2025-12-10T09:20:44.1344059Z   ● System Integration › Notification Service Integration › should get unread count
2025-12-10T09:20:44.1344539Z 
2025-12-10T09:20:44.1345351Z     TypeError: Cannot read properties of undefined (reading 'getUnreadCount')
2025-12-10T09:20:44.1345829Z 
2025-12-10T09:20:44.1346028Z     [0m [90m 117 |[39m
2025-12-10T09:20:44.1348423Z      [90m 118 |[39m         test([32m'should get unread count'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:44.1352338Z     [31m[1m>[22m[39m[90m 119 |[39m             [36mconst[39m count [33m=[39m notificationService[33m.[39mgetUnreadCount([32m'testuser'[39m)[33m;[39m
2025-12-10T09:20:44.1353553Z      [90m     |[39m                                               [31m[1m^[22m[39m
2025-12-10T09:20:44.1356203Z      [90m 120 |[39m             expect([36mtypeof[39m count)[33m.[39mtoBe([32m'number'[39m)[33m;[39m
2025-12-10T09:20:44.1358205Z      [90m 121 |[39m             expect(count)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
2025-12-10T09:20:44.1358910Z      [90m 122 |[39m         })[33m;[39m[0m
2025-12-10T09:20:44.1359362Z 
2025-12-10T09:20:44.1360883Z       at Object.getUnreadCount (__tests__/services/integration.test.js:119:47)
2025-12-10T09:20:44.1362997Z 
2025-12-10T09:20:44.1363842Z   ● System Integration › Event Logger and Notification Integration › should trigger notification when event is logged
2025-12-10T09:20:44.1364298Z 
2025-12-10T09:20:44.1365369Z     Cannot find module '../services/eventLogger' from '__tests__/services/integration.test.js'
2025-12-10T09:20:44.1366177Z 
2025-12-10T09:20:44.1366371Z     However, Jest was able to find:
2025-12-10T09:20:44.1366928Z     	'./eventLogger.test.js'
2025-12-10T09:20:44.1367161Z 
2025-12-10T09:20:44.1371343Z     You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js', 'mjs', 'cjs', 'jsx', 'ts', 'tsx', 'json', 'node'].
2025-12-10T09:20:44.1371982Z 
2025-12-10T09:20:44.1372407Z     See https://jestjs.io/docs/configuration#modulefileextensions-arraystring
2025-12-10T09:20:44.1372860Z 
2025-12-10T09:20:44.1375385Z     [0m [90m 125 |[39m     describe([32m'Event Logger and Notification Integration'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:44.1378120Z      [90m 126 |[39m         test([32m'should trigger notification when event is logged'[39m[33m,[39m (done) [33m=>[39m {
2025-12-10T09:20:44.1383723Z     [31m[1m>[22m[39m[90m 127 |[39m             [36mconst[39m { [33mEVENT_TYPES[39m[33m,[39m [33mEVENT_CATEGORIES[39m[33m,[39m [33mEVENT_SEVERITY[39m } [33m=[39m require([32m'../services/eventLogger'[39m)[33m;[39m
2025-12-10T09:20:44.1385119Z      [90m     |[39m                                                                       [31m[1m^[22m[39m
2025-12-10T09:20:44.1385698Z      [90m 128 |[39m             
2025-12-10T09:20:44.1387546Z      [90m 129 |[39m             [90m// Listen for notification event[39m
2025-12-10T09:20:44.1391544Z      [90m 130 |[39m             notificationService[33m.[39monce([32m'notification'[39m[33m,[39m ({ userId[33m,[39m notification }) [33m=>[39m {[0m
2025-12-10T09:20:44.1392005Z 
2025-12-10T09:20:44.1392951Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:20:44.1394274Z       at Object.require (__tests__/services/integration.test.js:127:71)
2025-12-10T09:20:44.1394703Z 
2025-12-10T09:20:44.1394711Z 
2025-12-10T09:20:44.1397632Z Test Suites: 4 failed, 36 passed, 40 total
2025-12-10T09:20:44.1398294Z Tests:       15 failed, 1 skipped, 563 passed, 579 total
2025-12-10T09:20:44.1398659Z Snapshots:   0 total
2025-12-10T09:20:44.1398876Z Time:        32.931 s
2025-12-10T09:20:44.1399078Z Ran all test suites.
2025-12-10T09:20:44.1598857Z ##[error]Process completed with exit code 1.
2025-12-10T09:20:44.1646563Z ##[group]Run cd console/backend
2025-12-10T09:20:44.1646869Z [36;1mcd console/backend[0m
2025-12-10T09:20:44.1647177Z [36;1mnpm run test:coverage -- --ci --maxWorkers=2 || true[0m
2025-12-10T09:20:44.1679351Z shell: /usr/bin/bash -e {0}
2025-12-10T09:20:44.1679595Z ##[endgroup]
2025-12-10T09:20:44.2955782Z 
2025-12-10T09:20:44.2956486Z > minecraft-console-backend@1.0.0 test:coverage
2025-12-10T09:20:44.2957216Z > jest --coverage --ci --maxWorkers=2
2025-12-10T09:20:44.2957544Z 
2025-12-10T09:20:45.2455817Z   console.log
2025-12-10T09:20:45.2456409Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.2456797Z 
2025-12-10T09:20:45.2457227Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.2457814Z 
2025-12-10T09:20:45.2489643Z   console.log
2025-12-10T09:20:45.2501450Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.2501848Z 
2025-12-10T09:20:45.2502393Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.2503142Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.2503455Z 
2025-12-10T09:20:45.2503588Z   console.log
2025-12-10T09:20:45.2504042Z     [PluginGateway] Registered adapter: TestPlugin
2025-12-10T09:20:45.2504406Z 
2025-12-10T09:20:45.2504836Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.2505377Z 
2025-12-10T09:20:45.2522161Z   console.log
2025-12-10T09:20:45.2522825Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.2523230Z 
2025-12-10T09:20:45.2523710Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.2524452Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.2525228Z 
2025-12-10T09:20:45.2567616Z   console.log
2025-12-10T09:20:45.2568358Z     Creating new users.json...
2025-12-10T09:20:45.2568663Z 
2025-12-10T09:20:45.2569008Z       at Object.log [as initializeUsers] (auth/auth.js:185:17)
2025-12-10T09:20:45.2569619Z 
2025-12-10T09:20:45.2806011Z   console.log
2025-12-10T09:20:45.2807956Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.2808368Z 
2025-12-10T09:20:45.2808819Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.2809560Z 
2025-12-10T09:20:45.2819355Z   console.log
2025-12-10T09:20:45.2822140Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.2822546Z 
2025-12-10T09:20:45.2823027Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.2823565Z 
2025-12-10T09:20:45.2835974Z   console.log
2025-12-10T09:20:45.2837106Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.2837805Z 
2025-12-10T09:20:45.2838408Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.2839875Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.2840421Z 
2025-12-10T09:20:45.2848455Z   console.log
2025-12-10T09:20:45.2849425Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.2849846Z 
2025-12-10T09:20:45.2850327Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.2850867Z 
2025-12-10T09:20:45.2865045Z   console.log
2025-12-10T09:20:45.2865748Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.2866150Z 
2025-12-10T09:20:45.2866627Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.2867177Z 
2025-12-10T09:20:45.2883654Z   console.log
2025-12-10T09:20:45.2884147Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.2884533Z 
2025-12-10T09:20:45.2885012Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.2885554Z 
2025-12-10T09:20:45.2894831Z   console.log
2025-12-10T09:20:45.2895307Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.2895683Z 
2025-12-10T09:20:45.2896546Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.2897102Z 
2025-12-10T09:20:45.2919803Z   console.log
2025-12-10T09:20:45.2921009Z     [PluginGateway] Unregistered adapter: nonexistent
2025-12-10T09:20:45.2921395Z 
2025-12-10T09:20:45.2921868Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.2922412Z 
2025-12-10T09:20:45.2934258Z   console.log
2025-12-10T09:20:45.2934858Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.2935238Z 
2025-12-10T09:20:45.2935691Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.2936241Z 
2025-12-10T09:20:45.2949802Z   console.log
2025-12-10T09:20:45.2950843Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.2951220Z 
2025-12-10T09:20:45.2951688Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.2952429Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.2952742Z 
2025-12-10T09:20:45.2967216Z   console.log
2025-12-10T09:20:45.2967832Z     [PluginGateway] Registered adapter: TestPlugin
2025-12-10T09:20:45.2968221Z 
2025-12-10T09:20:45.2968725Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.2969381Z 
2025-12-10T09:20:45.2982956Z   console.log
2025-12-10T09:20:45.2983421Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.2983793Z 
2025-12-10T09:20:45.2984258Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.2984992Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.2985305Z 
2025-12-10T09:20:45.2992577Z   console.log
2025-12-10T09:20:45.2993045Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.2993409Z 
2025-12-10T09:20:45.2993863Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.2994401Z 
2025-12-10T09:20:45.3015769Z   console.log
2025-12-10T09:20:45.3016230Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.3016605Z 
2025-12-10T09:20:45.3017065Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3017807Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3018117Z 
2025-12-10T09:20:45.3025494Z   console.log
2025-12-10T09:20:45.3025942Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3026306Z 
2025-12-10T09:20:45.3026754Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3027277Z 
2025-12-10T09:20:45.3047166Z   console.log
2025-12-10T09:20:45.3047629Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.3048024Z 
2025-12-10T09:20:45.3048474Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3049356Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3049670Z 
2025-12-10T09:20:45.3057239Z   console.log
2025-12-10T09:20:45.3057680Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3058032Z 
2025-12-10T09:20:45.3058474Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3059003Z 
2025-12-10T09:20:45.3082752Z   console.log
2025-12-10T09:20:45.3083209Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.3083581Z 
2025-12-10T09:20:45.3084029Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3084751Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3085045Z 
2025-12-10T09:20:45.3092138Z   console.log
2025-12-10T09:20:45.3092586Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3092944Z 
2025-12-10T09:20:45.3093375Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3093896Z 
2025-12-10T09:20:45.3109532Z   console.log
2025-12-10T09:20:45.3110906Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.3111591Z 
2025-12-10T09:20:45.3112222Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3114097Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3114437Z 
2025-12-10T09:20:45.3121172Z   console.log
2025-12-10T09:20:45.3121869Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3122268Z 
2025-12-10T09:20:45.3122733Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3123280Z 
2025-12-10T09:20:45.3175685Z   console.log
2025-12-10T09:20:45.3176175Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.3176582Z 
2025-12-10T09:20:45.3177054Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3177814Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3178128Z 
2025-12-10T09:20:45.3206604Z   console.log
2025-12-10T09:20:45.3207079Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3207449Z 
2025-12-10T09:20:45.3208429Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3208965Z 
2025-12-10T09:20:45.3223883Z   console.log
2025-12-10T09:20:45.3224692Z     [PluginGateway] Initialized testplugin: { success: true }
2025-12-10T09:20:45.3225156Z 
2025-12-10T09:20:45.3225584Z       at PluginGateway.log [as initialize] (services/pluginGateway.js:97:21)
2025-12-10T09:20:45.3226096Z 
2025-12-10T09:20:45.3238507Z   console.log
2025-12-10T09:20:45.3239444Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.3239869Z 
2025-12-10T09:20:45.3240350Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3241392Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3241714Z 
2025-12-10T09:20:45.3248066Z   console.log
2025-12-10T09:20:45.3249069Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3249605Z 
2025-12-10T09:20:45.3250070Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3250600Z 
2025-12-10T09:20:45.3264774Z   console.log
2025-12-10T09:20:45.3265530Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.3266053Z 
2025-12-10T09:20:45.3266641Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3267991Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3268633Z 
2025-12-10T09:20:45.3272643Z   console.log
2025-12-10T09:20:45.3273278Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3273810Z 
2025-12-10T09:20:45.3274409Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3275165Z 
2025-12-10T09:20:45.3316156Z   console.error
2025-12-10T09:20:45.3316936Z     [PluginGateway] Failed to initialize testplugin: Connection failed
2025-12-10T09:20:45.3317556Z 
2025-12-10T09:20:45.3318250Z     [0m [90m  98 |[39m             [36mreturn[39m result[33m;[39m
2025-12-10T09:20:45.3319746Z      [90m  99 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:45.3321602Z     [31m[1m>[22m[39m[90m 100 |[39m             console[33m.[39merror([32m`[PluginGateway] Failed to initialize ${pluginName}:`[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:45.3323029Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:45.3324705Z      [90m 101 |[39m             
2025-12-10T09:20:45.3325402Z      [90m 102 |[39m             [90m// Log critical plugin errors[39m
2025-12-10T09:20:45.3326169Z      [90m 103 |[39m             [36mawait[39m logAuditEvent([0m
2025-12-10T09:20:45.3326550Z 
2025-12-10T09:20:45.3326992Z       at PluginGateway.error [as initialize] (services/pluginGateway.js:100:21)
2025-12-10T09:20:45.3327910Z       at Object.<anonymous> (__tests__/services/pluginGateway.test.js:199:13)
2025-12-10T09:20:45.3328638Z 
2025-12-10T09:20:45.3340574Z   console.log
2025-12-10T09:20:45.3342823Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.3345159Z 
2025-12-10T09:20:45.3345640Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3346397Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3346709Z 
2025-12-10T09:20:45.3350459Z   console.log
2025-12-10T09:20:45.3351198Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3351710Z 
2025-12-10T09:20:45.3352286Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3353380Z 
2025-12-10T09:20:45.3367267Z   console.log
2025-12-10T09:20:45.3367907Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.3368448Z 
2025-12-10T09:20:45.3369036Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3370170Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3371463Z 
2025-12-10T09:20:45.3377106Z   console.log
2025-12-10T09:20:45.3377717Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3378244Z 
2025-12-10T09:20:45.3378815Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3379733Z 
2025-12-10T09:20:45.3396345Z   console.log
2025-12-10T09:20:45.3396978Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.3397495Z 
2025-12-10T09:20:45.3398064Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3398946Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3400769Z 
2025-12-10T09:20:45.3405781Z   console.log
2025-12-10T09:20:45.3406671Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3407599Z 
2025-12-10T09:20:45.3408347Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3409003Z 
2025-12-10T09:20:45.3429397Z   console.log
2025-12-10T09:20:45.3430853Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.3432336Z 
2025-12-10T09:20:45.3432835Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3433601Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3433915Z 
2025-12-10T09:20:45.3443028Z   console.log
2025-12-10T09:20:45.3443884Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3444505Z 
2025-12-10T09:20:45.3445130Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3445900Z 
2025-12-10T09:20:45.3482206Z   console.error
2025-12-10T09:20:45.3483111Z     [PluginGateway] Error calling testplugin.testMethod: Method failed
2025-12-10T09:20:45.3484624Z 
2025-12-10T09:20:45.3485517Z     [0m [90m 136 |[39m             [36mreturn[39m result[33m;[39m
2025-12-10T09:20:45.3487518Z      [90m 137 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:45.3489116Z     [31m[1m>[22m[39m[90m 138 |[39m             console[33m.[39merror([32m`[PluginGateway] Error calling ${pluginName}.${method}:`[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:45.3490658Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:45.3491298Z      [90m 139 |[39m             
2025-12-10T09:20:45.3492008Z      [90m 140 |[39m             [90m// Log plugin call failures[39m
2025-12-10T09:20:45.3492824Z      [90m 141 |[39m             [36mawait[39m logAuditEvent([0m
2025-12-10T09:20:45.3493221Z 
2025-12-10T09:20:45.3493640Z       at PluginGateway.error [as call] (services/pluginGateway.js:138:21)
2025-12-10T09:20:45.3494545Z       at Object.<anonymous> (__tests__/services/pluginGateway.test.js:239:13)
2025-12-10T09:20:45.3495080Z 
2025-12-10T09:20:45.3506312Z   console.log
2025-12-10T09:20:45.3509846Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.3510259Z 
2025-12-10T09:20:45.3512357Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3513313Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3514331Z 
2025-12-10T09:20:45.3519957Z   console.log
2025-12-10T09:20:45.3520656Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3521201Z 
2025-12-10T09:20:45.3521888Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3522741Z 
2025-12-10T09:20:45.3536216Z   console.log
2025-12-10T09:20:45.3536971Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.3538185Z 
2025-12-10T09:20:45.3538837Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3539752Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3540077Z 
2025-12-10T09:20:45.3548359Z   console.log
2025-12-10T09:20:45.3550204Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3550754Z 
2025-12-10T09:20:45.3551429Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3552170Z 
2025-12-10T09:20:45.3567046Z   console.log
2025-12-10T09:20:45.3567781Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.3568182Z 
2025-12-10T09:20:45.3568679Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3569650Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3569981Z 
2025-12-10T09:20:45.3577481Z   console.log
2025-12-10T09:20:45.3578411Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3578790Z 
2025-12-10T09:20:45.3579460Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3579984Z 
2025-12-10T09:20:45.3591584Z   console.log
2025-12-10T09:20:45.3592609Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.3593013Z 
2025-12-10T09:20:45.3593502Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3594392Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3594716Z 
2025-12-10T09:20:45.3600343Z   console.log
2025-12-10T09:20:45.3601033Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3601415Z 
2025-12-10T09:20:45.3601883Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3602430Z 
2025-12-10T09:20:45.3606199Z   console.log
2025-12-10T09:20:45.3607259Z     Created default admin user with Owner role. Please keep your password secure!
2025-12-10T09:20:45.3607809Z 
2025-12-10T09:20:45.3608145Z       at Object.log [as initializeUsers] (auth/auth.js:200:17)
2025-12-10T09:20:45.3608547Z 
2025-12-10T09:20:45.3616133Z   console.log
2025-12-10T09:20:45.3616940Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.3617350Z 
2025-12-10T09:20:45.3617837Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3618612Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3618949Z 
2025-12-10T09:20:45.3626558Z   console.log
2025-12-10T09:20:45.3627096Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3627469Z 
2025-12-10T09:20:45.3627923Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3628462Z 
2025-12-10T09:20:45.3641136Z   console.log
2025-12-10T09:20:45.3641860Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.3642289Z 
2025-12-10T09:20:45.3642789Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3643582Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3643916Z 
2025-12-10T09:20:45.3651423Z   console.log
2025-12-10T09:20:45.3652892Z     [PluginGateway] Registered adapter: plugin1
2025-12-10T09:20:45.3654181Z 
2025-12-10T09:20:45.3654668Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3655212Z 
2025-12-10T09:20:45.3655357Z   console.log
2025-12-10T09:20:45.3656003Z     Creating new users.json...
2025-12-10T09:20:45.3656301Z 
2025-12-10T09:20:45.3656607Z       at Object.log [as initializeUsers] (auth/auth.js:185:17)
2025-12-10T09:20:45.3656990Z 
2025-12-10T09:20:45.3662505Z   console.log
2025-12-10T09:20:45.3663242Z     [PluginGateway] Registered adapter: plugin2
2025-12-10T09:20:45.3663774Z 
2025-12-10T09:20:45.3664457Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3665243Z 
2025-12-10T09:20:45.3681068Z   console.log
2025-12-10T09:20:45.3681791Z     [PluginGateway] Unregistered adapter: plugin1
2025-12-10T09:20:45.3682177Z 
2025-12-10T09:20:45.3682662Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3683435Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3683747Z 
2025-12-10T09:20:45.3741809Z   console.log
2025-12-10T09:20:45.3742449Z     [PluginGateway] Unregistered adapter: plugin2
2025-12-10T09:20:45.3742812Z 
2025-12-10T09:20:45.3743216Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3743673Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3743853Z 
2025-12-10T09:20:45.3753671Z   console.log
2025-12-10T09:20:45.3754248Z     [PluginGateway] Registered adapter: plugin1
2025-12-10T09:20:45.3754595Z 
2025-12-10T09:20:45.3755019Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3755348Z 
2025-12-10T09:20:45.3763828Z   console.log
2025-12-10T09:20:45.3764282Z     [PluginGateway] Registered adapter: plugin2
2025-12-10T09:20:45.3764623Z 
2025-12-10T09:20:45.3765048Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3765798Z 
2025-12-10T09:20:45.3778078Z   console.log
2025-12-10T09:20:45.3778690Z     [PluginGateway] Unregistered adapter: plugin1
2025-12-10T09:20:45.3779046Z 
2025-12-10T09:20:45.3779744Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3780218Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3780407Z 
2025-12-10T09:20:45.3788712Z   console.log
2025-12-10T09:20:45.3789507Z     [PluginGateway] Unregistered adapter: plugin2
2025-12-10T09:20:45.3789869Z 
2025-12-10T09:20:45.3790277Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3790716Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3790895Z 
2025-12-10T09:20:45.3806179Z   console.log
2025-12-10T09:20:45.3806664Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3807026Z 
2025-12-10T09:20:45.3807448Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3807978Z 
2025-12-10T09:20:45.3824762Z   console.log
2025-12-10T09:20:45.3825260Z     [PluginGateway] Unregistered adapter: testplugin
2025-12-10T09:20:45.3825643Z 
2025-12-10T09:20:45.3826098Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3826791Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3826980Z 
2025-12-10T09:20:45.3835460Z   console.log
2025-12-10T09:20:45.3835917Z     [PluginGateway] Registered adapter: plugin1
2025-12-10T09:20:45.3836275Z 
2025-12-10T09:20:45.3836708Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3837211Z 
2025-12-10T09:20:45.3845125Z   console.log
2025-12-10T09:20:45.3845701Z     [PluginGateway] Registered adapter: plugin2
2025-12-10T09:20:45.3846029Z 
2025-12-10T09:20:45.3846449Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3846965Z 
2025-12-10T09:20:45.3859763Z   console.log
2025-12-10T09:20:45.3860385Z     [PluginGateway] Unregistered adapter: plugin1
2025-12-10T09:20:45.3860734Z 
2025-12-10T09:20:45.3861161Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3861811Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3862011Z 
2025-12-10T09:20:45.3870978Z   console.log
2025-12-10T09:20:45.3871450Z     [PluginGateway] Unregistered adapter: plugin2
2025-12-10T09:20:45.3871799Z 
2025-12-10T09:20:45.3872213Z       at PluginGateway.log [as unregisterAdapter] (services/pluginGateway.js:45:17)
2025-12-10T09:20:45.3872951Z           at Array.forEach (<anonymous>)
2025-12-10T09:20:45.3873273Z 
2025-12-10T09:20:45.3886210Z   console.log
2025-12-10T09:20:45.3886673Z     [PluginGateway] Registered adapter: plugin1
2025-12-10T09:20:45.3887023Z 
2025-12-10T09:20:45.3887458Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3887948Z 
2025-12-10T09:20:45.3895951Z   console.log
2025-12-10T09:20:45.3896541Z     [PluginGateway] Registered adapter: plugin2
2025-12-10T09:20:45.3896880Z 
2025-12-10T09:20:45.3897352Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3897701Z 
2025-12-10T09:20:45.3907350Z   console.log
2025-12-10T09:20:45.3908031Z     [PluginGateway] Shutting down all adapters...
2025-12-10T09:20:45.3908390Z 
2025-12-10T09:20:45.3908781Z       at PluginGateway.log [as shutdown] (services/pluginGateway.js:230:17)
2025-12-10T09:20:45.3909619Z 
2025-12-10T09:20:45.3911431Z   console.log
2025-12-10T09:20:45.3911960Z     [PluginGateway] Shutdown plugin1
2025-12-10T09:20:45.3912279Z 
2025-12-10T09:20:45.3912692Z       at PluginGateway.log [as shutdown] (services/pluginGateway.js:236:29)
2025-12-10T09:20:45.3913057Z 
2025-12-10T09:20:45.3915748Z   console.log
2025-12-10T09:20:45.3916199Z     [PluginGateway] Shutdown plugin2
2025-12-10T09:20:45.3916524Z 
2025-12-10T09:20:45.3916822Z       at PluginGateway.log [as shutdown] (services/pluginGateway.js:236:29)
2025-12-10T09:20:45.3917716Z 
2025-12-10T09:20:45.3930168Z   console.log
2025-12-10T09:20:45.3930780Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3931140Z 
2025-12-10T09:20:45.3931551Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3931868Z 
2025-12-10T09:20:45.3940036Z   console.log
2025-12-10T09:20:45.3940578Z     [PluginGateway] Shutting down all adapters...
2025-12-10T09:20:45.3940948Z 
2025-12-10T09:20:45.3941590Z       at PluginGateway.log [as shutdown] (services/pluginGateway.js:230:17)
2025-12-10T09:20:45.3942052Z 
2025-12-10T09:20:45.3944048Z   console.log
2025-12-10T09:20:45.3944580Z     [PluginGateway] Shutdown testplugin
2025-12-10T09:20:45.3944894Z 
2025-12-10T09:20:45.3945281Z       at PluginGateway.log [as shutdown] (services/pluginGateway.js:236:29)
2025-12-10T09:20:45.3945594Z 
2025-12-10T09:20:45.3958950Z   console.log
2025-12-10T09:20:45.3959722Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.3960102Z 
2025-12-10T09:20:45.3960496Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.3960801Z 
2025-12-10T09:20:45.3969065Z   console.log
2025-12-10T09:20:45.3969708Z     [PluginGateway] Shutting down all adapters...
2025-12-10T09:20:45.3970055Z 
2025-12-10T09:20:45.3970448Z       at PluginGateway.log [as shutdown] (services/pluginGateway.js:230:17)
2025-12-10T09:20:45.3970766Z 
2025-12-10T09:20:45.3991123Z   console.error
2025-12-10T09:20:45.3991719Z     [PluginGateway] Error shutting down testplugin: Shutdown failed
2025-12-10T09:20:45.3992167Z 
2025-12-10T09:20:45.3992609Z     [0m [90m 237 |[39m                 }
2025-12-10T09:20:45.3993281Z      [90m 238 |[39m             } [36mcatch[39m (error) {
2025-12-10T09:20:45.3994577Z     [31m[1m>[22m[39m[90m 239 |[39m                 console[33m.[39merror([32m`[PluginGateway] Error shutting down ${pluginName}:`[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:45.3995330Z      [90m     |[39m                         [31m[1m^[22m[39m
2025-12-10T09:20:45.3995674Z      [90m 240 |[39m             }
2025-12-10T09:20:45.3995955Z      [90m 241 |[39m         }
2025-12-10T09:20:45.3996411Z      [90m 242 |[39m         [0m
2025-12-10T09:20:45.3996576Z 
2025-12-10T09:20:45.3996815Z       at PluginGateway.error [as shutdown] (services/pluginGateway.js:239:25)
2025-12-10T09:20:45.3997314Z       at Object.<anonymous> (__tests__/services/pluginGateway.test.js:400:13)
2025-12-10T09:20:45.3997579Z 
2025-12-10T09:20:45.4004916Z   console.log
2025-12-10T09:20:45.4005402Z     [PluginGateway] Registered adapter: testplugin
2025-12-10T09:20:45.4005776Z 
2025-12-10T09:20:45.4006217Z       at PluginGateway.log [as registerAdapter] (services/pluginGateway.js:32:17)
2025-12-10T09:20:45.4006710Z 
2025-12-10T09:20:45.4014772Z   console.log
2025-12-10T09:20:45.4015355Z     [PluginGateway] Shutting down all adapters...
2025-12-10T09:20:45.4015694Z 
2025-12-10T09:20:45.4016106Z       at PluginGateway.log [as shutdown] (services/pluginGateway.js:230:17)
2025-12-10T09:20:45.4016601Z 
2025-12-10T09:20:45.4202168Z FAIL __tests__/services/pluginGateway.test.js
2025-12-10T09:20:45.4205985Z   PluginGateway
2025-12-10T09:20:45.4206352Z     registerAdapter
2025-12-10T09:20:45.4208710Z       ✓ should register an adapter successfully (46 ms)
2025-12-10T09:20:45.4209631Z       ✓ should normalize adapter names to lowercase (4 ms)
2025-12-10T09:20:45.4210378Z       ✓ should throw error if plugin name is invalid (25 ms)
2025-12-10T09:20:45.4211112Z       ✓ should throw error if adapter is invalid (3 ms)
2025-12-10T09:20:45.4211837Z       ✓ should allow overwriting existing adapter (3 ms)
2025-12-10T09:20:45.4212348Z     unregisterAdapter
2025-12-10T09:20:45.4212846Z       ✓ should unregister an adapter (5 ms)
2025-12-10T09:20:45.4213530Z       ✓ should call adapter shutdown if available (3 ms)
2025-12-10T09:20:45.4214389Z       ✓ should handle unregistering non-existent adapter gracefully (2 ms)
2025-12-10T09:20:45.4215291Z     getAdapter
2025-12-10T09:20:45.4215775Z       ✓ should return registered adapter (2 ms)
2025-12-10T09:20:45.4216455Z       ✓ should return null for non-existent adapter (2 ms)
2025-12-10T09:20:45.4217117Z       ✓ should be case-insensitive (1 ms)
2025-12-10T09:20:45.4217550Z     configure
2025-12-10T09:20:45.4217999Z       ✓ should configure an adapter (4 ms)
2025-12-10T09:20:45.4218571Z       ✓ should store configuration (2 ms)
2025-12-10T09:20:45.4219377Z       ✓ should throw error for invalid config (4 ms)
2025-12-10T09:20:45.4220116Z       ✓ should work even if adapter is not registered (3 ms)
2025-12-10T09:20:45.4220624Z     getConfig
2025-12-10T09:20:45.4221102Z       ✓ should return stored configuration (3 ms)
2025-12-10T09:20:45.4221802Z       ✕ should return null for non-configured adapter (7 ms)
2025-12-10T09:20:45.4222300Z     initialize
2025-12-10T09:20:45.4222757Z       ✓ should initialize an adapter (3 ms)
2025-12-10T09:20:45.4223397Z       ✓ should throw error if adapter not found (3 ms)
2025-12-10T09:20:45.4224044Z       ✓ should log audit event on error (7 ms)
2025-12-10T09:20:45.4224478Z     call
2025-12-10T09:20:45.4224962Z       ✓ should call adapter method successfully (3 ms)
2025-12-10T09:20:45.4225652Z       ✓ should throw error if adapter not found (3 ms)
2025-12-10T09:20:45.4226316Z       ✓ should throw error if method not found (3 ms)
2025-12-10T09:20:45.4226931Z       ✓ should log audit event on error (7 ms)
2025-12-10T09:20:45.4227592Z       ✓ should pass empty params by default (3 ms)
2025-12-10T09:20:45.4228054Z     checkHealth
2025-12-10T09:20:45.4228649Z       ✓ should return health status for registered adapter (3 ms)
2025-12-10T09:20:45.4229674Z       ✓ should return unknown status for non-existent adapter (2 ms)
2025-12-10T09:20:45.4230529Z       ✓ should return healthy if no health check implemented (3 ms)
2025-12-10T09:20:45.4231244Z       ✓ should return unhealthy on error (2 ms)
2025-12-10T09:20:45.4231698Z     checkAllHealth
2025-12-10T09:20:45.4232297Z       ✓ should check health of all registered adapters (4 ms)
2025-12-10T09:20:45.4233128Z       ✓ should return healthy true if all adapters are healthy (9 ms)
2025-12-10T09:20:45.4234189Z       ✓ should return empty result if no adapters registered (3 ms)
2025-12-10T09:20:45.4234910Z       ✓ should handle errors gracefully (1 ms)
2025-12-10T09:20:45.4235375Z     getRegisteredAdapters
2025-12-10T09:20:45.4235992Z       ✓ should return list of registered adapter names (4 ms)
2025-12-10T09:20:45.4236795Z       ✓ should return empty array if no adapters registered (3 ms)
2025-12-10T09:20:45.4237328Z     shutdown
2025-12-10T09:20:45.4237775Z       ✓ should shutdown all adapters (4 ms)
2025-12-10T09:20:45.4238402Z       ✓ should clear all adapters and configs (3 ms)
2025-12-10T09:20:45.4239050Z       ✓ should handle errors during shutdown (5 ms)
2025-12-10T09:20:45.4239962Z       ✓ should work if adapters have no shutdown method (2 ms)
2025-12-10T09:20:45.4240367Z 
2025-12-10T09:20:45.4255372Z   ● PluginGateway › getConfig › should return null for non-configured adapter
2025-12-10T09:20:45.4255978Z 
2025-12-10T09:20:45.4256197Z     expect(received).toBeNull()
2025-12-10T09:20:45.4256485Z 
2025-12-10T09:20:45.4256681Z     Received: {"enabled": true}
2025-12-10T09:20:45.4256957Z 
2025-12-10T09:20:45.4257752Z     [0m [90m 172 |[39m         it([32m'should return null for non-configured adapter'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:45.4259354Z      [90m 173 |[39m             [36mconst[39m result [33m=[39m pluginGateway[33m.[39mgetConfig([32m'nonexistent'[39m)[33m;[39m
2025-12-10T09:20:45.4260575Z     [31m[1m>[22m[39m[90m 174 |[39m             expect(result)[33m.[39mtoBeNull()[33m;[39m
2025-12-10T09:20:45.4261396Z      [90m     |[39m                            [31m[1m^[22m[39m
2025-12-10T09:20:45.4261991Z      [90m 175 |[39m         })[33m;[39m
2025-12-10T09:20:45.4262520Z      [90m 176 |[39m     })[33m;[39m
2025-12-10T09:20:45.4263241Z      [90m 177 |[39m[0m
2025-12-10T09:20:45.4263468Z 
2025-12-10T09:20:45.4263867Z       at Object.toBeNull (__tests__/services/pluginGateway.test.js:174:28)
2025-12-10T09:20:45.4264359Z 
2025-12-10T09:20:45.4613522Z   console.log
2025-12-10T09:20:45.4614421Z     Created default admin user with Owner role. Please keep your password secure!
2025-12-10T09:20:45.4616125Z 
2025-12-10T09:20:45.4616493Z       at Object.log [as initializeUsers] (auth/auth.js:200:17)
2025-12-10T09:20:45.4616904Z 
2025-12-10T09:20:45.4629146Z   console.log
2025-12-10T09:20:45.4631566Z     Admin password changed detected, regenerating users.json...
2025-12-10T09:20:45.4632010Z 
2025-12-10T09:20:45.4632341Z       at Object.log [as initializeUsers] (auth/auth.js:164:21)
2025-12-10T09:20:45.4632737Z 
2025-12-10T09:20:45.5507516Z   console.log
2025-12-10T09:20:45.5508274Z     Updated admin user with new password. Please keep your password secure!
2025-12-10T09:20:45.5508767Z 
2025-12-10T09:20:45.5509081Z       at Object.log [as initializeUsers] (auth/auth.js:179:21)
2025-12-10T09:20:45.5509633Z 
2025-12-10T09:20:45.5874664Z   console.error
2025-12-10T09:20:45.5875468Z     Error searching plugins: Error: Network error
2025-12-10T09:20:45.5877996Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/services/marketplaceService.test.js:78:45)
2025-12-10T09:20:45.5881720Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:45.5882926Z         at new Promise (<anonymous>)
2025-12-10T09:20:45.5884189Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:45.5886086Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:45.5887447Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:45.5888828Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:45.5891217Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:45.5893243Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:45.5895253Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:45.5897049Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:45.5899513Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:45.5902155Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:45.5904257Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:45.5906096Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:45.5907928Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:45.5908893Z 
2025-12-10T09:20:45.5909606Z     [0m [90m 77 |[39m         [36mreturn[39m results[33m;[39m
2025-12-10T09:20:45.5910287Z      [90m 78 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:45.5911647Z     [31m[1m>[22m[39m[90m 79 |[39m         console[33m.[39merror([32m'Error searching plugins:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:45.5912605Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:45.5913786Z      [90m 80 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m`Marketplace search failed: ${error.message}`[39m)[33m;[39m
2025-12-10T09:20:45.5914663Z      [90m 81 |[39m     }
2025-12-10T09:20:45.5915057Z      [90m 82 |[39m }[0m
2025-12-10T09:20:45.5915271Z 
2025-12-10T09:20:45.5915704Z       at Object.error [as searchPlugins] (services/marketplaceService.js:79:17)
2025-12-10T09:20:45.5916635Z       at Object.<anonymous> (__tests__/services/marketplaceService.test.js:80:13)
2025-12-10T09:20:45.5917139Z 
2025-12-10T09:20:45.6118250Z   console.error
2025-12-10T09:20:45.6120579Z     Error fetching plugin details: Error: Invalid platform specified
2025-12-10T09:20:45.6122037Z         at Object.getPluginDetails (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/services/marketplaceService.js:101:19)
2025-12-10T09:20:45.6124109Z         at Object.getPluginDetails (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/services/marketplaceService.test.js:165:36)
2025-12-10T09:20:45.6126146Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:45.6127332Z         at new Promise (<anonymous>)
2025-12-10T09:20:45.6128584Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:45.6130604Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:45.6131969Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:45.6133343Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:45.6135439Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:45.6137450Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:45.6139603Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:45.6141406Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:45.6143649Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:45.6146204Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:45.6148308Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:45.6150282Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:45.6152118Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:45.6153078Z 
2025-12-10T09:20:45.6153424Z     [0m [90m 102 |[39m         }
2025-12-10T09:20:45.6154010Z      [90m 103 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:45.6155183Z     [31m[1m>[22m[39m[90m 104 |[39m         console[33m.[39merror([32m'Error fetching plugin details:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:45.6156427Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:45.6157638Z      [90m 105 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to fetch plugin details: ${error.message}`[39m)[33m;[39m
2025-12-10T09:20:45.6158527Z      [90m 106 |[39m     }
2025-12-10T09:20:45.6158934Z      [90m 107 |[39m }[0m
2025-12-10T09:20:45.6159299Z 
2025-12-10T09:20:45.6159770Z       at Object.error [as getPluginDetails] (services/marketplaceService.js:104:17)
2025-12-10T09:20:45.6160787Z       at Object.getPluginDetails (__tests__/services/marketplaceService.test.js:165:36)
2025-12-10T09:20:45.6161358Z 
2025-12-10T09:20:45.6335072Z FAIL __tests__/services/marketplaceService.test.js
2025-12-10T09:20:45.6336083Z   Marketplace Service
2025-12-10T09:20:45.6336600Z     searchPlugins
2025-12-10T09:20:45.6338964Z       ✓ should search Modrinth successfully (2 ms)
2025-12-10T09:20:45.6339957Z       ✓ should search Hangar successfully (1 ms)
2025-12-10T09:20:45.6340662Z       ✓ should handle search errors gracefully (52 ms)
2025-12-10T09:20:45.6341305Z       ✕ should apply filters correctly (2 ms)
2025-12-10T09:20:45.6341781Z     getPluginDetails
2025-12-10T09:20:45.6342344Z       ✓ should get Modrinth plugin details (1 ms)
2025-12-10T09:20:45.6342961Z       ✓ should handle invalid platform (8 ms)
2025-12-10T09:20:45.6343422Z     getPluginVersions
2025-12-10T09:20:45.6343891Z       ✓ should get plugin versions
2025-12-10T09:20:45.6344459Z       ✓ should filter by game version (1 ms)
2025-12-10T09:20:45.6344899Z     getFeaturedPlugins
2025-12-10T09:20:45.6345428Z       ✓ should get featured plugins (1 ms)
2025-12-10T09:20:45.6345873Z     getCategories
2025-12-10T09:20:45.6346323Z       ✓ should return category lists
2025-12-10T09:20:45.6346611Z 
2025-12-10T09:20:45.6347129Z   ● Marketplace Service › searchPlugins › should apply filters correctly
2025-12-10T09:20:45.6347645Z 
2025-12-10T09:20:45.6347948Z     expect(jest.fn()).toHaveBeenCalledWith(...expected)
2025-12-10T09:20:45.6348321Z 
2025-12-10T09:20:45.6348579Z     Expected: StringContaining "categories:admin"
2025-12-10T09:20:45.6354303Z     Received: "https://api.modrinth.com/v2/search?query=test&limit=10&offset=0&facets=%5B%5B%22project_type%3Aplugin%22%5D%5D&facets=%5B%5B%22categories%3Aadmin%22%5D%5D&facets=%5B%5B%22versions%3A1.20.1%22%5D%5D&index=downloads", {"maxRedirects": 3, "timeout": 10000}
2025-12-10T09:20:45.6355712Z 
2025-12-10T09:20:45.6355878Z     Number of calls: 1
2025-12-10T09:20:45.6356107Z 
2025-12-10T09:20:45.6356495Z     [0m [90m 102 |[39m             })[33m;[39m
2025-12-10T09:20:45.6357040Z      [90m 103 |[39m
2025-12-10T09:20:45.6357972Z     [31m[1m>[22m[39m[90m 104 |[39m             expect(axios[33m.[39m[36mget[39m)[33m.[39mtoHaveBeenCalledWith(
2025-12-10T09:20:45.6358955Z      [90m     |[39m                               [31m[1m^[22m[39m
2025-12-10T09:20:45.6360082Z      [90m 105 |[39m                 expect[33m.[39mstringContaining([32m'categories:admin'[39m)
2025-12-10T09:20:45.6360882Z      [90m 106 |[39m             )[33m;[39m
2025-12-10T09:20:45.6361498Z      [90m 107 |[39m         })[33m;[39m[0m
2025-12-10T09:20:45.6361796Z 
2025-12-10T09:20:45.6362347Z       at Object.toHaveBeenCalledWith (__tests__/services/marketplaceService.test.js:104:31)
2025-12-10T09:20:45.6362960Z 
2025-12-10T09:20:45.6446921Z   console.log
2025-12-10T09:20:45.6447584Z     Creating new users.json...
2025-12-10T09:20:45.6447891Z 
2025-12-10T09:20:45.6448233Z       at Object.log [as initializeUsers] (auth/auth.js:185:17)
2025-12-10T09:20:45.6448757Z 
2025-12-10T09:20:45.7330337Z FAIL __tests__/services/integration.test.js
2025-12-10T09:20:45.7330965Z   System Integration
2025-12-10T09:20:45.7331334Z     Event Logger Integration
2025-12-10T09:20:45.7332104Z       ✕ should initialize event logger (10 ms)
2025-12-10T09:20:45.7332655Z       ✕ should log an event
2025-12-10T09:20:45.7333092Z       ✕ should query events
2025-12-10T09:20:45.7334023Z     Notification Service Integration
2025-12-10T09:20:45.7334746Z       ✕ should initialize notification service (1 ms)
2025-12-10T09:20:45.7335388Z       ✕ should get user preferences
2025-12-10T09:20:45.7335969Z       ✕ should update user preferences
2025-12-10T09:20:45.7336597Z       ✕ should create notification from event
2025-12-10T09:20:45.7337208Z       ✕ should get user notifications
2025-12-10T09:20:45.7337768Z       ✕ should get unread count
2025-12-10T09:20:45.7338259Z     Event Logger and Notification Integration
2025-12-10T09:20:45.7338946Z       ✕ should trigger notification when event is logged
2025-12-10T09:20:45.7339535Z 
2025-12-10T09:20:45.7340112Z   ● System Integration › Event Logger Integration › should initialize event logger
2025-12-10T09:20:45.7340631Z 
2025-12-10T09:20:45.7341144Z     Cannot find module '../services/eventLogger' from '__tests__/services/integration.test.js'
2025-12-10T09:20:45.7341706Z 
2025-12-10T09:20:45.7341927Z     However, Jest was able to find:
2025-12-10T09:20:45.7342353Z     	'./eventLogger.test.js'
2025-12-10T09:20:45.7342606Z 
2025-12-10T09:20:45.7343581Z     You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js', 'mjs', 'cjs', 'jsx', 'ts', 'tsx', 'json', 'node'].
2025-12-10T09:20:45.7344511Z 
2025-12-10T09:20:45.7344971Z     See https://jestjs.io/docs/configuration#modulefileextensions-arraystring
2025-12-10T09:20:45.7345481Z 
2025-12-10T09:20:45.7346131Z     [0m [90m 32 |[39m     describe([32m'Event Logger Integration'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:45.7347305Z      [90m 33 |[39m         test([32m'should initialize event logger'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:45.7348735Z     [31m[1m>[22m[39m[90m 34 |[39m             [36mconst[39m { eventLogger[33m:[39m logger } [33m=[39m require([32m'../services/eventLogger'[39m)[33m;[39m
2025-12-10T09:20:45.7350084Z      [90m    |[39m                                             [31m[1m^[22m[39m
2025-12-10T09:20:45.7351338Z      [90m 35 |[39m             logger[33m.[39mdbPath [33m=[39m path[33m.[39mjoin(__dirname[33m,[39m [32m'../data-test/events.db'[39m)[33m;[39m
2025-12-10T09:20:45.7352513Z      [90m 36 |[39m             
2025-12-10T09:20:45.7353536Z      [90m 37 |[39m             expect(() [33m=>[39m logger[33m.[39minitialize())[33m.[39mnot[33m.[39mtoThrow()[33m;[39m[0m
2025-12-10T09:20:45.7354144Z 
2025-12-10T09:20:45.7354658Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:20:45.7355587Z       at Object.require (__tests__/services/integration.test.js:34:45)
2025-12-10T09:20:45.7356017Z 
2025-12-10T09:20:45.7356512Z   ● System Integration › Event Logger Integration › should log an event
2025-12-10T09:20:45.7356991Z 
2025-12-10T09:20:45.7357524Z     Cannot find module '../services/eventLogger' from '__tests__/services/integration.test.js'
2025-12-10T09:20:45.7358121Z 
2025-12-10T09:20:45.7358314Z     However, Jest was able to find:
2025-12-10T09:20:45.7358757Z     	'./eventLogger.test.js'
2025-12-10T09:20:45.7359021Z 
2025-12-10T09:20:45.7360234Z     You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js', 'mjs', 'cjs', 'jsx', 'ts', 'tsx', 'json', 'node'].
2025-12-10T09:20:45.7361181Z 
2025-12-10T09:20:45.7361638Z     See https://jestjs.io/docs/configuration#modulefileextensions-arraystring
2025-12-10T09:20:45.7362148Z 
2025-12-10T09:20:45.7362408Z     [0m [90m 42 |[39m
2025-12-10T09:20:45.7363146Z      [90m 43 |[39m         test([32m'should log an event'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:45.7365042Z     [31m[1m>[22m[39m[90m 44 |[39m             [36mconst[39m { [33mEVENT_TYPES[39m[33m,[39m [33mEVENT_CATEGORIES[39m[33m,[39m [33mEVENT_SEVERITY[39m } [33m=[39m require([32m'../services/eventLogger'[39m)[33m;[39m
2025-12-10T09:20:45.7366557Z      [90m    |[39m                                                                       [31m[1m^[22m[39m
2025-12-10T09:20:45.7367525Z      [90m 45 |[39m             
2025-12-10T09:20:45.7368370Z      [90m 46 |[39m             [36mconst[39m eventId [33m=[39m eventLogger[33m.[39mlogEvent({
2025-12-10T09:20:45.7369834Z      [90m 47 |[39m                 eventType[33m:[39m [33mEVENT_TYPES[39m[33m.[39m[33mSYSTEM_INFO[39m[33m,[39m[0m
2025-12-10T09:20:45.7370389Z 
2025-12-10T09:20:45.7370945Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:20:45.7371866Z       at Object.require (__tests__/services/integration.test.js:44:71)
2025-12-10T09:20:45.7372264Z 
2025-12-10T09:20:45.7372786Z   ● System Integration › Event Logger Integration › should query events
2025-12-10T09:20:45.7373266Z 
2025-12-10T09:20:45.7373694Z     TypeError: Cannot read properties of undefined (reading 'queryEvents')
2025-12-10T09:20:45.7374207Z 
2025-12-10T09:20:45.7374488Z     [0m [90m 57 |[39m
2025-12-10T09:20:45.7375264Z      [90m 58 |[39m         test([32m'should query events'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:45.7376542Z     [31m[1m>[22m[39m[90m 59 |[39m             [36mconst[39m result [33m=[39m eventLogger[33m.[39mqueryEvents()[33m;[39m
2025-12-10T09:20:45.7377619Z      [90m    |[39m                                        [31m[1m^[22m[39m
2025-12-10T09:20:45.7378490Z      [90m 60 |[39m             expect(result)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:20:45.7379688Z      [90m 61 |[39m             expect(result[33m.[39mevents)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:20:45.7380918Z      [90m 62 |[39m             expect(result[33m.[39mtotal)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m[0m
2025-12-10T09:20:45.7381490Z 
2025-12-10T09:20:45.7381920Z       at Object.queryEvents (__tests__/services/integration.test.js:59:40)
2025-12-10T09:20:45.7382413Z 
2025-12-10T09:20:45.7383204Z   ● System Integration › Notification Service Integration › should initialize notification service
2025-12-10T09:20:45.7383882Z 
2025-12-10T09:20:45.7384514Z     Cannot find module '../services/notificationService' from '__tests__/services/integration.test.js'
2025-12-10T09:20:45.7385461Z 
2025-12-10T09:20:45.7386242Z     [0m [90m 66 |[39m     describe([32m'Notification Service Integration'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:45.7387582Z      [90m 67 |[39m         test([32m'should initialize notification service'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:45.7389065Z     [31m[1m>[22m[39m[90m 68 |[39m             [36mconst[39m service [33m=[39m require([32m'../services/notificationService'[39m)[33m;[39m
2025-12-10T09:20:45.7390458Z      [90m    |[39m                             [31m[1m^[22m[39m
2025-12-10T09:20:45.7391765Z      [90m 69 |[39m             service[33m.[39mdbPath [33m=[39m path[33m.[39mjoin(__dirname[33m,[39m [32m'../data-test/notifications.db'[39m)[33m;[39m
2025-12-10T09:20:45.7392851Z      [90m 70 |[39m             
2025-12-10T09:20:45.7393897Z      [90m 71 |[39m             expect(() [33m=>[39m service[33m.[39minitialize())[33m.[39mnot[33m.[39mtoThrow()[33m;[39m[0m
2025-12-10T09:20:45.7394528Z 
2025-12-10T09:20:45.7395085Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:20:45.7396053Z       at Object.require (__tests__/services/integration.test.js:68:29)
2025-12-10T09:20:45.7396511Z 
2025-12-10T09:20:45.7397211Z   ● System Integration › Notification Service Integration › should get user preferences
2025-12-10T09:20:45.7397813Z 
2025-12-10T09:20:45.7398308Z     TypeError: Cannot read properties of undefined (reading 'getUserPreferences')
2025-12-10T09:20:45.7398857Z 
2025-12-10T09:20:45.7399120Z     [0m [90m 76 |[39m
2025-12-10T09:20:45.7400189Z      [90m 77 |[39m         test([32m'should get user preferences'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:45.7402004Z     [31m[1m>[22m[39m[90m 78 |[39m             [36mconst[39m prefs [33m=[39m notificationService[33m.[39mgetUserPreferences([32m'testuser'[39m)[33m;[39m
2025-12-10T09:20:45.7403297Z      [90m    |[39m                                               [31m[1m^[22m[39m
2025-12-10T09:20:45.7404171Z      [90m 79 |[39m             expect(prefs)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:20:45.7405238Z      [90m 80 |[39m             expect(prefs[33m.[39menabled)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-12-10T09:20:45.7406385Z      [90m 81 |[39m             expect(prefs[33m.[39mchannels)[33m.[39mtoBeDefined()[33m;[39m[0m
2025-12-10T09:20:45.7406896Z 
2025-12-10T09:20:45.7407369Z       at Object.getUserPreferences (__tests__/services/integration.test.js:78:47)
2025-12-10T09:20:45.7407909Z 
2025-12-10T09:20:45.7408621Z   ● System Integration › Notification Service Integration › should update user preferences
2025-12-10T09:20:45.7409441Z 
2025-12-10T09:20:45.7409932Z     TypeError: Cannot read properties of undefined (reading 'updateUserPreferences')
2025-12-10T09:20:45.7410532Z 
2025-12-10T09:20:45.7410798Z     [0m [90m 83 |[39m
2025-12-10T09:20:45.7411694Z      [90m 84 |[39m         test([32m'should update user preferences'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:45.7413306Z     [31m[1m>[22m[39m[90m 85 |[39m             [36mconst[39m updated [33m=[39m notificationService[33m.[39mupdateUserPreferences([32m'testuser'[39m[33m,[39m {
2025-12-10T09:20:45.7414590Z      [90m    |[39m                                                 [31m[1m^[22m[39m
2025-12-10T09:20:45.7415512Z      [90m 86 |[39m                 severity_filter[33m:[39m [32m'warning'[39m[33m,[39m
2025-12-10T09:20:45.7416438Z      [90m 87 |[39m                 channels[33m:[39m [[32m'inbox'[39m]
2025-12-10T09:20:45.7417167Z      [90m 88 |[39m             })[33m;[39m[0m
2025-12-10T09:20:45.7417495Z 
2025-12-10T09:20:45.7417998Z       at Object.updateUserPreferences (__tests__/services/integration.test.js:85:49)
2025-12-10T09:20:45.7418587Z 
2025-12-10T09:20:45.7419602Z   ● System Integration › Notification Service Integration › should create notification from event
2025-12-10T09:20:45.7420253Z 
2025-12-10T09:20:45.7421052Z     Cannot find module '../services/eventLogger' from '__tests__/services/integration.test.js'
2025-12-10T09:20:45.7421684Z 
2025-12-10T09:20:45.7421900Z     However, Jest was able to find:
2025-12-10T09:20:45.7422371Z     	'./eventLogger.test.js'
2025-12-10T09:20:45.7422653Z 
2025-12-10T09:20:45.7423698Z     You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js', 'mjs', 'cjs', 'jsx', 'ts', 'tsx', 'json', 'node'].
2025-12-10T09:20:45.7424688Z 
2025-12-10T09:20:45.7425166Z     See https://jestjs.io/docs/configuration#modulefileextensions-arraystring
2025-12-10T09:20:45.7425722Z 
2025-12-10T09:20:45.7425986Z     [0m [90m 93 |[39m
2025-12-10T09:20:45.7426926Z      [90m 94 |[39m         test([32m'should create notification from event'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:45.7429023Z     [31m[1m>[22m[39m[90m 95 |[39m             [36mconst[39m { [33mEVENT_TYPES[39m[33m,[39m [33mEVENT_CATEGORIES[39m[33m,[39m [33mEVENT_SEVERITY[39m } [33m=[39m require([32m'../services/eventLogger'[39m)[33m;[39m
2025-12-10T09:20:45.7430792Z      [90m    |[39m                                                                       [31m[1m^[22m[39m
2025-12-10T09:20:45.7431488Z      [90m 96 |[39m             
2025-12-10T09:20:45.7432144Z      [90m 97 |[39m             [36mconst[39m event [33m=[39m {
2025-12-10T09:20:45.7432956Z      [90m 98 |[39m                 id[33m:[39m [35m1[39m[33m,[39m[0m
2025-12-10T09:20:45.7433355Z 
2025-12-10T09:20:45.7433901Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:20:45.7434906Z       at Object.require (__tests__/services/integration.test.js:95:71)
2025-12-10T09:20:45.7435635Z 
2025-12-10T09:20:45.7436354Z   ● System Integration › Notification Service Integration › should get user notifications
2025-12-10T09:20:45.7436962Z 
2025-12-10T09:20:45.7437453Z     TypeError: Cannot read properties of undefined (reading 'getUserNotifications')
2025-12-10T09:20:45.7438005Z 
2025-12-10T09:20:45.7438259Z     [0m [90m 110 |[39m
2025-12-10T09:20:45.7439134Z      [90m 111 |[39m         test([32m'should get user notifications'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:45.7440973Z     [31m[1m>[22m[39m[90m 112 |[39m             [36mconst[39m result [33m=[39m notificationService[33m.[39mgetUserNotifications([32m'testuser'[39m)[33m;[39m
2025-12-10T09:20:45.7442297Z      [90m     |[39m                                                [31m[1m^[22m[39m
2025-12-10T09:20:45.7443168Z      [90m 113 |[39m             expect(result)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:20:45.7444275Z      [90m 114 |[39m             expect(result[33m.[39mnotifications)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:20:45.7445586Z      [90m 115 |[39m             expect(result[33m.[39mtotal)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m[0m
2025-12-10T09:20:45.7446186Z 
2025-12-10T09:20:45.7446697Z       at Object.getUserNotifications (__tests__/services/integration.test.js:112:48)
2025-12-10T09:20:45.7447263Z 
2025-12-10T09:20:45.7447908Z   ● System Integration › Notification Service Integration › should get unread count
2025-12-10T09:20:45.7448467Z 
2025-12-10T09:20:45.7448925Z     TypeError: Cannot read properties of undefined (reading 'getUnreadCount')
2025-12-10T09:20:45.7449675Z 
2025-12-10T09:20:45.7449939Z     [0m [90m 117 |[39m
2025-12-10T09:20:45.7450785Z      [90m 118 |[39m         test([32m'should get unread count'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:45.7452294Z     [31m[1m>[22m[39m[90m 119 |[39m             [36mconst[39m count [33m=[39m notificationService[33m.[39mgetUnreadCount([32m'testuser'[39m)[33m;[39m
2025-12-10T09:20:45.7453545Z      [90m     |[39m                                               [31m[1m^[22m[39m
2025-12-10T09:20:45.7454610Z      [90m 120 |[39m             expect([36mtypeof[39m count)[33m.[39mtoBe([32m'number'[39m)[33m;[39m
2025-12-10T09:20:45.7456019Z      [90m 121 |[39m             expect(count)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
2025-12-10T09:20:45.7456912Z      [90m 122 |[39m         })[33m;[39m[0m
2025-12-10T09:20:45.7457240Z 
2025-12-10T09:20:45.7457700Z       at Object.getUnreadCount (__tests__/services/integration.test.js:119:47)
2025-12-10T09:20:45.7458234Z 
2025-12-10T09:20:45.7459352Z   ● System Integration › Event Logger and Notification Integration › should trigger notification when event is logged
2025-12-10T09:20:45.7460125Z 
2025-12-10T09:20:45.7460685Z     Cannot find module '../services/eventLogger' from '__tests__/services/integration.test.js'
2025-12-10T09:20:45.7461311Z 
2025-12-10T09:20:45.7461529Z     However, Jest was able to find:
2025-12-10T09:20:45.7462011Z     	'./eventLogger.test.js'
2025-12-10T09:20:45.7462292Z 
2025-12-10T09:20:45.7463313Z     You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js', 'mjs', 'cjs', 'jsx', 'ts', 'tsx', 'json', 'node'].
2025-12-10T09:20:45.7464317Z 
2025-12-10T09:20:45.7464799Z     See https://jestjs.io/docs/configuration#modulefileextensions-arraystring
2025-12-10T09:20:45.7465336Z 
2025-12-10T09:20:45.7466182Z     [0m [90m 125 |[39m     describe([32m'Event Logger and Notification Integration'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:20:45.7467683Z      [90m 126 |[39m         test([32m'should trigger notification when event is logged'[39m[33m,[39m (done) [33m=>[39m {
2025-12-10T09:20:45.7469997Z     [31m[1m>[22m[39m[90m 127 |[39m             [36mconst[39m { [33mEVENT_TYPES[39m[33m,[39m [33mEVENT_CATEGORIES[39m[33m,[39m [33mEVENT_SEVERITY[39m } [33m=[39m require([32m'../services/eventLogger'[39m)[33m;[39m
2025-12-10T09:20:45.7471870Z      [90m     |[39m                                                                       [31m[1m^[22m[39m
2025-12-10T09:20:45.7472562Z      [90m 128 |[39m             
2025-12-10T09:20:45.7473314Z      [90m 129 |[39m             [90m// Listen for notification event[39m
2025-12-10T09:20:45.7474759Z      [90m 130 |[39m             notificationService[33m.[39monce([32m'notification'[39m[33m,[39m ({ userId[33m,[39m notification }) [33m=>[39m {[0m
2025-12-10T09:20:45.7475556Z 
2025-12-10T09:20:45.7476115Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:20:45.7477117Z       at Object.require (__tests__/services/integration.test.js:127:71)
2025-12-10T09:20:45.7477580Z 
2025-12-10T09:20:45.7477746Z   console.log
2025-12-10T09:20:45.7478409Z     Created default admin user with Owner role. Please keep your password secure!
2025-12-10T09:20:45.7478952Z 
2025-12-10T09:20:45.7479549Z       at Object.log [as initializeUsers] (auth/auth.js:200:17)
2025-12-10T09:20:45.7479969Z 
2025-12-10T09:20:45.7480131Z   console.log
2025-12-10T09:20:45.7480603Z     Using existing users.json (password unchanged)
2025-12-10T09:20:45.7480979Z 
2025-12-10T09:20:45.7481324Z       at Object.log [as initializeUsers] (auth/auth.js:181:21)
2025-12-10T09:20:45.7481729Z 
2025-12-10T09:20:45.7481867Z   console.log
2025-12-10T09:20:45.7482244Z     Creating new users.json...
2025-12-10T09:20:45.7482520Z 
2025-12-10T09:20:45.7482824Z       at Object.log [as initializeUsers] (auth/auth.js:185:17)
2025-12-10T09:20:45.7483218Z 
2025-12-10T09:20:45.8319648Z   console.log
2025-12-10T09:20:45.8321302Z     Created default admin user with Owner role. Please keep your password secure!
2025-12-10T09:20:45.8321835Z 
2025-12-10T09:20:45.8322162Z       at Object.log [as initializeUsers] (auth/auth.js:200:17)
2025-12-10T09:20:45.8322574Z 
2025-12-10T09:20:45.9366271Z   console.log
2025-12-10T09:20:45.9384741Z     Creating new users.json...
2025-12-10T09:20:45.9385109Z 
2025-12-10T09:20:45.9385441Z       at Object.log [as initializeUsers] (auth/auth.js:185:17)
2025-12-10T09:20:45.9385853Z 
2025-12-10T09:20:46.0234795Z   console.log
2025-12-10T09:20:46.0236026Z     Created default admin user with Owner role. Please keep your password secure!
2025-12-10T09:20:46.0236695Z 
2025-12-10T09:20:46.0237446Z       at Object.log [as initializeUsers] (auth/auth.js:200:17)
2025-12-10T09:20:46.0237852Z 
2025-12-10T09:20:46.1136116Z   console.log
2025-12-10T09:20:46.1136627Z     Creating new users.json...
2025-12-10T09:20:46.1136969Z 
2025-12-10T09:20:46.1137323Z       at Object.log [as initializeUsers] (auth/auth.js:185:17)
2025-12-10T09:20:46.1137744Z 
2025-12-10T09:20:46.1979515Z   console.log
2025-12-10T09:20:46.1980484Z     Created default admin user with Owner role. Please keep your password secure!
2025-12-10T09:20:46.1981017Z 
2025-12-10T09:20:46.1981271Z       at Object.log [as initializeUsers] (auth/auth.js:200:17)
2025-12-10T09:20:46.1981616Z 
2025-12-10T09:20:46.2205497Z FAIL __tests__/auth/auth.test.js
2025-12-10T09:20:46.2206068Z   Auth Module - Password Change Detection
2025-12-10T09:20:46.2206518Z     initializeUsers
2025-12-10T09:20:46.2207275Z       ✓ should create users.json if it does not exist (154 ms)
2025-12-10T09:20:46.2207952Z       ✓ should update users.json when password changes (280 ms)
2025-12-10T09:20:46.2208850Z       ✓ should not update users.json when password is unchanged (100 ms)
2025-12-10T09:20:46.2209696Z     verifyCredentials
2025-12-10T09:20:46.2210312Z       ✕ should verify correct credentials (183 ms)
2025-12-10T09:20:46.2211027Z       ✕ should reject incorrect password (177 ms)
2025-12-10T09:20:46.2211733Z       ✕ should reject non-existent username (86 ms)
2025-12-10T09:20:46.2212118Z 
2025-12-10T09:20:46.2212893Z   ● Auth Module - Password Change Detection › verifyCredentials › should verify correct credentials
2025-12-10T09:20:46.2213588Z 
2025-12-10T09:20:46.2213920Z     expect(received).toBe(expected) // Object.is equality
2025-12-10T09:20:46.2214722Z 
2025-12-10T09:20:46.2214880Z     Expected: true
2025-12-10T09:20:46.2215730Z     Received: {"createdAt": "2025-12-10T09:20:45.830Z", "lastLogin": undefined, "role": "owner", "username": "testuser"}
2025-12-10T09:20:46.2216402Z 
2025-12-10T09:20:46.2216733Z     [0m [90m 121 |[39m             
2025-12-10T09:20:46.2218168Z      [90m 122 |[39m             [36mconst[39m isValid [33m=[39m [36mawait[39m auth[33m.[39mverifyCredentials([32m'testuser'[39m[33m,[39m [32m'test-password-456'[39m)[33m;[39m
2025-12-10T09:20:46.2219832Z     [31m[1m>[22m[39m[90m 123 |[39m             expect(isValid)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-12-10T09:20:46.2220683Z      [90m     |[39m                             [31m[1m^[22m[39m
2025-12-10T09:20:46.2221254Z      [90m 124 |[39m             
2025-12-10T09:20:46.2221884Z      [90m 125 |[39m             [90m// Restore original values[39m
2025-12-10T09:20:46.2223041Z      [90m 126 |[39m             process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m=[39m originalPassword[33m;[39m[0m
2025-12-10T09:20:46.2223678Z 
2025-12-10T09:20:46.2223977Z       at Object.toBe (__tests__/auth/auth.test.js:123:29)
2025-12-10T09:20:46.2224358Z 
2025-12-10T09:20:46.2225167Z   ● Auth Module - Password Change Detection › verifyCredentials › should reject incorrect password
2025-12-10T09:20:46.2225822Z 
2025-12-10T09:20:46.2226120Z     expect(received).toBe(expected) // Object.is equality
2025-12-10T09:20:46.2226523Z 
2025-12-10T09:20:46.2226663Z     Expected: false
2025-12-10T09:20:46.2227017Z     Received: null
2025-12-10T09:20:46.2227201Z 
2025-12-10T09:20:46.2227488Z     [0m [90m 138 |[39m             
2025-12-10T09:20:46.2228935Z      [90m 139 |[39m             [36mconst[39m isValid [33m=[39m [36mawait[39m auth[33m.[39mverifyCredentials([32m'testuser'[39m[33m,[39m [32m'wrong-password'[39m)[33m;[39m
2025-12-10T09:20:46.2230675Z     [31m[1m>[22m[39m[90m 140 |[39m             expect(isValid)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
2025-12-10T09:20:46.2231567Z      [90m     |[39m                             [31m[1m^[22m[39m
2025-12-10T09:20:46.2232165Z      [90m 141 |[39m             
2025-12-10T09:20:46.2233086Z      [90m 142 |[39m             [90m// Restore original values[39m
2025-12-10T09:20:46.2234314Z      [90m 143 |[39m             process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m=[39m originalPassword[33m;[39m[0m
2025-12-10T09:20:46.2234960Z 
2025-12-10T09:20:46.2235251Z       at Object.toBe (__tests__/auth/auth.test.js:140:29)
2025-12-10T09:20:46.2235617Z 
2025-12-10T09:20:46.2236363Z   ● Auth Module - Password Change Detection › verifyCredentials › should reject non-existent username
2025-12-10T09:20:46.2236996Z 
2025-12-10T09:20:46.2237281Z     expect(received).toBe(expected) // Object.is equality
2025-12-10T09:20:46.2237665Z 
2025-12-10T09:20:46.2237799Z     Expected: false
2025-12-10T09:20:46.2238123Z     Received: null
2025-12-10T09:20:46.2238329Z 
2025-12-10T09:20:46.2238594Z     [0m [90m 153 |[39m             
2025-12-10T09:20:46.2240324Z      [90m 154 |[39m             [36mconst[39m isValid [33m=[39m [36mawait[39m auth[33m.[39mverifyCredentials([32m'nonexistent'[39m[33m,[39m [32m'test-password'[39m)[33m;[39m
2025-12-10T09:20:46.2241920Z     [31m[1m>[22m[39m[90m 155 |[39m             expect(isValid)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
2025-12-10T09:20:46.2242816Z      [90m     |[39m                             [31m[1m^[22m[39m
2025-12-10T09:20:46.2243428Z      [90m 156 |[39m             
2025-12-10T09:20:46.2244134Z      [90m 157 |[39m             [90m// Restore original password[39m
2025-12-10T09:20:46.2245352Z      [90m 158 |[39m             process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m=[39m originalPassword[33m;[39m[0m
2025-12-10T09:20:46.2246007Z 
2025-12-10T09:20:46.2246322Z       at Object.toBe (__tests__/auth/auth.test.js:155:29)
2025-12-10T09:20:46.2246996Z 
2025-12-10T09:20:47.0753484Z   console.log
2025-12-10T09:20:47.0754053Z     [Session] Cookie configuration: {
2025-12-10T09:20:47.0754534Z       secure: false,
2025-12-10T09:20:47.0754795Z       nodeEnv: 'test',
2025-12-10T09:20:47.0755158Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:47.0755622Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:47.0755971Z     }
2025-12-10T09:20:47.0756090Z 
2025-12-10T09:20:47.0756276Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:47.0756510Z 
2025-12-10T09:20:47.3442428Z   console.log
2025-12-10T09:20:47.3443124Z     [Test] Session middleware initialized (memory store)
2025-12-10T09:20:47.3443604Z 
2025-12-10T09:20:47.3443856Z       at Object.log (server.js:142:13)
2025-12-10T09:20:47.3444217Z 
2025-12-10T09:20:47.3448864Z   console.log
2025-12-10T09:20:47.3449503Z     [Session] Initialization status: {
2025-12-10T09:20:47.3450064Z       nodeEnv: 'test',
2025-12-10T09:20:47.3450399Z       sessionSecretSet: true,
2025-12-10T09:20:47.3450716Z       redisConfigured: false,
2025-12-10T09:20:47.3451001Z       middlewareApplied: true
2025-12-10T09:20:47.3451255Z     }
2025-12-10T09:20:47.3451363Z 
2025-12-10T09:20:47.3451503Z       at Object.log (server.js:155:9)
2025-12-10T09:20:47.3451702Z 
2025-12-10T09:20:47.3498637Z   console.log
2025-12-10T09:20:47.3499063Z     [CSRF] Cookie configuration: {
2025-12-10T09:20:47.3499653Z       secure: false,
2025-12-10T09:20:47.3499984Z       nodeEnv: 'test',
2025-12-10T09:20:47.3500389Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:47.3500948Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:47.3501416Z     }
2025-12-10T09:20:47.3501571Z 
2025-12-10T09:20:47.3501797Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:47.3502106Z 
2025-12-10T09:20:47.3791846Z   console.log
2025-12-10T09:20:47.3792390Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:47.3792782Z 
2025-12-10T09:20:47.3793005Z       at log (server.js:284:17)
2025-12-10T09:20:47.3793355Z 
2025-12-10T09:20:47.3855911Z   console.log
2025-12-10T09:20:47.3856308Z     [LOGIN] Login attempt: {
2025-12-10T09:20:47.3856767Z       username: 'admin',
2025-12-10T09:20:47.3857356Z       sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.3858314Z       hasSession: true,
2025-12-10T09:20:47.3858918Z       timestamp: '2025-12-10T09:20:47.383Z'
2025-12-10T09:20:47.3859832Z     }
2025-12-10T09:20:47.3860001Z 
2025-12-10T09:20:47.3860169Z       at log (routes/api.js:15:13)
2025-12-10T09:20:47.3860401Z 
2025-12-10T09:20:47.3908770Z   console.error
2025-12-10T09:20:47.3910992Z     Error loading users: [Error: ENOENT: no such file or directory, open '/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/config/users.json'] {
2025-12-10T09:20:47.3912590Z       errno: -2,
2025-12-10T09:20:47.3912936Z       code: 'ENOENT',
2025-12-10T09:20:47.3913269Z       syscall: 'open',
2025-12-10T09:20:47.3914068Z       path: '/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/config/users.json'
2025-12-10T09:20:47.3914814Z     }
2025-12-10T09:20:47.3914970Z 
2025-12-10T09:20:47.3915735Z     [0m [90m 16 |[39m         [36mreturn[39m [33mJSON[39m[33m.[39mparse(data)[33m;[39m
2025-12-10T09:20:47.3916527Z      [90m 17 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:47.3917579Z     [31m[1m>[22m[39m[90m 18 |[39m         console[33m.[39merror([32m'Error loading users:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:47.3918496Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:47.3918994Z      [90m 19 |[39m         
2025-12-10T09:20:47.3919831Z      [90m 20 |[39m         [90m// Require ADMIN_PASSWORD to be set[39m
2025-12-10T09:20:47.3921606Z      [90m 21 |[39m         [36mif[39m ([33m![39mprocess[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m||[39m process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m===[39m [32m'change-this-secure-password'[39m) {[0m
2025-12-10T09:20:47.3922673Z 
2025-12-10T09:20:47.3923184Z       at error (auth/auth.js:18:17)
2025-12-10T09:20:47.3923698Z       at verifyCredentials (auth/auth.js:55:22)
2025-12-10T09:20:47.3924158Z       at routes/api.js:39:22
2025-12-10T09:20:47.3924405Z 
2025-12-10T09:20:47.5700007Z   console.error
2025-12-10T09:20:47.5701401Z     Error loading users: [Error: ENOENT: no such file or directory, open '/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/config/users.json'] {
2025-12-10T09:20:47.5702222Z       errno: -2,
2025-12-10T09:20:47.5702464Z       code: 'ENOENT',
2025-12-10T09:20:47.5702716Z       syscall: 'open',
2025-12-10T09:20:47.5703317Z       path: '/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/config/users.json'
2025-12-10T09:20:47.5703844Z     }
2025-12-10T09:20:47.5703971Z 
2025-12-10T09:20:47.5704562Z     [0m [90m 16 |[39m         [36mreturn[39m [33mJSON[39m[33m.[39mparse(data)[33m;[39m
2025-12-10T09:20:47.5705122Z      [90m 17 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:47.5705925Z     [31m[1m>[22m[39m[90m 18 |[39m         console[33m.[39merror([32m'Error loading users:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:47.5706579Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:47.5706943Z      [90m 19 |[39m         
2025-12-10T09:20:47.5707430Z      [90m 20 |[39m         [90m// Require ADMIN_PASSWORD to be set[39m
2025-12-10T09:20:47.5708786Z      [90m 21 |[39m         [36mif[39m ([33m![39mprocess[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m||[39m process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m===[39m [32m'change-this-secure-password'[39m) {[0m
2025-12-10T09:20:47.5709753Z 
2025-12-10T09:20:47.5709921Z       at error (auth/auth.js:18:17)
2025-12-10T09:20:47.5710313Z       at updateLastLogin (auth/auth.js:209:26)
2025-12-10T09:20:47.5710702Z       at routes/api.js:47:13
2025-12-10T09:20:47.5710910Z 
2025-12-10T09:20:47.6562784Z   console.log
2025-12-10T09:20:47.6563267Z     [Audit] Event logged: {
2025-12-10T09:20:47.6563870Z       eventType: 'auth.login.success',
2025-12-10T09:20:47.6564212Z       username: 'admin',
2025-12-10T09:20:47.6564541Z       timestamp: '2025-12-10T09:20:47.654Z'
2025-12-10T09:20:47.6564836Z     }
2025-12-10T09:20:47.6564953Z 
2025-12-10T09:20:47.6565361Z       at log (services/auditLog.js:106:17)
2025-12-10T09:20:47.6565585Z 
2025-12-10T09:20:47.6603803Z   console.log
2025-12-10T09:20:47.6604214Z     [LOGIN] Login successful: {
2025-12-10T09:20:47.6604611Z       username: 'admin',
2025-12-10T09:20:47.6604953Z       role: 'viewer',
2025-12-10T09:20:47.6605319Z       sessionID: '[REDACTED]',
2025-12-10T09:20:47.6605698Z       authenticated: true,
2025-12-10T09:20:47.6606062Z       cookieMaxAge: 86399715,
2025-12-10T09:20:47.6606503Z       cookieExpires: 2025-12-11T09:20:47.374Z
2025-12-10T09:20:47.6606909Z     }
2025-12-10T09:20:47.6607059Z 
2025-12-10T09:20:47.6607359Z       at Immediate.log [as _onImmediate] (routes/api.js:64:25)
2025-12-10T09:20:47.6607746Z 
2025-12-10T09:20:47.6615492Z   console.log
2025-12-10T09:20:47.6616080Z     === API DEBUG LOG ===
2025-12-10T09:20:47.6616326Z 
2025-12-10T09:20:47.6616697Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:47.6617142Z 
2025-12-10T09:20:47.6620424Z   console.log
2025-12-10T09:20:47.6621111Z     POST /login - 200 (285ms)
2025-12-10T09:20:47.6621411Z 
2025-12-10T09:20:47.6621828Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:47.6622311Z 
2025-12-10T09:20:47.6625823Z   console.log
2025-12-10T09:20:47.6626500Z     Session: { id: 'QjONfVZPXCPN...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:47.6627014Z 
2025-12-10T09:20:47.6627428Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:47.6627900Z 
2025-12-10T09:20:47.6630854Z   console.log
2025-12-10T09:20:47.6631355Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:47.6631732Z 
2025-12-10T09:20:47.6632142Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:47.6632936Z 
2025-12-10T09:20:47.6635335Z   console.log
2025-12-10T09:20:47.6635933Z     ====================
2025-12-10T09:20:47.6636178Z 
2025-12-10T09:20:47.6636567Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:47.6636988Z 
2025-12-10T09:20:47.6668206Z [0mPOST /api/login [32m200[0m 301.684 ms - 89[0m
2025-12-10T09:20:47.6745069Z   console.log
2025-12-10T09:20:47.6745522Z     [CSRF] Token request: {
2025-12-10T09:20:47.6746160Z       sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.6746664Z       authenticated: true,
2025-12-10T09:20:47.6746945Z       username: 'admin',
2025-12-10T09:20:47.6747209Z       hasCookies: true,
2025-12-10T09:20:47.6747516Z       timestamp: '2025-12-10T09:20:47.673Z'
2025-12-10T09:20:47.6747811Z     }
2025-12-10T09:20:47.6747928Z 
2025-12-10T09:20:47.6748070Z       at log (server.js:236:13)
2025-12-10T09:20:47.6748256Z 
2025-12-10T09:20:47.6755444Z   console.log
2025-12-10T09:20:47.6755883Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:47.6756489Z       sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.6756843Z       tokenLength: 64,
2025-12-10T09:20:47.6757122Z       tokenPrefix: '0a9f169f...',
2025-12-10T09:20:47.6757418Z       cookieName: 'csrf-token',
2025-12-10T09:20:47.6757884Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:47.6758714Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:47.6759321Z     }
2025-12-10T09:20:47.6759434Z 
2025-12-10T09:20:47.6759562Z       at log (server.js:266:13)
2025-12-10T09:20:47.6759734Z 
2025-12-10T09:20:47.6764332Z   console.log
2025-12-10T09:20:47.6764688Z     === API DEBUG LOG ===
2025-12-10T09:20:47.6764938Z 
2025-12-10T09:20:47.6765331Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:47.6765662Z 
2025-12-10T09:20:47.6771273Z   console.log
2025-12-10T09:20:47.6771681Z     GET /api/csrf-token - 200 (3ms)
2025-12-10T09:20:47.6771987Z 
2025-12-10T09:20:47.6772300Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:47.6772619Z 
2025-12-10T09:20:47.6778416Z   console.log
2025-12-10T09:20:47.6779024Z     Session: { id: 'QjONfVZPXCPN...', authenticated: true, username: 'admin' }
2025-12-10T09:20:47.6779604Z 
2025-12-10T09:20:47.6779871Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:47.6780184Z 
2025-12-10T09:20:47.6785983Z   console.log
2025-12-10T09:20:47.6786427Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:47.6786764Z 
2025-12-10T09:20:47.6787071Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:47.6787364Z 
2025-12-10T09:20:47.6795904Z   console.log
2025-12-10T09:20:47.6796388Z     ====================
2025-12-10T09:20:47.6796628Z 
2025-12-10T09:20:47.6797029Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:47.6797422Z 
2025-12-10T09:20:47.6813539Z [0mGET /api/csrf-token [32m200[0m 8.078 ms - 80[0m
2025-12-10T09:20:47.6855215Z   console.log
2025-12-10T09:20:47.6855634Z     [CSRF] Token request: {
2025-12-10T09:20:47.6856200Z       sessionID: 'LdwchITvjlTdUk8Do2A1jXIhFeKpyFoW',
2025-12-10T09:20:47.6856753Z       authenticated: false,
2025-12-10T09:20:47.6857157Z       username: 'NOT_SET',
2025-12-10T09:20:47.6857528Z       hasCookies: false,
2025-12-10T09:20:47.6857969Z       timestamp: '2025-12-10T09:20:47.684Z'
2025-12-10T09:20:47.6858395Z     }
2025-12-10T09:20:47.6858560Z 
2025-12-10T09:20:47.6858754Z       at log (server.js:236:13)
2025-12-10T09:20:47.6859015Z 
2025-12-10T09:20:47.6864501Z   console.log
2025-12-10T09:20:47.6864972Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:47.6865608Z       sessionID: 'LdwchITvjlTdUk8Do2A1jXIhFeKpyFoW',
2025-12-10T09:20:47.6866147Z       tokenLength: 64,
2025-12-10T09:20:47.6866873Z       tokenPrefix: '1f864975...',
2025-12-10T09:20:47.6867339Z       cookieName: 'csrf-token',
2025-12-10T09:20:47.6868052Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:47.6869512Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:47.6870200Z     }
2025-12-10T09:20:47.6870360Z 
2025-12-10T09:20:47.6870545Z       at log (server.js:266:13)
2025-12-10T09:20:47.6870801Z 
2025-12-10T09:20:47.6875265Z   console.log
2025-12-10T09:20:47.6875639Z     === API DEBUG LOG ===
2025-12-10T09:20:47.6875902Z 
2025-12-10T09:20:47.6876311Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:47.6876784Z 
2025-12-10T09:20:47.6883530Z   console.log
2025-12-10T09:20:47.6883958Z     GET /api/csrf-token - 200 (3ms)
2025-12-10T09:20:47.6884267Z 
2025-12-10T09:20:47.6884677Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:47.6885170Z 
2025-12-10T09:20:47.6891899Z   console.log
2025-12-10T09:20:47.6892551Z     Session: { id: 'LdwchITvjlTd...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:47.6893077Z 
2025-12-10T09:20:47.6893489Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:47.6893961Z 
2025-12-10T09:20:47.6900381Z   console.log
2025-12-10T09:20:47.6901635Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:47.6902017Z 
2025-12-10T09:20:47.6902423Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:47.6902895Z 
2025-12-10T09:20:47.6908457Z   console.log
2025-12-10T09:20:47.6908812Z     ====================
2025-12-10T09:20:47.6909052Z 
2025-12-10T09:20:47.6909640Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:47.6909978Z 
2025-12-10T09:20:47.6913055Z [0mGET /api/csrf-token [32m200[0m 7.208 ms - 80[0m
2025-12-10T09:20:47.6953127Z   console.log
2025-12-10T09:20:47.6953727Z     [CSRF] Token request: {
2025-12-10T09:20:47.6954104Z       sessionID: '4NoHm4BtK9uSaQ_iuXjhew9dgkksyoOJ',
2025-12-10T09:20:47.6954466Z       authenticated: false,
2025-12-10T09:20:47.6954791Z       username: 'NOT_SET',
2025-12-10T09:20:47.6955218Z       hasCookies: false,
2025-12-10T09:20:47.6955526Z       timestamp: '2025-12-10T09:20:47.694Z'
2025-12-10T09:20:47.6955817Z     }
2025-12-10T09:20:47.6955928Z 
2025-12-10T09:20:47.6956056Z       at log (server.js:236:13)
2025-12-10T09:20:47.6956236Z 
2025-12-10T09:20:47.6960984Z   console.log
2025-12-10T09:20:47.6961435Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:47.6961909Z       sessionID: '4NoHm4BtK9uSaQ_iuXjhew9dgkksyoOJ',
2025-12-10T09:20:47.6962250Z       tokenLength: 64,
2025-12-10T09:20:47.6962524Z       tokenPrefix: 'd5a4d461...',
2025-12-10T09:20:47.6962832Z       cookieName: 'csrf-token',
2025-12-10T09:20:47.6963316Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:47.6964108Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:47.6964494Z     }
2025-12-10T09:20:47.6964589Z 
2025-12-10T09:20:47.6964700Z       at log (server.js:266:13)
2025-12-10T09:20:47.6964846Z 
2025-12-10T09:20:47.6968866Z   console.log
2025-12-10T09:20:47.6969348Z     === API DEBUG LOG ===
2025-12-10T09:20:47.6969537Z 
2025-12-10T09:20:47.6969771Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:47.6970039Z 
2025-12-10T09:20:47.6975999Z   console.log
2025-12-10T09:20:47.6976266Z     GET /api/csrf-token - 200 (2ms)
2025-12-10T09:20:47.6976440Z 
2025-12-10T09:20:47.6976673Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:47.6976936Z 
2025-12-10T09:20:47.6983389Z   console.log
2025-12-10T09:20:47.6983784Z     Session: { id: '4NoHm4BtK9uS...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:47.6984072Z 
2025-12-10T09:20:47.6984292Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:47.6984753Z 
2025-12-10T09:20:47.6990705Z   console.log
2025-12-10T09:20:47.6991016Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:47.6991225Z 
2025-12-10T09:20:47.6991461Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:47.6991720Z 
2025-12-10T09:20:47.6997513Z   console.log
2025-12-10T09:20:47.6997774Z     ====================
2025-12-10T09:20:47.6997929Z 
2025-12-10T09:20:47.6998159Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:47.6998437Z 
2025-12-10T09:20:47.7001807Z [0mGET /api/csrf-token [32m200[0m 6.271 ms - 80[0m
2025-12-10T09:20:47.7046307Z   console.log
2025-12-10T09:20:47.7046637Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:47.7046840Z 
2025-12-10T09:20:47.7046958Z       at log (server.js:284:17)
2025-12-10T09:20:47.7047130Z 
2025-12-10T09:20:47.7060423Z   console.log
2025-12-10T09:20:47.7060788Z     [LOGIN] Login attempt: {
2025-12-10T09:20:47.7061223Z       username: 'admin',
2025-12-10T09:20:47.7061596Z       sessionID: 'JILm7ULf4yuNZI3kQ3usPmrDovv5DKtV',
2025-12-10T09:20:47.7062043Z       hasSession: true,
2025-12-10T09:20:47.7062317Z       timestamp: '2025-12-10T09:20:47.705Z'
2025-12-10T09:20:47.7062592Z     }
2025-12-10T09:20:47.7062695Z 
2025-12-10T09:20:47.7062824Z       at log (routes/api.js:15:13)
2025-12-10T09:20:47.7062997Z 
2025-12-10T09:20:47.7901529Z   console.log
2025-12-10T09:20:47.7902107Z     [LOGIN] Login failed: Invalid credentials for user: admin
2025-12-10T09:20:47.7902538Z 
2025-12-10T09:20:47.7902757Z       at log (routes/api.js:83:21)
2025-12-10T09:20:47.7903077Z 
2025-12-10T09:20:47.7908384Z   console.log
2025-12-10T09:20:47.7908816Z     [Audit] Event logged: {
2025-12-10T09:20:47.7909610Z       eventType: 'auth.login.failure',
2025-12-10T09:20:47.7909970Z       username: 'admin',
2025-12-10T09:20:47.7910320Z       timestamp: '2025-12-10T09:20:47.790Z'
2025-12-10T09:20:47.7910651Z     }
2025-12-10T09:20:47.7910797Z 
2025-12-10T09:20:47.7910969Z       at log (services/auditLog.js:106:17)
2025-12-10T09:20:47.7911220Z 
2025-12-10T09:20:47.7913408Z   console.log
2025-12-10T09:20:47.7913687Z     === API DEBUG LOG ===
2025-12-10T09:20:47.7913849Z 
2025-12-10T09:20:47.7914309Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:47.7914620Z 
2025-12-10T09:20:47.7916933Z   console.log
2025-12-10T09:20:47.7917276Z     POST /login - 401 (88ms)
2025-12-10T09:20:47.7917525Z 
2025-12-10T09:20:47.7917907Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:47.7918225Z 
2025-12-10T09:20:47.7920342Z   console.log
2025-12-10T09:20:47.7921090Z     Session: { id: 'JILm7ULf4yuN...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:47.7921598Z 
2025-12-10T09:20:47.7921996Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:47.7922491Z 
2025-12-10T09:20:47.7924285Z   console.log
2025-12-10T09:20:47.7924658Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:47.7924875Z 
2025-12-10T09:20:47.7925115Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:47.7925397Z 
2025-12-10T09:20:47.7927674Z   console.log
2025-12-10T09:20:47.7927916Z     ====================
2025-12-10T09:20:47.7928064Z 
2025-12-10T09:20:47.7928286Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:47.7928556Z 
2025-12-10T09:20:47.7935192Z [0mPOST /api/login [33m401[0m 89.924 ms - 31[0m
2025-12-10T09:20:47.7968681Z   console.log
2025-12-10T09:20:47.7968965Z     [CSRF] Skipping CSRF check for session
2025-12-10T09:20:47.7969358Z 
2025-12-10T09:20:47.7969506Z       at log (server.js:289:17)
2025-12-10T09:20:47.7969676Z 
2025-12-10T09:20:47.7980328Z   console.log
2025-12-10T09:20:47.7980638Z     [SESSION] Session check: {
2025-12-10T09:20:47.7981144Z       sessionID: 'ysF8CpY6cHUO6AucFNFdl71GB71FcvdY',
2025-12-10T09:20:47.7981664Z       authenticated: false,
2025-12-10T09:20:47.7981887Z       username: undefined,
2025-12-10T09:20:47.7982100Z       role: undefined
2025-12-10T09:20:47.7982287Z     }
2025-12-10T09:20:47.7982380Z 
2025-12-10T09:20:47.7982500Z       at log (routes/api.js:131:13)
2025-12-10T09:20:47.7982666Z 
2025-12-10T09:20:47.7991745Z   console.log
2025-12-10T09:20:47.7992020Z     === API DEBUG LOG ===
2025-12-10T09:20:47.7992179Z 
2025-12-10T09:20:47.7992411Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:47.7992689Z 
2025-12-10T09:20:47.8002021Z   console.log
2025-12-10T09:20:47.8002349Z     GET /session - 200 (3ms)
2025-12-10T09:20:47.8002593Z 
2025-12-10T09:20:47.8002935Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:47.8003207Z 
2025-12-10T09:20:47.8011944Z   console.log
2025-12-10T09:20:47.8012526Z     Session: { id: 'ysF8CpY6cHUO...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:47.8012965Z 
2025-12-10T09:20:47.8013208Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:47.8013480Z 
2025-12-10T09:20:47.8021715Z   console.log
2025-12-10T09:20:47.8022149Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:47.8022482Z 
2025-12-10T09:20:47.8022757Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:47.8023020Z 
2025-12-10T09:20:47.8031285Z   console.log
2025-12-10T09:20:47.8031591Z     ====================
2025-12-10T09:20:47.8031809Z 
2025-12-10T09:20:47.8032175Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:47.8032465Z 
2025-12-10T09:20:47.8036577Z [0mGET /api/session [32m200[0m 7.495 ms - 23[0m
2025-12-10T09:20:47.8070990Z   console.log
2025-12-10T09:20:47.8071325Z     [CSRF] Token request: {
2025-12-10T09:20:47.8071811Z       sessionID: 'dhVLvdegRXnCCNY8gDZsDOwokrpT4_m2',
2025-12-10T09:20:47.8072181Z       authenticated: false,
2025-12-10T09:20:47.8072411Z       username: 'NOT_SET',
2025-12-10T09:20:47.8072640Z       hasCookies: false,
2025-12-10T09:20:47.8072894Z       timestamp: '2025-12-10T09:20:47.806Z'
2025-12-10T09:20:47.8073136Z     }
2025-12-10T09:20:47.8073238Z 
2025-12-10T09:20:47.8073346Z       at log (server.js:236:13)
2025-12-10T09:20:47.8073687Z 
2025-12-10T09:20:47.8078261Z   console.log
2025-12-10T09:20:47.8078693Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:47.8079462Z       sessionID: 'dhVLvdegRXnCCNY8gDZsDOwokrpT4_m2',
2025-12-10T09:20:47.8079808Z       tokenLength: 64,
2025-12-10T09:20:47.8080058Z       tokenPrefix: 'ce7f0fdc...',
2025-12-10T09:20:47.8080335Z       cookieName: 'csrf-token',
2025-12-10T09:20:47.8080755Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:47.8081485Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:47.8081890Z     }
2025-12-10T09:20:47.8081993Z 
2025-12-10T09:20:47.8082100Z       at log (server.js:266:13)
2025-12-10T09:20:47.8082264Z 
2025-12-10T09:20:47.8086329Z   console.log
2025-12-10T09:20:47.8086656Z     === API DEBUG LOG ===
2025-12-10T09:20:47.8086880Z 
2025-12-10T09:20:47.8087250Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:47.8087556Z 
2025-12-10T09:20:47.8093390Z   console.log
2025-12-10T09:20:47.8093771Z     GET /api/csrf-token - 200 (2ms)
2025-12-10T09:20:47.8094051Z 
2025-12-10T09:20:47.8094398Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:47.8094672Z 
2025-12-10T09:20:47.8102548Z   console.log
2025-12-10T09:20:47.8103133Z     Session: { id: 'dhVLvdegRXnC...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:47.8103520Z 
2025-12-10T09:20:47.8103750Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:47.8104014Z 
2025-12-10T09:20:47.8109618Z   console.log
2025-12-10T09:20:47.8110053Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:47.8110574Z 
2025-12-10T09:20:47.8110797Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:47.8111062Z 
2025-12-10T09:20:47.8116298Z   console.log
2025-12-10T09:20:47.8116607Z     ====================
2025-12-10T09:20:47.8116818Z 
2025-12-10T09:20:47.8117174Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:47.8117442Z 
2025-12-10T09:20:47.8121707Z [0mGET /api/csrf-token [32m200[0m 5.935 ms - 80[0m
2025-12-10T09:20:47.8189079Z   console.log
2025-12-10T09:20:47.8189662Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:47.8190081Z       path: '/logout',
2025-12-10T09:20:47.8190300Z       method: 'POST',
2025-12-10T09:20:47.8190548Z       session: {
2025-12-10T09:20:47.8190897Z         sessionID: 'e5_7azM3R2wVmli1pdMKWfH9man1JIrZ',
2025-12-10T09:20:47.8191201Z         authenticated: false,
2025-12-10T09:20:47.8191439Z         username: 'NOT_SET'
2025-12-10T09:20:47.8191640Z       },
2025-12-10T09:20:47.8191975Z       tokens: { headerPresent: false, cookiePresent: false, headerSource: 'NONE' }
2025-12-10T09:20:47.8192347Z     }
2025-12-10T09:20:47.8192443Z 
2025-12-10T09:20:47.8192555Z       at log (server.js:360:13)
2025-12-10T09:20:47.8192705Z 
2025-12-10T09:20:47.8314788Z   console.error
2025-12-10T09:20:47.8315318Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:47.8315843Z       path: '/logout',
2025-12-10T09:20:47.8316194Z       method: 'POST',
2025-12-10T09:20:47.8316811Z       failureReason: 'CSRF token missing from request header (neither CSRF-Token nor X-CSRF-Token present)',
2025-12-10T09:20:47.8317366Z       session: {
2025-12-10T09:20:47.8317696Z         sessionID: 'e5_7azM3R2wVmli1pdMKWfH9man1JIrZ',
2025-12-10T09:20:47.8318062Z         authenticated: false,
2025-12-10T09:20:47.8318349Z         username: 'NOT_SET'
2025-12-10T09:20:47.8318613Z       },
2025-12-10T09:20:47.8318822Z       validation: {
2025-12-10T09:20:47.8319096Z         headerTokenPresent: false,
2025-12-10T09:20:47.8319649Z         cookieTokenPresent: false,
2025-12-10T09:20:47.8319947Z         tokensMatch: true,
2025-12-10T09:20:47.8320251Z         sessionAuthenticated: false,
2025-12-10T09:20:47.8320569Z         allCookiesPresent: []
2025-12-10T09:20:47.8320836Z       }
2025-12-10T09:20:47.8321028Z     }
2025-12-10T09:20:47.8321388Z 
2025-12-10T09:20:47.8321857Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:47.8322566Z      [90m 413 |[39m         
2025-12-10T09:20:47.8323981Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:47.8324914Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:47.8325299Z      [90m 415 |[39m         
2025-12-10T09:20:47.8325782Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:47.8326381Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:47.8326675Z 
2025-12-10T09:20:47.8326784Z       at error (server.js:414:17)
2025-12-10T09:20:47.8327197Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:47.8327708Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:47.8328110Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:47.8328602Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:47.8329614Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:47.8330150Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:47.8330627Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:47.8331102Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:47.8331474Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:47.8331900Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:47.8332537Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:47.8332919Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:47.8333291Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:47.8333498Z 
2025-12-10T09:20:47.8333588Z   console.log
2025-12-10T09:20:47.8333775Z     === API DEBUG LOG ===
2025-12-10T09:20:47.8333912Z 
2025-12-10T09:20:47.8334119Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:47.8334371Z 
2025-12-10T09:20:47.8334448Z   console.log
2025-12-10T09:20:47.8334641Z     POST /logout - 403 (14ms)
2025-12-10T09:20:47.8334792Z 
2025-12-10T09:20:47.8335004Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:47.8335261Z 
2025-12-10T09:20:47.8336700Z   console.log
2025-12-10T09:20:47.8337119Z     Session: { id: 'e5_7azM3R2wV...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:47.8337410Z 
2025-12-10T09:20:47.8337630Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:47.8337882Z 
2025-12-10T09:20:47.8343714Z   console.log
2025-12-10T09:20:47.8344169Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:47.8344505Z 
2025-12-10T09:20:47.8345026Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:47.8345326Z 
2025-12-10T09:20:47.8350138Z   console.log
2025-12-10T09:20:47.8350575Z     ====================
2025-12-10T09:20:47.8350982Z 
2025-12-10T09:20:47.8401470Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:47.8401973Z 
2025-12-10T09:20:47.8402498Z [0mPOST /api/logout [33m403[0m 17.456 ms - 102[0m
2025-12-10T09:20:47.8402947Z   console.log
2025-12-10T09:20:47.8403285Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:47.8403554Z       path: '/logout',
2025-12-10T09:20:47.8403765Z       method: 'POST',
2025-12-10T09:20:47.8403974Z       session: {
2025-12-10T09:20:47.8404254Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.8404562Z         authenticated: true,
2025-12-10T09:20:47.8404779Z         username: 'admin'
2025-12-10T09:20:47.8405197Z       },
2025-12-10T09:20:47.8405544Z       tokens: { headerPresent: false, cookiePresent: true, headerSource: 'NONE' }
2025-12-10T09:20:47.8405896Z     }
2025-12-10T09:20:47.8405993Z 
2025-12-10T09:20:47.8406109Z       at log (server.js:360:13)
2025-12-10T09:20:47.8406263Z 
2025-12-10T09:20:47.8482860Z   console.error
2025-12-10T09:20:47.8483284Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:47.8483699Z       path: '/logout',
2025-12-10T09:20:47.8483987Z       method: 'POST',
2025-12-10T09:20:47.8484466Z       failureReason: 'CSRF token missing from request header (neither CSRF-Token nor X-CSRF-Token present)',
2025-12-10T09:20:47.8484897Z       session: {
2025-12-10T09:20:47.8485170Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.8485507Z         authenticated: true,
2025-12-10T09:20:47.8485743Z         username: 'admin'
2025-12-10T09:20:47.8485945Z       },
2025-12-10T09:20:47.8486118Z       validation: {
2025-12-10T09:20:47.8486347Z         headerTokenPresent: false,
2025-12-10T09:20:47.8486632Z         cookieTokenPresent: true,
2025-12-10T09:20:47.8486871Z         tokensMatch: false,
2025-12-10T09:20:47.8487122Z         sessionAuthenticated: true,
2025-12-10T09:20:47.8487456Z         allCookiesPresent: [ 'connect.sid', 'csrf-token' ]
2025-12-10T09:20:47.8487738Z       }
2025-12-10T09:20:47.8487895Z     }
2025-12-10T09:20:47.8488000Z 
2025-12-10T09:20:47.8488190Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:47.8488488Z      [90m 413 |[39m         
2025-12-10T09:20:47.8489132Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:47.8490263Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:47.8491101Z      [90m 415 |[39m         
2025-12-10T09:20:47.8491558Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:47.8492174Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:47.8492466Z 
2025-12-10T09:20:47.8492579Z       at error (server.js:414:17)
2025-12-10T09:20:47.8493008Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:47.8493508Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:47.8493889Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:47.8494325Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:47.8494805Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:47.8495168Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:47.8495630Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:47.8496218Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:47.8496948Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:47.8497520Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:47.8497978Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:47.8498366Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:47.8498750Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:47.8498966Z 
2025-12-10T09:20:47.8499054Z   console.log
2025-12-10T09:20:47.8499445Z     === API DEBUG LOG ===
2025-12-10T09:20:47.8499585Z 
2025-12-10T09:20:47.8499801Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:47.8500055Z 
2025-12-10T09:20:47.8500136Z   console.log
2025-12-10T09:20:47.8500331Z     POST /logout - 403 (10ms)
2025-12-10T09:20:47.8500481Z 
2025-12-10T09:20:47.8500681Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:47.8500935Z 
2025-12-10T09:20:47.8503718Z   console.log
2025-12-10T09:20:47.8504288Z     Session: { id: 'QjONfVZPXCPN...', authenticated: true, username: 'admin' }
2025-12-10T09:20:47.8504575Z 
2025-12-10T09:20:47.8504809Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:47.8505065Z 
2025-12-10T09:20:47.8510362Z   console.log
2025-12-10T09:20:47.8510657Z     CSRF: { header: '[MISSING]', cookie: '[PRESENT]' }
2025-12-10T09:20:47.8510873Z 
2025-12-10T09:20:47.8511096Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:47.8511362Z 
2025-12-10T09:20:47.8516498Z   console.log
2025-12-10T09:20:47.8516710Z     ====================
2025-12-10T09:20:47.8516846Z 
2025-12-10T09:20:47.8517075Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:47.8517350Z 
2025-12-10T09:20:47.8560260Z [0mPOST /api/logout [33m403[0m 14.007 ms - 102[0m
2025-12-10T09:20:47.8597379Z   console.log
2025-12-10T09:20:47.8597676Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:47.8597969Z       path: '/logout',
2025-12-10T09:20:47.8598180Z       method: 'POST',
2025-12-10T09:20:47.8598381Z       session: {
2025-12-10T09:20:47.8598656Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.8598967Z         authenticated: true,
2025-12-10T09:20:47.8599480Z         username: 'admin'
2025-12-10T09:20:47.8599750Z       },
2025-12-10T09:20:47.8599918Z       tokens: {
2025-12-10T09:20:47.8600116Z         headerPresent: true,
2025-12-10T09:20:47.8600344Z         cookiePresent: true,
2025-12-10T09:20:47.8600597Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:47.8600818Z       }
2025-12-10T09:20:47.8600976Z     }
2025-12-10T09:20:47.8601080Z 
2025-12-10T09:20:47.8601186Z       at log (server.js:360:13)
2025-12-10T09:20:47.8601551Z 
2025-12-10T09:20:47.8642043Z   console.error
2025-12-10T09:20:47.8642575Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:47.8642985Z       path: '/logout',
2025-12-10T09:20:47.8643261Z       method: 'POST',
2025-12-10T09:20:47.8643747Z       failureReason: 'CSRF token mismatch: header token does not match cookie token',
2025-12-10T09:20:47.8644212Z       session: {
2025-12-10T09:20:47.8644555Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.8644937Z         authenticated: true,
2025-12-10T09:20:47.8645221Z         username: 'admin'
2025-12-10T09:20:47.8645471Z       },
2025-12-10T09:20:47.8645675Z       validation: {
2025-12-10T09:20:47.8645973Z         headerTokenPresent: true,
2025-12-10T09:20:47.8646289Z         cookieTokenPresent: true,
2025-12-10T09:20:47.8646957Z         tokensMatch: false,
2025-12-10T09:20:47.8647223Z         sessionAuthenticated: true,
2025-12-10T09:20:47.8647548Z         allCookiesPresent: [ 'connect.sid', 'csrf-token' ]
2025-12-10T09:20:47.8647847Z       }
2025-12-10T09:20:47.8648007Z     }
2025-12-10T09:20:47.8648099Z 
2025-12-10T09:20:47.8648298Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:47.8648576Z      [90m 413 |[39m         
2025-12-10T09:20:47.8649899Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:47.8650755Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:47.8651081Z      [90m 415 |[39m         
2025-12-10T09:20:47.8651510Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:47.8652082Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:47.8652368Z 
2025-12-10T09:20:47.8652479Z       at error (server.js:414:17)
2025-12-10T09:20:47.8652894Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:47.8653401Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:47.8653790Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:47.8654391Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:47.8654861Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:47.8655346Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:47.8656168Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:47.8656777Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:47.8657155Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:47.8657591Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:47.8658034Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:47.8658425Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:47.8658815Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:47.8659026Z 
2025-12-10T09:20:47.8659119Z   console.log
2025-12-10T09:20:47.8659492Z     === API DEBUG LOG ===
2025-12-10T09:20:47.8659638Z 
2025-12-10T09:20:47.8659851Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:47.8660113Z 
2025-12-10T09:20:47.8660184Z   console.log
2025-12-10T09:20:47.8660380Z     POST /logout - 403 (6ms)
2025-12-10T09:20:47.8660528Z 
2025-12-10T09:20:47.8660741Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:47.8660993Z 
2025-12-10T09:20:47.8663264Z   console.log
2025-12-10T09:20:47.8663860Z     Session: { id: 'QjONfVZPXCPN...', authenticated: true, username: 'admin' }
2025-12-10T09:20:47.8664323Z 
2025-12-10T09:20:47.8664578Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:47.8664858Z 
2025-12-10T09:20:47.8669586Z   console.log
2025-12-10T09:20:47.8670255Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:47.8670599Z 
2025-12-10T09:20:47.8670834Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:47.8671104Z 
2025-12-10T09:20:47.8675372Z   console.log
2025-12-10T09:20:47.8675699Z     ====================
2025-12-10T09:20:47.8675925Z 
2025-12-10T09:20:47.8676302Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:47.8676604Z 
2025-12-10T09:20:47.8686140Z [0mPOST /api/logout [33m403[0m 9.394 ms - 102[0m
2025-12-10T09:20:47.8720901Z   console.log
2025-12-10T09:20:47.8721413Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:47.8722000Z       path: '/commands/history',
2025-12-10T09:20:47.8722398Z       method: 'POST',
2025-12-10T09:20:47.8722669Z       session: {
2025-12-10T09:20:47.8723018Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.8723396Z         authenticated: true,
2025-12-10T09:20:47.8723695Z         username: 'admin'
2025-12-10T09:20:47.8723941Z       },
2025-12-10T09:20:47.8724146Z       tokens: {
2025-12-10T09:20:47.8724374Z         headerPresent: true,
2025-12-10T09:20:47.8724647Z         cookiePresent: true,
2025-12-10T09:20:47.8724958Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:47.8725243Z       }
2025-12-10T09:20:47.8725430Z     }
2025-12-10T09:20:47.8725550Z 
2025-12-10T09:20:47.8725677Z       at log (server.js:360:13)
2025-12-10T09:20:47.8725991Z 
2025-12-10T09:20:47.8726890Z   console.log
2025-12-10T09:20:47.8727291Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:47.8727761Z       path: '/commands/history',
2025-12-10T09:20:47.8728145Z       method: 'POST',
2025-12-10T09:20:47.8728467Z       session: {
2025-12-10T09:20:47.8728794Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.8729102Z         authenticated: true,
2025-12-10T09:20:47.8729636Z         username: 'admin'
2025-12-10T09:20:47.8729868Z       },
2025-12-10T09:20:47.8730248Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:47.8730604Z     }
2025-12-10T09:20:47.8730698Z 
2025-12-10T09:20:47.8730803Z       at log (server.js:441:13)
2025-12-10T09:20:47.8730954Z 
2025-12-10T09:20:47.8742250Z   console.log
2025-12-10T09:20:47.8742651Z     [AUTH] Authentication check: {
2025-12-10T09:20:47.8743065Z       path: '/history',
2025-12-10T09:20:47.8743290Z       method: 'POST',
2025-12-10T09:20:47.8743582Z       sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.8743884Z       hasSession: true,
2025-12-10T09:20:47.8744098Z       authenticated: true,
2025-12-10T09:20:47.8744314Z       username: 'admin',
2025-12-10T09:20:47.8744515Z       hasCookies: true,
2025-12-10T09:20:47.8744760Z       timestamp: '2025-12-10T09:20:47.873Z'
2025-12-10T09:20:47.8744999Z     }
2025-12-10T09:20:47.8745093Z 
2025-12-10T09:20:47.8745204Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:47.8745359Z 
2025-12-10T09:20:47.8752582Z   console.log
2025-12-10T09:20:47.8753021Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:47.8753347Z 
2025-12-10T09:20:47.8753529Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:47.8753701Z 
2025-12-10T09:20:47.8774629Z   console.log
2025-12-10T09:20:47.8774963Z     === API DEBUG LOG ===
2025-12-10T09:20:47.8775191Z 
2025-12-10T09:20:47.8775533Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:47.8775816Z 
2025-12-10T09:20:47.8780228Z   console.log
2025-12-10T09:20:47.8780614Z     POST /history - 200 (6ms)
2025-12-10T09:20:47.8780875Z 
2025-12-10T09:20:47.8781243Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:47.8781527Z 
2025-12-10T09:20:47.8785884Z   console.log
2025-12-10T09:20:47.8786462Z     Session: { id: 'QjONfVZPXCPN...', authenticated: true, username: 'admin' }
2025-12-10T09:20:47.8786859Z 
2025-12-10T09:20:47.8787095Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:47.8787554Z 
2025-12-10T09:20:47.8791805Z   console.log
2025-12-10T09:20:47.8792243Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:47.8792586Z 
2025-12-10T09:20:47.8792887Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:47.8793181Z 
2025-12-10T09:20:47.8796959Z   console.log
2025-12-10T09:20:47.8797278Z     ====================
2025-12-10T09:20:47.8797493Z 
2025-12-10T09:20:47.8797867Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:47.8798166Z 
2025-12-10T09:20:47.8805571Z [0mPOST /api/commands/history [32m200[0m 9.370 ms - 16[0m
2025-12-10T09:20:47.8837412Z   console.log
2025-12-10T09:20:47.8837920Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:47.8838508Z       path: '/commands/history',
2025-12-10T09:20:47.8838891Z       method: 'POST',
2025-12-10T09:20:47.8839138Z       session: {
2025-12-10T09:20:47.8839678Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.8840077Z         authenticated: true,
2025-12-10T09:20:47.8840365Z         username: 'admin'
2025-12-10T09:20:47.8840611Z       },
2025-12-10T09:20:47.8840808Z       tokens: {
2025-12-10T09:20:47.8841044Z         headerPresent: true,
2025-12-10T09:20:47.8841320Z         cookiePresent: true,
2025-12-10T09:20:47.8841624Z         headerSource: 'X-CSRF-Token'
2025-12-10T09:20:47.8841902Z       }
2025-12-10T09:20:47.8842091Z     }
2025-12-10T09:20:47.8842204Z 
2025-12-10T09:20:47.8842345Z       at log (server.js:360:13)
2025-12-10T09:20:47.8842538Z 
2025-12-10T09:20:47.8845981Z   console.log
2025-12-10T09:20:47.8846637Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:47.8847114Z       path: '/commands/history',
2025-12-10T09:20:47.8847493Z       method: 'POST',
2025-12-10T09:20:47.8847716Z       session: {
2025-12-10T09:20:47.8848015Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.8848347Z         authenticated: true,
2025-12-10T09:20:47.8848592Z         username: 'admin'
2025-12-10T09:20:47.8848816Z       },
2025-12-10T09:20:47.8849429Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:47.8849892Z     }
2025-12-10T09:20:47.8849994Z 
2025-12-10T09:20:47.8850115Z       at log (server.js:441:13)
2025-12-10T09:20:47.8850461Z 
2025-12-10T09:20:47.8866297Z   console.log
2025-12-10T09:20:47.8866943Z     [AUTH] Authentication check: {
2025-12-10T09:20:47.8867356Z       path: '/history',
2025-12-10T09:20:47.8867699Z       method: 'POST',
2025-12-10T09:20:47.8868076Z       sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.8868387Z       hasSession: true,
2025-12-10T09:20:47.8868596Z       authenticated: true,
2025-12-10T09:20:47.8868815Z       username: 'admin',
2025-12-10T09:20:47.8869028Z       hasCookies: true,
2025-12-10T09:20:47.8869571Z       timestamp: '2025-12-10T09:20:47.884Z'
2025-12-10T09:20:47.8869821Z     }
2025-12-10T09:20:47.8869923Z 
2025-12-10T09:20:47.8870030Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:47.8870199Z 
2025-12-10T09:20:47.8883675Z   console.log
2025-12-10T09:20:47.8884155Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:47.8884483Z 
2025-12-10T09:20:47.8884662Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:47.8884919Z 
2025-12-10T09:20:47.8895460Z   console.log
2025-12-10T09:20:47.8895940Z     === API DEBUG LOG ===
2025-12-10T09:20:47.8896182Z 
2025-12-10T09:20:47.8896558Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:47.8896961Z 
2025-12-10T09:20:47.8903191Z   console.log
2025-12-10T09:20:47.8903596Z     POST /history - 200 (7ms)
2025-12-10T09:20:47.8903885Z 
2025-12-10T09:20:47.8904303Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:47.8904779Z 
2025-12-10T09:20:47.8909357Z   console.log
2025-12-10T09:20:47.8909968Z     Session: { id: 'QjONfVZPXCPN...', authenticated: true, username: 'admin' }
2025-12-10T09:20:47.8910364Z 
2025-12-10T09:20:47.8910618Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:47.8911104Z 
2025-12-10T09:20:47.8914879Z   console.log
2025-12-10T09:20:47.8915329Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:47.8915667Z 
2025-12-10T09:20:47.8915986Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:47.8916286Z 
2025-12-10T09:20:47.8919855Z   console.log
2025-12-10T09:20:47.8920224Z     ====================
2025-12-10T09:20:47.8920470Z 
2025-12-10T09:20:47.8920863Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:47.8921313Z 
2025-12-10T09:20:47.8929881Z [0mPOST /api/commands/history [32m200[0m 9.978 ms - 16[0m
2025-12-10T09:20:47.8973324Z   console.log
2025-12-10T09:20:47.8973751Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:47.8974228Z       path: '/commands/history',
2025-12-10T09:20:47.8974616Z       method: 'POST',
2025-12-10T09:20:47.8974942Z       session: {
2025-12-10T09:20:47.8975398Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.8975961Z         authenticated: true,
2025-12-10T09:20:47.8976330Z         username: 'admin'
2025-12-10T09:20:47.8976658Z       },
2025-12-10T09:20:47.8976922Z       tokens: {
2025-12-10T09:20:47.8977143Z         headerPresent: true,
2025-12-10T09:20:47.8977380Z         cookiePresent: true,
2025-12-10T09:20:47.8977628Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:47.8977860Z       }
2025-12-10T09:20:47.8978012Z     }
2025-12-10T09:20:47.8978110Z 
2025-12-10T09:20:47.8978333Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.8978605Z 
2025-12-10T09:20:47.8980989Z   console.log
2025-12-10T09:20:47.8981408Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:47.8981875Z       path: '/commands/history',
2025-12-10T09:20:47.8982221Z       method: 'POST',
2025-12-10T09:20:47.8982425Z       session: {
2025-12-10T09:20:47.8982706Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.8983041Z         authenticated: true,
2025-12-10T09:20:47.8983270Z         username: 'admin'
2025-12-10T09:20:47.8983464Z       },
2025-12-10T09:20:47.8983802Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:47.8984153Z     }
2025-12-10T09:20:47.8984422Z 
2025-12-10T09:20:47.8984666Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.8984937Z 
2025-12-10T09:20:47.8993283Z   console.log
2025-12-10T09:20:47.8993664Z     [AUTH] Authentication check: {
2025-12-10T09:20:47.8994075Z       path: '/history',
2025-12-10T09:20:47.8994391Z       method: 'POST',
2025-12-10T09:20:47.8994698Z       sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.8994998Z       hasSession: true,
2025-12-10T09:20:47.8995213Z       authenticated: true,
2025-12-10T09:20:47.8995429Z       username: 'admin',
2025-12-10T09:20:47.8995650Z       hasCookies: true,
2025-12-10T09:20:47.8995887Z       timestamp: '2025-12-10T09:20:47.898Z'
2025-12-10T09:20:47.8996141Z     }
2025-12-10T09:20:47.8996244Z 
2025-12-10T09:20:47.8996467Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.8996733Z 
2025-12-10T09:20:47.9004325Z   console.log
2025-12-10T09:20:47.9004767Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:47.9005087Z 
2025-12-10T09:20:47.9005395Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9005664Z 
2025-12-10T09:20:47.9015367Z   console.log
2025-12-10T09:20:47.9015710Z     === API DEBUG LOG ===
2025-12-10T09:20:47.9015943Z 
2025-12-10T09:20:47.9016312Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9016641Z 
2025-12-10T09:20:47.9022115Z   console.log
2025-12-10T09:20:47.9022462Z     POST /history - 200 (5ms)
2025-12-10T09:20:47.9022713Z 
2025-12-10T09:20:47.9023090Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9023384Z 
2025-12-10T09:20:47.9028494Z   console.log
2025-12-10T09:20:47.9029080Z     Session: { id: 'QjONfVZPXCPN...', authenticated: true, username: 'admin' }
2025-12-10T09:20:47.9029714Z 
2025-12-10T09:20:47.9029951Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9030233Z 
2025-12-10T09:20:47.9035176Z   console.log
2025-12-10T09:20:47.9035620Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:47.9035957Z 
2025-12-10T09:20:47.9036258Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9036526Z 
2025-12-10T09:20:47.9041668Z   console.log
2025-12-10T09:20:47.9041984Z     ====================
2025-12-10T09:20:47.9042206Z 
2025-12-10T09:20:47.9042575Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9042874Z 
2025-12-10T09:20:47.9075226Z [0mPOST /api/commands/history [32m200[0m 8.977 ms - 16[0m
2025-12-10T09:20:47.9107018Z   console.log
2025-12-10T09:20:47.9107439Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:47.9107895Z       path: '/logout',
2025-12-10T09:20:47.9108175Z       method: 'POST',
2025-12-10T09:20:47.9108380Z       session: {
2025-12-10T09:20:47.9108658Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.9108975Z         authenticated: true,
2025-12-10T09:20:47.9109458Z         username: 'admin'
2025-12-10T09:20:47.9109673Z       },
2025-12-10T09:20:47.9109840Z       tokens: {
2025-12-10T09:20:47.9110030Z         headerPresent: true,
2025-12-10T09:20:47.9110267Z         cookiePresent: true,
2025-12-10T09:20:47.9110518Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:47.9110752Z       }
2025-12-10T09:20:47.9110905Z     }
2025-12-10T09:20:47.9111009Z 
2025-12-10T09:20:47.9111116Z       at log (server.js:360:13)
2025-12-10T09:20:47.9111268Z 
2025-12-10T09:20:47.9206176Z   console.error
2025-12-10T09:20:47.9206598Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:47.9207059Z       path: '/logout',
2025-12-10T09:20:47.9207520Z       method: 'POST',
2025-12-10T09:20:47.9208071Z       failureReason: 'CSRF token mismatch: header token does not match cookie token',
2025-12-10T09:20:47.9208568Z       session: {
2025-12-10T09:20:47.9208925Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.9209761Z         authenticated: true,
2025-12-10T09:20:47.9210054Z         username: 'admin'
2025-12-10T09:20:47.9210307Z       },
2025-12-10T09:20:47.9210518Z       validation: {
2025-12-10T09:20:47.9210803Z         headerTokenPresent: true,
2025-12-10T09:20:47.9211123Z         cookieTokenPresent: true,
2025-12-10T09:20:47.9211411Z         tokensMatch: false,
2025-12-10T09:20:47.9211719Z         sessionAuthenticated: true,
2025-12-10T09:20:47.9212118Z         allCookiesPresent: [ 'connect.sid', 'csrf-token' ]
2025-12-10T09:20:47.9212453Z       }
2025-12-10T09:20:47.9212650Z     }
2025-12-10T09:20:47.9212772Z 
2025-12-10T09:20:47.9213020Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:47.9213369Z      [90m 413 |[39m         
2025-12-10T09:20:47.9214601Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:47.9215871Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:47.9216282Z      [90m 415 |[39m         
2025-12-10T09:20:47.9216810Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:47.9217530Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:47.9217840Z 
2025-12-10T09:20:47.9218063Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9218435Z       at error (server.js:414:17)
2025-12-10T09:20:47.9218848Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:47.9219506Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:47.9220079Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:47.9220523Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:47.9221376Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:47.9222014Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:47.9222464Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:47.9222949Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:47.9223333Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:47.9223765Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:47.9224203Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:47.9224588Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:47.9224963Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:47.9225179Z 
2025-12-10T09:20:47.9225276Z   console.log
2025-12-10T09:20:47.9225467Z     === API DEBUG LOG ===
2025-12-10T09:20:47.9225599Z 
2025-12-10T09:20:47.9225816Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:47.9226078Z 
2025-12-10T09:20:47.9226151Z   console.log
2025-12-10T09:20:47.9226350Z     POST /logout - 403 (12ms)
2025-12-10T09:20:47.9226511Z 
2025-12-10T09:20:47.9226726Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:47.9227092Z 
2025-12-10T09:20:47.9227832Z   console.log
2025-12-10T09:20:47.9228342Z     Session: { id: 'QjONfVZPXCPN...', authenticated: true, username: 'admin' }
2025-12-10T09:20:47.9228618Z 
2025-12-10T09:20:47.9228835Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:47.9229090Z 
2025-12-10T09:20:47.9235171Z   console.log
2025-12-10T09:20:47.9235645Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:47.9236002Z 
2025-12-10T09:20:47.9236357Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:47.9236629Z 
2025-12-10T09:20:47.9241901Z   console.log
2025-12-10T09:20:47.9242232Z     ====================
2025-12-10T09:20:47.9242659Z 
2025-12-10T09:20:47.9242994Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:47.9243271Z 
2025-12-10T09:20:47.9249943Z [0mPOST /api/logout [33m403[0m 15.007 ms - 102[0m
2025-12-10T09:20:47.9281891Z   console.log
2025-12-10T09:20:47.9282409Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:47.9283001Z       path: '/commands/history',
2025-12-10T09:20:47.9283400Z       method: 'POST',
2025-12-10T09:20:47.9283643Z       session: {
2025-12-10T09:20:47.9284008Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.9284392Z         authenticated: true,
2025-12-10T09:20:47.9284678Z         username: 'admin'
2025-12-10T09:20:47.9284923Z       },
2025-12-10T09:20:47.9285145Z       tokens: {
2025-12-10T09:20:47.9285383Z         headerPresent: true,
2025-12-10T09:20:47.9285655Z         cookiePresent: true,
2025-12-10T09:20:47.9285950Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:47.9286230Z       }
2025-12-10T09:20:47.9286428Z     }
2025-12-10T09:20:47.9286549Z 
2025-12-10T09:20:47.9286832Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9287166Z 
2025-12-10T09:20:47.9288995Z   console.log
2025-12-10T09:20:47.9289613Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:47.9290093Z       path: '/commands/history',
2025-12-10T09:20:47.9290372Z       method: 'POST',
2025-12-10T09:20:47.9290588Z       session: {
2025-12-10T09:20:47.9290863Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.9291166Z         authenticated: true,
2025-12-10T09:20:47.9291391Z         username: 'admin'
2025-12-10T09:20:47.9291586Z       },
2025-12-10T09:20:47.9291917Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:47.9292465Z     }
2025-12-10T09:20:47.9292564Z 
2025-12-10T09:20:47.9292782Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9293043Z 
2025-12-10T09:20:47.9301291Z   console.log
2025-12-10T09:20:47.9301704Z     [AUTH] Authentication check: {
2025-12-10T09:20:47.9302108Z       path: '/history',
2025-12-10T09:20:47.9302412Z       method: 'POST',
2025-12-10T09:20:47.9302709Z       sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.9303015Z       hasSession: true,
2025-12-10T09:20:47.9303225Z       authenticated: true,
2025-12-10T09:20:47.9303433Z       username: 'admin',
2025-12-10T09:20:47.9303633Z       hasCookies: true,
2025-12-10T09:20:47.9303876Z       timestamp: '2025-12-10T09:20:47.928Z'
2025-12-10T09:20:47.9304113Z     }
2025-12-10T09:20:47.9304206Z 
2025-12-10T09:20:47.9304417Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9304674Z 
2025-12-10T09:20:47.9312392Z   console.log
2025-12-10T09:20:47.9312828Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:47.9313155Z 
2025-12-10T09:20:47.9313483Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9313767Z 
2025-12-10T09:20:47.9322368Z   console.log
2025-12-10T09:20:47.9322710Z     === API DEBUG LOG ===
2025-12-10T09:20:47.9322962Z 
2025-12-10T09:20:47.9323339Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9323624Z 
2025-12-10T09:20:47.9330533Z   console.log
2025-12-10T09:20:47.9331033Z     POST /history - 200 (5ms)
2025-12-10T09:20:47.9331298Z 
2025-12-10T09:20:47.9331662Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9332029Z 
2025-12-10T09:20:47.9340177Z   console.log
2025-12-10T09:20:47.9341002Z     Session: { id: 'QjONfVZPXCPN...', authenticated: true, username: 'admin' }
2025-12-10T09:20:47.9341467Z 
2025-12-10T09:20:47.9341844Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9342292Z 
2025-12-10T09:20:47.9349472Z   console.log
2025-12-10T09:20:47.9350071Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:47.9350413Z 
2025-12-10T09:20:47.9350979Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9351273Z 
2025-12-10T09:20:47.9359080Z   console.log
2025-12-10T09:20:47.9359601Z     ====================
2025-12-10T09:20:47.9359827Z 
2025-12-10T09:20:47.9360174Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9360456Z 
2025-12-10T09:20:47.9367795Z [0mPOST /api/commands/history [32m200[0m 9.453 ms - 16[0m
2025-12-10T09:20:47.9402311Z   console.log
2025-12-10T09:20:47.9402793Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:47.9403312Z       path: '/commands/history',
2025-12-10T09:20:47.9403921Z       method: 'POST',
2025-12-10T09:20:47.9404310Z       session: {
2025-12-10T09:20:47.9404838Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.9405375Z         authenticated: true,
2025-12-10T09:20:47.9405769Z         username: 'admin'
2025-12-10T09:20:47.9406123Z       },
2025-12-10T09:20:47.9406412Z       tokens: {
2025-12-10T09:20:47.9406740Z         headerPresent: true,
2025-12-10T09:20:47.9407124Z         cookiePresent: true,
2025-12-10T09:20:47.9407556Z         headerSource: 'X-CSRF-Token'
2025-12-10T09:20:47.9407955Z       }
2025-12-10T09:20:47.9408215Z     }
2025-12-10T09:20:47.9408380Z 
2025-12-10T09:20:47.9408758Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9409504Z 
2025-12-10T09:20:47.9412695Z   console.log
2025-12-10T09:20:47.9413334Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:47.9413814Z       path: '/commands/history',
2025-12-10T09:20:47.9414274Z       method: 'POST',
2025-12-10T09:20:47.9414611Z       session: {
2025-12-10T09:20:47.9415041Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.9415826Z         authenticated: true,
2025-12-10T09:20:47.9416221Z         username: 'admin'
2025-12-10T09:20:47.9416613Z       },
2025-12-10T09:20:47.9417208Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:47.9417840Z     }
2025-12-10T09:20:47.9418022Z 
2025-12-10T09:20:47.9418428Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9418920Z 
2025-12-10T09:20:47.9425614Z   console.log
2025-12-10T09:20:47.9426541Z     [AUTH] Authentication check: {
2025-12-10T09:20:47.9427003Z       path: '/history',
2025-12-10T09:20:47.9427374Z       method: 'POST',
2025-12-10T09:20:47.9427907Z       sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.9428455Z       hasSession: true,
2025-12-10T09:20:47.9428742Z       authenticated: true,
2025-12-10T09:20:47.9428964Z       username: 'admin',
2025-12-10T09:20:47.9429406Z       hasCookies: true,
2025-12-10T09:20:47.9429682Z       timestamp: '2025-12-10T09:20:47.941Z'
2025-12-10T09:20:47.9429970Z     }
2025-12-10T09:20:47.9430065Z 
2025-12-10T09:20:47.9430297Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9430571Z 
2025-12-10T09:20:47.9437358Z   console.log
2025-12-10T09:20:47.9437694Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:47.9437907Z 
2025-12-10T09:20:47.9438136Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9438409Z 
2025-12-10T09:20:47.9445935Z   console.log
2025-12-10T09:20:47.9446158Z     === API DEBUG LOG ===
2025-12-10T09:20:47.9446303Z 
2025-12-10T09:20:47.9446537Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9446804Z 
2025-12-10T09:20:47.9452876Z   console.log
2025-12-10T09:20:47.9453112Z     POST /history - 200 (5ms)
2025-12-10T09:20:47.9453280Z 
2025-12-10T09:20:47.9453512Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9453794Z 
2025-12-10T09:20:47.9460126Z   console.log
2025-12-10T09:20:47.9461577Z     Session: { id: 'QjONfVZPXCPN...', authenticated: true, username: 'admin' }
2025-12-10T09:20:47.9463128Z 
2025-12-10T09:20:47.9463829Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9464345Z 
2025-12-10T09:20:47.9468347Z   console.log
2025-12-10T09:20:47.9468824Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:47.9469373Z 
2025-12-10T09:20:47.9469722Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9470040Z 
2025-12-10T09:20:47.9475021Z   console.log
2025-12-10T09:20:47.9475342Z     ====================
2025-12-10T09:20:47.9475562Z 
2025-12-10T09:20:47.9475919Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9476204Z 
2025-12-10T09:20:47.9514210Z [0mPOST /api/commands/history [32m200[0m 9.033 ms - 16[0m
2025-12-10T09:20:47.9545150Z   console.log
2025-12-10T09:20:47.9545591Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:47.9546019Z       path: '/logout',
2025-12-10T09:20:47.9546356Z       method: 'POST',
2025-12-10T09:20:47.9546556Z       session: {
2025-12-10T09:20:47.9546851Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.9547170Z         authenticated: true,
2025-12-10T09:20:47.9547396Z         username: 'admin'
2025-12-10T09:20:47.9547599Z       },
2025-12-10T09:20:47.9547766Z       tokens: {
2025-12-10T09:20:47.9547960Z         headerPresent: true,
2025-12-10T09:20:47.9548188Z         cookiePresent: true,
2025-12-10T09:20:47.9548429Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:47.9548662Z       }
2025-12-10T09:20:47.9548820Z     }
2025-12-10T09:20:47.9548913Z 
2025-12-10T09:20:47.9549026Z       at log (server.js:360:13)
2025-12-10T09:20:47.9549384Z 
2025-12-10T09:20:47.9631492Z   console.error
2025-12-10T09:20:47.9632029Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:47.9632393Z       path: '/logout',
2025-12-10T09:20:47.9632954Z       method: 'POST',
2025-12-10T09:20:47.9633487Z       failureReason: 'CSRF token mismatch: header token does not match cookie token',
2025-12-10T09:20:47.9633955Z       session: {
2025-12-10T09:20:47.9634304Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.9634702Z         authenticated: true,
2025-12-10T09:20:47.9634985Z         username: 'admin'
2025-12-10T09:20:47.9635234Z       },
2025-12-10T09:20:47.9635444Z       validation: {
2025-12-10T09:20:47.9635718Z         headerTokenPresent: true,
2025-12-10T09:20:47.9636052Z         cookieTokenPresent: true,
2025-12-10T09:20:47.9636360Z         tokensMatch: false,
2025-12-10T09:20:47.9636671Z         sessionAuthenticated: true,
2025-12-10T09:20:47.9637066Z         allCookiesPresent: [ 'connect.sid', 'csrf-token' ]
2025-12-10T09:20:47.9637410Z       }
2025-12-10T09:20:47.9637607Z     }
2025-12-10T09:20:47.9637721Z 
2025-12-10T09:20:47.9637991Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:47.9638342Z      [90m 413 |[39m         
2025-12-10T09:20:47.9639514Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:47.9640482Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:47.9640800Z      [90m 415 |[39m         
2025-12-10T09:20:47.9641225Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:47.9641804Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:47.9642088Z 
2025-12-10T09:20:47.9642304Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9642669Z       at error (server.js:414:17)
2025-12-10T09:20:47.9643074Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:47.9643556Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:47.9643937Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:47.9644379Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:47.9645003Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:47.9645626Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:47.9646412Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:47.9646899Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:47.9647282Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:47.9647721Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:47.9648159Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:47.9648548Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:47.9648922Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:47.9649145Z 
2025-12-10T09:20:47.9649405Z   console.log
2025-12-10T09:20:47.9649599Z     === API DEBUG LOG ===
2025-12-10T09:20:47.9649741Z 
2025-12-10T09:20:47.9649956Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:47.9650212Z 
2025-12-10T09:20:47.9650292Z   console.log
2025-12-10T09:20:47.9650482Z     POST /logout - 403 (10ms)
2025-12-10T09:20:47.9650624Z 
2025-12-10T09:20:47.9650824Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:47.9651077Z 
2025-12-10T09:20:47.9653436Z   console.log
2025-12-10T09:20:47.9654073Z     Session: { id: 'QjONfVZPXCPN...', authenticated: true, username: 'admin' }
2025-12-10T09:20:47.9654509Z 
2025-12-10T09:20:47.9654749Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:47.9655008Z 
2025-12-10T09:20:47.9659603Z   console.log
2025-12-10T09:20:47.9659929Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:47.9660329Z 
2025-12-10T09:20:47.9660562Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:47.9660838Z 
2025-12-10T09:20:47.9665866Z   console.log
2025-12-10T09:20:47.9666198Z     ====================
2025-12-10T09:20:47.9666419Z 
2025-12-10T09:20:47.9666801Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:47.9667090Z 
2025-12-10T09:20:47.9675440Z [0mPOST /api/logout [33m403[0m 13.422 ms - 102[0m
2025-12-10T09:20:47.9710117Z   console.log
2025-12-10T09:20:47.9710620Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:47.9711203Z       path: '/commands/history',
2025-12-10T09:20:47.9711649Z       method: 'POST',
2025-12-10T09:20:47.9711905Z       session: {
2025-12-10T09:20:47.9712253Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.9712634Z         authenticated: true,
2025-12-10T09:20:47.9712913Z         username: 'admin'
2025-12-10T09:20:47.9713180Z       },
2025-12-10T09:20:47.9713587Z       tokens: { headerPresent: false, cookiePresent: true, headerSource: 'NONE' }
2025-12-10T09:20:47.9714020Z     }
2025-12-10T09:20:47.9714143Z 
2025-12-10T09:20:47.9714272Z       at log (server.js:360:13)
2025-12-10T09:20:47.9714464Z 
2025-12-10T09:20:47.9754795Z   console.error
2025-12-10T09:20:47.9755635Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:47.9756176Z       path: '/commands/history',
2025-12-10T09:20:47.9756608Z       method: 'POST',
2025-12-10T09:20:47.9757460Z       failureReason: 'CSRF token missing from request header (neither CSRF-Token nor X-CSRF-Token present)',
2025-12-10T09:20:47.9758259Z       session: {
2025-12-10T09:20:47.9758744Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.9759552Z         authenticated: true,
2025-12-10T09:20:47.9759948Z         username: 'admin'
2025-12-10T09:20:47.9760281Z       },
2025-12-10T09:20:47.9760585Z       validation: {
2025-12-10T09:20:47.9760968Z         headerTokenPresent: false,
2025-12-10T09:20:47.9761448Z         cookieTokenPresent: true,
2025-12-10T09:20:47.9761854Z         tokensMatch: false,
2025-12-10T09:20:47.9762268Z         sessionAuthenticated: true,
2025-12-10T09:20:47.9763215Z         allCookiesPresent: [ 'connect.sid', 'csrf-token' ]
2025-12-10T09:20:47.9763767Z       }
2025-12-10T09:20:47.9764061Z     }
2025-12-10T09:20:47.9764241Z 
2025-12-10T09:20:47.9764578Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:47.9765085Z      [90m 413 |[39m         
2025-12-10T09:20:47.9766249Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:47.9767312Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:47.9767892Z      [90m 415 |[39m         
2025-12-10T09:20:47.9768683Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:47.9770006Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:47.9770527Z 
2025-12-10T09:20:47.9770911Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9771543Z       at error (server.js:414:17)
2025-12-10T09:20:47.9772264Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:47.9773158Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:47.9773894Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:47.9774686Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:47.9775512Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:47.9776146Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:47.9776940Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:47.9777812Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:47.9778772Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:47.9779767Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:47.9780574Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:47.9781238Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:47.9781907Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:47.9782310Z 
2025-12-10T09:20:47.9782479Z   console.log
2025-12-10T09:20:47.9782820Z     === API DEBUG LOG ===
2025-12-10T09:20:47.9783075Z 
2025-12-10T09:20:47.9783479Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:47.9783959Z 
2025-12-10T09:20:47.9784101Z   console.log
2025-12-10T09:20:47.9784484Z     POST /commands/history - 403 (6ms)
2025-12-10T09:20:47.9784804Z 
2025-12-10T09:20:47.9785187Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:47.9785675Z 
2025-12-10T09:20:47.9785824Z   console.log
2025-12-10T09:20:47.9786411Z     Session: { id: 'QjONfVZPXCPN...', authenticated: true, username: 'admin' }
2025-12-10T09:20:47.9786889Z 
2025-12-10T09:20:47.9787293Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:47.9787754Z 
2025-12-10T09:20:47.9792631Z   console.log
2025-12-10T09:20:47.9793363Z     CSRF: { header: '[MISSING]', cookie: '[PRESENT]' }
2025-12-10T09:20:47.9793750Z 
2025-12-10T09:20:47.9794163Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:47.9794659Z 
2025-12-10T09:20:47.9799833Z   console.log
2025-12-10T09:20:47.9800205Z     ====================
2025-12-10T09:20:47.9800446Z 
2025-12-10T09:20:47.9800845Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:47.9801322Z 
2025-12-10T09:20:47.9831205Z [0mPOST /api/commands/history [33m403[0m 10.557 ms - 102[0m
2025-12-10T09:20:47.9866188Z   console.log
2025-12-10T09:20:47.9866612Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:47.9867126Z       path: '/commands/history',
2025-12-10T09:20:47.9867535Z       method: 'POST',
2025-12-10T09:20:47.9867859Z       session: {
2025-12-10T09:20:47.9868570Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.9869100Z         authenticated: true,
2025-12-10T09:20:47.9869772Z         username: 'admin'
2025-12-10T09:20:47.9870114Z       },
2025-12-10T09:20:47.9870390Z       tokens: {
2025-12-10T09:20:47.9870704Z         headerPresent: true,
2025-12-10T09:20:47.9871083Z         cookiePresent: true,
2025-12-10T09:20:47.9871516Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:47.9871910Z       }
2025-12-10T09:20:47.9872173Z     }
2025-12-10T09:20:47.9872336Z 
2025-12-10T09:20:47.9872718Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9873188Z 
2025-12-10T09:20:47.9881342Z   console.log
2025-12-10T09:20:47.9881767Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:47.9882254Z       path: '/commands/history',
2025-12-10T09:20:47.9882644Z       method: 'POST',
2025-12-10T09:20:47.9882977Z       session: {
2025-12-10T09:20:47.9883454Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.9883988Z         authenticated: true,
2025-12-10T09:20:47.9884363Z         username: 'admin'
2025-12-10T09:20:47.9884704Z       },
2025-12-10T09:20:47.9885303Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:47.9885926Z     }
2025-12-10T09:20:47.9886089Z 
2025-12-10T09:20:47.9886479Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9886940Z 
2025-12-10T09:20:47.9887548Z   console.log
2025-12-10T09:20:47.9887926Z     [AUTH] Authentication check: {
2025-12-10T09:20:47.9888321Z       path: '/history',
2025-12-10T09:20:47.9888653Z       method: 'POST',
2025-12-10T09:20:47.9889119Z       sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:47.9890018Z       hasSession: true,
2025-12-10T09:20:47.9890348Z       authenticated: true,
2025-12-10T09:20:47.9890692Z       username: 'admin',
2025-12-10T09:20:47.9891019Z       hasCookies: true,
2025-12-10T09:20:47.9891401Z       timestamp: '2025-12-10T09:20:47.987Z'
2025-12-10T09:20:47.9891774Z     }
2025-12-10T09:20:47.9891927Z 
2025-12-10T09:20:47.9892281Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9892715Z 
2025-12-10T09:20:47.9899961Z   console.log
2025-12-10T09:20:47.9900380Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:47.9900716Z 
2025-12-10T09:20:47.9901086Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9901543Z 
2025-12-10T09:20:47.9909071Z   console.log
2025-12-10T09:20:47.9909552Z     === API DEBUG LOG ===
2025-12-10T09:20:47.9909781Z 
2025-12-10T09:20:47.9910157Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9910619Z 
2025-12-10T09:20:47.9917552Z   console.log
2025-12-10T09:20:47.9918677Z     POST /history - 200 (5ms)
2025-12-10T09:20:47.9918945Z 
2025-12-10T09:20:47.9919524Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9919994Z 
2025-12-10T09:20:47.9924960Z   console.log
2025-12-10T09:20:47.9925844Z     Session: { id: 'QjONfVZPXCPN...', authenticated: true, username: 'admin' }
2025-12-10T09:20:47.9926324Z 
2025-12-10T09:20:47.9926700Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9927160Z 
2025-12-10T09:20:47.9931287Z   console.log
2025-12-10T09:20:47.9931940Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:47.9932288Z 
2025-12-10T09:20:47.9932672Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9933141Z 
2025-12-10T09:20:47.9939141Z   console.log
2025-12-10T09:20:47.9939857Z     ====================
2025-12-10T09:20:47.9940109Z 
2025-12-10T09:20:47.9940502Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:47.9940958Z 
2025-12-10T09:20:47.9947867Z [0mPOST /api/commands/history [32m200[0m 9.309 ms - 16[0m
2025-12-10T09:20:47.9977155Z   console.log
2025-12-10T09:20:47.9977624Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:47.9978136Z       path: '/commands/history',
2025-12-10T09:20:47.9978721Z       method: 'POST',
2025-12-10T09:20:47.9979062Z       session: {
2025-12-10T09:20:48.0005247Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:48.0020407Z         authenticated: true,
2025-12-10T09:20:48.0022891Z         username: 'admin'
2025-12-10T09:20:48.0023482Z       },
2025-12-10T09:20:48.0024484Z       tokens: {
2025-12-10T09:20:48.0024981Z         headerPresent: true,
2025-12-10T09:20:48.0025640Z         cookiePresent: true,
2025-12-10T09:20:48.0026232Z         headerSource: 'X-CSRF-Token'
2025-12-10T09:20:48.0026904Z       }
2025-12-10T09:20:48.0027509Z     }
2025-12-10T09:20:48.0027702Z 
2025-12-10T09:20:48.0028137Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:48.0028626Z 
2025-12-10T09:20:48.0028770Z   console.log
2025-12-10T09:20:48.0029410Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:48.0029947Z       path: '/commands/history',
2025-12-10T09:20:48.0030384Z       method: 'POST',
2025-12-10T09:20:48.0030732Z       session: {
2025-12-10T09:20:48.0031219Z         sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:48.0031797Z         authenticated: true,
2025-12-10T09:20:48.0032198Z         username: 'admin'
2025-12-10T09:20:48.0032556Z       },
2025-12-10T09:20:48.0033167Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:48.0033787Z     }
2025-12-10T09:20:48.0033968Z 
2025-12-10T09:20:48.0034361Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:48.0034838Z 
2025-12-10T09:20:48.0035253Z   console.log
2025-12-10T09:20:48.0035650Z     [AUTH] Authentication check: {
2025-12-10T09:20:48.0036077Z       path: '/history',
2025-12-10T09:20:48.0036440Z       method: 'POST',
2025-12-10T09:20:48.0036934Z       sessionID: 'QjONfVZPXCPNHTXd9bHBDETsTEOpnq3D',
2025-12-10T09:20:48.0037468Z       hasSession: true,
2025-12-10T09:20:48.0037856Z       authenticated: true,
2025-12-10T09:20:48.0038250Z       username: 'admin',
2025-12-10T09:20:48.0038633Z       hasCookies: true,
2025-12-10T09:20:48.0039089Z       timestamp: '2025-12-10T09:20:47.998Z'
2025-12-10T09:20:48.0039747Z     }
2025-12-10T09:20:48.0039909Z 
2025-12-10T09:20:48.0040302Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:48.0040793Z 
2025-12-10T09:20:48.0040926Z   console.log
2025-12-10T09:20:48.0041352Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:48.0041692Z 
2025-12-10T09:20:48.0042086Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:48.0042575Z 
2025-12-10T09:20:48.0042736Z   console.log
2025-12-10T09:20:48.0043048Z     === API DEBUG LOG ===
2025-12-10T09:20:48.0043299Z 
2025-12-10T09:20:48.0043689Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:48.0044177Z 
2025-12-10T09:20:48.0044308Z   console.log
2025-12-10T09:20:48.0044649Z     POST /history - 200 (7ms)
2025-12-10T09:20:48.0044910Z 
2025-12-10T09:20:48.0045304Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:48.0045768Z 
2025-12-10T09:20:48.0049385Z   console.log
2025-12-10T09:20:48.0050360Z     Session: { id: 'QjONfVZPXCPN...', authenticated: true, username: 'admin' }
2025-12-10T09:20:48.0051130Z 
2025-12-10T09:20:48.0051800Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:48.0052310Z 
2025-12-10T09:20:48.0057344Z   console.log
2025-12-10T09:20:48.0058169Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:48.0058755Z 
2025-12-10T09:20:48.0059391Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:48.0059896Z 
2025-12-10T09:20:48.0066996Z   console.log
2025-12-10T09:20:48.0067347Z     ====================
2025-12-10T09:20:48.0067604Z 
2025-12-10T09:20:48.0068252Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:48.0068742Z 
2025-12-10T09:20:48.0079976Z [0mPOST /api/commands/history [32m200[0m 10.662 ms - 16[0m
2025-12-10T09:20:48.1159948Z PASS __tests__/middleware/csrf.test.js
2025-12-10T09:20:48.1160519Z   CSRF Protection Middleware
2025-12-10T09:20:48.1160924Z     CSRF token endpoint
2025-12-10T09:20:48.1161609Z       ✓ should return a CSRF token (10 ms)
2025-12-10T09:20:48.1162079Z       ✓ should set csrf-token cookie with correct attributes (9 ms)
2025-12-10T09:20:48.1162460Z     CSRF validation on protected endpoints
2025-12-10T09:20:48.1162872Z       ✓ should skip CSRF validation for /api/login (93 ms)
2025-12-10T09:20:48.1163330Z       ✓ should skip CSRF validation for /api/session GET (10 ms)
2025-12-10T09:20:48.1163815Z       ✓ should skip CSRF validation for /api/csrf-token GET (12 ms)
2025-12-10T09:20:48.1164138Z     CSRF validation failures
2025-12-10T09:20:48.1164616Z       ✓ should return 403 when CSRF token is missing on protected POST endpoint (20 ms)
2025-12-10T09:20:48.1165196Z       ✓ should return 403 when CSRF header is missing but cookie is present (20 ms)
2025-12-10T09:20:48.1165677Z       ✓ should return 403 when CSRF token is invalid (13 ms)
2025-12-10T09:20:48.1165969Z     CSRF validation success
2025-12-10T09:20:48.1166447Z       ✓ should pass CSRF validation when valid token is provided in CSRF-Token header (11 ms)
2025-12-10T09:20:48.1167094Z       ✓ should pass CSRF validation when valid token is provided in X-CSRF-Token header (12 ms)
2025-12-10T09:20:48.1167485Z     CSRF validation logging
2025-12-10T09:20:48.1167878Z       ✓ should log CSRF validation success for protected endpoints (14 ms)
2025-12-10T09:20:48.1168675Z       ✓ should log CSRF validation failure details (17 ms)
2025-12-10T09:20:48.1169111Z       ✓ should log session details in CSRF validation logs (12 ms)
2025-12-10T09:20:48.1169868Z       ✓ should log token presence and header source (14 ms)
2025-12-10T09:20:48.1170378Z       ✓ should log specific failure reason when CSRF validation fails (16 ms)
2025-12-10T09:20:48.1170956Z       ✓ should log missing header as failure reason when session is authenticated (15 ms)
2025-12-10T09:20:48.1171502Z       ✓ should support both CSRF-Token and X-CSRF-Token headers (25 ms)
2025-12-10T09:20:48.1171759Z 
2025-12-10T09:20:48.2032797Z   console.log
2025-12-10T09:20:48.2033864Z     [TestPlugin] Configured: { enabled: true, baseUrl: 'http://localhost:8080', hasToken: true }
2025-12-10T09:20:48.2034471Z 
2025-12-10T09:20:48.2034937Z       at BasePluginAdapter.log [as configure] (services/adapters/baseAdapter.js:47:17)
2025-12-10T09:20:48.2035491Z 
2025-12-10T09:20:48.2061435Z   console.log
2025-12-10T09:20:48.2062470Z     [TestPlugin] Configured: { enabled: true, baseUrl: 'http://localhost:8080', hasToken: false }
2025-12-10T09:20:48.2063102Z 
2025-12-10T09:20:48.2063660Z       at BasePluginAdapter.log [as configure] (services/adapters/baseAdapter.js:47:17)
2025-12-10T09:20:48.2064249Z 
2025-12-10T09:20:48.2073843Z   console.log
2025-12-10T09:20:48.2074738Z     [TestPlugin] Configured: { enabled: false, baseUrl: null, hasToken: false }
2025-12-10T09:20:48.2075629Z 
2025-12-10T09:20:48.2076132Z       at BasePluginAdapter.log [as configure] (services/adapters/baseAdapter.js:47:17)
2025-12-10T09:20:48.2076544Z 
2025-12-10T09:20:48.2081980Z   console.log
2025-12-10T09:20:48.2082387Z     [TestPlugin] Adapter is disabled
2025-12-10T09:20:48.2082684Z 
2025-12-10T09:20:48.2083134Z       at BasePluginAdapter.log [as initialize] (services/adapters/baseAdapter.js:61:21)
2025-12-10T09:20:48.2083480Z 
2025-12-10T09:20:48.2092807Z   console.log
2025-12-10T09:20:48.2093541Z     [TestPlugin] Configured: { enabled: true, baseUrl: 'http://localhost:8080', hasToken: false }
2025-12-10T09:20:48.2094042Z 
2025-12-10T09:20:48.2094325Z       at BasePluginAdapter.log [as configure] (services/adapters/baseAdapter.js:47:17)
2025-12-10T09:20:48.2094630Z 
2025-12-10T09:20:48.2108021Z   console.log
2025-12-10T09:20:48.2109078Z     [TestPlugin] Configured: { enabled: true, baseUrl: 'http://localhost:8080', hasToken: false }
2025-12-10T09:20:48.2109627Z 
2025-12-10T09:20:48.2109911Z       at BasePluginAdapter.log [as configure] (services/adapters/baseAdapter.js:47:17)
2025-12-10T09:20:48.2110222Z 
2025-12-10T09:20:48.2123356Z   console.log
2025-12-10T09:20:48.2124083Z     [TestPlugin] Configured: { enabled: true, baseUrl: 'http://localhost:8080', hasToken: false }
2025-12-10T09:20:48.2124569Z 
2025-12-10T09:20:48.2124843Z       at BasePluginAdapter.log [as configure] (services/adapters/baseAdapter.js:47:17)
2025-12-10T09:20:48.2125144Z 
2025-12-10T09:20:51.2169476Z PASS __tests__/services/adapters/baseAdapter.test.js
2025-12-10T09:20:51.2170093Z   BasePluginAdapter
2025-12-10T09:20:51.2170462Z     constructor
2025-12-10T09:20:51.2171199Z       ✓ should create adapter with plugin name (1 ms)
2025-12-10T09:20:51.2171824Z       ✓ should set default configuration (1 ms)
2025-12-10T09:20:51.2172493Z       ✓ should throw error if no plugin name provided (11 ms)
2025-12-10T09:20:51.2172804Z     configure
2025-12-10T09:20:51.2173083Z       ✓ should update configuration (3 ms)
2025-12-10T09:20:51.2173469Z       ✓ should throw error if enabled without baseUrl (1 ms)
2025-12-10T09:20:51.2173852Z       ✓ should throw error for invalid config (1 ms)
2025-12-10T09:20:51.2174114Z     initialize
2025-12-10T09:20:51.2174388Z       ✓ should initialize when enabled (1 ms)
2025-12-10T09:20:51.2174752Z       ✓ should not initialize when disabled (2 ms)
2025-12-10T09:20:51.2175014Z     makeRequest
2025-12-10T09:20:51.2175299Z       ✓ should make successful GET request (1 ms)
2025-12-10T09:20:51.2175681Z       ✓ should throw error if adapter not ready (2 ms)
2025-12-10T09:20:51.2176421Z       ✓ should retry on network error (3003 ms)
2025-12-10T09:20:51.2176602Z 
2025-12-10T09:20:51.4573348Z   console.error
2025-12-10T09:20:51.4574372Z     Error previewing backup: Error: Backup file not found
2025-12-10T09:20:51.4576007Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/backups.test.js:204:59)
2025-12-10T09:20:51.4578071Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:51.4579436Z         at new Promise (<anonymous>)
2025-12-10T09:20:51.4580209Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:51.4581198Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:51.4582059Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:51.4583326Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:51.4585019Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:51.4586853Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:51.4588696Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:51.4590560Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:51.4592638Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:51.4595475Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:51.4597425Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:51.4599133Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:51.4600969Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:51.4601823Z 
2025-12-10T09:20:51.4602409Z     [0m [90m 104 |[39m         res[33m.[39mjson(preview)[33m;[39m
2025-12-10T09:20:51.4603086Z      [90m 105 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:51.4604163Z     [31m[1m>[22m[39m[90m 106 |[39m         console[33m.[39merror([32m'Error previewing backup:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:51.4604999Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:51.4606314Z      [90m 107 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ error[33m:[39m [32m'Failed to preview backup: '[39m [33m+[39m error[33m.[39mmessage })[33m;[39m
2025-12-10T09:20:51.4607220Z      [90m 108 |[39m     }
2025-12-10T09:20:51.4607668Z      [90m 109 |[39m })[33m;[39m[0m
2025-12-10T09:20:51.4607931Z 
2025-12-10T09:20:51.4608137Z       at error (routes/backups.js:106:17)
2025-12-10T09:20:51.4608413Z 
2025-12-10T09:20:51.4774511Z   console.error
2025-12-10T09:20:51.4775124Z     Error deleting backup: Error: Backup not found
2025-12-10T09:20:51.4776405Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/backups.test.js:280:58)
2025-12-10T09:20:51.4778753Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:51.4780273Z         at new Promise (<anonymous>)
2025-12-10T09:20:51.4781493Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:51.4783343Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:51.4784686Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:51.4786024Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:51.4787904Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:51.4790187Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:51.4792180Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:51.4793948Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:51.4796180Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:51.4798696Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:51.4801001Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:51.4803087Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:51.4804972Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:51.4805934Z 
2025-12-10T09:20:51.4806587Z     [0m [90m 154 |[39m         res[33m.[39mjson(result)[33m;[39m
2025-12-10T09:20:51.4807342Z      [90m 155 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:51.4808524Z     [31m[1m>[22m[39m[90m 156 |[39m         console[33m.[39merror([32m'Error deleting backup:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:51.4809880Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:51.4811363Z      [90m 157 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ error[33m:[39m [32m'Failed to delete backup: '[39m [33m+[39m error[33m.[39mmessage })[33m;[39m
2025-12-10T09:20:51.4812499Z      [90m 158 |[39m     }
2025-12-10T09:20:51.4813036Z      [90m 159 |[39m })[33m;[39m[0m
2025-12-10T09:20:51.4813346Z 
2025-12-10T09:20:51.4813569Z       at error (routes/backups.js:156:17)
2025-12-10T09:20:51.4813879Z 
2025-12-10T09:20:51.5153211Z   console.error
2025-12-10T09:20:51.5155079Z     Error listing backup jobs: Error: Database error
2025-12-10T09:20:51.5156329Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/backups.test.js:452:23)
2025-12-10T09:20:51.5157889Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:397:39
2025-12-10T09:20:51.5159463Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:404:13)
2025-12-10T09:20:51.5160867Z         at Object.mockConstructor (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:148:19)
2025-12-10T09:20:51.5162120Z         at Object.getAllBackupJobs (eval at _createMockFunction (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:566:31), <anonymous>:3:62)
2025-12-10T09:20:51.5163252Z         at getAllBackupJobs (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/routes/backups.js:33:36)
2025-12-10T09:20:51.5164218Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:51.5165222Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:51.5166092Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/backups.test.js:24:61)
2025-12-10T09:20:51.5167042Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:51.5167997Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:51.5168915Z         at Route.dispatch (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/route.js:119:3)
2025-12-10T09:20:51.5170111Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:51.5171051Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:284:15
2025-12-10T09:20:51.5171987Z         at Function.process_params (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:51.5172940Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:51.5173936Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/backups.test.js:29:46)
2025-12-10T09:20:51.5174905Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:51.5176059Z         at trim_prefix (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:51.5177589Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:51.5179452Z         at Function.process_params (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:51.5181137Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:51.5182611Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/backups.test.js:18:9)
2025-12-10T09:20:51.5184310Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:51.5185979Z         at trim_prefix (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:51.5187435Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:51.5189000Z         at Function.process_params (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:51.5191099Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:51.5192606Z         at Function.handle (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:175:3)
2025-12-10T09:20:51.5194201Z         at router (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:47:12)
2025-12-10T09:20:51.5195254Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:51.5196417Z         at trim_prefix (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:51.5197347Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:51.5198552Z         at Function.process_params (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:51.5199709Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:51.5200634Z         at jsonParser (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/body-parser/lib/types/json.js:113:7)
2025-12-10T09:20:51.5201627Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:51.5202602Z         at trim_prefix (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:51.5203470Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:51.5204401Z         at Function.process_params (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:51.5205506Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:51.5206429Z         at expressInit (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/middleware/init.js:40:5)
2025-12-10T09:20:51.5207418Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:51.5208383Z         at trim_prefix (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:51.5209442Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:51.5210378Z         at Function.process_params (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:51.5211315Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:51.5212197Z         at query (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/middleware/query.js:45:5)
2025-12-10T09:20:51.5213160Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:51.5214119Z         at trim_prefix (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:51.5214985Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:51.5216052Z         at Function.process_params (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:51.5216985Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:51.5217902Z         at Function.handle (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/index.js:175:3)
2025-12-10T09:20:51.5218853Z         at Function.handle (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/application.js:181:10)
2025-12-10T09:20:51.5219946Z         at Server.app (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/express.js:39:9)
2025-12-10T09:20:51.5220532Z         at Server.emit (node:events:517:28)
2025-12-10T09:20:51.5220862Z         at parserOnIncoming (node:_http_server:1130:12)
2025-12-10T09:20:51.5221281Z         at HTTPParser.parserOnHeadersComplete (node:_http_common:119:17)
2025-12-10T09:20:51.5221548Z 
2025-12-10T09:20:51.5222107Z     [0m [90m 35 |[39m         res[33m.[39mjson({ jobs[33m,[39m total[33m:[39m jobs[33m.[39mlength })[33m;[39m
2025-12-10T09:20:51.5222590Z      [90m 36 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:51.5223202Z     [31m[1m>[22m[39m[90m 37 |[39m         console[33m.[39merror([32m'Error listing backup jobs:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:51.5223733Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:51.5224374Z      [90m 38 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ error[33m:[39m [32m'Failed to list backup jobs'[39m })[33m;[39m
2025-12-10T09:20:51.5224849Z      [90m 39 |[39m     }
2025-12-10T09:20:51.5225113Z      [90m 40 |[39m })[33m;[39m[0m
2025-12-10T09:20:51.5225269Z 
2025-12-10T09:20:51.5225393Z       at error (routes/backups.js:37:17)
2025-12-10T09:20:51.5225817Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:51.5226272Z       at next (node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:51.5226889Z       at next (__tests__/routes/backups.test.js:24:61)
2025-12-10T09:20:51.5227677Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:51.5228452Z       at next (node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:51.5229311Z       at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
2025-12-10T09:20:51.5230164Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:51.5230697Z       at node_modules/express/lib/router/index.js:284:15
2025-12-10T09:20:51.5231135Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:51.5231577Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:51.5231933Z       at next (__tests__/routes/backups.test.js:29:46)
2025-12-10T09:20:51.5232366Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:51.5232865Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:51.5233251Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:51.5233688Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:51.5234118Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:51.5234467Z       at next (__tests__/routes/backups.test.js:18:9)
2025-12-10T09:20:51.5234899Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:51.5235367Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:51.5235742Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:51.5236376Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:51.5236807Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:51.5237219Z       at Function.handle (node_modules/express/lib/router/index.js:175:3)
2025-12-10T09:20:51.5237640Z       at router (node_modules/express/lib/router/index.js:47:12)
2025-12-10T09:20:51.5238098Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:51.5238557Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:51.5238927Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:51.5239583Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:51.5240026Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:51.5240436Z       at jsonParser (node_modules/body-parser/lib/types/json.js:113:7)
2025-12-10T09:20:51.5240931Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:51.5241408Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:51.5241790Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:51.5242218Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:51.5242658Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:51.5243062Z       at expressInit (node_modules/express/lib/middleware/init.js:40:5)
2025-12-10T09:20:51.5243547Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:51.5244020Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:51.5244393Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:51.5244827Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:51.5245268Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:51.5245646Z       at query (node_modules/express/lib/middleware/query.js:45:5)
2025-12-10T09:20:51.5246252Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:51.5246740Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:51.5247105Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:51.5247524Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:51.5247947Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:51.5248355Z       at Function.handle (node_modules/express/lib/router/index.js:175:3)
2025-12-10T09:20:51.5248803Z       at Function.handle (node_modules/express/lib/application.js:181:10)
2025-12-10T09:20:51.5249423Z       at Server.app (node_modules/express/lib/express.js:39:9)
2025-12-10T09:20:51.5249672Z 
2025-12-10T09:20:51.5249793Z   console.error
2025-12-10T09:20:51.5250025Z     Error creating backup: Error: Disk full
2025-12-10T09:20:51.5250671Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/backups.test.js:463:58)
2025-12-10T09:20:51.5251660Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:51.5252291Z         at new Promise (<anonymous>)
2025-12-10T09:20:51.5252940Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:51.5253903Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:51.5254605Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:51.5255320Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:51.5256418Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:51.5257442Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:51.5258456Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:51.5259602Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:51.5260775Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:51.5262082Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:51.5263156Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:51.5264098Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:51.5265041Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:51.5265544Z 
2025-12-10T09:20:51.5265847Z     [0m [90m 89 |[39m             res[33m.[39mjson(result)[33m;[39m
2025-12-10T09:20:51.5266244Z      [90m 90 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:51.5266847Z     [31m[1m>[22m[39m[90m 91 |[39m             console[33m.[39merror([32m'Error creating backup:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:51.5267377Z      [90m    |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:51.5268268Z      [90m 92 |[39m             res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ error[33m:[39m [32m'Failed to create backup: '[39m [33m+[39m error[33m.[39mmessage })[33m;[39m
2025-12-10T09:20:51.5268861Z      [90m 93 |[39m         }
2025-12-10T09:20:51.5269122Z      [90m 94 |[39m     }[0m
2025-12-10T09:20:51.5269386Z 
2025-12-10T09:20:51.5269511Z       at error (routes/backups.js:91:21)
2025-12-10T09:20:51.5269684Z 
2025-12-10T09:20:51.5423837Z PASS __tests__/routes/backups.test.js
2025-12-10T09:20:51.5424271Z   Backup Routes
2025-12-10T09:20:51.5424611Z     GET /api/backups/jobs
2025-12-10T09:20:51.5425336Z       ✓ should return list of backup jobs (4 ms)
2025-12-10T09:20:51.5426081Z       ✓ should support pagination (3 ms)
2025-12-10T09:20:51.5426630Z     GET /api/backups/jobs/:id
2025-12-10T09:20:51.5427320Z       ✓ should return specific backup job (2 ms)
2025-12-10T09:20:51.5428106Z       ✓ should return 404 if backup not found (2 ms)
2025-12-10T09:20:51.5428687Z     POST /api/backups/create
2025-12-10T09:20:51.5429607Z       ✓ should validate required fields (5 ms)
2025-12-10T09:20:51.5430383Z       ✓ should create backup with valid data (2 ms)
2025-12-10T09:20:51.5431175Z       ✓ should use defaults for optional fields (3 ms)
2025-12-10T09:20:51.5431920Z       ✓ should validate backup type (2 ms)
2025-12-10T09:20:51.5432505Z     GET /api/backups/preview/:id
2025-12-10T09:20:51.5433171Z       ✓ should return backup preview (2 ms)
2025-12-10T09:20:51.5433646Z       ✓ should handle preview errors (20 ms)
2025-12-10T09:20:51.5433959Z     POST /api/backups/restore
2025-12-10T09:20:51.5434342Z       ✓ should validate required fields (3 ms)
2025-12-10T09:20:51.5434791Z       ✓ should restore backup with valid data (3 ms)
2025-12-10T09:20:51.5435252Z       ✓ should default to creating pre-backup (3 ms)
2025-12-10T09:20:51.5435825Z     DELETE /api/backups/:id
2025-12-10T09:20:51.5436170Z       ✓ should delete backup successfully (2 ms)
2025-12-10T09:20:51.5436549Z       ✓ should handle deletion errors (5 ms)
2025-12-10T09:20:51.5436871Z     GET /api/backups/download/:id
2025-12-10T09:20:51.5437231Z       ✓ should return 404 if backup not found (2 ms)
2025-12-10T09:20:51.5437646Z       ✓ should return 404 if file path missing (2 ms)
2025-12-10T09:20:51.5437982Z     GET /api/backups/restore/jobs
2025-12-10T09:20:51.5438344Z       ✓ should return list of restore jobs (1 ms)
2025-12-10T09:20:51.5438675Z     GET /api/backups/restore/jobs/:id
2025-12-10T09:20:51.5439041Z       ✓ should return specific restore job (1 ms)
2025-12-10T09:20:51.5439685Z       ✓ should return 404 if restore job not found (2 ms)
2025-12-10T09:20:51.5440046Z     POST /api/backups/migrate/export
2025-12-10T09:20:51.5440408Z       ✓ should create migration export (2 ms)
2025-12-10T09:20:51.5440792Z       ✓ should work without name parameter (2 ms)
2025-12-10T09:20:51.5441127Z     POST /api/backups/migrate/import
2025-12-10T09:20:51.5441485Z       ✓ should validate required fields (2 ms)
2025-12-10T09:20:51.5441885Z       ✓ should import migration with valid data (2 ms)
2025-12-10T09:20:51.5442230Z     GET /api/backups/migrate/jobs
2025-12-10T09:20:51.5442591Z       ✓ should return list of migration jobs (2 ms)
2025-12-10T09:20:51.5442878Z     Error handling
2025-12-10T09:20:51.5443243Z       ✓ should handle service errors gracefully (19 ms)
2025-12-10T09:20:51.5443649Z       ✓ should handle async service errors (7 ms)
2025-12-10T09:20:51.5443853Z 
2025-12-10T09:20:51.8020808Z   console.error
2025-12-10T09:20:51.8021599Z     [Webhooks] Error updating webhook: Error: Webhook not found
2025-12-10T09:20:51.8022675Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/webhooks.test.js:166:60)
2025-12-10T09:20:51.8023978Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:51.8024815Z         at new Promise (<anonymous>)
2025-12-10T09:20:51.8026224Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:51.8028440Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:51.8030280Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:51.8031587Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:51.8033325Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:51.8035142Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:51.8036999Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:51.8038655Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:51.8040948Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:51.8043240Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:51.8045143Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:51.8047100Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:51.8048752Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:51.8049829Z 
2025-12-10T09:20:51.8050333Z     [0m [90m 177 |[39m             })[33m;[39m
2025-12-10T09:20:51.8050932Z      [90m 178 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:51.8052014Z     [31m[1m>[22m[39m[90m 179 |[39m             console[33m.[39merror([32m'[Webhooks] Error updating webhook:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:51.8052942Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:51.8053988Z      [90m 180 |[39m             res[33m.[39mstatus([35m400[39m)[33m.[39mjson({ error[33m:[39m error[33m.[39mmessage })[33m;[39m
2025-12-10T09:20:51.8054776Z      [90m 181 |[39m         }
2025-12-10T09:20:51.8055195Z      [90m 182 |[39m     }[0m
2025-12-10T09:20:51.8055409Z 
2025-12-10T09:20:51.8055590Z       at error (routes/webhooks.js:179:21)
2025-12-10T09:20:51.8055854Z 
2025-12-10T09:20:51.8139357Z   console.error
2025-12-10T09:20:51.8139861Z     [Webhooks] Error testing webhook: Error: Webhook delivery failed
2025-12-10T09:20:51.8140613Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/webhooks.test.js:210:58)
2025-12-10T09:20:51.8141625Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:51.8142262Z         at new Promise (<anonymous>)
2025-12-10T09:20:51.8142930Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:51.8143932Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:51.8144668Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:51.8145653Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:51.8147423Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:51.8149032Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:51.8150391Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:51.8151328Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:51.8152521Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:51.8153819Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:51.8154890Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:51.8155830Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:51.8156775Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:51.8157473Z 
2025-12-10T09:20:51.8157729Z     [0m [90m 223 |[39m             })[33m;[39m
2025-12-10T09:20:51.8158095Z      [90m 224 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:51.8158749Z     [31m[1m>[22m[39m[90m 225 |[39m             console[33m.[39merror([32m'[Webhooks] Error testing webhook:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:51.8159565Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:51.8160184Z      [90m 226 |[39m             res[33m.[39mstatus([35m400[39m)[33m.[39mjson({ error[33m:[39m error[33m.[39mmessage })[33m;[39m
2025-12-10T09:20:51.8160649Z      [90m 227 |[39m         }
2025-12-10T09:20:51.8160902Z      [90m 228 |[39m     }[0m
2025-12-10T09:20:51.8161039Z 
2025-12-10T09:20:51.8161159Z       at error (routes/webhooks.js:225:21)
2025-12-10T09:20:51.8161338Z 
2025-12-10T09:20:51.8376719Z   console.error
2025-12-10T09:20:51.8377646Z     [InboundWebhooks] Error processing webhook: Error: Webhook not found
2025-12-10T09:20:51.8379113Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/webhooks.test.js:388:21)
2025-12-10T09:20:51.8381266Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:51.8382470Z         at new Promise (<anonymous>)
2025-12-10T09:20:51.8383738Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:51.8385619Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:51.8387015Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:51.8388408Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:51.8390587Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:51.8392957Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:51.8395023Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:51.8397030Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:51.8398856Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:51.8401321Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:51.8403807Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:51.8405879Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:51.8407666Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:51.8409682Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:51.8410641Z 
2025-12-10T09:20:51.8411212Z     [0m [90m 570 |[39m             res[33m.[39mjson(result)[33m;[39m
2025-12-10T09:20:51.8411937Z      [90m 571 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:51.8413543Z     [31m[1m>[22m[39m[90m 572 |[39m             console[33m.[39merror([32m'[InboundWebhooks] Error processing webhook:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:51.8414668Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:51.8415805Z      [90m 573 |[39m             res[33m.[39mstatus([35m400[39m)[33m.[39mjson({ error[33m:[39m error[33m.[39mmessage })[33m;[39m
2025-12-10T09:20:51.8416666Z      [90m 574 |[39m         }
2025-12-10T09:20:51.8417152Z      [90m 575 |[39m     }[0m
2025-12-10T09:20:51.8417402Z 
2025-12-10T09:20:51.8417625Z       at error (routes/webhooks.js:572:21)
2025-12-10T09:20:51.8417939Z 
2025-12-10T09:20:51.8662782Z PASS __tests__/routes/webhooks.test.js
2025-12-10T09:20:51.8663353Z   Webhook Routes
2025-12-10T09:20:51.8663714Z     GET /api/webhooks
2025-12-10T09:20:51.8664393Z       ✓ should return list of webhooks (4 ms)
2025-12-10T09:20:51.8664815Z     POST /api/webhooks
2025-12-10T09:20:51.8665155Z       ✓ should validate required fields (6 ms)
2025-12-10T09:20:51.8665528Z       ✓ should create webhook with valid data (4 ms)
2025-12-10T09:20:51.8665881Z       ✓ should validate URL format (2 ms)
2025-12-10T09:20:51.8666240Z       ✓ should validate event types are array (2 ms)
2025-12-10T09:20:51.8666511Z     PUT /api/webhooks/:id
2025-12-10T09:20:51.8666791Z       ✓ should update webhook (2 ms)
2025-12-10T09:20:51.8667119Z       ✓ should handle webhook not found (21 ms)
2025-12-10T09:20:51.8667389Z     DELETE /api/webhooks/:id
2025-12-10T09:20:51.8667674Z       ✓ should delete webhook (2 ms)
2025-12-10T09:20:51.8667944Z     POST /api/webhooks/:id/test
2025-12-10T09:20:51.8668238Z       ✓ should test webhook (2 ms)
2025-12-10T09:20:51.8668558Z       ✓ should handle test failure (4 ms)
2025-12-10T09:20:51.8668835Z     POST /api/webhooks/:id/trigger
2025-12-10T09:20:51.8669371Z       ✓ should validate event_type is required (2 ms)
2025-12-10T09:20:51.8669842Z       ✓ should trigger webhook with custom event (2 ms)
2025-12-10T09:20:51.8670180Z     GET /api/webhooks/:id/logs
2025-12-10T09:20:51.8670487Z       ✓ should return webhook logs (2 ms)
2025-12-10T09:20:51.8670821Z       ✓ should respect limit parameter (2 ms)
2025-12-10T09:20:51.8671362Z     Inbound Webhooks
2025-12-10T09:20:51.8671613Z       GET /api/webhooks/inbound/all
2025-12-10T09:20:51.8671970Z         ✓ should return list of inbound webhooks (3 ms)
2025-12-10T09:20:51.8672274Z       POST /api/webhooks/inbound
2025-12-10T09:20:51.8672585Z         ✓ should create inbound webhook (3 ms)
2025-12-10T09:20:51.8672927Z         ✓ should validate required fields (2 ms)
2025-12-10T09:20:51.8673265Z       POST /api/webhooks/inbound/:id/regenerate-secret
2025-12-10T09:20:51.8673617Z         ✓ should regenerate secret (1 ms)
2025-12-10T09:20:51.8673890Z       POST /api/webhooks/receive/:id
2025-12-10T09:20:51.8674196Z         ✓ should process webhook (2 ms)
2025-12-10T09:20:51.8674518Z         ✓ should handle invalid webhook (5 ms)
2025-12-10T09:20:51.8674807Z     GET /api/webhooks/templates/all
2025-12-10T09:20:51.8675140Z       ✓ should return integration templates (2 ms)
2025-12-10T09:20:51.8675331Z 
2025-12-10T09:20:52.1283610Z   console.log
2025-12-10T09:20:52.1284062Z     [Session] Cookie configuration: {
2025-12-10T09:20:52.1284470Z       secure: false,
2025-12-10T09:20:52.1284749Z       nodeEnv: 'test',
2025-12-10T09:20:52.1285088Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:52.1285564Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:52.1285946Z     }
2025-12-10T09:20:52.1286090Z 
2025-12-10T09:20:52.1286270Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:52.1286530Z 
2025-12-10T09:20:52.2572141Z   console.log
2025-12-10T09:20:52.2572623Z     [Test] Session middleware initialized (memory store)
2025-12-10T09:20:52.2572856Z 
2025-12-10T09:20:52.2572995Z       at Object.log (server.js:142:13)
2025-12-10T09:20:52.2573168Z 
2025-12-10T09:20:52.2577614Z   console.log
2025-12-10T09:20:52.2578416Z     [Session] Initialization status: {
2025-12-10T09:20:52.2578686Z       nodeEnv: 'test',
2025-12-10T09:20:52.2578908Z       sessionSecretSet: true,
2025-12-10T09:20:52.2579394Z       redisConfigured: false,
2025-12-10T09:20:52.2579706Z       middlewareApplied: true
2025-12-10T09:20:52.2579936Z     }
2025-12-10T09:20:52.2580031Z 
2025-12-10T09:20:52.2580155Z       at Object.log (server.js:155:9)
2025-12-10T09:20:52.2580320Z 
2025-12-10T09:20:52.2584273Z   console.log
2025-12-10T09:20:52.2584671Z     [CSRF] Cookie configuration: {
2025-12-10T09:20:52.2585070Z       secure: false,
2025-12-10T09:20:52.2585282Z       nodeEnv: 'test',
2025-12-10T09:20:52.2585532Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:52.2585868Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:52.2586136Z     }
2025-12-10T09:20:52.2586238Z 
2025-12-10T09:20:52.2586367Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:52.2586555Z 
2025-12-10T09:20:52.2650630Z   console.log
2025-12-10T09:20:52.2651099Z     [CSRF] Token request: {
2025-12-10T09:20:52.2651726Z       sessionID: 'hhJJ6ZMQvx6I0X502DEPEaxRbqAOx19x',
2025-12-10T09:20:52.2652183Z       authenticated: false,
2025-12-10T09:20:52.2652468Z       username: 'NOT_SET',
2025-12-10T09:20:52.2652751Z       hasCookies: false,
2025-12-10T09:20:52.2653060Z       timestamp: '2025-12-10T09:20:52.264Z'
2025-12-10T09:20:52.2653349Z     }
2025-12-10T09:20:52.2653468Z 
2025-12-10T09:20:52.2653598Z       at log (server.js:236:13)
2025-12-10T09:20:52.2653787Z 
2025-12-10T09:20:52.2658841Z   console.log
2025-12-10T09:20:52.2659448Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:52.2660010Z       sessionID: 'hhJJ6ZMQvx6I0X502DEPEaxRbqAOx19x',
2025-12-10T09:20:52.2660348Z       tokenLength: 64,
2025-12-10T09:20:52.2660647Z       tokenPrefix: '06d52a7c...',
2025-12-10T09:20:52.2660955Z       cookieName: 'csrf-token',
2025-12-10T09:20:52.2661427Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:52.2662395Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:52.2662850Z     }
2025-12-10T09:20:52.2662958Z 
2025-12-10T09:20:52.2663081Z       at log (server.js:266:13)
2025-12-10T09:20:52.2663253Z 
2025-12-10T09:20:52.2668809Z   console.log
2025-12-10T09:20:52.2669395Z     === API DEBUG LOG ===
2025-12-10T09:20:52.2669634Z 
2025-12-10T09:20:52.2669929Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:52.2670274Z 
2025-12-10T09:20:52.2675900Z   console.log
2025-12-10T09:20:52.2676346Z     GET /api/csrf-token - 200 (3ms)
2025-12-10T09:20:52.2676672Z 
2025-12-10T09:20:52.2676998Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:52.2677339Z 
2025-12-10T09:20:52.2683677Z   console.log
2025-12-10T09:20:52.2684385Z     Session: { id: 'hhJJ6ZMQvx6I...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:52.2684800Z 
2025-12-10T09:20:52.2685087Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:52.2685441Z 
2025-12-10T09:20:52.2691072Z   console.log
2025-12-10T09:20:52.2691596Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:52.2692001Z 
2025-12-10T09:20:52.2692331Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:52.2692670Z 
2025-12-10T09:20:52.2697877Z   console.log
2025-12-10T09:20:52.2698253Z     ====================
2025-12-10T09:20:52.2698547Z 
2025-12-10T09:20:52.2699004Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:52.2699538Z 
2025-12-10T09:20:52.2709134Z [0mGET /api/csrf-token [32m200[0m 7.575 ms - 80[0m
2025-12-10T09:20:52.2751642Z   console.log
2025-12-10T09:20:52.2752099Z     [CSRF] Token request: {
2025-12-10T09:20:52.2752747Z       sessionID: 'j_SjzAZ3K6iEqY4bx0c2p4813_54xO7R',
2025-12-10T09:20:52.2753195Z       authenticated: false,
2025-12-10T09:20:52.2753524Z       username: 'NOT_SET',
2025-12-10T09:20:52.2754097Z       hasCookies: false,
2025-12-10T09:20:52.2754458Z       timestamp: '2025-12-10T09:20:52.274Z'
2025-12-10T09:20:52.2754806Z     }
2025-12-10T09:20:52.2754941Z 
2025-12-10T09:20:52.2755097Z       at log (server.js:236:13)
2025-12-10T09:20:52.2755311Z 
2025-12-10T09:20:52.2760117Z   console.log
2025-12-10T09:20:52.2760663Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:52.2761310Z       sessionID: 'j_SjzAZ3K6iEqY4bx0c2p4813_54xO7R',
2025-12-10T09:20:52.2761704Z       tokenLength: 64,
2025-12-10T09:20:52.2762025Z       tokenPrefix: '6da60532...',
2025-12-10T09:20:52.2762382Z       cookieName: 'csrf-token',
2025-12-10T09:20:52.2762933Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:52.2763909Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:52.2764466Z     }
2025-12-10T09:20:52.2764598Z 
2025-12-10T09:20:52.2764748Z       at log (server.js:266:13)
2025-12-10T09:20:52.2764966Z 
2025-12-10T09:20:52.2768738Z   console.log
2025-12-10T09:20:52.2769329Z     === API DEBUG LOG ===
2025-12-10T09:20:52.2769637Z 
2025-12-10T09:20:52.2770040Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:52.2770391Z 
2025-12-10T09:20:52.2775946Z   console.log
2025-12-10T09:20:52.2776406Z     GET /api/csrf-token - 200 (2ms)
2025-12-10T09:20:52.2776743Z 
2025-12-10T09:20:52.2777105Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:52.2777445Z 
2025-12-10T09:20:52.2783335Z   console.log
2025-12-10T09:20:52.2784025Z     Session: { id: 'j_SjzAZ3K6iE...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:52.2784506Z 
2025-12-10T09:20:52.2784789Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:52.2785132Z 
2025-12-10T09:20:52.2790958Z   console.log
2025-12-10T09:20:52.2791479Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:52.2791876Z 
2025-12-10T09:20:52.2792221Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:52.2792559Z 
2025-12-10T09:20:52.2798922Z   console.log
2025-12-10T09:20:52.2799678Z     ====================
2025-12-10T09:20:52.2800039Z 
2025-12-10T09:20:52.2800858Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:52.2801580Z 
2025-12-10T09:20:52.2804399Z [0mGET /api/csrf-token [32m200[0m 6.208 ms - 80[0m
2025-12-10T09:20:52.2830822Z   console.log
2025-12-10T09:20:52.2831174Z     [CSRF] Token request: {
2025-12-10T09:20:52.2831663Z       sessionID: 'Wy1_C-Ak2uJWqEjsvvG0Yy0x8keKU1gf',
2025-12-10T09:20:52.2832038Z       authenticated: false,
2025-12-10T09:20:52.2832270Z       username: 'NOT_SET',
2025-12-10T09:20:52.2832487Z       hasCookies: false,
2025-12-10T09:20:52.2832738Z       timestamp: '2025-12-10T09:20:52.282Z'
2025-12-10T09:20:52.2832972Z     }
2025-12-10T09:20:52.2833072Z 
2025-12-10T09:20:52.2833177Z       at log (server.js:236:13)
2025-12-10T09:20:52.2833347Z 
2025-12-10T09:20:52.2838052Z   console.log
2025-12-10T09:20:52.2838468Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:52.2839028Z       sessionID: 'Wy1_C-Ak2uJWqEjsvvG0Yy0x8keKU1gf',
2025-12-10T09:20:52.2839503Z       tokenLength: 64,
2025-12-10T09:20:52.2839757Z       tokenPrefix: 'b9f8378f...',
2025-12-10T09:20:52.2840037Z       cookieName: 'csrf-token',
2025-12-10T09:20:52.2840454Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:52.2841168Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:52.2841562Z     }
2025-12-10T09:20:52.2841662Z 
2025-12-10T09:20:52.2841767Z       at log (server.js:266:13)
2025-12-10T09:20:52.2841922Z 
2025-12-10T09:20:52.2846221Z   console.log
2025-12-10T09:20:52.2846547Z     === API DEBUG LOG ===
2025-12-10T09:20:52.2846768Z 
2025-12-10T09:20:52.2847139Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:52.2847689Z 
2025-12-10T09:20:52.2853905Z   console.log
2025-12-10T09:20:52.2854561Z     GET /api/csrf-token - 200 (2ms)
2025-12-10T09:20:52.2854910Z 
2025-12-10T09:20:52.2855317Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:52.2855814Z 
2025-12-10T09:20:52.2862419Z   console.log
2025-12-10T09:20:52.2863025Z     Session: { id: 'Wy1_C-Ak2uJW...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:52.2863486Z 
2025-12-10T09:20:52.2863749Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:52.2864045Z 
2025-12-10T09:20:52.2868903Z   console.log
2025-12-10T09:20:52.2869529Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:52.2869876Z 
2025-12-10T09:20:52.2870186Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:52.2870481Z 
2025-12-10T09:20:52.2875849Z   console.log
2025-12-10T09:20:52.2876165Z     ====================
2025-12-10T09:20:52.2876381Z 
2025-12-10T09:20:52.2876771Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:52.2877101Z 
2025-12-10T09:20:52.2879978Z [0mGET /api/csrf-token [32m200[0m 5.788 ms - 80[0m
2025-12-10T09:20:52.2939971Z   console.log
2025-12-10T09:20:52.2940430Z     [CSRF] Token request: {
2025-12-10T09:20:52.2941064Z       sessionID: 'SAUlbVvDm2aKavSCKIj9BP2VypYU6e_k',
2025-12-10T09:20:52.2941494Z       authenticated: false,
2025-12-10T09:20:52.2941768Z       username: 'NOT_SET',
2025-12-10T09:20:52.2942028Z       hasCookies: false,
2025-12-10T09:20:52.2942340Z       timestamp: '2025-12-10T09:20:52.293Z'
2025-12-10T09:20:52.2942639Z     }
2025-12-10T09:20:52.2942755Z 
2025-12-10T09:20:52.2942891Z       at log (server.js:236:13)
2025-12-10T09:20:52.2943074Z 
2025-12-10T09:20:52.2946968Z   console.log
2025-12-10T09:20:52.2947480Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:52.2948178Z       sessionID: 'SAUlbVvDm2aKavSCKIj9BP2VypYU6e_k',
2025-12-10T09:20:52.2948546Z       tokenLength: 64,
2025-12-10T09:20:52.2948844Z       tokenPrefix: '3cf37207...',
2025-12-10T09:20:52.2949346Z       cookieName: 'csrf-token',
2025-12-10T09:20:52.2949842Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:52.2950762Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:52.2951153Z     }
2025-12-10T09:20:52.2951246Z 
2025-12-10T09:20:52.2951346Z       at log (server.js:266:13)
2025-12-10T09:20:52.2951496Z 
2025-12-10T09:20:52.2955032Z   console.log
2025-12-10T09:20:52.2955361Z     === API DEBUG LOG ===
2025-12-10T09:20:52.2955596Z 
2025-12-10T09:20:52.2955965Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:52.2956271Z 
2025-12-10T09:20:52.2961989Z   console.log
2025-12-10T09:20:52.2962362Z     GET /api/csrf-token - 200 (2ms)
2025-12-10T09:20:52.2962634Z 
2025-12-10T09:20:52.2962997Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:52.2963287Z 
2025-12-10T09:20:52.2968753Z   console.log
2025-12-10T09:20:52.2969485Z     Session: { id: 'SAUlbVvDm2aK...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:52.2969941Z 
2025-12-10T09:20:52.2970169Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:52.2970428Z 
2025-12-10T09:20:52.2980430Z   console.log
2025-12-10T09:20:52.2980881Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:52.2981230Z 
2025-12-10T09:20:52.2981508Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:52.2981782Z 
2025-12-10T09:20:52.2989139Z   console.log
2025-12-10T09:20:52.2989704Z     ====================
2025-12-10T09:20:52.2989957Z 
2025-12-10T09:20:52.2990361Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:52.2990852Z 
2025-12-10T09:20:52.2993719Z [0mGET /api/csrf-token [32m200[0m 6.155 ms - 80[0m
2025-12-10T09:20:52.3020200Z   console.log
2025-12-10T09:20:52.3020797Z     [CSRF] Token request: {
2025-12-10T09:20:52.3021200Z       sessionID: 'xCGTS4QHYNFnX-HjMmnQ5IyxsjIJln2b',
2025-12-10T09:20:52.3021582Z       authenticated: false,
2025-12-10T09:20:52.3021856Z       username: 'NOT_SET',
2025-12-10T09:20:52.3022114Z       hasCookies: false,
2025-12-10T09:20:52.3022421Z       timestamp: '2025-12-10T09:20:52.301Z'
2025-12-10T09:20:52.3022713Z     }
2025-12-10T09:20:52.3022833Z 
2025-12-10T09:20:52.3022976Z       at log (server.js:236:13)
2025-12-10T09:20:52.3023166Z 
2025-12-10T09:20:52.3027537Z   console.log
2025-12-10T09:20:52.3028049Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:52.3028760Z       sessionID: 'xCGTS4QHYNFnX-HjMmnQ5IyxsjIJln2b',
2025-12-10T09:20:52.3029366Z       tokenLength: 64,
2025-12-10T09:20:52.3029657Z       tokenPrefix: 'eb0d282d...',
2025-12-10T09:20:52.3029968Z       cookieName: 'csrf-token',
2025-12-10T09:20:52.3030438Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:52.3031275Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:52.3031729Z     }
2025-12-10T09:20:52.3031839Z 
2025-12-10T09:20:52.3031965Z       at log (server.js:266:13)
2025-12-10T09:20:52.3032151Z 
2025-12-10T09:20:52.3035251Z   console.log
2025-12-10T09:20:52.3035603Z     === API DEBUG LOG ===
2025-12-10T09:20:52.3035857Z 
2025-12-10T09:20:52.3036222Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:52.3036550Z 
2025-12-10T09:20:52.3042287Z   console.log
2025-12-10T09:20:52.3042674Z     GET /api/csrf-token - 200 (2ms)
2025-12-10T09:20:52.3042954Z 
2025-12-10T09:20:52.3043263Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:52.3043538Z 
2025-12-10T09:20:52.3048860Z   console.log
2025-12-10T09:20:52.3049637Z     Session: { id: 'xCGTS4QHYNFn...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:52.3050047Z 
2025-12-10T09:20:52.3050312Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:52.3050616Z 
2025-12-10T09:20:52.3055739Z   console.log
2025-12-10T09:20:52.3056197Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:52.3056532Z 
2025-12-10T09:20:52.3057058Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:52.3057366Z 
2025-12-10T09:20:52.3062699Z   console.log
2025-12-10T09:20:52.3063037Z     ====================
2025-12-10T09:20:52.3063272Z 
2025-12-10T09:20:52.3063663Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:52.3063992Z 
2025-12-10T09:20:52.3066993Z [0mGET /api/csrf-token [32m200[0m 5.566 ms - 80[0m
2025-12-10T09:20:52.3093681Z   console.log
2025-12-10T09:20:52.3094234Z     [CSRF] Token request: {
2025-12-10T09:20:52.3095466Z       sessionID: 'ud_xq0TtRuNq76BX1UdYzaOf7lHncwtx',
2025-12-10T09:20:52.3096325Z       authenticated: false,
2025-12-10T09:20:52.3096848Z       username: 'NOT_SET',
2025-12-10T09:20:52.3098209Z       hasCookies: false,
2025-12-10T09:20:52.3098681Z       timestamp: '2025-12-10T09:20:52.308Z'
2025-12-10T09:20:52.3099089Z     }
2025-12-10T09:20:52.3099459Z 
2025-12-10T09:20:52.3099642Z       at log (server.js:236:13)
2025-12-10T09:20:52.3099912Z 
2025-12-10T09:20:52.3105295Z   console.log
2025-12-10T09:20:52.3106343Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:52.3107277Z       sessionID: 'ud_xq0TtRuNq76BX1UdYzaOf7lHncwtx',
2025-12-10T09:20:52.3107831Z       tokenLength: 64,
2025-12-10T09:20:52.3108249Z       tokenPrefix: 'e7737ecc...',
2025-12-10T09:20:52.3108683Z       cookieName: 'csrf-token',
2025-12-10T09:20:52.3109540Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:52.3110710Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:52.3111360Z     }
2025-12-10T09:20:52.3111519Z 
2025-12-10T09:20:52.3120370Z       at log (server.js:266:13)
2025-12-10T09:20:52.3120956Z 
2025-12-10T09:20:52.3121153Z   console.log
2025-12-10T09:20:52.3122227Z     === API DEBUG LOG ===
2025-12-10T09:20:52.3122560Z 
2025-12-10T09:20:52.3123085Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:52.3123566Z 
2025-12-10T09:20:52.3123712Z   console.log
2025-12-10T09:20:52.3124094Z     GET /api/csrf-token - 200 (3ms)
2025-12-10T09:20:52.3124354Z 
2025-12-10T09:20:52.3124727Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:52.3125188Z 
2025-12-10T09:20:52.3130425Z   console.log
2025-12-10T09:20:52.3131217Z     Session: { id: 'ud_xq0TtRuNq...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:52.3131871Z 
2025-12-10T09:20:52.3132434Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:52.3133367Z 
2025-12-10T09:20:52.3136709Z   console.log
2025-12-10T09:20:52.3137359Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:52.3137826Z 
2025-12-10T09:20:52.3138354Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:52.3138991Z 
2025-12-10T09:20:52.3143809Z   console.log
2025-12-10T09:20:52.3144359Z     ====================
2025-12-10T09:20:52.3145311Z 
2025-12-10T09:20:52.3146039Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:52.3146538Z 
2025-12-10T09:20:52.3148160Z [0mGET /api/csrf-token [32m200[0m 6.258 ms - 80[0m
2025-12-10T09:20:52.3207254Z   console.log
2025-12-10T09:20:52.3207734Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:52.3208049Z 
2025-12-10T09:20:52.3208228Z       at log (server.js:284:17)
2025-12-10T09:20:52.3208481Z 
2025-12-10T09:20:52.3221036Z   console.log
2025-12-10T09:20:52.3221494Z     [LOGIN] Login attempt: {
2025-12-10T09:20:52.3221889Z       username: 'admin',
2025-12-10T09:20:52.3222394Z       sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.3222793Z       hasSession: true,
2025-12-10T09:20:52.3223074Z       timestamp: '2025-12-10T09:20:52.321Z'
2025-12-10T09:20:52.3223328Z     }
2025-12-10T09:20:52.3223423Z 
2025-12-10T09:20:52.3223543Z       at log (routes/api.js:15:13)
2025-12-10T09:20:52.3223712Z 
2025-12-10T09:20:52.4138727Z   console.log
2025-12-10T09:20:52.4139584Z     [Audit] Event logged: {
2025-12-10T09:20:52.4139987Z       eventType: 'auth.login.success',
2025-12-10T09:20:52.4140331Z       username: 'admin',
2025-12-10T09:20:52.4140658Z       timestamp: '2025-12-10T09:20:52.413Z'
2025-12-10T09:20:52.4140964Z     }
2025-12-10T09:20:52.4141093Z 
2025-12-10T09:20:52.4141281Z       at log (services/auditLog.js:106:17)
2025-12-10T09:20:52.4141521Z 
2025-12-10T09:20:52.4143288Z   console.log
2025-12-10T09:20:52.4143793Z     [LOGIN] Login successful: {
2025-12-10T09:20:52.4144208Z       username: 'admin',
2025-12-10T09:20:52.4144468Z       role: 'viewer',
2025-12-10T09:20:52.4144760Z       sessionID: '[REDACTED]',
2025-12-10T09:20:52.4145055Z       authenticated: true,
2025-12-10T09:20:52.4145355Z       cookieMaxAge: 86399906,
2025-12-10T09:20:52.4145693Z       cookieExpires: 2025-12-11T09:20:52.319Z
2025-12-10T09:20:52.4146007Z     }
2025-12-10T09:20:52.4146128Z 
2025-12-10T09:20:52.4146351Z       at Immediate.log [as _onImmediate] (routes/api.js:64:25)
2025-12-10T09:20:52.4146651Z 
2025-12-10T09:20:52.4148141Z   console.log
2025-12-10T09:20:52.4148524Z     === API DEBUG LOG ===
2025-12-10T09:20:52.4148792Z 
2025-12-10T09:20:52.4149324Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:52.4149687Z 
2025-12-10T09:20:52.4151533Z   console.log
2025-12-10T09:20:52.4151926Z     POST /login - 200 (95ms)
2025-12-10T09:20:52.4152180Z 
2025-12-10T09:20:52.4152528Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:52.4152836Z 
2025-12-10T09:20:52.4154958Z   console.log
2025-12-10T09:20:52.4155551Z     Session: { id: 'dXhI5O6h6F7c...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:52.4155946Z 
2025-12-10T09:20:52.4156392Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:52.4156668Z 
2025-12-10T09:20:52.4158236Z   console.log
2025-12-10T09:20:52.4158676Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:52.4159027Z 
2025-12-10T09:20:52.4159463Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:52.4159739Z 
2025-12-10T09:20:52.4161647Z   console.log
2025-12-10T09:20:52.4161971Z     ====================
2025-12-10T09:20:52.4162195Z 
2025-12-10T09:20:52.4162555Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:52.4162832Z 
2025-12-10T09:20:52.4167754Z [0mPOST /api/login [32m200[0m 99.613 ms - 89[0m
2025-12-10T09:20:52.4195424Z   console.log
2025-12-10T09:20:52.4195762Z     [CSRF] Token request: {
2025-12-10T09:20:52.4196265Z       sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4196583Z       authenticated: true,
2025-12-10T09:20:52.4196811Z       username: 'admin',
2025-12-10T09:20:52.4197040Z       hasCookies: true,
2025-12-10T09:20:52.4197289Z       timestamp: '2025-12-10T09:20:52.418Z'
2025-12-10T09:20:52.4197523Z     }
2025-12-10T09:20:52.4197623Z 
2025-12-10T09:20:52.4197727Z       at log (server.js:236:13)
2025-12-10T09:20:52.4197889Z 
2025-12-10T09:20:52.4202336Z   console.log
2025-12-10T09:20:52.4202747Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:52.4203279Z       sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4203578Z       tokenLength: 64,
2025-12-10T09:20:52.4203816Z       tokenPrefix: 'b40ab5c1...',
2025-12-10T09:20:52.4204076Z       cookieName: 'csrf-token',
2025-12-10T09:20:52.4204466Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:52.4205175Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:52.4205554Z     }
2025-12-10T09:20:52.4205654Z 
2025-12-10T09:20:52.4205754Z       at log (server.js:266:13)
2025-12-10T09:20:52.4205914Z 
2025-12-10T09:20:52.4209759Z   console.log
2025-12-10T09:20:52.4210098Z     === API DEBUG LOG ===
2025-12-10T09:20:52.4210327Z 
2025-12-10T09:20:52.4210712Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:52.4211184Z 
2025-12-10T09:20:52.4216110Z   console.log
2025-12-10T09:20:52.4216497Z     GET /api/csrf-token - 200 (2ms)
2025-12-10T09:20:52.4216784Z 
2025-12-10T09:20:52.4217089Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:52.4217360Z 
2025-12-10T09:20:52.4222684Z   console.log
2025-12-10T09:20:52.4223251Z     Session: { id: 'dXhI5O6h6F7c...', authenticated: true, username: 'admin' }
2025-12-10T09:20:52.4223641Z 
2025-12-10T09:20:52.4223883Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:52.4224145Z 
2025-12-10T09:20:52.4228957Z   console.log
2025-12-10T09:20:52.4229585Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:52.4229941Z 
2025-12-10T09:20:52.4230254Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:52.4230528Z 
2025-12-10T09:20:52.4235322Z   console.log
2025-12-10T09:20:52.4235634Z     ====================
2025-12-10T09:20:52.4235850Z 
2025-12-10T09:20:52.4236211Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:52.4236497Z 
2025-12-10T09:20:52.4242449Z [0mGET /api/csrf-token [32m200[0m 5.518 ms - 80[0m
2025-12-10T09:20:52.4271988Z   console.log
2025-12-10T09:20:52.4272508Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:52.4273120Z       path: '/plugins/install',
2025-12-10T09:20:52.4273444Z       method: 'POST',
2025-12-10T09:20:52.4273693Z       session: {
2025-12-10T09:20:52.4274027Z         sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4274403Z         authenticated: true,
2025-12-10T09:20:52.4274684Z         username: 'admin'
2025-12-10T09:20:52.4274920Z       },
2025-12-10T09:20:52.4275356Z       tokens: {
2025-12-10T09:20:52.4275599Z         headerPresent: true,
2025-12-10T09:20:52.4275869Z         cookiePresent: true,
2025-12-10T09:20:52.4276170Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:52.4276450Z       }
2025-12-10T09:20:52.4276639Z     }
2025-12-10T09:20:52.4276760Z 
2025-12-10T09:20:52.4276970Z       at log (server.js:360:13)
2025-12-10T09:20:52.4277294Z 
2025-12-10T09:20:52.4277918Z   console.log
2025-12-10T09:20:52.4278396Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:52.4278988Z       path: '/plugins/install',
2025-12-10T09:20:52.4279495Z       method: 'POST',
2025-12-10T09:20:52.4279736Z       session: {
2025-12-10T09:20:52.4280057Z         sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4280421Z         authenticated: true,
2025-12-10T09:20:52.4280690Z         username: 'admin'
2025-12-10T09:20:52.4280929Z       },
2025-12-10T09:20:52.4281361Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:52.4281863Z     }
2025-12-10T09:20:52.4281976Z 
2025-12-10T09:20:52.4282095Z       at log (server.js:441:13)
2025-12-10T09:20:52.4282269Z 
2025-12-10T09:20:52.4292077Z   console.log
2025-12-10T09:20:52.4292706Z     [AUTH] Authentication check: {
2025-12-10T09:20:52.4293366Z       path: '/install',
2025-12-10T09:20:52.4293864Z       method: 'POST',
2025-12-10T09:20:52.4294517Z       sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4295153Z       hasSession: true,
2025-12-10T09:20:52.4295650Z       authenticated: true,
2025-12-10T09:20:52.4296161Z       username: 'admin',
2025-12-10T09:20:52.4296673Z       hasCookies: true,
2025-12-10T09:20:52.4297257Z       timestamp: '2025-12-10T09:20:52.427Z'
2025-12-10T09:20:52.4297790Z     }
2025-12-10T09:20:52.4298007Z 
2025-12-10T09:20:52.4298246Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:52.4298596Z 
2025-12-10T09:20:52.4303555Z   console.log
2025-12-10T09:20:52.4304006Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:52.4304363Z 
2025-12-10T09:20:52.4304552Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:52.4304816Z 
2025-12-10T09:20:52.4345176Z   console.log
2025-12-10T09:20:52.4345793Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:52.4346736Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:52.4347254Z       customName: undefined,
2025-12-10T09:20:52.4347837Z       selectedOption: undefined,
2025-12-10T09:20:52.4348443Z       sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4348973Z       authenticated: true,
2025-12-10T09:20:52.4349462Z       username: 'admin',
2025-12-10T09:20:52.4349719Z       csrf: {
2025-12-10T09:20:52.4350187Z         headerValue: 'b40ab5c1ae1122027cff9ecf29086802d2e029b0c6d402613920e9d84a7a01c1',
2025-12-10T09:20:52.4350904Z         cookieValue: 'b40ab5c1ae1122027cff9ecf29086802d2e029b0c6d402613920e9d84a7a01c1',
2025-12-10T09:20:52.4351402Z         headerPresent: true,
2025-12-10T09:20:52.4351906Z         cookiePresent: true
2025-12-10T09:20:52.4352323Z       },
2025-12-10T09:20:52.4352680Z       timestamp: '2025-12-10T09:20:52.430Z'
2025-12-10T09:20:52.4353064Z     }
2025-12-10T09:20:52.4353222Z 
2025-12-10T09:20:52.4353391Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:52.4353574Z 
2025-12-10T09:20:52.4353675Z   console.log
2025-12-10T09:20:52.4353934Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:52.4354290Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:52.4354711Z       status: 'installed',
2025-12-10T09:20:52.4355151Z       pluginName: 'TestPlugin',
2025-12-10T09:20:52.4355545Z       version: '1.0.0'
2025-12-10T09:20:52.4355855Z     }
2025-12-10T09:20:52.4356003Z 
2025-12-10T09:20:52.4356203Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:52.4356389Z 
2025-12-10T09:20:52.4356466Z   console.log
2025-12-10T09:20:52.4356642Z     === API DEBUG LOG ===
2025-12-10T09:20:52.4356779Z 
2025-12-10T09:20:52.4356991Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:52.4357553Z 
2025-12-10T09:20:52.4357699Z   console.log
2025-12-10T09:20:52.4358053Z     POST /install - 200 (9ms)
2025-12-10T09:20:52.4358321Z 
2025-12-10T09:20:52.4358682Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:52.4359127Z 
2025-12-10T09:20:52.4359338Z   console.log
2025-12-10T09:20:52.4359670Z     Session: { id: 'dXhI5O6h6F7c...', authenticated: true, username: 'admin' }
2025-12-10T09:20:52.4359937Z 
2025-12-10T09:20:52.4360140Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:52.4360386Z 
2025-12-10T09:20:52.4396212Z   console.log
2025-12-10T09:20:52.4396683Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:52.4397031Z 
2025-12-10T09:20:52.4397275Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:52.4397555Z 
2025-12-10T09:20:52.4399365Z   console.log
2025-12-10T09:20:52.4399685Z     ====================
2025-12-10T09:20:52.4399912Z 
2025-12-10T09:20:52.4400289Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:52.4400560Z 
2025-12-10T09:20:52.4406692Z [0mPOST /api/plugins/install [32m200[0m 14.457 ms - 66[0m
2025-12-10T09:20:52.4431959Z   console.log
2025-12-10T09:20:52.4432452Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:52.4433032Z       path: '/plugins/install',
2025-12-10T09:20:52.4433333Z       method: 'POST',
2025-12-10T09:20:52.4433582Z       session: {
2025-12-10T09:20:52.4433924Z         sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4434298Z         authenticated: true,
2025-12-10T09:20:52.4434580Z         username: 'admin'
2025-12-10T09:20:52.4434828Z       },
2025-12-10T09:20:52.4435250Z       tokens: { headerPresent: false, cookiePresent: true, headerSource: 'NONE' }
2025-12-10T09:20:52.4435666Z     }
2025-12-10T09:20:52.4435788Z 
2025-12-10T09:20:52.4435918Z       at log (server.js:360:13)
2025-12-10T09:20:52.4436105Z 
2025-12-10T09:20:52.4475500Z   console.error
2025-12-10T09:20:52.4476037Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:52.4476611Z       path: '/plugins/install',
2025-12-10T09:20:52.4476953Z       method: 'POST',
2025-12-10T09:20:52.4477787Z       failureReason: 'CSRF token missing from request header (neither CSRF-Token nor X-CSRF-Token present)',
2025-12-10T09:20:52.4478343Z       session: {
2025-12-10T09:20:52.4478679Z         sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4479052Z         authenticated: true,
2025-12-10T09:20:52.4479528Z         username: 'admin'
2025-12-10T09:20:52.4479774Z       },
2025-12-10T09:20:52.4479984Z       validation: {
2025-12-10T09:20:52.4480261Z         headerTokenPresent: false,
2025-12-10T09:20:52.4480591Z         cookieTokenPresent: true,
2025-12-10T09:20:52.4480888Z         tokensMatch: false,
2025-12-10T09:20:52.4481202Z         sessionAuthenticated: true,
2025-12-10T09:20:52.4481602Z         allCookiesPresent: [ 'connect.sid', 'csrf-token' ]
2025-12-10T09:20:52.4481987Z       }
2025-12-10T09:20:52.4482332Z     }
2025-12-10T09:20:52.4482513Z 
2025-12-10T09:20:52.4482853Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:52.4483341Z      [90m 413 |[39m         
2025-12-10T09:20:52.4484213Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:52.4484787Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:52.4485089Z      [90m 415 |[39m         
2025-12-10T09:20:52.4485504Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:52.4486076Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:52.4486348Z 
2025-12-10T09:20:52.4486459Z       at error (server.js:414:17)
2025-12-10T09:20:52.4486860Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:52.4487337Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:52.4488085Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:52.4488882Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:52.4489766Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:52.4490118Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:52.4490566Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:52.4491047Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:52.4491419Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:52.4491852Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:52.4492293Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:52.4492669Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:52.4493051Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:52.4493265Z 
2025-12-10T09:20:52.4493358Z   console.log
2025-12-10T09:20:52.4493548Z     === API DEBUG LOG ===
2025-12-10T09:20:52.4493677Z 
2025-12-10T09:20:52.4493896Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:52.4494334Z 
2025-12-10T09:20:52.4494477Z   console.log
2025-12-10T09:20:52.4494893Z     POST /plugins/install - 403 (6ms)
2025-12-10T09:20:52.4495180Z 
2025-12-10T09:20:52.4495540Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:52.4495912Z 
2025-12-10T09:20:52.4496001Z   console.log
2025-12-10T09:20:52.4496322Z     Session: { id: 'dXhI5O6h6F7c...', authenticated: true, username: 'admin' }
2025-12-10T09:20:52.4496580Z 
2025-12-10T09:20:52.4496779Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:52.4497032Z 
2025-12-10T09:20:52.4501214Z   console.log
2025-12-10T09:20:52.4501670Z     CSRF: { header: '[MISSING]', cookie: '[PRESENT]' }
2025-12-10T09:20:52.4502010Z 
2025-12-10T09:20:52.4502279Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:52.4502544Z 
2025-12-10T09:20:52.4507106Z   console.log
2025-12-10T09:20:52.4507437Z     ====================
2025-12-10T09:20:52.4507666Z 
2025-12-10T09:20:52.4507949Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:52.4508227Z 
2025-12-10T09:20:52.4514445Z [0mPOST /api/plugins/install [33m403[0m 8.920 ms - 102[0m
2025-12-10T09:20:52.4543449Z   console.log
2025-12-10T09:20:52.4543842Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:52.4544312Z       path: '/plugins/install',
2025-12-10T09:20:52.4544559Z       method: 'POST',
2025-12-10T09:20:52.4544763Z       session: {
2025-12-10T09:20:52.4545029Z         sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4545328Z         authenticated: true,
2025-12-10T09:20:52.4545561Z         username: 'admin'
2025-12-10T09:20:52.4545755Z       },
2025-12-10T09:20:52.4545921Z       tokens: {
2025-12-10T09:20:52.4546105Z         headerPresent: true,
2025-12-10T09:20:52.4546327Z         cookiePresent: false,
2025-12-10T09:20:52.4546584Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:52.4546810Z       }
2025-12-10T09:20:52.4546960Z     }
2025-12-10T09:20:52.4547055Z 
2025-12-10T09:20:52.4547158Z       at log (server.js:360:13)
2025-12-10T09:20:52.4547308Z 
2025-12-10T09:20:52.4585672Z   console.error
2025-12-10T09:20:52.4586068Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:52.4586526Z       path: '/plugins/install',
2025-12-10T09:20:52.4586803Z       method: 'POST',
2025-12-10T09:20:52.4587097Z       failureReason: 'CSRF cookie missing from request',
2025-12-10T09:20:52.4587384Z       session: {
2025-12-10T09:20:52.4587649Z         sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4587943Z         authenticated: true,
2025-12-10T09:20:52.4588171Z         username: 'admin'
2025-12-10T09:20:52.4588605Z       },
2025-12-10T09:20:52.4588779Z       validation: {
2025-12-10T09:20:52.4589002Z         headerTokenPresent: true,
2025-12-10T09:20:52.4589444Z         cookieTokenPresent: false,
2025-12-10T09:20:52.4589696Z         tokensMatch: false,
2025-12-10T09:20:52.4589941Z         sessionAuthenticated: true,
2025-12-10T09:20:52.4590220Z         allCookiesPresent: [ 'connect.sid' ]
2025-12-10T09:20:52.4590476Z       }
2025-12-10T09:20:52.4590631Z     }
2025-12-10T09:20:52.4590722Z 
2025-12-10T09:20:52.4590921Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:52.4591197Z      [90m 413 |[39m         
2025-12-10T09:20:52.4591806Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:52.4592577Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:52.4593174Z      [90m 415 |[39m         
2025-12-10T09:20:52.4593896Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:52.4594546Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:52.4594819Z 
2025-12-10T09:20:52.4594932Z       at error (server.js:414:17)
2025-12-10T09:20:52.4595345Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:52.4595823Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:52.4596201Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:52.4596649Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:52.4597084Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:52.4597422Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:52.4597847Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:52.4598620Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:52.4599443Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:52.4600268Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:52.4600732Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:52.4601122Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:52.4601510Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:52.4601717Z 
2025-12-10T09:20:52.4601813Z   console.log
2025-12-10T09:20:52.4601998Z     === API DEBUG LOG ===
2025-12-10T09:20:52.4602139Z 
2025-12-10T09:20:52.4602358Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:52.4602614Z 
2025-12-10T09:20:52.4602688Z   console.log
2025-12-10T09:20:52.4602914Z     POST /plugins/install - 403 (6ms)
2025-12-10T09:20:52.4603079Z 
2025-12-10T09:20:52.4603284Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:52.4603531Z 
2025-12-10T09:20:52.4605180Z   console.log
2025-12-10T09:20:52.4605749Z     Session: { id: 'dXhI5O6h6F7c...', authenticated: true, username: 'admin' }
2025-12-10T09:20:52.4606146Z 
2025-12-10T09:20:52.4606384Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:52.4606648Z 
2025-12-10T09:20:52.4611308Z   console.log
2025-12-10T09:20:52.4611748Z     CSRF: { header: '[PRESENT]', cookie: '[MISSING]' }
2025-12-10T09:20:52.4612085Z 
2025-12-10T09:20:52.4612360Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:52.4612632Z 
2025-12-10T09:20:52.4616850Z   console.log
2025-12-10T09:20:52.4617158Z     ====================
2025-12-10T09:20:52.4617379Z 
2025-12-10T09:20:52.4617732Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:52.4618005Z 
2025-12-10T09:20:52.4651753Z [0mPOST /api/plugins/install [33m403[0m 8.747 ms - 102[0m
2025-12-10T09:20:52.4678967Z   console.log
2025-12-10T09:20:52.4679559Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:52.4680035Z       path: '/plugins/install',
2025-12-10T09:20:52.4680281Z       method: 'POST',
2025-12-10T09:20:52.4680496Z       session: {
2025-12-10T09:20:52.4680774Z         sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4681071Z         authenticated: true,
2025-12-10T09:20:52.4681293Z         username: 'admin'
2025-12-10T09:20:52.4681497Z       },
2025-12-10T09:20:52.4681654Z       tokens: {
2025-12-10T09:20:52.4681841Z         headerPresent: true,
2025-12-10T09:20:52.4682057Z         cookiePresent: true,
2025-12-10T09:20:52.4682345Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:52.4682576Z       }
2025-12-10T09:20:52.4682734Z     }
2025-12-10T09:20:52.4682832Z 
2025-12-10T09:20:52.4682939Z       at log (server.js:360:13)
2025-12-10T09:20:52.4683088Z 
2025-12-10T09:20:52.4720735Z   console.error
2025-12-10T09:20:52.4721125Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:52.4721593Z       path: '/plugins/install',
2025-12-10T09:20:52.4721855Z       method: 'POST',
2025-12-10T09:20:52.4722243Z       failureReason: 'CSRF token mismatch: header token does not match cookie token',
2025-12-10T09:20:52.4722658Z       session: {
2025-12-10T09:20:52.4722987Z         sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4723352Z         authenticated: true,
2025-12-10T09:20:52.4723624Z         username: 'admin'
2025-12-10T09:20:52.4723862Z       },
2025-12-10T09:20:52.4724060Z       validation: {
2025-12-10T09:20:52.4724335Z         headerTokenPresent: true,
2025-12-10T09:20:52.4724665Z         cookieTokenPresent: true,
2025-12-10T09:20:52.4724959Z         tokensMatch: false,
2025-12-10T09:20:52.4725259Z         sessionAuthenticated: true,
2025-12-10T09:20:52.4725648Z         allCookiesPresent: [ 'connect.sid', 'csrf-token' ]
2025-12-10T09:20:52.4726004Z       }
2025-12-10T09:20:52.4726199Z     }
2025-12-10T09:20:52.4726316Z 
2025-12-10T09:20:52.4726561Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:52.4727054Z      [90m 413 |[39m         
2025-12-10T09:20:52.4728594Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:52.4730100Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:52.4730755Z      [90m 415 |[39m         
2025-12-10T09:20:52.4731658Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:52.4732845Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:52.4733322Z 
2025-12-10T09:20:52.4733511Z       at error (server.js:414:17)
2025-12-10T09:20:52.4734217Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:52.4735063Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:52.4735712Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:52.4736469Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:52.4737256Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:52.4737857Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:52.4738588Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:52.4739601Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:52.4739999Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:52.4740425Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:52.4740858Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:52.4741235Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:52.4741608Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:52.4742020Z 
2025-12-10T09:20:52.4742125Z   console.log
2025-12-10T09:20:52.4742398Z     === API DEBUG LOG ===
2025-12-10T09:20:52.4742629Z 
2025-12-10T09:20:52.4742955Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:52.4743220Z 
2025-12-10T09:20:52.4743295Z   console.log
2025-12-10T09:20:52.4743517Z     POST /plugins/install - 403 (5ms)
2025-12-10T09:20:52.4743684Z 
2025-12-10T09:20:52.4743894Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:52.4744140Z 
2025-12-10T09:20:52.4744224Z   console.log
2025-12-10T09:20:52.4744536Z     Session: { id: 'dXhI5O6h6F7c...', authenticated: true, username: 'admin' }
2025-12-10T09:20:52.4744800Z 
2025-12-10T09:20:52.4745009Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:52.4745262Z 
2025-12-10T09:20:52.4749057Z   console.log
2025-12-10T09:20:52.4749547Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:52.4749766Z 
2025-12-10T09:20:52.4749990Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:52.4750245Z 
2025-12-10T09:20:52.4755736Z   console.log
2025-12-10T09:20:52.4755930Z     ====================
2025-12-10T09:20:52.4756078Z 
2025-12-10T09:20:52.4756292Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:52.4756549Z 
2025-12-10T09:20:52.4763552Z [0mPOST /api/plugins/install [33m403[0m 9.102 ms - 102[0m
2025-12-10T09:20:52.4790070Z   console.log
2025-12-10T09:20:52.4790346Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:52.4790652Z       path: '/plugins/install',
2025-12-10T09:20:52.4790894Z       method: 'POST',
2025-12-10T09:20:52.4791096Z       session: {
2025-12-10T09:20:52.4791365Z         sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4791661Z         authenticated: true,
2025-12-10T09:20:52.4791874Z         username: 'admin'
2025-12-10T09:20:52.4792072Z       },
2025-12-10T09:20:52.4792252Z       tokens: {
2025-12-10T09:20:52.4792437Z         headerPresent: true,
2025-12-10T09:20:52.4792674Z         cookiePresent: true,
2025-12-10T09:20:52.4792972Z         headerSource: 'X-CSRF-Token'
2025-12-10T09:20:52.4793253Z       }
2025-12-10T09:20:52.4793658Z     }
2025-12-10T09:20:52.4793781Z 
2025-12-10T09:20:52.4793912Z       at log (server.js:360:13)
2025-12-10T09:20:52.4794098Z 
2025-12-10T09:20:52.4796221Z   console.log
2025-12-10T09:20:52.4796597Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:52.4796942Z       path: '/plugins/install',
2025-12-10T09:20:52.4797217Z       method: 'POST',
2025-12-10T09:20:52.4797444Z       session: {
2025-12-10T09:20:52.4797762Z         sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4798119Z         authenticated: true,
2025-12-10T09:20:52.4798401Z         username: 'admin'
2025-12-10T09:20:52.4798634Z       },
2025-12-10T09:20:52.4799063Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:52.4799685Z     }
2025-12-10T09:20:52.4799799Z 
2025-12-10T09:20:52.4799931Z       at log (server.js:441:13)
2025-12-10T09:20:52.4800103Z 
2025-12-10T09:20:52.4810195Z   console.log
2025-12-10T09:20:52.4810430Z     [AUTH] Authentication check: {
2025-12-10T09:20:52.4810688Z       path: '/install',
2025-12-10T09:20:52.4810892Z       method: 'POST',
2025-12-10T09:20:52.4811166Z       sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4811448Z       hasSession: true,
2025-12-10T09:20:52.4811653Z       authenticated: true,
2025-12-10T09:20:52.4811865Z       username: 'admin',
2025-12-10T09:20:52.4812067Z       hasCookies: true,
2025-12-10T09:20:52.4812295Z       timestamp: '2025-12-10T09:20:52.479Z'
2025-12-10T09:20:52.4812529Z     }
2025-12-10T09:20:52.4812623Z 
2025-12-10T09:20:52.4812727Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:52.4812878Z 
2025-12-10T09:20:52.4820635Z   console.log
2025-12-10T09:20:52.4820896Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:52.4821260Z 
2025-12-10T09:20:52.4821364Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:52.4821519Z 
2025-12-10T09:20:52.4828060Z   console.log
2025-12-10T09:20:52.4828588Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:52.4829506Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:52.4830043Z       customName: undefined,
2025-12-10T09:20:52.4830512Z       selectedOption: undefined,
2025-12-10T09:20:52.4831065Z       sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4831612Z       authenticated: true,
2025-12-10T09:20:52.4832014Z       username: 'admin',
2025-12-10T09:20:52.4832373Z       csrf: {
2025-12-10T09:20:52.4833050Z         headerValue: 'b40ab5c1ae1122027cff9ecf29086802d2e029b0c6d402613920e9d84a7a01c1',
2025-12-10T09:20:52.4834123Z         cookieValue: 'b40ab5c1ae1122027cff9ecf29086802d2e029b0c6d402613920e9d84a7a01c1',
2025-12-10T09:20:52.4834879Z         headerPresent: true,
2025-12-10T09:20:52.4835320Z         cookiePresent: true
2025-12-10T09:20:52.4835709Z       },
2025-12-10T09:20:52.4836087Z       timestamp: '2025-12-10T09:20:52.482Z'
2025-12-10T09:20:52.4836506Z     }
2025-12-10T09:20:52.4836670Z 
2025-12-10T09:20:52.4836891Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:52.4837209Z 
2025-12-10T09:20:52.4837366Z   console.log
2025-12-10T09:20:52.4837808Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:52.4838434Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:52.4838937Z       status: 'installed',
2025-12-10T09:20:52.4839577Z       pluginName: 'TestPlugin',
2025-12-10T09:20:52.4839982Z       version: '1.0.0'
2025-12-10T09:20:52.4840314Z     }
2025-12-10T09:20:52.4840482Z 
2025-12-10T09:20:52.4840686Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:52.4840997Z 
2025-12-10T09:20:52.4841137Z   console.log
2025-12-10T09:20:52.4841464Z     === API DEBUG LOG ===
2025-12-10T09:20:52.4841700Z 
2025-12-10T09:20:52.4842097Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:52.4842615Z 
2025-12-10T09:20:52.4842773Z   console.log
2025-12-10T09:20:52.4843126Z     POST /install - 200 (5ms)
2025-12-10T09:20:52.4843401Z 
2025-12-10T09:20:52.4844068Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:52.4844576Z 
2025-12-10T09:20:52.4844742Z   console.log
2025-12-10T09:20:52.4845323Z     Session: { id: 'dXhI5O6h6F7c...', authenticated: true, username: 'admin' }
2025-12-10T09:20:52.4845799Z 
2025-12-10T09:20:52.4846193Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:52.4846694Z 
2025-12-10T09:20:52.4847166Z   console.log
2025-12-10T09:20:52.4847641Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:52.4847993Z 
2025-12-10T09:20:52.4848399Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:52.4848866Z 
2025-12-10T09:20:52.4851392Z   console.log
2025-12-10T09:20:52.4851761Z     ====================
2025-12-10T09:20:52.4852024Z 
2025-12-10T09:20:52.4852425Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:52.4852911Z 
2025-12-10T09:20:52.4858284Z [0mPOST /api/plugins/install [32m200[0m 7.538 ms - 66[0m
2025-12-10T09:20:52.4885978Z   console.log
2025-12-10T09:20:52.4886432Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:52.4886947Z       path: '/plugins/install',
2025-12-10T09:20:52.4887353Z       method: 'POST',
2025-12-10T09:20:52.4887699Z       session: {
2025-12-10T09:20:52.4888164Z         sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4888684Z         authenticated: true,
2025-12-10T09:20:52.4889067Z         username: 'admin'
2025-12-10T09:20:52.4889625Z       },
2025-12-10T09:20:52.4889922Z       tokens: {
2025-12-10T09:20:52.4890266Z         headerPresent: true,
2025-12-10T09:20:52.4890651Z         cookiePresent: true,
2025-12-10T09:20:52.4891080Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:52.4891467Z       }
2025-12-10T09:20:52.4892022Z     }
2025-12-10T09:20:52.4892182Z 
2025-12-10T09:20:52.4892581Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:52.4893040Z 
2025-12-10T09:20:52.4896251Z   console.log
2025-12-10T09:20:52.4896704Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:52.4897196Z       path: '/plugins/install',
2025-12-10T09:20:52.4897595Z       method: 'POST',
2025-12-10T09:20:52.4897945Z       session: {
2025-12-10T09:20:52.4898407Z         sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4898944Z         authenticated: true,
2025-12-10T09:20:52.4899529Z         username: 'admin'
2025-12-10T09:20:52.4899890Z       },
2025-12-10T09:20:52.4900498Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:52.4901123Z     }
2025-12-10T09:20:52.4901296Z 
2025-12-10T09:20:52.4901690Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:52.4902161Z 
2025-12-10T09:20:52.4911459Z   console.log
2025-12-10T09:20:52.4911728Z     [AUTH] Authentication check: {
2025-12-10T09:20:52.4911987Z       path: '/install',
2025-12-10T09:20:52.4912201Z       method: 'POST',
2025-12-10T09:20:52.4912483Z       sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4912787Z       hasSession: true,
2025-12-10T09:20:52.4913003Z       authenticated: true,
2025-12-10T09:20:52.4913215Z       username: 'admin',
2025-12-10T09:20:52.4913418Z       hasCookies: true,
2025-12-10T09:20:52.4913658Z       timestamp: '2025-12-10T09:20:52.489Z'
2025-12-10T09:20:52.4913896Z     }
2025-12-10T09:20:52.4913996Z 
2025-12-10T09:20:52.4914214Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:52.4914481Z 
2025-12-10T09:20:52.4922923Z   console.log
2025-12-10T09:20:52.4923200Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:52.4923397Z 
2025-12-10T09:20:52.4923622Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:52.4923887Z 
2025-12-10T09:20:52.4929730Z   console.log
2025-12-10T09:20:52.4930083Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:52.4930442Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:52.4930715Z       customName: undefined,
2025-12-10T09:20:52.4931181Z       selectedOption: undefined,
2025-12-10T09:20:52.4931501Z       sessionID: 'dXhI5O6h6F7cV5PTm6JdK1cwDrBBOlcS',
2025-12-10T09:20:52.4931789Z       authenticated: true,
2025-12-10T09:20:52.4932003Z       username: 'admin',
2025-12-10T09:20:52.4932197Z       csrf: {
2025-12-10T09:20:52.4932563Z         headerValue: 'b40ab5c1ae1122027cff9ecf29086802d2e029b0c6d402613920e9d84a7a01c1',
2025-12-10T09:20:52.4933122Z         cookieValue: 'b40ab5c1ae1122027cff9ecf29086802d2e029b0c6d402613920e9d84a7a01c1',
2025-12-10T09:20:52.4933625Z         headerPresent: true,
2025-12-10T09:20:52.4933961Z         cookiePresent: true
2025-12-10T09:20:52.4934266Z       },
2025-12-10T09:20:52.4934558Z       timestamp: '2025-12-10T09:20:52.492Z'
2025-12-10T09:20:52.4934811Z     }
2025-12-10T09:20:52.4934916Z 
2025-12-10T09:20:52.4935128Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:52.4935384Z 
2025-12-10T09:20:52.4935468Z   console.log
2025-12-10T09:20:52.4935729Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:52.4936056Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:52.4936316Z       status: 'installed',
2025-12-10T09:20:52.4936548Z       pluginName: 'TestPlugin',
2025-12-10T09:20:52.4936769Z       version: '1.0.0'
2025-12-10T09:20:52.4936950Z     }
2025-12-10T09:20:52.4937037Z 
2025-12-10T09:20:52.4937244Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:52.4937499Z 
2025-12-10T09:20:52.4938693Z   console.log
2025-12-10T09:20:52.4938897Z     === API DEBUG LOG ===
2025-12-10T09:20:52.4939032Z 
2025-12-10T09:20:52.4939444Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:52.4939902Z 
2025-12-10T09:20:52.4943061Z   console.log
2025-12-10T09:20:52.4943270Z     POST /install - 200 (6ms)
2025-12-10T09:20:52.4943426Z 
2025-12-10T09:20:52.4943640Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:52.4943911Z 
2025-12-10T09:20:52.4947550Z   console.log
2025-12-10T09:20:52.4948147Z     Session: { id: 'dXhI5O6h6F7c...', authenticated: true, username: 'admin' }
2025-12-10T09:20:52.4948461Z 
2025-12-10T09:20:52.4948693Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:52.4948950Z 
2025-12-10T09:20:52.4952213Z   console.log
2025-12-10T09:20:52.4952484Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:52.4952689Z 
2025-12-10T09:20:52.4952896Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:52.4953153Z 
2025-12-10T09:20:52.4956371Z   console.log
2025-12-10T09:20:52.4956632Z     ====================
2025-12-10T09:20:52.4956767Z 
2025-12-10T09:20:52.4956991Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:52.4957246Z 
2025-12-10T09:20:52.4962990Z [0mPOST /api/plugins/install [32m200[0m 8.546 ms - 66[0m
2025-12-10T09:20:52.5855310Z PASS __tests__/csrf-cookie-regression.test.js
2025-12-10T09:20:52.5855781Z   CSRF Cookie Regression Tests
2025-12-10T09:20:52.5856136Z     /api/csrf-token endpoint cookie behavior
2025-12-10T09:20:52.5856854Z       ✓ should set Set-Cookie header when returning CSRF token (13 ms)
2025-12-10T09:20:52.5857532Z       ✓ should set csrf-token cookie with httpOnly: false for client-side access (8 ms)
2025-12-10T09:20:52.5858145Z       ✓ should set csrf-token cookie with sameSite: lax (7 ms)
2025-12-10T09:20:52.5858633Z       ✓ should set csrf-token cookie with Path=/ (11 ms)
2025-12-10T09:20:52.5859105Z       ✓ should return token value in JSON response (8 ms)
2025-12-10T09:20:52.5859829Z       ✓ should set cookie value containing the JSON token (8 ms)
2025-12-10T09:20:52.5860303Z     Plugin install with CSRF cookie + header validation
2025-12-10T09:20:52.5860889Z       ✓ should succeed when valid session + cookie + header are provided (16 ms)
2025-12-10T09:20:52.5861855Z       ✓ should fail with 403 when CSRF header is missing (cookie only) (12 ms)
2025-12-10T09:20:52.5862497Z       ✓ should fail with 403 when CSRF cookie is missing (header only) (13 ms)
2025-12-10T09:20:52.5863054Z       ✓ should fail with 403 when CSRF token is invalid (11 ms)
2025-12-10T09:20:52.5863636Z       ✓ should work with X-CSRF-Token header (alternative header name) (10 ms)
2025-12-10T09:20:52.5864299Z       ✓ should log CSRF cookie and header presence in plugin install endpoint (10 ms)
2025-12-10T09:20:52.5864775Z     CSRF middleware order validation
2025-12-10T09:20:52.5865276Z       ✓ should have cookie-parser middleware before CSRF middleware (1 ms)
2025-12-10T09:20:52.5865556Z 
2025-12-10T09:20:52.8379649Z   console.log
2025-12-10T09:20:52.8380149Z     [Session] Cookie configuration: {
2025-12-10T09:20:52.8380639Z       secure: false,
2025-12-10T09:20:52.8380978Z       nodeEnv: 'test',
2025-12-10T09:20:52.8381397Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:52.8381971Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:52.8382503Z     }
2025-12-10T09:20:52.8382696Z 
2025-12-10T09:20:52.8382941Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:52.8383289Z 
2025-12-10T09:20:52.9500099Z   console.log
2025-12-10T09:20:52.9500759Z     [Test] Session middleware initialized (memory store)
2025-12-10T09:20:52.9501163Z 
2025-12-10T09:20:52.9501356Z       at Object.log (server.js:142:13)
2025-12-10T09:20:52.9501641Z 
2025-12-10T09:20:52.9561699Z   console.log
2025-12-10T09:20:52.9562153Z     [Session] Initialization status: {
2025-12-10T09:20:52.9562611Z       nodeEnv: 'test',
2025-12-10T09:20:52.9562998Z       sessionSecretSet: true,
2025-12-10T09:20:52.9563419Z       redisConfigured: false,
2025-12-10T09:20:52.9563827Z       middlewareApplied: true
2025-12-10T09:20:52.9564534Z     }
2025-12-10T09:20:52.9564711Z 
2025-12-10T09:20:52.9564918Z       at Object.log (server.js:155:9)
2025-12-10T09:20:52.9565221Z 
2025-12-10T09:20:52.9569617Z   console.log
2025-12-10T09:20:52.9570057Z     [CSRF] Cookie configuration: {
2025-12-10T09:20:52.9570504Z       secure: false,
2025-12-10T09:20:52.9570854Z       nodeEnv: 'test',
2025-12-10T09:20:52.9571280Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:52.9571879Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:52.9572357Z     }
2025-12-10T09:20:52.9572531Z 
2025-12-10T09:20:52.9572754Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:52.9573075Z 
2025-12-10T09:20:52.9643802Z [0mGET /api/csrf-token [32m200[0m 2.187 ms - 80[0m
2025-12-10T09:20:52.9682134Z [0mGET /api/csrf-token [32m200[0m 0.978 ms - 80[0m
2025-12-10T09:20:52.9708911Z [0mGET /api/csrf-token [32m200[0m 0.716 ms - 80[0m
2025-12-10T09:20:52.9723377Z   console.log
2025-12-10T09:20:52.9723948Z     Admin password changed detected, regenerating users.json...
2025-12-10T09:20:52.9724438Z 
2025-12-10T09:20:52.9724630Z       at log (auth/auth.js:164:21)
2025-12-10T09:20:52.9724924Z 
2025-12-10T09:20:53.0628740Z   console.log
2025-12-10T09:20:53.0629791Z     Updated admin user with new password. Please keep your password secure!
2025-12-10T09:20:53.0630307Z 
2025-12-10T09:20:53.0630507Z       at log (auth/auth.js:179:21)
2025-12-10T09:20:53.0630787Z 
2025-12-10T09:20:53.0676373Z   console.log
2025-12-10T09:20:53.0676817Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:53.0677151Z 
2025-12-10T09:20:53.0677345Z       at log (server.js:284:17)
2025-12-10T09:20:53.0677612Z 
2025-12-10T09:20:53.0691536Z   console.log
2025-12-10T09:20:53.0692324Z     [LOGIN] Login attempt: {
2025-12-10T09:20:53.0692810Z       username: 'admin',
2025-12-10T09:20:53.0693246Z       sessionID: 'eThdM9ULXIe8EsO79igBz7Rlhuip25de',
2025-12-10T09:20:53.0693667Z       hasSession: true,
2025-12-10T09:20:53.0694098Z       timestamp: '2025-12-10T09:20:53.068Z'
2025-12-10T09:20:53.0694501Z     }
2025-12-10T09:20:53.0694635Z 
2025-12-10T09:20:53.0694791Z       at log (routes/api.js:15:13)
2025-12-10T09:20:53.0695031Z 
2025-12-10T09:20:53.1550486Z   console.log
2025-12-10T09:20:53.1551183Z     [Audit] Event logged: {
2025-12-10T09:20:53.1551695Z       eventType: 'auth.login.success',
2025-12-10T09:20:53.1552162Z       username: 'admin',
2025-12-10T09:20:53.1552610Z       timestamp: '2025-12-10T09:20:53.154Z'
2025-12-10T09:20:53.1553032Z     }
2025-12-10T09:20:53.1553211Z 
2025-12-10T09:20:53.1553405Z       at log (services/auditLog.js:106:17)
2025-12-10T09:20:53.1553720Z 
2025-12-10T09:20:53.1554611Z   console.log
2025-12-10T09:20:53.1554997Z     [LOGIN] Login successful: {
2025-12-10T09:20:53.1555403Z       username: 'admin',
2025-12-10T09:20:53.1555766Z       role: 'owner',
2025-12-10T09:20:53.1556151Z       sessionID: '[REDACTED]',
2025-12-10T09:20:53.1556564Z       authenticated: true,
2025-12-10T09:20:53.1556940Z       cookieMaxAge: 86399912,
2025-12-10T09:20:53.1557417Z       cookieExpires: 2025-12-11T09:20:53.066Z
2025-12-10T09:20:53.1557863Z     }
2025-12-10T09:20:53.1558032Z 
2025-12-10T09:20:53.1558364Z       at Immediate.log [as _onImmediate] (routes/api.js:64:25)
2025-12-10T09:20:53.1558777Z 
2025-12-10T09:20:53.1560541Z   console.log
2025-12-10T09:20:53.1561095Z     === API DEBUG LOG ===
2025-12-10T09:20:53.1561746Z 
2025-12-10T09:20:53.1562326Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:53.1562842Z 
2025-12-10T09:20:53.1564390Z   console.log
2025-12-10T09:20:53.1564972Z     POST /login - 200 (89ms)
2025-12-10T09:20:53.1565273Z 
2025-12-10T09:20:53.1565697Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:53.1566199Z 
2025-12-10T09:20:53.1569605Z   console.log
2025-12-10T09:20:53.1570266Z     Session: { id: 'eThdM9ULXIe8...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:53.1570778Z 
2025-12-10T09:20:53.1571186Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:53.1571969Z 
2025-12-10T09:20:53.1574028Z   console.log
2025-12-10T09:20:53.1574730Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:53.1575098Z 
2025-12-10T09:20:53.1575511Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:53.1575991Z 
2025-12-10T09:20:53.1577614Z   console.log
2025-12-10T09:20:53.1578159Z     ====================
2025-12-10T09:20:53.1578420Z 
2025-12-10T09:20:53.1578802Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:53.1579448Z 
2025-12-10T09:20:53.1584807Z [0mPOST /api/login [32m200[0m 94.193 ms - 88[0m
2025-12-10T09:20:53.1614026Z   console.log
2025-12-10T09:20:53.1614404Z     [CSRF] Token request: {
2025-12-10T09:20:53.1614935Z       sessionID: 'eThdM9ULXIe8EsO79igBz7Rlhuip25de',
2025-12-10T09:20:53.1615480Z       authenticated: true,
2025-12-10T09:20:53.1615869Z       username: 'admin',
2025-12-10T09:20:53.1616255Z       hasCookies: true,
2025-12-10T09:20:53.1616672Z       timestamp: '2025-12-10T09:20:53.160Z'
2025-12-10T09:20:53.1617091Z     }
2025-12-10T09:20:53.1617254Z 
2025-12-10T09:20:53.1617444Z       at log (server.js:236:13)
2025-12-10T09:20:53.1617706Z 
2025-12-10T09:20:53.1623376Z   console.log
2025-12-10T09:20:53.1623855Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:53.1624490Z       sessionID: 'eThdM9ULXIe8EsO79igBz7Rlhuip25de',
2025-12-10T09:20:53.1625020Z       tokenLength: 64,
2025-12-10T09:20:53.1625434Z       tokenPrefix: 'c65e73c6...',
2025-12-10T09:20:53.1625911Z       cookieName: 'csrf-token',
2025-12-10T09:20:53.1626610Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:53.1627891Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:53.1628569Z     }
2025-12-10T09:20:53.1628730Z 
2025-12-10T09:20:53.1628915Z       at log (server.js:266:13)
2025-12-10T09:20:53.1629387Z 
2025-12-10T09:20:53.1633958Z   console.log
2025-12-10T09:20:53.1635124Z     === API DEBUG LOG ===
2025-12-10T09:20:53.1636209Z 
2025-12-10T09:20:53.1636638Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:53.1637124Z 
2025-12-10T09:20:53.1643098Z   console.log
2025-12-10T09:20:53.1643775Z     GET /api/csrf-token - 200 (3ms)
2025-12-10T09:20:53.1645296Z 
2025-12-10T09:20:53.1645728Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:53.1646223Z 
2025-12-10T09:20:53.1680408Z   console.log
2025-12-10T09:20:53.1681316Z     Session: { id: 'eThdM9ULXIe8...', authenticated: true, username: 'admin' }
2025-12-10T09:20:53.1685120Z 
2025-12-10T09:20:53.1685587Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:53.1686059Z 
2025-12-10T09:20:53.1686201Z   console.log
2025-12-10T09:20:53.1686650Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:53.1686993Z 
2025-12-10T09:20:53.1687371Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:53.1690282Z 
2025-12-10T09:20:53.1690463Z   console.log
2025-12-10T09:20:53.1690778Z     ====================
2025-12-10T09:20:53.1690987Z 
2025-12-10T09:20:53.1691383Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:53.1691820Z 
2025-12-10T09:20:53.1692377Z [0mGET /api/csrf-token [32m200[0m 7.734 ms - 80[0m
2025-12-10T09:20:53.1719002Z [0mPOST /api/logout [33m403[0m 0.911 ms - 102[0m
2025-12-10T09:20:53.1756202Z [0mPOST /api/logout [32m200[0m 1.217 ms - 52[0m
2025-12-10T09:20:53.1910881Z [0mPOST /api/login [33m429[0m 0.921 ms - 175[0m
2025-12-10T09:20:53.1928548Z [0mPOST /api/login [33m401[0m 7.461 ms - 31[0m
2025-12-10T09:20:53.1933448Z [0mPOST /api/login [33m401[0m 6.877 ms - 31[0m
2025-12-10T09:20:53.1937599Z [0mPOST /api/login [33m401[0m 6.401 ms - 31[0m
2025-12-10T09:20:53.1941698Z [0mPOST /api/login [33m401[0m 5.882 ms - 31[0m
2025-12-10T09:20:53.1946072Z [0mPOST /api/login [33m401[0m 5.504 ms - 31[0m
2025-12-10T09:20:53.1983416Z [0mGET /api/csrf-token [32m200[0m 0.644 ms - 80[0m
2025-12-10T09:20:53.2941982Z PASS __tests__/diagnostics/logging.test.js
2025-12-10T09:20:53.2942507Z   Enhanced Diagnostic Logging
2025-12-10T09:20:53.2942862Z     CSRF Token Endpoint Logging
2025-12-10T09:20:53.2943588Z       ✓ should log session and cookie information (7 ms)
2025-12-10T09:20:53.2944117Z       ✓ should log token generation details (3 ms)
2025-12-10T09:20:53.2951215Z       ✓ should include development-only fields in development mode (2 ms)
2025-12-10T09:20:53.2951697Z     CSRF Validation Logging
2025-12-10T09:20:53.2952227Z       ✓ should log detailed information on CSRF validation failure (4 ms)
2025-12-10T09:20:53.2952799Z       ✓ should log success on valid CSRF token (4 ms)
2025-12-10T09:20:53.2953153Z     Rate Limiter Logging
2025-12-10T09:20:53.2953638Z       ✓ should log rate limit events with detailed information (20 ms)
2025-12-10T09:20:53.2954118Z     Development vs Production Logging
2025-12-10T09:20:53.2954653Z       ✓ should include sensitive data only in development mode (2 ms)
2025-12-10T09:20:53.2954980Z 
2025-12-10T09:20:53.4671191Z   console.error
2025-12-10T09:20:53.4671597Z     Error fetching plugins: Error: Test error
2025-12-10T09:20:53.4672466Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/plugins.test.js:45:59)
2025-12-10T09:20:53.4673711Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:53.4674506Z         at new Promise (<anonymous>)
2025-12-10T09:20:53.4675327Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:53.4676556Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:53.4677467Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:53.4678576Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:53.4680011Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:53.4681391Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:53.4682668Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:53.4683832Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:53.4685289Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:53.4686928Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:53.4688280Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:53.4689563Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:53.4690752Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:53.4691386Z 
2025-12-10T09:20:53.4691965Z     [0m [90m 68 |[39m         res[33m.[39mjson({ plugins[33m:[39m pluginsWithBackup })[33m;[39m
2025-12-10T09:20:53.4692580Z      [90m 69 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:53.4693177Z     [31m[1m>[22m[39m[90m 70 |[39m         console[33m.[39merror([32m'Error fetching plugins:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:53.4693690Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:53.4694195Z      [90m 71 |[39m         [90m// Always return plugins array, even if empty, with error message[39m
2025-12-10T09:20:53.4694636Z      [90m 72 |[39m         res[33m.[39mjson({ 
2025-12-10T09:20:53.4695015Z      [90m 73 |[39m             plugins[33m:[39m [][33m,[39m [0m
2025-12-10T09:20:53.4695214Z 
2025-12-10T09:20:53.4695333Z       at error (routes/plugins.js:70:17)
2025-12-10T09:20:53.4695510Z 
2025-12-10T09:20:53.4775390Z   console.error
2025-12-10T09:20:53.4776020Z     Error checking plugin manager health: Error: Health check failed
2025-12-10T09:20:53.4776966Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/plugins.test.js:113:57)
2025-12-10T09:20:53.4778278Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:53.4779087Z         at new Promise (<anonymous>)
2025-12-10T09:20:53.4780118Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:53.4781410Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:53.4782359Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:53.4783654Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:53.4785455Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:53.4787623Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:53.4789757Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:53.4791505Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:53.4793590Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:53.4795905Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:53.4797827Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:53.4799663Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:53.4801378Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:53.4802266Z 
2025-12-10T09:20:53.4802584Z     [0m [90m 363 |[39m         }
2025-12-10T09:20:53.4803142Z      [90m 364 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:53.4804298Z     [31m[1m>[22m[39m[90m 365 |[39m         console[33m.[39merror([32m'Error checking plugin manager health:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:53.4805295Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:53.4806252Z      [90m 366 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({
2025-12-10T09:20:53.4807033Z      [90m 367 |[39m             status[33m:[39m [32m'error'[39m[33m,[39m
2025-12-10T09:20:53.4807781Z      [90m 368 |[39m             error[33m:[39m error[33m.[39mmessage[0m
2025-12-10T09:20:53.4808161Z 
2025-12-10T09:20:53.4808376Z       at error (routes/plugins.js:365:17)
2025-12-10T09:20:53.4808682Z 
2025-12-10T09:20:53.4857575Z   console.log
2025-12-10T09:20:53.4858336Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:53.4858868Z       url: undefined,
2025-12-10T09:20:53.4859499Z       customName: undefined,
2025-12-10T09:20:53.4859980Z       selectedOption: undefined,
2025-12-10T09:20:53.4860398Z       sessionID: undefined,
2025-12-10T09:20:53.4860779Z       authenticated: false,
2025-12-10T09:20:53.4861152Z       username: 'NOT_SET',
2025-12-10T09:20:53.4861492Z       csrf: {
2025-12-10T09:20:53.4861844Z         headerValue: 'MISSING',
2025-12-10T09:20:53.4862292Z         cookieValue: 'MISSING',
2025-12-10T09:20:53.4862713Z         headerPresent: false,
2025-12-10T09:20:53.4863130Z         cookiePresent: false
2025-12-10T09:20:53.4863524Z       },
2025-12-10T09:20:53.4863914Z       timestamp: '2025-12-10T09:20:53.485Z'
2025-12-10T09:20:53.4864348Z     }
2025-12-10T09:20:53.4864519Z 
2025-12-10T09:20:53.4864724Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:53.4865041Z 
2025-12-10T09:20:53.4865189Z   console.log
2025-12-10T09:20:53.4865718Z     [PLUGIN_INSTALL_API] Install request failed: URL is required
2025-12-10T09:20:53.4866142Z 
2025-12-10T09:20:53.4866369Z       at log (routes/plugins.js:143:21)
2025-12-10T09:20:53.4866682Z 
2025-12-10T09:20:53.4888190Z   console.log
2025-12-10T09:20:53.4888700Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:53.4889548Z       url: 'http://example.com/test.jar',
2025-12-10T09:20:53.4890021Z       customName: undefined,
2025-12-10T09:20:53.4890442Z       selectedOption: undefined,
2025-12-10T09:20:53.4890852Z       sessionID: undefined,
2025-12-10T09:20:53.4891214Z       authenticated: false,
2025-12-10T09:20:53.4891581Z       username: 'NOT_SET',
2025-12-10T09:20:53.4891930Z       csrf: {
2025-12-10T09:20:53.4892531Z         headerValue: 'MISSING',
2025-12-10T09:20:53.4893002Z         cookieValue: 'MISSING',
2025-12-10T09:20:53.4893398Z         headerPresent: false,
2025-12-10T09:20:53.4893787Z         cookiePresent: false
2025-12-10T09:20:53.4894146Z       },
2025-12-10T09:20:53.4894493Z       timestamp: '2025-12-10T09:20:53.488Z'
2025-12-10T09:20:53.4894885Z     }
2025-12-10T09:20:53.4895046Z 
2025-12-10T09:20:53.4895242Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:53.4895533Z 
2025-12-10T09:20:53.4918994Z   console.error
2025-12-10T09:20:53.4919763Z     [PLUGIN_INSTALL_API] Install request failed with error: {
2025-12-10T09:20:53.4920394Z       url: 'http://example.com/test.jar',
2025-12-10T09:20:53.4921022Z       error: 'Plugins directory not accessible or not writable',
2025-12-10T09:20:53.4921792Z       stack: 'Error: Plugins directory not accessible or not writable\n' +
2025-12-10T09:20:53.4923119Z         '    at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/plugins.test.js:136:17)\n' +
2025-12-10T09:20:53.4924950Z         '    at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)\n' +
2025-12-10T09:20:53.4926121Z         '    at new Promise (<anonymous>)\n' +
2025-12-10T09:20:53.4927373Z         '    at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)\n' +
2025-12-10T09:20:53.4928863Z         '    at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)\n' +
2025-12-10T09:20:53.4929937Z         '    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n' +
2025-12-10T09:20:53.4930937Z         '    at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)\n' +
2025-12-10T09:20:53.4931970Z         '    at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)\n' +
2025-12-10T09:20:53.4933046Z         '    at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)\n' +
2025-12-10T09:20:53.4934113Z         '    at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)\n' +
2025-12-10T09:20:53.4935083Z         '    at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)\n' +
2025-12-10T09:20:53.4936281Z         '    at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n' +
2025-12-10T09:20:53.4937646Z         '    at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n' +
2025-12-10T09:20:53.4938801Z         '    at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)\n' +
2025-12-10T09:20:53.4939909Z         '    at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)\n' +
2025-12-10T09:20:53.4940882Z         '    at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)'
2025-12-10T09:20:53.4941455Z     }
2025-12-10T09:20:53.4941553Z 
2025-12-10T09:20:53.4941927Z     [0m [90m 165 |[39m         res[33m.[39mjson(result)[33m;[39m
2025-12-10T09:20:53.4942332Z      [90m 166 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:53.4943141Z     [31m[1m>[22m[39m[90m 167 |[39m         console[33m.[39merror([32m'[PLUGIN_INSTALL_API] Install request failed with error:'[39m[33m,[39m {
2025-12-10T09:20:53.4943987Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:53.4944756Z      [90m 168 |[39m             url[33m:[39m req[33m.[39mbody[33m.[39murl[33m,[39m
2025-12-10T09:20:53.4945327Z      [90m 169 |[39m             error[33m:[39m error[33m.[39mmessage[33m,[39m
2025-12-10T09:20:53.4945776Z      [90m 170 |[39m             stack[33m:[39m error[33m.[39mstack[0m
2025-12-10T09:20:53.4945988Z 
2025-12-10T09:20:53.4946117Z       at error (routes/plugins.js:167:17)
2025-12-10T09:20:53.4946304Z 
2025-12-10T09:20:53.4946394Z   console.log
2025-12-10T09:20:53.4946802Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:53.4947367Z       url: 'http://example.com/test.jar',
2025-12-10T09:20:53.4947813Z       customName: undefined,
2025-12-10T09:20:53.4948085Z       selectedOption: undefined,
2025-12-10T09:20:53.4948320Z       sessionID: undefined,
2025-12-10T09:20:53.4948543Z       authenticated: false,
2025-12-10T09:20:53.4948762Z       username: 'NOT_SET',
2025-12-10T09:20:53.4948960Z       csrf: {
2025-12-10T09:20:53.4949363Z         headerValue: 'MISSING',
2025-12-10T09:20:53.4949714Z         cookieValue: 'MISSING',
2025-12-10T09:20:53.4949947Z         headerPresent: false,
2025-12-10T09:20:53.4950174Z         cookiePresent: false
2025-12-10T09:20:53.4950376Z       },
2025-12-10T09:20:53.4950587Z       timestamp: '2025-12-10T09:20:53.493Z'
2025-12-10T09:20:53.4950820Z     }
2025-12-10T09:20:53.4950909Z 
2025-12-10T09:20:53.4951030Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:53.4951197Z 
2025-12-10T09:20:53.4951282Z   console.log
2025-12-10T09:20:53.4951525Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:53.4952034Z       url: 'http://example.com/test.jar',
2025-12-10T09:20:53.4952298Z       status: 'installed',
2025-12-10T09:20:53.4952540Z       pluginName: 'TestPlugin',
2025-12-10T09:20:53.4952760Z       version: '1.0.0'
2025-12-10T09:20:53.4953038Z     }
2025-12-10T09:20:53.4953206Z 
2025-12-10T09:20:53.4953403Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:53.4953706Z 
2025-12-10T09:20:53.4970454Z   console.log
2025-12-10T09:20:53.4971187Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:53.4971884Z       url: 'http://example.com/existing-plugin.jar',
2025-12-10T09:20:53.4972439Z       customName: undefined,
2025-12-10T09:20:53.4972907Z       selectedOption: undefined,
2025-12-10T09:20:53.4973353Z       sessionID: undefined,
2025-12-10T09:20:53.4973769Z       authenticated: false,
2025-12-10T09:20:53.4974170Z       username: 'NOT_SET',
2025-12-10T09:20:53.4974532Z       csrf: {
2025-12-10T09:20:53.4974896Z         headerValue: 'MISSING',
2025-12-10T09:20:53.4975377Z         cookieValue: 'MISSING',
2025-12-10T09:20:53.4975800Z         headerPresent: false,
2025-12-10T09:20:53.4976223Z         cookiePresent: false
2025-12-10T09:20:53.4976615Z       },
2025-12-10T09:20:53.4977004Z       timestamp: '2025-12-10T09:20:53.496Z'
2025-12-10T09:20:53.4977459Z     }
2025-12-10T09:20:53.4977627Z 
2025-12-10T09:20:53.4977837Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:53.4978164Z 
2025-12-10T09:20:53.4978319Z   console.log
2025-12-10T09:20:53.4978794Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:53.4979718Z       url: 'http://example.com/existing-plugin.jar',
2025-12-10T09:20:53.4980231Z       status: 'conflict',
2025-12-10T09:20:53.4980657Z       pluginName: 'ExistingPlugin',
2025-12-10T09:20:53.4981083Z       version: undefined
2025-12-10T09:20:53.4981429Z     }
2025-12-10T09:20:53.4981589Z 
2025-12-10T09:20:53.4981803Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:53.4982099Z 
2025-12-10T09:20:53.5000620Z   console.log
2025-12-10T09:20:53.5001159Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:53.5001815Z       url: 'http://example.com/plugin-release',
2025-12-10T09:20:53.5002351Z       customName: undefined,
2025-12-10T09:20:53.5003097Z       selectedOption: undefined,
2025-12-10T09:20:53.5003582Z       sessionID: undefined,
2025-12-10T09:20:53.5003985Z       authenticated: false,
2025-12-10T09:20:53.5004376Z       username: 'NOT_SET',
2025-12-10T09:20:53.5004747Z       csrf: {
2025-12-10T09:20:53.5005126Z         headerValue: 'MISSING',
2025-12-10T09:20:53.5005576Z         cookieValue: 'MISSING',
2025-12-10T09:20:53.5006001Z         headerPresent: false,
2025-12-10T09:20:53.5006429Z         cookiePresent: false
2025-12-10T09:20:53.5006814Z       },
2025-12-10T09:20:53.5007197Z       timestamp: '2025-12-10T09:20:53.499Z'
2025-12-10T09:20:53.5007638Z     }
2025-12-10T09:20:53.5007810Z 
2025-12-10T09:20:53.5008032Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:53.5008350Z 
2025-12-10T09:20:53.5008521Z   console.log
2025-12-10T09:20:53.5008979Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:53.5009861Z       url: 'http://example.com/plugin-release',
2025-12-10T09:20:53.5010400Z       status: 'multiple-options',
2025-12-10T09:20:53.5010852Z       pluginName: undefined,
2025-12-10T09:20:53.5011249Z       version: undefined
2025-12-10T09:20:53.5011586Z     }
2025-12-10T09:20:53.5011761Z 
2025-12-10T09:20:53.5011971Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:53.5012298Z 
2025-12-10T09:20:53.5027915Z   console.log
2025-12-10T09:20:53.5028435Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:53.5029055Z       url: 'http://example.com/test.jar',
2025-12-10T09:20:53.5029847Z       customName: 'CustomPluginName',
2025-12-10T09:20:53.5030379Z       selectedOption: undefined,
2025-12-10T09:20:53.5030825Z       sessionID: undefined,
2025-12-10T09:20:53.5031241Z       authenticated: false,
2025-12-10T09:20:53.5031632Z       username: 'NOT_SET',
2025-12-10T09:20:53.5032313Z       csrf: {
2025-12-10T09:20:53.5032695Z         headerValue: 'MISSING',
2025-12-10T09:20:53.5033156Z         cookieValue: 'MISSING',
2025-12-10T09:20:53.5033576Z         headerPresent: false,
2025-12-10T09:20:53.5034016Z         cookiePresent: false
2025-12-10T09:20:53.5034402Z       },
2025-12-10T09:20:53.5034790Z       timestamp: '2025-12-10T09:20:53.502Z'
2025-12-10T09:20:53.5035214Z     }
2025-12-10T09:20:53.5035391Z 
2025-12-10T09:20:53.5035603Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:53.5035921Z 
2025-12-10T09:20:53.5036073Z   console.log
2025-12-10T09:20:53.5036524Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:53.5037109Z       url: 'http://example.com/test.jar',
2025-12-10T09:20:53.5037554Z       status: 'installed',
2025-12-10T09:20:53.5037996Z       pluginName: 'CustomPluginName',
2025-12-10T09:20:53.5038427Z       version: '1.0.0'
2025-12-10T09:20:53.5038765Z     }
2025-12-10T09:20:53.5038926Z 
2025-12-10T09:20:53.5039138Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:53.5039673Z 
2025-12-10T09:20:53.5057162Z   console.log
2025-12-10T09:20:53.5057682Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:53.5058299Z       url: 'http://example.com/release',
2025-12-10T09:20:53.5058799Z       customName: undefined,
2025-12-10T09:20:53.5059637Z       selectedOption: 'http://example.com/specific.jar',
2025-12-10T09:20:53.5060192Z       sessionID: undefined,
2025-12-10T09:20:53.5060608Z       authenticated: false,
2025-12-10T09:20:53.5061017Z       username: 'NOT_SET',
2025-12-10T09:20:53.5061382Z       csrf: {
2025-12-10T09:20:53.5061755Z         headerValue: 'MISSING',
2025-12-10T09:20:53.5062214Z         cookieValue: 'MISSING',
2025-12-10T09:20:53.5062634Z         headerPresent: false,
2025-12-10T09:20:53.5063056Z         cookiePresent: false
2025-12-10T09:20:53.5063435Z       },
2025-12-10T09:20:53.5063817Z       timestamp: '2025-12-10T09:20:53.505Z'
2025-12-10T09:20:53.5064249Z     }
2025-12-10T09:20:53.5064435Z 
2025-12-10T09:20:53.5064662Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:53.5064975Z 
2025-12-10T09:20:53.5065144Z   console.log
2025-12-10T09:20:53.5065605Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:53.5066430Z       url: 'http://example.com/release',
2025-12-10T09:20:53.5066922Z       status: 'installed',
2025-12-10T09:20:53.5067366Z       pluginName: 'TestPlugin',
2025-12-10T09:20:53.5067769Z       version: '1.0.0'
2025-12-10T09:20:53.5068108Z     }
2025-12-10T09:20:53.5068287Z 
2025-12-10T09:20:53.5068499Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:53.5068805Z 
2025-12-10T09:20:53.5122779Z   console.error
2025-12-10T09:20:53.5123326Z     Error uninstalling plugin: Error: Plugin not found
2025-12-10T09:20:53.5124601Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/plugins.test.js:261:17)
2025-12-10T09:20:53.5126498Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:53.5127718Z         at new Promise (<anonymous>)
2025-12-10T09:20:53.5128945Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:53.5131055Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:53.5132440Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:53.5133818Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:53.5135683Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:53.5137693Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:53.5140198Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:53.5142010Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:53.5144267Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:53.5146806Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:53.5148910Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:53.5150964Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:53.5152773Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:53.5153745Z 
2025-12-10T09:20:53.5154287Z     [0m [90m 283 |[39m         res[33m.[39mjson(result)[33m;[39m
2025-12-10T09:20:53.5155053Z      [90m 284 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:53.5156269Z     [31m[1m>[22m[39m[90m 285 |[39m         console[33m.[39merror([32m'Error uninstalling plugin:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:53.5157345Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:53.5158531Z      [90m 286 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ error[33m:[39m error[33m.[39mmessage })[33m;[39m
2025-12-10T09:20:53.5159640Z      [90m 287 |[39m     }
2025-12-10T09:20:53.5160187Z      [90m 288 |[39m })[33m;[39m[0m
2025-12-10T09:20:53.5160493Z 
2025-12-10T09:20:53.5160711Z       at error (routes/plugins.js:285:17)
2025-12-10T09:20:53.5161044Z 
2025-12-10T09:20:53.5226224Z   console.error
2025-12-10T09:20:53.5226925Z     Error rolling back plugin: Error: No backup available for this plugin
2025-12-10T09:20:53.5228242Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/plugins.test.js:306:17)
2025-12-10T09:20:53.5230090Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:53.5230954Z         at new Promise (<anonymous>)
2025-12-10T09:20:53.5231861Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:53.5233534Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:53.5234797Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:53.5236046Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:53.5237613Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:53.5239506Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:53.5241356Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:53.5243024Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:53.5245175Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:53.5247280Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:53.5248841Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:53.5250706Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:53.5252540Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:53.5253481Z 
2025-12-10T09:20:53.5253978Z     [0m [90m 323 |[39m         res[33m.[39mjson(result)[33m;[39m
2025-12-10T09:20:53.5254697Z      [90m 324 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:53.5255886Z     [31m[1m>[22m[39m[90m 325 |[39m         console[33m.[39merror([32m'Error rolling back plugin:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:53.5256905Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:53.5258014Z      [90m 326 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ error[33m:[39m error[33m.[39mmessage })[33m;[39m
2025-12-10T09:20:53.5258839Z      [90m 327 |[39m     }
2025-12-10T09:20:53.5259550Z      [90m 328 |[39m })[33m;[39m[0m
2025-12-10T09:20:53.5259848Z 
2025-12-10T09:20:53.5260063Z       at error (routes/plugins.js:325:17)
2025-12-10T09:20:53.5260380Z 
2025-12-10T09:20:53.5378561Z PASS __tests__/routes/plugins.test.js
2025-12-10T09:20:53.5379338Z   Plugins API Routes - Error Handling
2025-12-10T09:20:53.5379861Z     GET /api/plugins
2025-12-10T09:20:53.5380737Z       ✓ should return empty plugins array when getAllPlugins returns empty (3 ms)
2025-12-10T09:20:53.5381776Z       ✓ should return plugins array with error field on exception (6 ms)
2025-12-10T09:20:53.5382747Z       ✓ should return plugins with backup status (1 ms)
2025-12-10T09:20:53.5383246Z     GET /api/plugins/health
2025-12-10T09:20:53.5383754Z       ✓ should return 200 when healthy (2 ms)
2025-12-10T09:20:53.5384295Z       ✓ should return 503 when unhealthy (2 ms)
2025-12-10T09:20:53.5384873Z       ✓ should return 500 on exception (8 ms)
2025-12-10T09:20:53.5385314Z     POST /api/plugins/install
2025-12-10T09:20:53.5385871Z       ✓ should return 400 when URL is missing (6 ms)
2025-12-10T09:20:53.5386547Z       ✓ should handle installation errors gracefully (5 ms)
2025-12-10T09:20:53.5387377Z       ✓ should return status "installed" on successful installation (3 ms)
2025-12-10T09:20:53.5388253Z       ✓ should return status "conflict" when plugin already exists (3 ms)
2025-12-10T09:20:53.5389475Z       ✓ should return status "multiple-options" when multiple JARs are available (3 ms)
2025-12-10T09:20:53.5390303Z       ✓ should accept customName parameter (3 ms)
2025-12-10T09:20:53.5391247Z       ✓ should accept selectedOption parameter for multi-jar releases (2 ms)
2025-12-10T09:20:53.5391872Z     POST /api/plugins/uninstall
2025-12-10T09:20:53.5392492Z       ✓ should return 400 when plugin name is missing (2 ms)
2025-12-10T09:20:53.5393170Z       ✓ should handle uninstall errors gracefully (5 ms)
2025-12-10T09:20:53.5393655Z     POST /api/plugins/toggle
2025-12-10T09:20:53.5394237Z       ✓ should return 400 when plugin name is missing (2 ms)
2025-12-10T09:20:53.5394980Z       ✓ should return 400 when enabled is not a boolean (2 ms)
2025-12-10T09:20:53.5395508Z     POST /api/plugins/rollback
2025-12-10T09:20:53.5396072Z       ✓ should return 400 when plugin name is missing (1 ms)
2025-12-10T09:20:53.5396770Z       ✓ should handle rollback errors gracefully (7 ms)
2025-12-10T09:20:53.5397383Z 
2025-12-10T09:20:53.7598041Z   console.log
2025-12-10T09:20:53.7599531Z     [Session] Cookie configuration: {
2025-12-10T09:20:53.7599936Z       secure: false,
2025-12-10T09:20:53.7600202Z       nodeEnv: 'test',
2025-12-10T09:20:53.7600545Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:53.7600964Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:53.7601306Z     }
2025-12-10T09:20:53.7601427Z 
2025-12-10T09:20:53.7601604Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:53.7601836Z 
2025-12-10T09:20:53.8737915Z   console.log
2025-12-10T09:20:53.8738360Z     [Test] Session middleware initialized (memory store)
2025-12-10T09:20:53.8738654Z 
2025-12-10T09:20:53.8738819Z       at Object.log (server.js:142:13)
2025-12-10T09:20:53.8739103Z 
2025-12-10T09:20:53.8743714Z   console.log
2025-12-10T09:20:53.8744226Z     [Session] Initialization status: {
2025-12-10T09:20:53.8744769Z       nodeEnv: 'test',
2025-12-10T09:20:53.8745116Z       sessionSecretSet: true,
2025-12-10T09:20:53.8745409Z       redisConfigured: false,
2025-12-10T09:20:53.8745703Z       middlewareApplied: true
2025-12-10T09:20:53.8745964Z     }
2025-12-10T09:20:53.8746078Z 
2025-12-10T09:20:53.8746236Z       at Object.log (server.js:155:9)
2025-12-10T09:20:53.8746445Z 
2025-12-10T09:20:53.8749566Z   console.log
2025-12-10T09:20:53.8750026Z     [CSRF] Cookie configuration: {
2025-12-10T09:20:53.8750503Z       secure: false,
2025-12-10T09:20:53.8750809Z       nodeEnv: 'test',
2025-12-10T09:20:53.8751121Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:53.8751554Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:53.8751925Z     }
2025-12-10T09:20:53.8752048Z 
2025-12-10T09:20:53.8752208Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:53.8752444Z 
2025-12-10T09:20:53.8971879Z   console.log
2025-12-10T09:20:53.8972342Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:53.8972644Z 
2025-12-10T09:20:53.8972843Z       at log (server.js:284:17)
2025-12-10T09:20:53.8973082Z 
2025-12-10T09:20:53.8973196Z   console.log
2025-12-10T09:20:53.8973478Z     [LOGIN] Login attempt: {
2025-12-10T09:20:53.8973820Z       username: 'admin',
2025-12-10T09:20:53.8974640Z       sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:53.8975095Z       hasSession: true,
2025-12-10T09:20:53.8975462Z       timestamp: '2025-12-10T09:20:53.893Z'
2025-12-10T09:20:53.8975828Z     }
2025-12-10T09:20:53.8975967Z 
2025-12-10T09:20:53.8976132Z       at log (routes/api.js:15:13)
2025-12-10T09:20:53.8976377Z 
2025-12-10T09:20:54.0300020Z   console.log
2025-12-10T09:20:54.0300477Z     [Audit] Event logged: {
2025-12-10T09:20:54.0300968Z       eventType: 'auth.login.success',
2025-12-10T09:20:54.0301349Z       username: 'admin',
2025-12-10T09:20:54.0301653Z       timestamp: '2025-12-10T09:20:54.029Z'
2025-12-10T09:20:54.0301936Z     }
2025-12-10T09:20:54.0302055Z 
2025-12-10T09:20:54.0302201Z       at log (services/auditLog.js:106:17)
2025-12-10T09:20:54.0302442Z 
2025-12-10T09:20:54.0304400Z   console.log
2025-12-10T09:20:54.0304838Z     [LOGIN] Login successful: {
2025-12-10T09:20:54.0305265Z       username: 'admin',
2025-12-10T09:20:54.0305627Z       role: 'owner',
2025-12-10T09:20:54.0306031Z       sessionID: '[REDACTED]',
2025-12-10T09:20:54.0306439Z       authenticated: true,
2025-12-10T09:20:54.0306826Z       cookieMaxAge: 86399861,
2025-12-10T09:20:54.0307293Z       cookieExpires: 2025-12-11T09:20:53.890Z
2025-12-10T09:20:54.0307791Z     }
2025-12-10T09:20:54.0307921Z 
2025-12-10T09:20:54.0308140Z       at Immediate.log [as _onImmediate] (routes/api.js:64:25)
2025-12-10T09:20:54.0308422Z 
2025-12-10T09:20:54.0311467Z   console.log
2025-12-10T09:20:54.0311828Z     === API DEBUG LOG ===
2025-12-10T09:20:54.0312073Z 
2025-12-10T09:20:54.0312452Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:54.0312744Z 
2025-12-10T09:20:54.0314563Z   console.log
2025-12-10T09:20:54.0314915Z     POST /login - 200 (140ms)
2025-12-10T09:20:54.0315446Z 
2025-12-10T09:20:54.0315731Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:54.0316004Z 
2025-12-10T09:20:54.0317926Z   console.log
2025-12-10T09:20:54.0318541Z     Session: { id: '8RJuHcDBMTZx...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:54.0318955Z 
2025-12-10T09:20:54.0319304Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:54.0319583Z 
2025-12-10T09:20:54.0321364Z   console.log
2025-12-10T09:20:54.0321805Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:54.0322142Z 
2025-12-10T09:20:54.0322432Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:54.0322705Z 
2025-12-10T09:20:54.0324208Z   console.log
2025-12-10T09:20:54.0324525Z     ====================
2025-12-10T09:20:54.0324753Z 
2025-12-10T09:20:54.0325093Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:54.0325373Z 
2025-12-10T09:20:54.0333932Z [0mPOST /api/login [32m200[0m 148.202 ms - 88[0m
2025-12-10T09:20:54.0369066Z   console.log
2025-12-10T09:20:54.0369575Z     [CSRF] Token request: {
2025-12-10T09:20:54.0370073Z       sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0370389Z       authenticated: true,
2025-12-10T09:20:54.0370616Z       username: 'admin',
2025-12-10T09:20:54.0370828Z       hasCookies: true,
2025-12-10T09:20:54.0371073Z       timestamp: '2025-12-10T09:20:54.036Z'
2025-12-10T09:20:54.0371308Z     }
2025-12-10T09:20:54.0371405Z 
2025-12-10T09:20:54.0371508Z       at log (server.js:236:13)
2025-12-10T09:20:54.0371659Z 
2025-12-10T09:20:54.0375780Z   console.log
2025-12-10T09:20:54.0376192Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:54.0376716Z       sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0377129Z       tokenLength: 64,
2025-12-10T09:20:54.0377376Z       tokenPrefix: 'b6183e1b...',
2025-12-10T09:20:54.0377640Z       cookieName: 'csrf-token',
2025-12-10T09:20:54.0378063Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:54.0378816Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:54.0379674Z     }
2025-12-10T09:20:54.0379802Z 
2025-12-10T09:20:54.0379917Z       at log (server.js:266:13)
2025-12-10T09:20:54.0380072Z 
2025-12-10T09:20:54.0383679Z   console.log
2025-12-10T09:20:54.0384012Z     === API DEBUG LOG ===
2025-12-10T09:20:54.0384242Z 
2025-12-10T09:20:54.0384611Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:54.0384899Z 
2025-12-10T09:20:54.0389606Z   console.log
2025-12-10T09:20:54.0390000Z     GET /api/csrf-token - 200 (2ms)
2025-12-10T09:20:54.0390287Z 
2025-12-10T09:20:54.0390670Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:54.0391113Z 
2025-12-10T09:20:54.0395716Z   console.log
2025-12-10T09:20:54.0396302Z     Session: { id: '8RJuHcDBMTZx...', authenticated: true, username: 'admin' }
2025-12-10T09:20:54.0396722Z 
2025-12-10T09:20:54.0396955Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:54.0397229Z 
2025-12-10T09:20:54.0401915Z   console.log
2025-12-10T09:20:54.0402365Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:54.0402708Z 
2025-12-10T09:20:54.0402977Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:54.0403244Z 
2025-12-10T09:20:54.0407636Z   console.log
2025-12-10T09:20:54.0407955Z     ====================
2025-12-10T09:20:54.0408173Z 
2025-12-10T09:20:54.0408556Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:54.0408831Z 
2025-12-10T09:20:54.0416542Z [0mGET /api/csrf-token [32m200[0m 5.399 ms - 80[0m
2025-12-10T09:20:54.0449566Z   console.log
2025-12-10T09:20:54.0449976Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:54.0450461Z       path: '/plugins/install',
2025-12-10T09:20:54.0450966Z       method: 'POST',
2025-12-10T09:20:54.0451179Z       session: {
2025-12-10T09:20:54.0451472Z         sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0451801Z         authenticated: true,
2025-12-10T09:20:54.0452058Z         username: 'admin'
2025-12-10T09:20:54.0452274Z       },
2025-12-10T09:20:54.0452652Z       tokens: { headerPresent: false, cookiePresent: false, headerSource: 'NONE' }
2025-12-10T09:20:54.0453046Z     }
2025-12-10T09:20:54.0453146Z 
2025-12-10T09:20:54.0453262Z       at log (server.js:360:13)
2025-12-10T09:20:54.0453423Z 
2025-12-10T09:20:54.0491276Z   console.error
2025-12-10T09:20:54.0491702Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:54.0492248Z       path: '/plugins/install',
2025-12-10T09:20:54.0492685Z       method: 'POST',
2025-12-10T09:20:54.0493286Z       failureReason: 'CSRF token missing from request header (neither CSRF-Token nor X-CSRF-Token present)',
2025-12-10T09:20:54.0493831Z       session: {
2025-12-10T09:20:54.0494163Z         sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0494515Z         authenticated: true,
2025-12-10T09:20:54.0494797Z         username: 'admin'
2025-12-10T09:20:54.0495041Z       },
2025-12-10T09:20:54.0495254Z       validation: {
2025-12-10T09:20:54.0495536Z         headerTokenPresent: false,
2025-12-10T09:20:54.0495859Z         cookieTokenPresent: false,
2025-12-10T09:20:54.0496146Z         tokensMatch: true,
2025-12-10T09:20:54.0496438Z         sessionAuthenticated: true,
2025-12-10T09:20:54.0496919Z         allCookiesPresent: [ 'connect.sid', 'Path', 'Expires', 'SameSite' ]
2025-12-10T09:20:54.0497441Z       }
2025-12-10T09:20:54.0497791Z     }
2025-12-10T09:20:54.0498007Z 
2025-12-10T09:20:54.0498444Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:54.0499059Z      [90m 413 |[39m         
2025-12-10T09:20:54.0500299Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:54.0501043Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:54.0501433Z      [90m 415 |[39m         
2025-12-10T09:20:54.0502188Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:54.0502822Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:54.0503207Z 
2025-12-10T09:20:54.0503406Z       at error (server.js:414:17)
2025-12-10T09:20:54.0504163Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:54.0505004Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:54.0505422Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:54.0505889Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:54.0506361Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:54.0506728Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:54.0507184Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:54.0507697Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:54.0508091Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:54.0508556Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:54.0509582Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:54.0510247Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:54.0510747Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:54.0510973Z 
2025-12-10T09:20:54.0511052Z   console.log
2025-12-10T09:20:54.0511249Z     === API DEBUG LOG ===
2025-12-10T09:20:54.0511391Z 
2025-12-10T09:20:54.0511614Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:54.0512085Z 
2025-12-10T09:20:54.0512182Z   console.log
2025-12-10T09:20:54.0512448Z     POST /plugins/install - 403 (5ms)
2025-12-10T09:20:54.0512735Z 
2025-12-10T09:20:54.0513094Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:54.0513542Z 
2025-12-10T09:20:54.0513656Z   console.log
2025-12-10T09:20:54.0513978Z     Session: { id: '8RJuHcDBMTZx...', authenticated: true, username: 'admin' }
2025-12-10T09:20:54.0514239Z 
2025-12-10T09:20:54.0514444Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:54.0514690Z 
2025-12-10T09:20:54.0515709Z   console.log
2025-12-10T09:20:54.0516153Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:54.0516491Z 
2025-12-10T09:20:54.0516778Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:54.0517050Z 
2025-12-10T09:20:54.0521464Z   console.log
2025-12-10T09:20:54.0521783Z     ====================
2025-12-10T09:20:54.0522011Z 
2025-12-10T09:20:54.0522389Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:54.0522715Z 
2025-12-10T09:20:54.0528448Z [0mPOST /api/plugins/install [33m403[0m 8.630 ms - 102[0m
2025-12-10T09:20:54.0564468Z   console.log
2025-12-10T09:20:54.0565047Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:54.0565537Z       path: '/plugins/install',
2025-12-10T09:20:54.0565914Z       method: 'POST',
2025-12-10T09:20:54.0566233Z       session: {
2025-12-10T09:20:54.0566653Z         sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0567128Z         authenticated: true,
2025-12-10T09:20:54.0567494Z         username: 'admin'
2025-12-10T09:20:54.0567813Z       },
2025-12-10T09:20:54.0568083Z       tokens: {
2025-12-10T09:20:54.0568305Z         headerPresent: true,
2025-12-10T09:20:54.0568547Z         cookiePresent: true,
2025-12-10T09:20:54.0568802Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:54.0569023Z       }
2025-12-10T09:20:54.0569324Z     }
2025-12-10T09:20:54.0569423Z 
2025-12-10T09:20:54.0569534Z       at log (server.js:360:13)
2025-12-10T09:20:54.0569678Z 
2025-12-10T09:20:54.0630580Z   console.error
2025-12-10T09:20:54.0631038Z     [CSRF] CSRF validation failed: {
2025-12-10T09:20:54.0631789Z       path: '/plugins/install',
2025-12-10T09:20:54.0632236Z       method: 'POST',
2025-12-10T09:20:54.0632932Z       failureReason: 'CSRF token mismatch: header token does not match cookie token',
2025-12-10T09:20:54.0633592Z       session: {
2025-12-10T09:20:54.0634044Z         sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0634587Z         authenticated: true,
2025-12-10T09:20:54.0634978Z         username: 'admin'
2025-12-10T09:20:54.0635319Z       },
2025-12-10T09:20:54.0635598Z       validation: {
2025-12-10T09:20:54.0635985Z         headerTokenPresent: true,
2025-12-10T09:20:54.0636442Z         cookieTokenPresent: true,
2025-12-10T09:20:54.0636841Z         tokensMatch: false,
2025-12-10T09:20:54.0637260Z         sessionAuthenticated: true,
2025-12-10T09:20:54.0638001Z         allCookiesPresent: [ 'connect.sid', 'Path', 'Expires', 'SameSite', 'csrf-token' ]
2025-12-10T09:20:54.0638680Z       }
2025-12-10T09:20:54.0638976Z     }
2025-12-10T09:20:54.0639142Z 
2025-12-10T09:20:54.0639677Z     [0m [90m 412 |[39m         }
2025-12-10T09:20:54.0640194Z      [90m 413 |[39m         
2025-12-10T09:20:54.0641358Z     [31m[1m>[22m[39m[90m 414 |[39m         console[33m.[39merror([32m'[CSRF] CSRF validation failed:'[39m[33m,[39m failureInfo)[33m;[39m
2025-12-10T09:20:54.0642410Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:54.0642975Z      [90m 415 |[39m         
2025-12-10T09:20:54.0643745Z      [90m 416 |[39m         [90m// Return 403 Forbidden for CSRF validation failures[39m
2025-12-10T09:20:54.0644765Z      [90m 417 |[39m         [36mreturn[39m res[33m.[39mstatus([35m403[39m)[33m.[39mjson({ [0m
2025-12-10T09:20:54.0645265Z 
2025-12-10T09:20:54.0645449Z       at error (server.js:414:17)
2025-12-10T09:20:54.0646439Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:54.0647348Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:54.0648075Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:54.0648875Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:54.0649978Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:54.0650599Z       at next (middleware/debugLogger.js:197:9)
2025-12-10T09:20:54.0651384Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:54.0652267Z       at trim_prefix (node_modules/express/lib/router/index.js:328:13)
2025-12-10T09:20:54.0652935Z       at node_modules/express/lib/router/index.js:286:9
2025-12-10T09:20:54.0653701Z       at Function.process_params (node_modules/express/lib/router/index.js:346:12)
2025-12-10T09:20:54.0654490Z       at next (node_modules/express/lib/router/index.js:280:10)
2025-12-10T09:20:54.0655159Z       at node_modules/express-rate-limit/dist/index.cjs:807:7
2025-12-10T09:20:54.0655867Z       at node_modules/express-rate-limit/dist/index.cjs:691:5
2025-12-10T09:20:54.0656285Z 
2025-12-10T09:20:54.0656455Z   console.log
2025-12-10T09:20:54.0656774Z     === API DEBUG LOG ===
2025-12-10T09:20:54.0657012Z 
2025-12-10T09:20:54.0657396Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:54.0657876Z 
2025-12-10T09:20:54.0658009Z   console.log
2025-12-10T09:20:54.0658399Z     POST /plugins/install - 403 (8ms)
2025-12-10T09:20:54.0658698Z 
2025-12-10T09:20:54.0659085Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:54.0659761Z 
2025-12-10T09:20:54.0659908Z   console.log
2025-12-10T09:20:54.0660492Z     Session: { id: '8RJuHcDBMTZx...', authenticated: true, username: 'admin' }
2025-12-10T09:20:54.0660965Z 
2025-12-10T09:20:54.0661341Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:54.0661787Z 
2025-12-10T09:20:54.0665242Z   console.log
2025-12-10T09:20:54.0665742Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:54.0666353Z 
2025-12-10T09:20:54.0666782Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:54.0667260Z 
2025-12-10T09:20:54.0672144Z   console.log
2025-12-10T09:20:54.0672513Z     ====================
2025-12-10T09:20:54.0672767Z 
2025-12-10T09:20:54.0673173Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:54.0673640Z 
2025-12-10T09:20:54.0694763Z [0mPOST /api/plugins/install [33m403[0m 12.768 ms - 102[0m
2025-12-10T09:20:54.0720644Z   console.log
2025-12-10T09:20:54.0721172Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:54.0721746Z       path: '/plugins/install',
2025-12-10T09:20:54.0722073Z       method: 'POST',
2025-12-10T09:20:54.0722350Z       session: {
2025-12-10T09:20:54.0722789Z         sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0723291Z         authenticated: true,
2025-12-10T09:20:54.0723679Z         username: 'admin'
2025-12-10T09:20:54.0723999Z       },
2025-12-10T09:20:54.0724233Z       tokens: {
2025-12-10T09:20:54.0724491Z         headerPresent: true,
2025-12-10T09:20:54.0724797Z         cookiePresent: true,
2025-12-10T09:20:54.0725267Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:54.0725817Z       }
2025-12-10T09:20:54.0726155Z     }
2025-12-10T09:20:54.0726372Z 
2025-12-10T09:20:54.0726593Z       at log (server.js:360:13)
2025-12-10T09:20:54.0726909Z 
2025-12-10T09:20:54.0727080Z   console.log
2025-12-10T09:20:54.0727534Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:54.0728105Z       path: '/plugins/install',
2025-12-10T09:20:54.0728561Z       method: 'POST',
2025-12-10T09:20:54.0728963Z       session: {
2025-12-10T09:20:54.0729727Z         sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0730531Z         authenticated: true,
2025-12-10T09:20:54.0730834Z         username: 'admin'
2025-12-10T09:20:54.0731101Z       },
2025-12-10T09:20:54.0731565Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:54.0732076Z     }
2025-12-10T09:20:54.0732211Z 
2025-12-10T09:20:54.0732361Z       at log (server.js:441:13)
2025-12-10T09:20:54.0732576Z 
2025-12-10T09:20:54.0736684Z   console.log
2025-12-10T09:20:54.0737098Z     [AUTH] Authentication check: {
2025-12-10T09:20:54.0737535Z       path: '/install',
2025-12-10T09:20:54.0737819Z       method: 'POST',
2025-12-10T09:20:54.0738136Z       sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0738468Z       hasSession: true,
2025-12-10T09:20:54.0738712Z       authenticated: true,
2025-12-10T09:20:54.0738960Z       username: 'admin',
2025-12-10T09:20:54.0739357Z       hasCookies: true,
2025-12-10T09:20:54.0739638Z       timestamp: '2025-12-10T09:20:54.072Z'
2025-12-10T09:20:54.0739915Z     }
2025-12-10T09:20:54.0740029Z 
2025-12-10T09:20:54.0740155Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:54.0740332Z 
2025-12-10T09:20:54.0746051Z   console.log
2025-12-10T09:20:54.0746478Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:54.0746817Z 
2025-12-10T09:20:54.0747002Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:54.0747201Z 
2025-12-10T09:20:54.0752058Z   console.log
2025-12-10T09:20:54.0752542Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:54.0753163Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:54.0753650Z       customName: undefined,
2025-12-10T09:20:54.0754099Z       selectedOption: undefined,
2025-12-10T09:20:54.0754636Z       sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0755145Z       authenticated: true,
2025-12-10T09:20:54.0755523Z       username: 'admin',
2025-12-10T09:20:54.0755881Z       csrf: {
2025-12-10T09:20:54.0756575Z         headerValue: 'b6183e1bd81cb3cfe24634664ebb0ceebf557a47c41e1416d1ac7acb7fcee225',
2025-12-10T09:20:54.0757689Z         cookieValue: 'b6183e1bd81cb3cfe24634664ebb0ceebf557a47c41e1416d1ac7acb7fcee225',
2025-12-10T09:20:54.0758376Z         headerPresent: true,
2025-12-10T09:20:54.0758773Z         cookiePresent: true
2025-12-10T09:20:54.0759507Z       },
2025-12-10T09:20:54.0759902Z       timestamp: '2025-12-10T09:20:54.074Z'
2025-12-10T09:20:54.0760331Z     }
2025-12-10T09:20:54.0760507Z 
2025-12-10T09:20:54.0760716Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:54.0761028Z 
2025-12-10T09:20:54.0761159Z   console.log
2025-12-10T09:20:54.0761617Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:54.0762234Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:54.0762717Z       status: 'installed',
2025-12-10T09:20:54.0763135Z       pluginName: 'TestPlugin',
2025-12-10T09:20:54.0763506Z       version: '1.0.0'
2025-12-10T09:20:54.0763811Z     }
2025-12-10T09:20:54.0763957Z 
2025-12-10T09:20:54.0764154Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:54.0764442Z 
2025-12-10T09:20:54.0764568Z   console.log
2025-12-10T09:20:54.0764862Z     === API DEBUG LOG ===
2025-12-10T09:20:54.0765086Z 
2025-12-10T09:20:54.0765450Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:54.0765906Z 
2025-12-10T09:20:54.0766032Z   console.log
2025-12-10T09:20:54.0766343Z     POST /install - 200 (4ms)
2025-12-10T09:20:54.0766588Z 
2025-12-10T09:20:54.0766949Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:54.0767383Z 
2025-12-10T09:20:54.0767502Z   console.log
2025-12-10T09:20:54.0768049Z     Session: { id: '8RJuHcDBMTZx...', authenticated: true, username: 'admin' }
2025-12-10T09:20:54.0768501Z 
2025-12-10T09:20:54.0768852Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:54.0769429Z 
2025-12-10T09:20:54.0769562Z   console.log
2025-12-10T09:20:54.0769974Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:54.0770501Z 
2025-12-10T09:20:54.0770868Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:54.0771299Z 
2025-12-10T09:20:54.0771420Z   console.log
2025-12-10T09:20:54.0771743Z     ====================
2025-12-10T09:20:54.0771954Z 
2025-12-10T09:20:54.0772311Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:54.0772742Z 
2025-12-10T09:20:54.0777620Z [0mPOST /api/plugins/install [32m200[0m 6.438 ms - 66[0m
2025-12-10T09:20:54.0805945Z   console.log
2025-12-10T09:20:54.0806352Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:54.0806823Z       path: '/plugins/install',
2025-12-10T09:20:54.0807193Z       method: 'POST',
2025-12-10T09:20:54.0807396Z       session: {
2025-12-10T09:20:54.0807671Z         sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0807973Z         authenticated: true,
2025-12-10T09:20:54.0808197Z         username: 'admin'
2025-12-10T09:20:54.0808397Z       },
2025-12-10T09:20:54.0808556Z       tokens: {
2025-12-10T09:20:54.0808749Z         headerPresent: true,
2025-12-10T09:20:54.0808975Z         cookiePresent: true,
2025-12-10T09:20:54.0809396Z         headerSource: 'X-CSRF-Token'
2025-12-10T09:20:54.0809631Z       }
2025-12-10T09:20:54.0809780Z     }
2025-12-10T09:20:54.0809879Z 
2025-12-10T09:20:54.0809982Z       at log (server.js:360:13)
2025-12-10T09:20:54.0810134Z 
2025-12-10T09:20:54.0812091Z   console.log
2025-12-10T09:20:54.0812498Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:54.0812866Z       path: '/plugins/install',
2025-12-10T09:20:54.0813106Z       method: 'POST',
2025-12-10T09:20:54.0813302Z       session: {
2025-12-10T09:20:54.0813563Z         sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0813856Z         authenticated: true,
2025-12-10T09:20:54.0814065Z         username: 'admin'
2025-12-10T09:20:54.0814263Z       },
2025-12-10T09:20:54.0814603Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:54.0814959Z     }
2025-12-10T09:20:54.0815050Z 
2025-12-10T09:20:54.0815148Z       at log (server.js:441:13)
2025-12-10T09:20:54.0815295Z 
2025-12-10T09:20:54.0823718Z   console.log
2025-12-10T09:20:54.0824102Z     [AUTH] Authentication check: {
2025-12-10T09:20:54.0824596Z       path: '/install',
2025-12-10T09:20:54.0824823Z       method: 'POST',
2025-12-10T09:20:54.0825088Z       sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0825367Z       hasSession: true,
2025-12-10T09:20:54.0825569Z       authenticated: true,
2025-12-10T09:20:54.0825777Z       username: 'admin',
2025-12-10T09:20:54.0825974Z       hasCookies: true,
2025-12-10T09:20:54.0826207Z       timestamp: '2025-12-10T09:20:54.081Z'
2025-12-10T09:20:54.0826439Z     }
2025-12-10T09:20:54.0826527Z 
2025-12-10T09:20:54.0826634Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:54.0826783Z 
2025-12-10T09:20:54.0834654Z   console.log
2025-12-10T09:20:54.0835002Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:54.0835206Z 
2025-12-10T09:20:54.0835320Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:54.0835481Z 
2025-12-10T09:20:54.0840163Z   console.log
2025-12-10T09:20:54.0840630Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:54.0841067Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:54.0841350Z       customName: undefined,
2025-12-10T09:20:54.0841600Z       selectedOption: undefined,
2025-12-10T09:20:54.0841897Z       sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0842187Z       authenticated: true,
2025-12-10T09:20:54.0842416Z       username: 'admin',
2025-12-10T09:20:54.0850603Z       csrf: {
2025-12-10T09:20:54.0851346Z         headerValue: 'b6183e1bd81cb3cfe24634664ebb0ceebf557a47c41e1416d1ac7acb7fcee225',
2025-12-10T09:20:54.0852395Z         cookieValue: 'b6183e1bd81cb3cfe24634664ebb0ceebf557a47c41e1416d1ac7acb7fcee225',
2025-12-10T09:20:54.0853118Z         headerPresent: true,
2025-12-10T09:20:54.0853506Z         cookiePresent: true
2025-12-10T09:20:54.0853847Z       },
2025-12-10T09:20:54.0854422Z       timestamp: '2025-12-10T09:20:54.083Z'
2025-12-10T09:20:54.0854826Z     }
2025-12-10T09:20:54.0854984Z 
2025-12-10T09:20:54.0855176Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:54.0855459Z 
2025-12-10T09:20:54.0855597Z   console.log
2025-12-10T09:20:54.0856036Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:54.0856601Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:54.0857047Z       status: 'installed',
2025-12-10T09:20:54.0857446Z       pluginName: 'TestPlugin',
2025-12-10T09:20:54.0857872Z       version: '1.0.0'
2025-12-10T09:20:54.0858174Z     }
2025-12-10T09:20:54.0858332Z 
2025-12-10T09:20:54.0858520Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:54.0858809Z 
2025-12-10T09:20:54.0858930Z   console.log
2025-12-10T09:20:54.0859383Z     === API DEBUG LOG ===
2025-12-10T09:20:54.0859605Z 
2025-12-10T09:20:54.0859978Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:54.0860422Z 
2025-12-10T09:20:54.0860540Z   console.log
2025-12-10T09:20:54.0860851Z     POST /install - 200 (5ms)
2025-12-10T09:20:54.0861103Z 
2025-12-10T09:20:54.0861452Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:54.0861730Z 
2025-12-10T09:20:54.0861814Z   console.log
2025-12-10T09:20:54.0862159Z     Session: { id: '8RJuHcDBMTZx...', authenticated: true, username: 'admin' }
2025-12-10T09:20:54.0862429Z 
2025-12-10T09:20:54.0862647Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:54.0862903Z 
2025-12-10T09:20:54.0862986Z   console.log
2025-12-10T09:20:54.0863240Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:54.0863443Z 
2025-12-10T09:20:54.0863644Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:54.0863885Z 
2025-12-10T09:20:54.0863962Z   console.log
2025-12-10T09:20:54.0864145Z     ====================
2025-12-10T09:20:54.0864366Z 
2025-12-10T09:20:54.0864737Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:54.0865228Z 
2025-12-10T09:20:54.0865725Z [0mPOST /api/plugins/install [32m200[0m 7.058 ms - 66[0m
2025-12-10T09:20:54.0888627Z   console.log
2025-12-10T09:20:54.0889551Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:54.0889977Z       path: '/plugins/install',
2025-12-10T09:20:54.0890262Z       method: 'POST',
2025-12-10T09:20:54.0890505Z       session: {
2025-12-10T09:20:54.0890827Z         sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0891188Z         authenticated: true,
2025-12-10T09:20:54.0891471Z         username: 'admin'
2025-12-10T09:20:54.0891711Z       },
2025-12-10T09:20:54.0891919Z       tokens: {
2025-12-10T09:20:54.0892151Z         headerPresent: true,
2025-12-10T09:20:54.0892417Z         cookiePresent: true,
2025-12-10T09:20:54.0892722Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:54.0892960Z       }
2025-12-10T09:20:54.0893111Z     }
2025-12-10T09:20:54.0893206Z 
2025-12-10T09:20:54.0893308Z       at log (server.js:360:13)
2025-12-10T09:20:54.0893457Z 
2025-12-10T09:20:54.0894288Z   console.log
2025-12-10T09:20:54.0894659Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:54.0895108Z       path: '/plugins/install',
2025-12-10T09:20:54.0895462Z       method: 'POST',
2025-12-10T09:20:54.0895655Z       session: {
2025-12-10T09:20:54.0895921Z         sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0896217Z         authenticated: true,
2025-12-10T09:20:54.0896439Z         username: 'admin'
2025-12-10T09:20:54.0896629Z       },
2025-12-10T09:20:54.0896967Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:54.0897318Z     }
2025-12-10T09:20:54.0897407Z 
2025-12-10T09:20:54.0897515Z       at log (server.js:441:13)
2025-12-10T09:20:54.0897660Z 
2025-12-10T09:20:54.0904927Z   console.log
2025-12-10T09:20:54.0905297Z     [AUTH] Authentication check: {
2025-12-10T09:20:54.0905700Z       path: '/install',
2025-12-10T09:20:54.0906167Z       method: 'POST',
2025-12-10T09:20:54.0906443Z       sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0906717Z       hasSession: true,
2025-12-10T09:20:54.0906920Z       authenticated: true,
2025-12-10T09:20:54.0907143Z       username: 'admin',
2025-12-10T09:20:54.0907346Z       hasCookies: true,
2025-12-10T09:20:54.0907581Z       timestamp: '2025-12-10T09:20:54.089Z'
2025-12-10T09:20:54.0907821Z     }
2025-12-10T09:20:54.0907917Z 
2025-12-10T09:20:54.0908019Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:54.0908172Z 
2025-12-10T09:20:54.0914562Z   console.log
2025-12-10T09:20:54.0914940Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:54.0915138Z 
2025-12-10T09:20:54.0915244Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:54.0915405Z 
2025-12-10T09:20:54.0920177Z   console.log
2025-12-10T09:20:54.0920639Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:54.0921109Z       url: undefined,
2025-12-10T09:20:54.0921443Z       customName: undefined,
2025-12-10T09:20:54.0921698Z       selectedOption: undefined,
2025-12-10T09:20:54.0922007Z       sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0922284Z       authenticated: true,
2025-12-10T09:20:54.0922499Z       username: 'admin',
2025-12-10T09:20:54.0922686Z       csrf: {
2025-12-10T09:20:54.0923068Z         headerValue: 'b6183e1bd81cb3cfe24634664ebb0ceebf557a47c41e1416d1ac7acb7fcee225',
2025-12-10T09:20:54.0923651Z         cookieValue: 'b6183e1bd81cb3cfe24634664ebb0ceebf557a47c41e1416d1ac7acb7fcee225',
2025-12-10T09:20:54.0924067Z         headerPresent: true,
2025-12-10T09:20:54.0924325Z         cookiePresent: true
2025-12-10T09:20:54.0924634Z       },
2025-12-10T09:20:54.0924950Z       timestamp: '2025-12-10T09:20:54.091Z'
2025-12-10T09:20:54.0925189Z     }
2025-12-10T09:20:54.0925309Z 
2025-12-10T09:20:54.0925512Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:54.0925729Z 
2025-12-10T09:20:54.0925810Z   console.log
2025-12-10T09:20:54.0926105Z     [PLUGIN_INSTALL_API] Install request failed: URL is required
2025-12-10T09:20:54.0926356Z 
2025-12-10T09:20:54.0926472Z       at log (routes/plugins.js:143:21)
2025-12-10T09:20:54.0926643Z 
2025-12-10T09:20:54.0930753Z   console.log
2025-12-10T09:20:54.0931199Z     === API DEBUG LOG ===
2025-12-10T09:20:54.0931351Z 
2025-12-10T09:20:54.0931585Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:54.0931851Z 
2025-12-10T09:20:54.0935593Z   console.log
2025-12-10T09:20:54.0935929Z     POST /install - 400 (4ms)
2025-12-10T09:20:54.0936185Z 
2025-12-10T09:20:54.0936547Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:54.0936876Z 
2025-12-10T09:20:54.0940770Z   console.log
2025-12-10T09:20:54.0941245Z     Session: { id: '8RJuHcDBMTZx...', authenticated: true, username: 'admin' }
2025-12-10T09:20:54.0941516Z 
2025-12-10T09:20:54.0941772Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:54.0942032Z 
2025-12-10T09:20:54.0945741Z   console.log
2025-12-10T09:20:54.0946123Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:54.0946334Z 
2025-12-10T09:20:54.0946559Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:54.0946814Z 
2025-12-10T09:20:54.0950778Z   console.log
2025-12-10T09:20:54.0951030Z     ====================
2025-12-10T09:20:54.0951227Z 
2025-12-10T09:20:54.0951454Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:54.0951712Z 
2025-12-10T09:20:54.0957268Z [0mPOST /api/plugins/install [33m400[0m 7.526 ms - 85[0m
2025-12-10T09:20:54.0983663Z   console.log
2025-12-10T09:20:54.0984087Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:54.0984453Z       path: '/plugins/install',
2025-12-10T09:20:54.0984741Z       method: 'POST',
2025-12-10T09:20:54.0984972Z       session: {
2025-12-10T09:20:54.0985289Z         sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0985864Z         authenticated: true,
2025-12-10T09:20:54.0986147Z         username: 'admin'
2025-12-10T09:20:54.0986383Z       },
2025-12-10T09:20:54.0986580Z       tokens: {
2025-12-10T09:20:54.0986811Z         headerPresent: true,
2025-12-10T09:20:54.0987081Z         cookiePresent: true,
2025-12-10T09:20:54.0987377Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:54.0987653Z       }
2025-12-10T09:20:54.0987840Z     }
2025-12-10T09:20:54.0987949Z 
2025-12-10T09:20:54.0988079Z       at log (server.js:360:13)
2025-12-10T09:20:54.0988252Z 
2025-12-10T09:20:54.0989420Z   console.log
2025-12-10T09:20:54.0989798Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:54.0990142Z       path: '/plugins/install',
2025-12-10T09:20:54.0990414Z       method: 'POST',
2025-12-10T09:20:54.0990644Z       session: {
2025-12-10T09:20:54.0990959Z         sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.0991308Z         authenticated: true,
2025-12-10T09:20:54.0991574Z         username: 'admin'
2025-12-10T09:20:54.0991822Z       },
2025-12-10T09:20:54.0992230Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:54.0992676Z     }
2025-12-10T09:20:54.0992805Z 
2025-12-10T09:20:54.0992951Z       at log (server.js:441:13)
2025-12-10T09:20:54.0993118Z 
2025-12-10T09:20:54.0999737Z   console.log
2025-12-10T09:20:54.1000120Z     [AUTH] Authentication check: {
2025-12-10T09:20:54.1000520Z       path: '/install',
2025-12-10T09:20:54.1000858Z       method: 'POST',
2025-12-10T09:20:54.1001177Z       sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.1001491Z       hasSession: true,
2025-12-10T09:20:54.1001716Z       authenticated: true,
2025-12-10T09:20:54.1001951Z       username: 'admin',
2025-12-10T09:20:54.1002175Z       hasCookies: true,
2025-12-10T09:20:54.1002433Z       timestamp: '2025-12-10T09:20:54.098Z'
2025-12-10T09:20:54.1002687Z     }
2025-12-10T09:20:54.1002790Z 
2025-12-10T09:20:54.1002902Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:54.1003081Z 
2025-12-10T09:20:54.1009418Z   console.log
2025-12-10T09:20:54.1009843Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:54.1010062Z 
2025-12-10T09:20:54.1010183Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:54.1010353Z 
2025-12-10T09:20:54.1015084Z   console.log
2025-12-10T09:20:54.1015578Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:54.1015992Z       url: 'https://example.com/test-plugin.jar',
2025-12-10T09:20:54.1016335Z       customName: undefined,
2025-12-10T09:20:54.1016633Z       selectedOption: undefined,
2025-12-10T09:20:54.1016986Z       sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.1017340Z       authenticated: true,
2025-12-10T09:20:54.1017736Z       username: 'admin',
2025-12-10T09:20:54.1018047Z       csrf: {
2025-12-10T09:20:54.1018650Z         headerValue: 'b6183e1bd81cb3cfe24634664ebb0ceebf557a47c41e1416d1ac7acb7fcee225',
2025-12-10T09:20:54.1019516Z         cookieValue: 'b6183e1bd81cb3cfe24634664ebb0ceebf557a47c41e1416d1ac7acb7fcee225',
2025-12-10T09:20:54.1020020Z         headerPresent: true,
2025-12-10T09:20:54.1020279Z         cookiePresent: true
2025-12-10T09:20:54.1020518Z       },
2025-12-10T09:20:54.1020759Z       timestamp: '2025-12-10T09:20:54.100Z'
2025-12-10T09:20:54.1021047Z     }
2025-12-10T09:20:54.1021154Z 
2025-12-10T09:20:54.1021289Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:54.1021497Z 
2025-12-10T09:20:54.1021580Z   console.log
2025-12-10T09:20:54.1022030Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:54.1022655Z       url: 'https://example.com/test-plugin.jar',
2025-12-10T09:20:54.1023148Z       status: 'installed',
2025-12-10T09:20:54.1023472Z       pluginName: 'TestPlugin',
2025-12-10T09:20:54.1023721Z       version: '1.0.0'
2025-12-10T09:20:54.1023923Z     }
2025-12-10T09:20:54.1024021Z 
2025-12-10T09:20:54.1024147Z       at log (routes/plugins.js:158:17)
2025-12-10T09:20:54.1024330Z 
2025-12-10T09:20:54.1024413Z   console.log
2025-12-10T09:20:54.1024791Z     === API DEBUG LOG ===
2025-12-10T09:20:54.1025033Z 
2025-12-10T09:20:54.1025420Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:54.1025866Z 
2025-12-10T09:20:54.1026000Z   console.log
2025-12-10T09:20:54.1026302Z     POST /install - 200 (5ms)
2025-12-10T09:20:54.1026469Z 
2025-12-10T09:20:54.1026710Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:54.1027001Z 
2025-12-10T09:20:54.1028154Z   console.log
2025-12-10T09:20:54.1028740Z     Session: { id: '8RJuHcDBMTZx...', authenticated: true, username: 'admin' }
2025-12-10T09:20:54.1029350Z 
2025-12-10T09:20:54.1029636Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:54.1029928Z 
2025-12-10T09:20:54.1031392Z   console.log
2025-12-10T09:20:54.1031773Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:54.1031997Z 
2025-12-10T09:20:54.1032237Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:54.1032540Z 
2025-12-10T09:20:54.1034333Z   console.log
2025-12-10T09:20:54.1034744Z     ====================
2025-12-10T09:20:54.1034997Z 
2025-12-10T09:20:54.1035267Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:54.1035533Z 
2025-12-10T09:20:54.1040839Z [0mPOST /api/plugins/install [32m200[0m 6.393 ms - 66[0m
2025-12-10T09:20:54.1066504Z   console.log
2025-12-10T09:20:54.1066912Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:54.1067252Z       path: '/plugins/install',
2025-12-10T09:20:54.1067481Z       method: 'POST',
2025-12-10T09:20:54.1067672Z       session: {
2025-12-10T09:20:54.1067925Z         sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.1068209Z         authenticated: true,
2025-12-10T09:20:54.1068426Z         username: 'admin'
2025-12-10T09:20:54.1068618Z       },
2025-12-10T09:20:54.1068775Z       tokens: {
2025-12-10T09:20:54.1068959Z         headerPresent: true,
2025-12-10T09:20:54.1069317Z         cookiePresent: true,
2025-12-10T09:20:54.1069688Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:54.1069910Z       }
2025-12-10T09:20:54.1070064Z     }
2025-12-10T09:20:54.1070159Z 
2025-12-10T09:20:54.1070263Z       at log (server.js:360:13)
2025-12-10T09:20:54.1070566Z 
2025-12-10T09:20:54.1072637Z   console.log
2025-12-10T09:20:54.1072992Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:54.1073276Z       path: '/plugins/install',
2025-12-10T09:20:54.1073501Z       method: 'POST',
2025-12-10T09:20:54.1073688Z       session: {
2025-12-10T09:20:54.1073942Z         sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.1074225Z         authenticated: true,
2025-12-10T09:20:54.1074433Z         username: 'admin'
2025-12-10T09:20:54.1074624Z       },
2025-12-10T09:20:54.1074959Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:54.1075311Z     }
2025-12-10T09:20:54.1075401Z 
2025-12-10T09:20:54.1075500Z       at log (server.js:441:13)
2025-12-10T09:20:54.1075653Z 
2025-12-10T09:20:54.1083080Z   console.log
2025-12-10T09:20:54.1083451Z     [AUTH] Authentication check: {
2025-12-10T09:20:54.1083851Z       path: '/install',
2025-12-10T09:20:54.1084172Z       method: 'POST',
2025-12-10T09:20:54.1084534Z       sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.1084821Z       hasSession: true,
2025-12-10T09:20:54.1085059Z       authenticated: true,
2025-12-10T09:20:54.1085276Z       username: 'admin',
2025-12-10T09:20:54.1085471Z       hasCookies: true,
2025-12-10T09:20:54.1085703Z       timestamp: '2025-12-10T09:20:54.107Z'
2025-12-10T09:20:54.1085937Z     }
2025-12-10T09:20:54.1086026Z 
2025-12-10T09:20:54.1086132Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:54.1086283Z 
2025-12-10T09:20:54.1093993Z   console.log
2025-12-10T09:20:54.1094346Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:54.1094566Z 
2025-12-10T09:20:54.1094672Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:54.1094831Z 
2025-12-10T09:20:54.1099467Z   console.log
2025-12-10T09:20:54.1099914Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:54.1100485Z       url: 'https://example.com/invalid.jar',
2025-12-10T09:20:54.1100775Z       customName: undefined,
2025-12-10T09:20:54.1101041Z       selectedOption: undefined,
2025-12-10T09:20:54.1101343Z       sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.1101625Z       authenticated: true,
2025-12-10T09:20:54.1101829Z       username: 'admin',
2025-12-10T09:20:54.1102022Z       csrf: {
2025-12-10T09:20:54.1102389Z         headerValue: 'b6183e1bd81cb3cfe24634664ebb0ceebf557a47c41e1416d1ac7acb7fcee225',
2025-12-10T09:20:54.1102963Z         cookieValue: 'b6183e1bd81cb3cfe24634664ebb0ceebf557a47c41e1416d1ac7acb7fcee225',
2025-12-10T09:20:54.1103365Z         headerPresent: true,
2025-12-10T09:20:54.1103593Z         cookiePresent: true
2025-12-10T09:20:54.1103796Z       },
2025-12-10T09:20:54.1104000Z       timestamp: '2025-12-10T09:20:54.109Z'
2025-12-10T09:20:54.1104239Z     }
2025-12-10T09:20:54.1104328Z 
2025-12-10T09:20:54.1104445Z       at log (routes/plugins.js:137:13)
2025-12-10T09:20:54.1104626Z 
2025-12-10T09:20:54.1132971Z   console.error
2025-12-10T09:20:54.1133599Z     [PLUGIN_INSTALL_API] Install request failed with error: {
2025-12-10T09:20:54.1134298Z       url: 'https://example.com/invalid.jar',
2025-12-10T09:20:54.1134693Z       error: 'Invalid plugin file',
2025-12-10T09:20:54.1135034Z       stack: 'Error: Invalid plugin file\n' +
2025-12-10T09:20:54.1135888Z         '    at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/plugins-csrf.test.js:168:17)\n' +
2025-12-10T09:20:54.1137187Z         '    at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)\n' +
2025-12-10T09:20:54.1138346Z         '    at new Promise (<anonymous>)\n' +
2025-12-10T09:20:54.1139348Z         '    at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)\n' +
2025-12-10T09:20:54.1140802Z         '    at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)\n' +
2025-12-10T09:20:54.1142075Z         '    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n' +
2025-12-10T09:20:54.1143037Z         '    at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)\n' +
2025-12-10T09:20:54.1144247Z         '    at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)\n' +
2025-12-10T09:20:54.1145740Z         '    at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)\n' +
2025-12-10T09:20:54.1147001Z         '    at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)\n' +
2025-12-10T09:20:54.1148140Z         '    at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)\n' +
2025-12-10T09:20:54.1150206Z         '    at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n' +
2025-12-10T09:20:54.1151762Z         '    at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n' +
2025-12-10T09:20:54.1153313Z         '    at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)\n' +
2025-12-10T09:20:54.1154389Z         '    at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)\n' +
2025-12-10T09:20:54.1155692Z         '    at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)'
2025-12-10T09:20:54.1156289Z     }
2025-12-10T09:20:54.1156390Z 
2025-12-10T09:20:54.1156669Z     [0m [90m 165 |[39m         res[33m.[39mjson(result)[33m;[39m
2025-12-10T09:20:54.1157062Z      [90m 166 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:54.1157730Z     [31m[1m>[22m[39m[90m 167 |[39m         console[33m.[39merror([32m'[PLUGIN_INSTALL_API] Install request failed with error:'[39m[33m,[39m {
2025-12-10T09:20:54.1158296Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:54.1158731Z      [90m 168 |[39m             url[33m:[39m req[33m.[39mbody[33m.[39murl[33m,[39m
2025-12-10T09:20:54.1159375Z      [90m 169 |[39m             error[33m:[39m error[33m.[39mmessage[33m,[39m
2025-12-10T09:20:54.1159832Z      [90m 170 |[39m             stack[33m:[39m error[33m.[39mstack[0m
2025-12-10T09:20:54.1160040Z 
2025-12-10T09:20:54.1160208Z       at error (routes/plugins.js:167:17)
2025-12-10T09:20:54.1160514Z 
2025-12-10T09:20:54.1160652Z   console.log
2025-12-10T09:20:54.1160961Z     === API DEBUG LOG ===
2025-12-10T09:20:54.1161176Z 
2025-12-10T09:20:54.1161522Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:54.1161993Z 
2025-12-10T09:20:54.1162108Z   console.log
2025-12-10T09:20:54.1162415Z     POST /install - 400 (8ms)
2025-12-10T09:20:54.1162661Z 
2025-12-10T09:20:54.1163006Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:54.1163431Z 
2025-12-10T09:20:54.1163540Z   console.log
2025-12-10T09:20:54.1164059Z     Session: { id: '8RJuHcDBMTZx...', authenticated: true, username: 'admin' }
2025-12-10T09:20:54.1164510Z 
2025-12-10T09:20:54.1164841Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:54.1165278Z 
2025-12-10T09:20:54.1165402Z   console.log
2025-12-10T09:20:54.1165806Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:54.1166139Z 
2025-12-10T09:20:54.1166685Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:54.1167095Z 
2025-12-10T09:20:54.1167172Z   console.log
2025-12-10T09:20:54.1167355Z     ====================
2025-12-10T09:20:54.1167486Z 
2025-12-10T09:20:54.1167691Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:54.1167935Z 
2025-12-10T09:20:54.1172913Z [0mPOST /api/plugins/install [33m400[0m 9.910 ms - 150[0m
2025-12-10T09:20:54.1200016Z   console.log
2025-12-10T09:20:54.1200488Z     [CSRF] Applying CSRF protection: {
2025-12-10T09:20:54.1201072Z       path: '/plugins/install',
2025-12-10T09:20:54.1201460Z       method: 'POST',
2025-12-10T09:20:54.1201710Z       session: {
2025-12-10T09:20:54.1202039Z         sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.1202408Z         authenticated: true,
2025-12-10T09:20:54.1202681Z         username: 'admin'
2025-12-10T09:20:54.1202935Z       },
2025-12-10T09:20:54.1203133Z       tokens: {
2025-12-10T09:20:54.1203361Z         headerPresent: true,
2025-12-10T09:20:54.1203602Z         cookiePresent: true,
2025-12-10T09:20:54.1203851Z         headerSource: 'CSRF-Token'
2025-12-10T09:20:54.1204077Z       }
2025-12-10T09:20:54.1204227Z     }
2025-12-10T09:20:54.1204321Z 
2025-12-10T09:20:54.1204536Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:54.1204804Z 
2025-12-10T09:20:54.1206559Z   console.log
2025-12-10T09:20:54.1206957Z     [CSRF] CSRF validation passed: {
2025-12-10T09:20:54.1207418Z       path: '/plugins/install',
2025-12-10T09:20:54.1207787Z       method: 'POST',
2025-12-10T09:20:54.1208101Z       session: {
2025-12-10T09:20:54.1208523Z         sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.1208995Z         authenticated: true,
2025-12-10T09:20:54.1209759Z         username: 'admin'
2025-12-10T09:20:54.1210013Z       },
2025-12-10T09:20:54.1210353Z       validation: { passed: true, tokensMatch: true, sessionAuthenticated: true }
2025-12-10T09:20:54.1210705Z     }
2025-12-10T09:20:54.1210796Z 
2025-12-10T09:20:54.1211021Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:54.1211277Z 
2025-12-10T09:20:54.1217879Z   console.log
2025-12-10T09:20:54.1218256Z     [AUTH] Authentication check: {
2025-12-10T09:20:54.1218660Z       path: '/install',
2025-12-10T09:20:54.1218974Z       method: 'POST',
2025-12-10T09:20:54.1219514Z       sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.1219803Z       hasSession: true,
2025-12-10T09:20:54.1220009Z       authenticated: true,
2025-12-10T09:20:54.1220216Z       username: 'admin',
2025-12-10T09:20:54.1220413Z       hasCookies: true,
2025-12-10T09:20:54.1220640Z       timestamp: '2025-12-10T09:20:54.120Z'
2025-12-10T09:20:54.1220873Z     }
2025-12-10T09:20:54.1220975Z 
2025-12-10T09:20:54.1221182Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:54.1221444Z 
2025-12-10T09:20:54.1228459Z   console.log
2025-12-10T09:20:54.1228844Z     [AUTH] Authentication successful for: admin
2025-12-10T09:20:54.1229041Z 
2025-12-10T09:20:54.1229445Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:54.1229703Z 
2025-12-10T09:20:54.1234919Z   console.log
2025-12-10T09:20:54.1235376Z     [PLUGIN_INSTALL_API] Install request received: {
2025-12-10T09:20:54.1235940Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:54.1236333Z       customName: undefined,
2025-12-10T09:20:54.1236589Z       selectedOption: undefined,
2025-12-10T09:20:54.1236880Z       sessionID: '8RJuHcDBMTZxA_Bv39K0Whn7i-bIVg7Z',
2025-12-10T09:20:54.1237160Z       authenticated: true,
2025-12-10T09:20:54.1237377Z       username: 'admin',
2025-12-10T09:20:54.1237570Z       csrf: {
2025-12-10T09:20:54.1237949Z         headerValue: 'b6183e1bd81cb3cfe24634664ebb0ceebf557a47c41e1416d1ac7acb7fcee225',
2025-12-10T09:20:54.1238834Z         cookieValue: 'b6183e1bd81cb3cfe24634664ebb0ceebf557a47c41e1416d1ac7acb7fcee225',
2025-12-10T09:20:54.1239705Z         headerPresent: true,
2025-12-10T09:20:54.1240326Z         cookiePresent: true
2025-12-10T09:20:54.1240675Z       },
2025-12-10T09:20:54.1241008Z       timestamp: '2025-12-10T09:20:54.122Z'
2025-12-10T09:20:54.1241395Z     }
2025-12-10T09:20:54.1241545Z 
2025-12-10T09:20:54.1241850Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:54.1242116Z 
2025-12-10T09:20:54.1242204Z   console.log
2025-12-10T09:20:54.1242466Z     [PLUGIN_INSTALL_API] Install request succeeded: {
2025-12-10T09:20:54.1242798Z       url: 'https://example.com/plugin.jar',
2025-12-10T09:20:54.1243146Z       status: 'installed',
2025-12-10T09:20:54.1243564Z       pluginName: 'TestPlugin',
2025-12-10T09:20:54.1243935Z       version: '1.0.0'
2025-12-10T09:20:54.1244241Z     }
2025-12-10T09:20:54.1244392Z 
2025-12-10T09:20:54.1244748Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:54.1245188Z 
2025-12-10T09:20:54.1245310Z   console.log
2025-12-10T09:20:54.1245615Z     === API DEBUG LOG ===
2025-12-10T09:20:54.1245832Z 
2025-12-10T09:20:54.1246187Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:54.1246601Z 
2025-12-10T09:20:54.1246960Z   console.log
2025-12-10T09:20:54.1247292Z     POST /install - 200 (5ms)
2025-12-10T09:20:54.1247548Z 
2025-12-10T09:20:54.1247907Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:54.1248341Z 
2025-12-10T09:20:54.1251083Z   console.log
2025-12-10T09:20:54.1251536Z     Session: { id: '8RJuHcDBMTZx...', authenticated: true, username: 'admin' }
2025-12-10T09:20:54.1251810Z 
2025-12-10T09:20:54.1252039Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:54.1252468Z 
2025-12-10T09:20:54.1255045Z   console.log
2025-12-10T09:20:54.1255411Z     CSRF: { header: '[PRESENT]', cookie: '[PRESENT]' }
2025-12-10T09:20:54.1255617Z 
2025-12-10T09:20:54.1255834Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:54.1256099Z 
2025-12-10T09:20:54.1258879Z   console.log
2025-12-10T09:20:54.1259436Z     ====================
2025-12-10T09:20:54.1259670Z 
2025-12-10T09:20:54.1260050Z       at console.<anonymous> (node_modules/jest-mock/build/index.js:794:25)
2025-12-10T09:20:54.1260494Z 
2025-12-10T09:20:54.1265440Z [0mPOST /api/plugins/install [32m200[0m 7.337 ms - 66[0m
2025-12-10T09:20:54.2147269Z PASS __tests__/routes/plugins-csrf.test.js
2025-12-10T09:20:54.2147776Z   Plugin Install API with CSRF Protection
2025-12-10T09:20:54.2148188Z     CSRF protection on /api/plugins/install
2025-12-10T09:20:54.2148898Z       ✓ should return 403 when CSRF token is missing (11 ms)
2025-12-10T09:20:54.2149768Z       ✓ should return 403 when CSRF token is invalid (16 ms)
2025-12-10T09:20:54.2150465Z       ✓ should accept valid CSRF token and proceed with plugin install logic (8 ms)
2025-12-10T09:20:54.2151067Z       ✓ should work with X-CSRF-Token header (8 ms)
2025-12-10T09:20:54.2151549Z     Plugin install endpoint functionality with valid CSRF
2025-12-10T09:20:54.2152058Z       ✓ should return 400 when URL is missing (10 ms)
2025-12-10T09:20:54.2152688Z       ✓ should call pluginManager.installFromUrl when CSRF and auth pass (8 ms)
2025-12-10T09:20:54.2153381Z       ✓ should handle plugin installation errors appropriately (13 ms)
2025-12-10T09:20:54.2153866Z     CSRF validation logging for plugin install
2025-12-10T09:20:54.2154444Z       ✓ should log CSRF validation details for plugin install requests (9 ms)
2025-12-10T09:20:54.2154796Z 
2025-12-10T09:20:54.4438576Z   console.log
2025-12-10T09:20:54.4439023Z     [Session] Cookie configuration: {
2025-12-10T09:20:54.4439655Z       secure: false,
2025-12-10T09:20:54.4439968Z       nodeEnv: 'test',
2025-12-10T09:20:54.4440385Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:54.4440908Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:54.4441348Z     }
2025-12-10T09:20:54.4441498Z 
2025-12-10T09:20:54.4442078Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:54.4442389Z 
2025-12-10T09:20:54.5579107Z   console.log
2025-12-10T09:20:54.5579904Z     [Test] Session middleware initialized (memory store)
2025-12-10T09:20:54.5580309Z 
2025-12-10T09:20:54.5580527Z       at Object.log (server.js:142:13)
2025-12-10T09:20:54.5580842Z 
2025-12-10T09:20:54.5585343Z   console.log
2025-12-10T09:20:54.5585799Z     [Session] Initialization status: {
2025-12-10T09:20:54.5586274Z       nodeEnv: 'test',
2025-12-10T09:20:54.5586660Z       sessionSecretSet: true,
2025-12-10T09:20:54.5587086Z       redisConfigured: false,
2025-12-10T09:20:54.5587496Z       middlewareApplied: true
2025-12-10T09:20:54.5587860Z     }
2025-12-10T09:20:54.5588031Z 
2025-12-10T09:20:54.5588242Z       at Object.log (server.js:155:9)
2025-12-10T09:20:54.5588579Z 
2025-12-10T09:20:54.5592964Z   console.log
2025-12-10T09:20:54.5593406Z     [CSRF] Cookie configuration: {
2025-12-10T09:20:54.5593843Z       secure: false,
2025-12-10T09:20:54.5594189Z       nodeEnv: 'test',
2025-12-10T09:20:54.5594637Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:54.5595233Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:54.5595725Z     }
2025-12-10T09:20:54.5595887Z 
2025-12-10T09:20:54.5596112Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:54.5596436Z 
2025-12-10T09:20:54.5667118Z   console.log
2025-12-10T09:20:54.5667576Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:54.5667912Z 
2025-12-10T09:20:54.5668103Z       at log (server.js:284:17)
2025-12-10T09:20:54.5668368Z 
2025-12-10T09:20:54.5684973Z   console.log
2025-12-10T09:20:54.5685398Z     === API DEBUG LOG ===
2025-12-10T09:20:54.5685664Z 
2025-12-10T09:20:54.5686079Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:54.5686992Z 
2025-12-10T09:20:54.5690169Z   console.log
2025-12-10T09:20:54.5690553Z     POST /login - 400 (3ms)
2025-12-10T09:20:54.5690813Z 
2025-12-10T09:20:54.5691239Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:54.5691721Z 
2025-12-10T09:20:54.5695354Z   console.log
2025-12-10T09:20:54.5695991Z     Session: { id: 'H8Dckg__N2_r...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:54.5696482Z 
2025-12-10T09:20:54.5696890Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:54.5697389Z 
2025-12-10T09:20:54.5700888Z   console.log
2025-12-10T09:20:54.5701539Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:54.5701935Z 
2025-12-10T09:20:54.5702335Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:54.5702818Z 
2025-12-10T09:20:54.5706092Z   console.log
2025-12-10T09:20:54.5706557Z     ====================
2025-12-10T09:20:54.5706824Z 
2025-12-10T09:20:54.5707224Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:54.5707708Z 
2025-12-10T09:20:54.5717127Z [0mPOST /api/login [33m400[0m 8.721 ms - 287[0m
2025-12-10T09:20:54.5764227Z   console.log
2025-12-10T09:20:54.5764637Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:54.5764949Z 
2025-12-10T09:20:54.5765135Z       at log (server.js:284:17)
2025-12-10T09:20:54.5765315Z 
2025-12-10T09:20:54.5771862Z   console.log
2025-12-10T09:20:54.5772106Z     [LOGIN] Login attempt: {
2025-12-10T09:20:54.5772484Z       username: 'a',
2025-12-10T09:20:54.5772884Z       sessionID: 'tr6drvFMrhT89MC8SuQ6rNMJ4DHBhFCl',
2025-12-10T09:20:54.5773266Z       hasSession: true,
2025-12-10T09:20:54.5773586Z       timestamp: '2025-12-10T09:20:54.576Z'
2025-12-10T09:20:54.5773831Z     }
2025-12-10T09:20:54.5773927Z 
2025-12-10T09:20:54.5774040Z       at log (routes/api.js:15:13)
2025-12-10T09:20:54.5774203Z 
2025-12-10T09:20:54.5776802Z   console.log
2025-12-10T09:20:54.5777275Z     [LOGIN] Login failed: Invalid credentials for user: a
2025-12-10T09:20:54.5777635Z 
2025-12-10T09:20:54.5777755Z       at log (routes/api.js:83:21)
2025-12-10T09:20:54.5777914Z 
2025-12-10T09:20:54.5781984Z   console.log
2025-12-10T09:20:54.5782568Z     [Audit] Event logged: {
2025-12-10T09:20:54.5782977Z       eventType: 'auth.login.failure',
2025-12-10T09:20:54.5783247Z       username: 'a',
2025-12-10T09:20:54.5783494Z       timestamp: '2025-12-10T09:20:54.577Z'
2025-12-10T09:20:54.5783727Z     }
2025-12-10T09:20:54.5783827Z 
2025-12-10T09:20:54.5783949Z       at log (services/auditLog.js:106:17)
2025-12-10T09:20:54.5784125Z 
2025-12-10T09:20:54.5785863Z   console.log
2025-12-10T09:20:54.5786187Z     === API DEBUG LOG ===
2025-12-10T09:20:54.5786413Z 
2025-12-10T09:20:54.5786772Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:54.5787045Z 
2025-12-10T09:20:54.5788489Z   console.log
2025-12-10T09:20:54.5788817Z     POST /login - 401 (3ms)
2025-12-10T09:20:54.5789075Z 
2025-12-10T09:20:54.5789605Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:54.5789900Z 
2025-12-10T09:20:54.5791464Z   console.log
2025-12-10T09:20:54.5791854Z     Session: { id: 'tr6drvFMrhT8...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:54.5792140Z 
2025-12-10T09:20:54.5792363Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:54.5792620Z 
2025-12-10T09:20:54.5794536Z   console.log
2025-12-10T09:20:54.5794863Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:54.5795074Z 
2025-12-10T09:20:54.5795295Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:54.5795553Z 
2025-12-10T09:20:54.5797445Z   console.log
2025-12-10T09:20:54.5797642Z     ====================
2025-12-10T09:20:54.5797772Z 
2025-12-10T09:20:54.5797994Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:54.5798453Z 
2025-12-10T09:20:54.5801537Z [0mPOST /api/login [33m401[0m 5.143 ms - 31[0m
2025-12-10T09:20:54.5827510Z   console.log
2025-12-10T09:20:54.5827818Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:54.5828047Z 
2025-12-10T09:20:54.5828190Z       at log (server.js:284:17)
2025-12-10T09:20:54.5828373Z 
2025-12-10T09:20:54.5834735Z   console.log
2025-12-10T09:20:54.5835084Z     [LOGIN] Login attempt: {
2025-12-10T09:20:54.5835460Z       username: 'test@user.com',
2025-12-10T09:20:54.5835840Z       sessionID: '6Dn2iK0-UOTDxxOSd7PiFryJVLSyHFwD',
2025-12-10T09:20:54.5836130Z       hasSession: true,
2025-12-10T09:20:54.5836372Z       timestamp: '2025-12-10T09:20:54.582Z'
2025-12-10T09:20:54.5836605Z     }
2025-12-10T09:20:54.5836704Z 
2025-12-10T09:20:54.5836810Z       at log (routes/api.js:15:13)
2025-12-10T09:20:54.5836973Z 
2025-12-10T09:20:54.5838954Z   console.log
2025-12-10T09:20:54.5839553Z     [LOGIN] Login failed: Invalid credentials for user: test@user.com
2025-12-10T09:20:54.5839909Z 
2025-12-10T09:20:54.5840073Z       at log (routes/api.js:83:21)
2025-12-10T09:20:54.5840350Z 
2025-12-10T09:20:54.5844191Z   console.log
2025-12-10T09:20:54.5844398Z     [Audit] Event logged: {
2025-12-10T09:20:54.5844722Z       eventType: 'auth.login.failure',
2025-12-10T09:20:54.5845175Z       username: 'test@user.com',
2025-12-10T09:20:54.5845449Z       timestamp: '2025-12-10T09:20:54.583Z'
2025-12-10T09:20:54.5845679Z     }
2025-12-10T09:20:54.5845778Z 
2025-12-10T09:20:54.5845898Z       at log (services/auditLog.js:106:17)
2025-12-10T09:20:54.5846078Z 
2025-12-10T09:20:54.5848146Z   console.log
2025-12-10T09:20:54.5848403Z     === API DEBUG LOG ===
2025-12-10T09:20:54.5848544Z 
2025-12-10T09:20:54.5848765Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:54.5849021Z 
2025-12-10T09:20:54.5851372Z   console.log
2025-12-10T09:20:54.5851580Z     POST /login - 401 (2ms)
2025-12-10T09:20:54.5851736Z 
2025-12-10T09:20:54.5851958Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:54.5852236Z 
2025-12-10T09:20:54.5854430Z   console.log
2025-12-10T09:20:54.5854843Z     Session: { id: '6Dn2iK0-UOTD...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:54.5855122Z 
2025-12-10T09:20:54.5855529Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:54.5855796Z 
2025-12-10T09:20:54.5857450Z   console.log
2025-12-10T09:20:54.5857725Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:54.5857937Z 
2025-12-10T09:20:54.5858160Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:54.5858422Z 
2025-12-10T09:20:54.5860517Z   console.log
2025-12-10T09:20:54.5860729Z     ====================
2025-12-10T09:20:54.5860864Z 
2025-12-10T09:20:54.5861087Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:54.5861344Z 
2025-12-10T09:20:54.5864291Z [0mPOST /api/login [33m401[0m 4.557 ms - 31[0m
2025-12-10T09:20:54.5922561Z   console.log
2025-12-10T09:20:54.5923093Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:54.5923482Z 
2025-12-10T09:20:54.5923714Z       at log (server.js:284:17)
2025-12-10T09:20:54.5923932Z 
2025-12-10T09:20:54.5931303Z   console.log
2025-12-10T09:20:54.5931755Z     === API DEBUG LOG ===
2025-12-10T09:20:54.5932045Z 
2025-12-10T09:20:54.5932484Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:54.5932782Z 
2025-12-10T09:20:54.5935071Z   console.log
2025-12-10T09:20:54.5935442Z     POST /login - 400 (2ms)
2025-12-10T09:20:54.5935687Z 
2025-12-10T09:20:54.5936016Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:54.5936298Z 
2025-12-10T09:20:54.5938917Z   console.log
2025-12-10T09:20:54.5939698Z     Session: { id: 'sGaqBrEJ34Wl...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:54.5940085Z 
2025-12-10T09:20:54.5940316Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:54.5940829Z 
2025-12-10T09:20:54.5943003Z   console.log
2025-12-10T09:20:54.5943450Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:54.5943789Z 
2025-12-10T09:20:54.5944076Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:54.5944347Z 
2025-12-10T09:20:54.5946419Z   console.log
2025-12-10T09:20:54.5946737Z     ====================
2025-12-10T09:20:54.5946958Z 
2025-12-10T09:20:54.5947300Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:54.5947565Z 
2025-12-10T09:20:54.5950349Z [0mPOST /api/login [33m400[0m 3.670 ms - 180[0m
2025-12-10T09:20:54.5974789Z   console.log
2025-12-10T09:20:54.5975181Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:54.5975491Z 
2025-12-10T09:20:54.5975663Z       at log (server.js:284:17)
2025-12-10T09:20:54.5975823Z 
2025-12-10T09:20:54.5982935Z   console.log
2025-12-10T09:20:54.5983267Z     === API DEBUG LOG ===
2025-12-10T09:20:54.5983513Z 
2025-12-10T09:20:54.5983855Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:54.5984135Z 
2025-12-10T09:20:54.5986822Z   console.log
2025-12-10T09:20:54.5987162Z     POST /login - 400 (2ms)
2025-12-10T09:20:54.5987408Z 
2025-12-10T09:20:54.5987732Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:54.5988003Z 
2025-12-10T09:20:54.5990819Z   console.log
2025-12-10T09:20:54.5991416Z     Session: { id: 'b9uRHRVMYozn...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:54.5991816Z 
2025-12-10T09:20:54.5992046Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:54.5992299Z 
2025-12-10T09:20:54.5994537Z   console.log
2025-12-10T09:20:54.5994981Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:54.5995318Z 
2025-12-10T09:20:54.5995585Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:54.5995845Z 
2025-12-10T09:20:54.5998084Z   console.log
2025-12-10T09:20:54.5998411Z     ====================
2025-12-10T09:20:54.5998626Z 
2025-12-10T09:20:54.5998984Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:54.5999468Z 
2025-12-10T09:20:54.6002345Z [0mPOST /api/login [33m400[0m 3.582 ms - 94[0m
2025-12-10T09:20:54.6960207Z PASS __tests__/routes/login.test.js
2025-12-10T09:20:54.6960727Z   Login Error Handling
2025-12-10T09:20:54.6961154Z     POST /api/login - Error Format Handling
2025-12-10T09:20:54.6962122Z       ✓ should return validation errors in errors array format (13 ms)
2025-12-10T09:20:54.6962891Z       ✓ should accept single character usernames (7 ms)
2025-12-10T09:20:54.6963627Z       ✓ should accept usernames with @ and . characters (10 ms)
2025-12-10T09:20:54.6964438Z       ✓ should reject usernames with truly invalid characters (5 ms)
2025-12-10T09:20:54.6965164Z       ✓ should require password field (5 ms)
2025-12-10T09:20:54.6965482Z 
2025-12-10T09:20:54.7568293Z   console.log
2025-12-10T09:20:54.7569084Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.7569964Z 
2025-12-10T09:20:54.7570311Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.7570662Z 
2025-12-10T09:20:54.7639699Z   console.log
2025-12-10T09:20:54.7640104Z     Database connection closed
2025-12-10T09:20:54.7640377Z 
2025-12-10T09:20:54.7640672Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.7640942Z 
2025-12-10T09:20:54.7694419Z   console.log
2025-12-10T09:20:54.7695305Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.7695775Z 
2025-12-10T09:20:54.7696024Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.7696321Z 
2025-12-10T09:20:54.7905987Z   console.log
2025-12-10T09:20:54.7906396Z     Database connection closed
2025-12-10T09:20:54.7907016Z 
2025-12-10T09:20:54.7907403Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.7907837Z 
2025-12-10T09:20:54.7958115Z   console.log
2025-12-10T09:20:54.7959419Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.7960215Z 
2025-12-10T09:20:54.7960826Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.7961284Z 
2025-12-10T09:20:54.7988426Z   console.log
2025-12-10T09:20:54.7988814Z     Database connection closed
2025-12-10T09:20:54.7989078Z 
2025-12-10T09:20:54.7989558Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.7989836Z 
2025-12-10T09:20:54.8047177Z   console.log
2025-12-10T09:20:54.8048139Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.8048934Z 
2025-12-10T09:20:54.8049657Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.8050166Z 
2025-12-10T09:20:54.8073129Z   console.log
2025-12-10T09:20:54.8073558Z     Database connection closed
2025-12-10T09:20:54.8073846Z 
2025-12-10T09:20:54.8074265Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.8074743Z 
2025-12-10T09:20:54.8128018Z   console.log
2025-12-10T09:20:54.8128941Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.8129984Z 
2025-12-10T09:20:54.8130401Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.8130898Z 
2025-12-10T09:20:54.8156299Z   console.log
2025-12-10T09:20:54.8156746Z     Database connection closed
2025-12-10T09:20:54.8157038Z 
2025-12-10T09:20:54.8157432Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.8157908Z 
2025-12-10T09:20:54.8208202Z   console.log
2025-12-10T09:20:54.8209453Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.8210266Z 
2025-12-10T09:20:54.8210944Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.8211453Z 
2025-12-10T09:20:54.8237384Z   console.log
2025-12-10T09:20:54.8237818Z     Database connection closed
2025-12-10T09:20:54.8238115Z 
2025-12-10T09:20:54.8238507Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.8238978Z 
2025-12-10T09:20:54.8283510Z   console.log
2025-12-10T09:20:54.8284503Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.8285278Z 
2025-12-10T09:20:54.8285699Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.8286200Z 
2025-12-10T09:20:54.8308355Z   console.log
2025-12-10T09:20:54.8308800Z     Database connection closed
2025-12-10T09:20:54.8309124Z 
2025-12-10T09:20:54.8309719Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.8310254Z 
2025-12-10T09:20:54.8355766Z   console.log
2025-12-10T09:20:54.8356787Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.8357585Z 
2025-12-10T09:20:54.8358027Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.8358529Z 
2025-12-10T09:20:54.8392046Z   console.log
2025-12-10T09:20:54.8392489Z     Database connection closed
2025-12-10T09:20:54.8392794Z 
2025-12-10T09:20:54.8393192Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.8393667Z 
2025-12-10T09:20:54.8440024Z   console.log
2025-12-10T09:20:54.8440807Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.8441357Z 
2025-12-10T09:20:54.8441931Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.8442274Z 
2025-12-10T09:20:54.8484542Z   console.log
2025-12-10T09:20:54.8484957Z     Database connection closed
2025-12-10T09:20:54.8485241Z 
2025-12-10T09:20:54.8485607Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.8485925Z 
2025-12-10T09:20:54.8532318Z   console.log
2025-12-10T09:20:54.8533021Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.8533583Z 
2025-12-10T09:20:54.8533878Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.8534232Z 
2025-12-10T09:20:54.8556817Z   console.log
2025-12-10T09:20:54.8557263Z     Database connection closed
2025-12-10T09:20:54.8557567Z 
2025-12-10T09:20:54.8557960Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.8558447Z 
2025-12-10T09:20:54.8603460Z   console.log
2025-12-10T09:20:54.8604177Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.8604732Z 
2025-12-10T09:20:54.8605050Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.8605397Z 
2025-12-10T09:20:54.8630592Z   console.log
2025-12-10T09:20:54.8630883Z     Database connection closed
2025-12-10T09:20:54.8631089Z 
2025-12-10T09:20:54.8631368Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.8631836Z 
2025-12-10T09:20:54.8674171Z   console.log
2025-12-10T09:20:54.8675272Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.8675856Z 
2025-12-10T09:20:54.8676160Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.8676513Z 
2025-12-10T09:20:54.8694987Z   console.log
2025-12-10T09:20:54.8695441Z     Database connection closed
2025-12-10T09:20:54.8695756Z 
2025-12-10T09:20:54.8696099Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.8696440Z 
2025-12-10T09:20:54.8740499Z   console.log
2025-12-10T09:20:54.8741430Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.8741994Z 
2025-12-10T09:20:54.8742286Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.8742614Z 
2025-12-10T09:20:54.8765274Z   console.log
2025-12-10T09:20:54.8765643Z     Database connection closed
2025-12-10T09:20:54.8765839Z 
2025-12-10T09:20:54.8766096Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.8766572Z 
2025-12-10T09:20:54.8811306Z   console.log
2025-12-10T09:20:54.8812484Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.8813408Z 
2025-12-10T09:20:54.8813877Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.8814428Z 
2025-12-10T09:20:54.8841779Z   console.log
2025-12-10T09:20:54.8842207Z     Database connection closed
2025-12-10T09:20:54.8842518Z 
2025-12-10T09:20:54.8842859Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.8843197Z 
2025-12-10T09:20:54.8891171Z   console.log
2025-12-10T09:20:54.8891867Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.8892423Z 
2025-12-10T09:20:54.8892722Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.8893065Z 
2025-12-10T09:20:54.8919663Z   console.log
2025-12-10T09:20:54.8920256Z     Database connection closed
2025-12-10T09:20:54.8920580Z 
2025-12-10T09:20:54.8920998Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.8921474Z 
2025-12-10T09:20:54.8972437Z   console.log
2025-12-10T09:20:54.8973458Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.8974257Z 
2025-12-10T09:20:54.8974711Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.8975189Z 
2025-12-10T09:20:54.9003088Z   console.log
2025-12-10T09:20:54.9003536Z     Database connection closed
2025-12-10T09:20:54.9003833Z 
2025-12-10T09:20:54.9004230Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.9004717Z 
2025-12-10T09:20:54.9052098Z   console.log
2025-12-10T09:20:54.9053236Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.9054036Z 
2025-12-10T09:20:54.9054474Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.9054976Z 
2025-12-10T09:20:54.9083586Z   console.log
2025-12-10T09:20:54.9084246Z     Database connection closed
2025-12-10T09:20:54.9084533Z 
2025-12-10T09:20:54.9084919Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.9085377Z 
2025-12-10T09:20:54.9129455Z   console.log
2025-12-10T09:20:54.9130622Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.9131191Z 
2025-12-10T09:20:54.9131493Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.9131837Z 
2025-12-10T09:20:54.9158756Z   console.log
2025-12-10T09:20:54.9159133Z     Database connection closed
2025-12-10T09:20:54.9159548Z 
2025-12-10T09:20:54.9159878Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.9160142Z 
2025-12-10T09:20:54.9204464Z   console.log
2025-12-10T09:20:54.9205026Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.9205489Z 
2025-12-10T09:20:54.9205717Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.9205982Z 
2025-12-10T09:20:54.9272941Z   console.log
2025-12-10T09:20:54.9273312Z     Database connection closed
2025-12-10T09:20:54.9273699Z 
2025-12-10T09:20:54.9274012Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.9274479Z 
2025-12-10T09:20:54.9323224Z   console.log
2025-12-10T09:20:54.9324112Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.9324576Z 
2025-12-10T09:20:54.9324814Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.9325085Z 
2025-12-10T09:20:54.9377255Z   console.log
2025-12-10T09:20:54.9377636Z     Database connection closed
2025-12-10T09:20:54.9377894Z 
2025-12-10T09:20:54.9378214Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.9378524Z 
2025-12-10T09:20:54.9422020Z   console.log
2025-12-10T09:20:54.9422701Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.9423248Z 
2025-12-10T09:20:54.9423540Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.9423884Z 
2025-12-10T09:20:54.9444741Z   console.log
2025-12-10T09:20:54.9445019Z     Database connection closed
2025-12-10T09:20:54.9445209Z 
2025-12-10T09:20:54.9445468Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.9445786Z 
2025-12-10T09:20:54.9488673Z   console.log
2025-12-10T09:20:54.9489495Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.9490020Z 
2025-12-10T09:20:54.9490286Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.9490605Z 
2025-12-10T09:20:54.9513377Z   console.log
2025-12-10T09:20:54.9513862Z     Database connection closed
2025-12-10T09:20:54.9514052Z 
2025-12-10T09:20:54.9514350Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.9514836Z 
2025-12-10T09:20:54.9557542Z   console.log
2025-12-10T09:20:54.9558628Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.9559443Z 
2025-12-10T09:20:54.9559743Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.9560099Z 
2025-12-10T09:20:54.9623705Z   console.log
2025-12-10T09:20:54.9624116Z     Database connection closed
2025-12-10T09:20:54.9624399Z 
2025-12-10T09:20:54.9624726Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.9625038Z 
2025-12-10T09:20:54.9679459Z   console.log
2025-12-10T09:20:54.9680398Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.9681167Z 
2025-12-10T09:20:54.9681564Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.9682021Z 
2025-12-10T09:20:54.9708512Z   console.log
2025-12-10T09:20:54.9708921Z     Database connection closed
2025-12-10T09:20:54.9709487Z 
2025-12-10T09:20:54.9709743Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.9710029Z 
2025-12-10T09:20:54.9757583Z   console.log
2025-12-10T09:20:54.9758170Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.9758607Z 
2025-12-10T09:20:54.9758850Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.9759126Z 
2025-12-10T09:20:54.9781765Z   console.log
2025-12-10T09:20:54.9782027Z     Database connection closed
2025-12-10T09:20:54.9782200Z 
2025-12-10T09:20:54.9782427Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.9782811Z 
2025-12-10T09:20:54.9827914Z   console.log
2025-12-10T09:20:54.9828932Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.9829923Z 
2025-12-10T09:20:54.9830645Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.9831180Z 
2025-12-10T09:20:54.9857105Z   console.log
2025-12-10T09:20:54.9857546Z     Database connection closed
2025-12-10T09:20:54.9857852Z 
2025-12-10T09:20:54.9858255Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.9858744Z 
2025-12-10T09:20:54.9907264Z   console.log
2025-12-10T09:20:54.9908258Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.9909051Z 
2025-12-10T09:20:54.9909720Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.9910213Z 
2025-12-10T09:20:54.9934858Z   console.log
2025-12-10T09:20:54.9935301Z     Database connection closed
2025-12-10T09:20:54.9935601Z 
2025-12-10T09:20:54.9936001Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:54.9936484Z 
2025-12-10T09:20:54.9981582Z   console.log
2025-12-10T09:20:54.9982597Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-api-keys.db
2025-12-10T09:20:54.9983385Z 
2025-12-10T09:20:54.9983809Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:54.9984305Z 
2025-12-10T09:20:55.0009558Z   console.log
2025-12-10T09:20:55.0009998Z     Database connection closed
2025-12-10T09:20:55.0010300Z 
2025-12-10T09:20:55.0010693Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:55.0011162Z 
2025-12-10T09:20:55.0124326Z PASS __tests__/services/apiKeyService.test.js
2025-12-10T09:20:55.0124781Z   ApiKeyService
2025-12-10T09:20:55.0126094Z     createApiKey
2025-12-10T09:20:55.0127207Z       ✓ should create an API key with valid data (26 ms)
2025-12-10T09:20:55.0127891Z       ✓ should throw error if name is missing (26 ms)
2025-12-10T09:20:55.0128546Z       ✓ should throw error if scopes are invalid (8 ms)
2025-12-10T09:20:55.0129437Z       ✓ should throw error if created_by is missing (9 ms)
2025-12-10T09:20:55.0130085Z       ✓ should set custom rate limit (8 ms)
2025-12-10T09:20:55.0130485Z     validateApiKey
2025-12-10T09:20:55.0130965Z       ✓ should validate a valid API key (8 ms)
2025-12-10T09:20:55.0131526Z       ✓ should return null for invalid API key (7 ms)
2025-12-10T09:20:55.0132119Z       ✓ should return null for disabled API key (9 ms)
2025-12-10T09:20:55.0132706Z       ✓ should return null for expired API key (9 ms)
2025-12-10T09:20:55.0133357Z       ✓ should return null for non-mcs_ prefixed key (7 ms)
2025-12-10T09:20:55.0133841Z     getApiKey
2025-12-10T09:20:55.0134256Z       ✓ should get API key by ID (8 ms)
2025-12-10T09:20:55.0134873Z       ✓ should return null for non-existent key (6 ms)
2025-12-10T09:20:55.0135491Z       ✓ should not return key_hash (7 ms)
2025-12-10T09:20:55.0135933Z     listApiKeys
2025-12-10T09:20:55.0136414Z       ✓ should list all API keys (8 ms)
2025-12-10T09:20:55.0137038Z       ✓ should not return key_hash in list (8 ms)
2025-12-10T09:20:55.0137492Z     updateApiKey
2025-12-10T09:20:55.0138001Z       ✓ should update API key name (8 ms)
2025-12-10T09:20:55.0138593Z       ✓ should update API key scopes (8 ms)
2025-12-10T09:20:55.0139443Z       ✓ should throw error for invalid scopes (7 ms)
2025-12-10T09:20:55.0140130Z       ✓ should update enabled status (12 ms)
2025-12-10T09:20:55.0140572Z     revokeApiKey
2025-12-10T09:20:55.0141118Z       ✓ should revoke (delete) an API key (10 ms)
2025-12-10T09:20:55.0141827Z       ✓ should return false for non-existent key (7 ms)
2025-12-10T09:20:55.0142326Z     hasScope
2025-12-10T09:20:55.0142849Z       ✓ should return true for exact scope match (7 ms)
2025-12-10T09:20:55.0143516Z       ✓ should return false for missing scope (11 ms)
2025-12-10T09:20:55.0144159Z       ✓ should support wildcard scopes (8 ms)
2025-12-10T09:20:55.0144604Z     getAvailableScopes
2025-12-10T09:20:55.0145131Z       ✓ should return list of available scopes (8 ms)
2025-12-10T09:20:55.0145853Z     usage tracking
2025-12-10T09:20:55.0146321Z       ✓ should update usage stats (7 ms)
2025-12-10T09:20:55.0146879Z       ✓ should log API key usage (8 ms)
2025-12-10T09:20:55.0147449Z       ✓ should get usage statistics (7 ms)
2025-12-10T09:20:55.0147760Z 
2025-12-10T09:20:55.2253628Z   console.log
2025-12-10T09:20:55.2254180Z     [Session] Cookie configuration: {
2025-12-10T09:20:55.2254694Z       secure: false,
2025-12-10T09:20:55.2255050Z       nodeEnv: 'test',
2025-12-10T09:20:55.2255471Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:55.2256068Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:55.2256553Z     }
2025-12-10T09:20:55.2256716Z 
2025-12-10T09:20:55.2256943Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:55.2257296Z 
2025-12-10T09:20:55.3357540Z   console.log
2025-12-10T09:20:55.3358049Z     [Test] Session middleware initialized (memory store)
2025-12-10T09:20:55.3358299Z 
2025-12-10T09:20:55.3358429Z       at Object.log (server.js:142:13)
2025-12-10T09:20:55.3358645Z 
2025-12-10T09:20:55.3363378Z   console.log
2025-12-10T09:20:55.3363759Z     [Session] Initialization status: {
2025-12-10T09:20:55.3364040Z       nodeEnv: 'test',
2025-12-10T09:20:55.3364257Z       sessionSecretSet: true,
2025-12-10T09:20:55.3364497Z       redisConfigured: false,
2025-12-10T09:20:55.3364731Z       middlewareApplied: true
2025-12-10T09:20:55.3364944Z     }
2025-12-10T09:20:55.3365037Z 
2025-12-10T09:20:55.3365158Z       at Object.log (server.js:155:9)
2025-12-10T09:20:55.3365327Z 
2025-12-10T09:20:55.3370017Z   console.log
2025-12-10T09:20:55.3370303Z     [CSRF] Cookie configuration: {
2025-12-10T09:20:55.3370555Z       secure: false,
2025-12-10T09:20:55.3370754Z       nodeEnv: 'test',
2025-12-10T09:20:55.3371320Z       cookieSecureOverride: 'not set',
2025-12-10T09:20:55.3371666Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:55.3371949Z     }
2025-12-10T09:20:55.3372042Z 
2025-12-10T09:20:55.3372198Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:55.3372377Z 
2025-12-10T09:20:55.3446652Z   console.log
2025-12-10T09:20:55.3447056Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:55.3447306Z 
2025-12-10T09:20:55.3447450Z       at log (server.js:284:17)
2025-12-10T09:20:55.3447646Z 
2025-12-10T09:20:55.3461619Z   console.log
2025-12-10T09:20:55.3462015Z     === API DEBUG LOG ===
2025-12-10T09:20:55.3462293Z 
2025-12-10T09:20:55.3462719Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:55.3463068Z 
2025-12-10T09:20:55.3466353Z   console.log
2025-12-10T09:20:55.3466706Z     POST /login - 400 (3ms)
2025-12-10T09:20:55.3466904Z 
2025-12-10T09:20:55.3467191Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:55.3467554Z 
2025-12-10T09:20:55.3471526Z   console.log
2025-12-10T09:20:55.3472072Z     Session: { id: '-UsZ7cgxawu7...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:55.3472427Z 
2025-12-10T09:20:55.3472720Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:55.3473055Z 
2025-12-10T09:20:55.3476264Z   console.log
2025-12-10T09:20:55.3476687Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:55.3476951Z 
2025-12-10T09:20:55.3477227Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:55.3477570Z 
2025-12-10T09:20:55.3480793Z   console.log
2025-12-10T09:20:55.3481102Z     ====================
2025-12-10T09:20:55.3481272Z 
2025-12-10T09:20:55.3481555Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:55.3481898Z 
2025-12-10T09:20:55.3487922Z [0mPOST /api/login [33m400[0m 7.824 ms - 287[0m
2025-12-10T09:20:55.3521468Z   console.log
2025-12-10T09:20:55.3521952Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:55.3522310Z 
2025-12-10T09:20:55.3522497Z       at log (server.js:284:17)
2025-12-10T09:20:55.3522689Z 
2025-12-10T09:20:55.3530293Z   console.log
2025-12-10T09:20:55.3530949Z     === API DEBUG LOG ===
2025-12-10T09:20:55.3531157Z 
2025-12-10T09:20:55.3531504Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:55.3531993Z 
2025-12-10T09:20:55.3536560Z   console.log
2025-12-10T09:20:55.3536942Z     POST /login - 400 (1ms)
2025-12-10T09:20:55.3537227Z 
2025-12-10T09:20:55.3537631Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:55.3538117Z 
2025-12-10T09:20:55.3543428Z   console.log
2025-12-10T09:20:55.3544121Z     Session: { id: 'o61Y83oQoX2D...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:55.3544629Z 
2025-12-10T09:20:55.3545042Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:55.3545537Z 
2025-12-10T09:20:55.3547511Z   console.log
2025-12-10T09:20:55.3548138Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:55.3548616Z 
2025-12-10T09:20:55.3549415Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:55.3549931Z 
2025-12-10T09:20:55.3552899Z   console.log
2025-12-10T09:20:55.3553505Z     ====================
2025-12-10T09:20:55.3553887Z 
2025-12-10T09:20:55.3554528Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:55.3555032Z 
2025-12-10T09:20:55.3556931Z [0mPOST /api/login [33m400[0m 4.482 ms - 94[0m
2025-12-10T09:20:55.3583822Z   console.log
2025-12-10T09:20:55.3584210Z     [CSRF] Skipping CSRF check for login
2025-12-10T09:20:55.3584416Z 
2025-12-10T09:20:55.3584530Z       at log (server.js:284:17)
2025-12-10T09:20:55.3584688Z 
2025-12-10T09:20:55.3592582Z   console.log
2025-12-10T09:20:55.3592989Z     === API DEBUG LOG ===
2025-12-10T09:20:55.3593277Z 
2025-12-10T09:20:55.3593986Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:55.3594326Z 
2025-12-10T09:20:55.3597093Z   console.log
2025-12-10T09:20:55.3597425Z     POST /login - 400 (2ms)
2025-12-10T09:20:55.3597587Z 
2025-12-10T09:20:55.3597819Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:55.3598281Z 
2025-12-10T09:20:55.3602169Z   console.log
2025-12-10T09:20:55.3603038Z     Session: { id: 'mdeghgKfkTwx...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:55.3603577Z 
2025-12-10T09:20:55.3603995Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:55.3604482Z 
2025-12-10T09:20:55.3607355Z   console.log
2025-12-10T09:20:55.3607846Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:55.3608217Z 
2025-12-10T09:20:55.3608626Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:55.3609122Z 
2025-12-10T09:20:55.3612400Z   console.log
2025-12-10T09:20:55.3612990Z     ====================
2025-12-10T09:20:55.3613257Z 
2025-12-10T09:20:55.3613670Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:55.3614156Z 
2025-12-10T09:20:55.3617039Z [0mPOST /api/login [33m400[0m 4.141 ms - 180[0m
2025-12-10T09:20:55.3641116Z   console.log
2025-12-10T09:20:55.3641572Z     [CSRF] Skipping CSRF check for session
2025-12-10T09:20:55.3641913Z 
2025-12-10T09:20:55.3642116Z       at log (server.js:289:17)
2025-12-10T09:20:55.3642372Z 
2025-12-10T09:20:55.3652257Z   console.log
2025-12-10T09:20:55.3652893Z     [SESSION] Session check: {
2025-12-10T09:20:55.3653450Z       sessionID: '7H2SVwQvRLLbii5Rlk0_taVpTpKx1ep-',
2025-12-10T09:20:55.3653982Z       authenticated: false,
2025-12-10T09:20:55.3654394Z       username: undefined,
2025-12-10T09:20:55.3654828Z       role: undefined
2025-12-10T09:20:55.3655153Z     }
2025-12-10T09:20:55.3655326Z 
2025-12-10T09:20:55.3655528Z       at log (routes/api.js:131:13)
2025-12-10T09:20:55.3655847Z 
2025-12-10T09:20:55.3665574Z   console.log
2025-12-10T09:20:55.3665915Z     === API DEBUG LOG ===
2025-12-10T09:20:55.3666081Z 
2025-12-10T09:20:55.3666328Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:55.3666593Z 
2025-12-10T09:20:55.3675323Z   console.log
2025-12-10T09:20:55.3675590Z     GET /session - 200 (3ms)
2025-12-10T09:20:55.3675751Z 
2025-12-10T09:20:55.3675976Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:55.3676241Z 
2025-12-10T09:20:55.3684740Z   console.log
2025-12-10T09:20:55.3685213Z     Session: { id: '7H2SVwQvRLLb...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:55.3685490Z 
2025-12-10T09:20:55.3685709Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:55.3685962Z 
2025-12-10T09:20:55.3694406Z   console.log
2025-12-10T09:20:55.3694754Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:55.3694961Z 
2025-12-10T09:20:55.3695183Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:55.3695449Z 
2025-12-10T09:20:55.3703907Z   console.log
2025-12-10T09:20:55.3704183Z     ====================
2025-12-10T09:20:55.3704321Z 
2025-12-10T09:20:55.3704556Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:55.3708325Z 
2025-12-10T09:20:55.3708661Z [0mGET /api/session [32m200[0m 7.471 ms - 23[0m
2025-12-10T09:20:55.3788805Z   console.log
2025-12-10T09:20:55.3789088Z     [CSRF] Token request: {
2025-12-10T09:20:55.3789678Z       sessionID: 'MR_KwJSTgVJDBHFWGz0gVAKG7ggX_Cs_',
2025-12-10T09:20:55.3789993Z       authenticated: false,
2025-12-10T09:20:55.3790215Z       username: 'NOT_SET',
2025-12-10T09:20:55.3790428Z       hasCookies: false,
2025-12-10T09:20:55.3790678Z       timestamp: '2025-12-10T09:20:55.378Z'
2025-12-10T09:20:55.3790921Z     }
2025-12-10T09:20:55.3791015Z 
2025-12-10T09:20:55.3791124Z       at log (server.js:236:13)
2025-12-10T09:20:55.3791601Z 
2025-12-10T09:20:55.3797070Z   console.log
2025-12-10T09:20:55.3797435Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:55.3797904Z       sessionID: 'MR_KwJSTgVJDBHFWGz0gVAKG7ggX_Cs_',
2025-12-10T09:20:55.3798244Z       tokenLength: 64,
2025-12-10T09:20:55.3798492Z       tokenPrefix: '0eaafdc1...',
2025-12-10T09:20:55.3798756Z       cookieName: 'csrf-token',
2025-12-10T09:20:55.3799144Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:55.3800087Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:55.3800469Z     }
2025-12-10T09:20:55.3800563Z 
2025-12-10T09:20:55.3800665Z       at log (server.js:266:13)
2025-12-10T09:20:55.3800820Z 
2025-12-10T09:20:55.3805235Z   console.log
2025-12-10T09:20:55.3805541Z     === API DEBUG LOG ===
2025-12-10T09:20:55.3805684Z 
2025-12-10T09:20:55.3805917Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:55.3806190Z 
2025-12-10T09:20:55.3812280Z   console.log
2025-12-10T09:20:55.3812609Z     GET /api/csrf-token - 200 (2ms)
2025-12-10T09:20:55.3812794Z 
2025-12-10T09:20:55.3813014Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:55.3813283Z 
2025-12-10T09:20:55.3820102Z   console.log
2025-12-10T09:20:55.3820967Z     Session: { id: 'MR_KwJSTgVJD...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:55.3821466Z 
2025-12-10T09:20:55.3821885Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:55.3822360Z 
2025-12-10T09:20:55.3827715Z   console.log
2025-12-10T09:20:55.3828393Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:55.3828767Z 
2025-12-10T09:20:55.3829380Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:55.3829866Z 
2025-12-10T09:20:55.3835504Z   console.log
2025-12-10T09:20:55.3836046Z     ====================
2025-12-10T09:20:55.3836313Z 
2025-12-10T09:20:55.3836747Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:55.3837225Z 
2025-12-10T09:20:55.3840438Z [0mGET /api/csrf-token [32m200[0m 6.005 ms - 80[0m
2025-12-10T09:20:55.3866056Z   console.log
2025-12-10T09:20:55.3866572Z     [CSRF] Token request: {
2025-12-10T09:20:55.3866910Z       sessionID: 'ojAI0O5UDqdVuzuhzlJO7AUMv5NCImB5',
2025-12-10T09:20:55.3867226Z       authenticated: false,
2025-12-10T09:20:55.3867448Z       username: 'NOT_SET',
2025-12-10T09:20:55.3867660Z       hasCookies: false,
2025-12-10T09:20:55.3867920Z       timestamp: '2025-12-10T09:20:55.385Z'
2025-12-10T09:20:55.3868157Z     }
2025-12-10T09:20:55.3868254Z 
2025-12-10T09:20:55.3868364Z       at log (server.js:236:13)
2025-12-10T09:20:55.3868513Z 
2025-12-10T09:20:55.3875095Z   console.log
2025-12-10T09:20:55.3875510Z     [CSRF] Token generated and cookie set: {
2025-12-10T09:20:55.3875928Z       sessionID: 'ojAI0O5UDqdVuzuhzlJO7AUMv5NCImB5',
2025-12-10T09:20:55.3876222Z       tokenLength: 64,
2025-12-10T09:20:55.3876468Z       tokenPrefix: '1a036520...',
2025-12-10T09:20:55.3876734Z       cookieName: 'csrf-token',
2025-12-10T09:20:55.3877131Z       cookieOptions: { httpOnly: false, sameSite: 'lax', secure: false, path: '/' },
2025-12-10T09:20:55.3877843Z       warning: '✓ httpOnly=false allows client JS to read cookie for double-submit pattern'
2025-12-10T09:20:55.3878220Z     }
2025-12-10T09:20:55.3878320Z 
2025-12-10T09:20:55.3878422Z       at log (server.js:266:13)
2025-12-10T09:20:55.3878573Z 
2025-12-10T09:20:55.3882759Z   console.log
2025-12-10T09:20:55.3883081Z     === API DEBUG LOG ===
2025-12-10T09:20:55.3883225Z 
2025-12-10T09:20:55.3883453Z       at ServerResponse.log [as send] (middleware/debugLogger.js:180:21)
2025-12-10T09:20:55.3883712Z 
2025-12-10T09:20:55.3889507Z   console.log
2025-12-10T09:20:55.3889840Z     GET /api/csrf-token - 200 (3ms)
2025-12-10T09:20:55.3890019Z 
2025-12-10T09:20:55.3890241Z       at ServerResponse.log [as send] (middleware/debugLogger.js:181:21)
2025-12-10T09:20:55.3890699Z 
2025-12-10T09:20:55.3896381Z   console.log
2025-12-10T09:20:55.3896964Z     Session: { id: 'ojAI0O5UDqdV...', authenticated: false, username: 'NOT_SET' }
2025-12-10T09:20:55.3897436Z 
2025-12-10T09:20:55.3897685Z       at ServerResponse.log [as send] (middleware/debugLogger.js:182:21)
2025-12-10T09:20:55.3897944Z 
2025-12-10T09:20:55.3903354Z   console.log
2025-12-10T09:20:55.3903741Z     CSRF: { header: '[MISSING]', cookie: '[MISSING]' }
2025-12-10T09:20:55.3903954Z 
2025-12-10T09:20:55.3904172Z       at ServerResponse.log [as send] (middleware/debugLogger.js:187:21)
2025-12-10T09:20:55.3904449Z 
2025-12-10T09:20:55.3910596Z   console.log
2025-12-10T09:20:55.3910977Z     ====================
2025-12-10T09:20:55.3911221Z 
2025-12-10T09:20:55.3911627Z       at ServerResponse.log [as send] (middleware/debugLogger.js:191:21)
2025-12-10T09:20:55.3912116Z 
2025-12-10T09:20:55.3914659Z [0mGET /api/csrf-token [32m200[0m 5.590 ms - 80[0m
2025-12-10T09:20:55.4864595Z PASS __tests__/routes/api.test.js
2025-12-10T09:20:55.4865131Z   API Routes
2025-12-10T09:20:55.4865435Z     POST /api/login
2025-12-10T09:20:55.4866189Z       ✓ should return 400 if username is missing (11 ms)
2025-12-10T09:20:55.4866920Z       ✓ should return 400 if password is missing (7 ms)
2025-12-10T09:20:55.4867669Z       ✓ should return 400 if username has invalid characters (6 ms)
2025-12-10T09:20:55.4868193Z     GET /api/session
2025-12-10T09:20:55.4868780Z       ✓ should return unauthenticated for new session (14 ms)
2025-12-10T09:20:55.4869537Z     GET /api/csrf-token
2025-12-10T09:20:55.4870016Z       ✓ should return a CSRF token (8 ms)
2025-12-10T09:20:55.4870644Z       ✓ should set a CSRF cookie in the response (8 ms)
2025-12-10T09:20:55.4870989Z 
2025-12-10T09:20:55.5437494Z   console.log
2025-12-10T09:20:55.5438329Z     [EventLogger] Initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/events-test.db
2025-12-10T09:20:55.5438804Z 
2025-12-10T09:20:55.5439077Z       at EventLoggerService.log [as initialize] (services/eventLogger.js:125:21)
2025-12-10T09:20:55.5439591Z 
2025-12-10T09:20:55.5467380Z   console.log
2025-12-10T09:20:55.5467844Z     [EventLogger] Logged event #1: server.start - Server started
2025-12-10T09:20:55.5468119Z 
2025-12-10T09:20:55.5468628Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5468964Z 
2025-12-10T09:20:55.5480383Z   console.log
2025-12-10T09:20:55.5480872Z     [EventLogger] Logged event #2: plugin.installed - Plugin installed
2025-12-10T09:20:55.5481202Z 
2025-12-10T09:20:55.5481492Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5481832Z 
2025-12-10T09:20:55.5498923Z   console.log
2025-12-10T09:20:55.5499542Z     [EventLogger] Logged event #3: server.start - Server started
2025-12-10T09:20:55.5499832Z 
2025-12-10T09:20:55.5500120Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5500453Z 
2025-12-10T09:20:55.5511236Z   console.log
2025-12-10T09:20:55.5511703Z     [EventLogger] Logged event #4: server.start - Server started
2025-12-10T09:20:55.5511998Z 
2025-12-10T09:20:55.5512277Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5512625Z 
2025-12-10T09:20:55.5526876Z   console.log
2025-12-10T09:20:55.5527353Z     [EventLogger] Logged event #5: system.info - Test event
2025-12-10T09:20:55.5527725Z 
2025-12-10T09:20:55.5528083Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5528397Z 
2025-12-10T09:20:55.5538952Z   console.log
2025-12-10T09:20:55.5539655Z     [EventLogger] Logged event #6: server.start - Server started
2025-12-10T09:20:55.5540090Z 
2025-12-10T09:20:55.5540442Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5540774Z 
2025-12-10T09:20:55.5546518Z   console.log
2025-12-10T09:20:55.5547035Z     [EventLogger] Logged event #7: server.stop - Server stopped
2025-12-10T09:20:55.5547661Z 
2025-12-10T09:20:55.5547933Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5548242Z 
2025-12-10T09:20:55.5554221Z   console.log
2025-12-10T09:20:55.5554698Z     [EventLogger] Logged event #8: plugin.installed - Plugin installed
2025-12-10T09:20:55.5554999Z 
2025-12-10T09:20:55.5555260Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5555577Z 
2025-12-10T09:20:55.5561756Z   console.log
2025-12-10T09:20:55.5562312Z     [EventLogger] Logged event #9: player.kicked - Player kicked
2025-12-10T09:20:55.5562758Z 
2025-12-10T09:20:55.5563050Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5563382Z 
2025-12-10T09:20:55.5578573Z   console.log
2025-12-10T09:20:55.5579053Z     [EventLogger] Logged event #10: server.start - Server started
2025-12-10T09:20:55.5579540Z 
2025-12-10T09:20:55.5579828Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5580180Z 
2025-12-10T09:20:55.5587758Z   console.log
2025-12-10T09:20:55.5588307Z     [EventLogger] Logged event #11: server.stop - Server stopped
2025-12-10T09:20:55.5588743Z 
2025-12-10T09:20:55.5589047Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5589537Z 
2025-12-10T09:20:55.5595180Z   console.log
2025-12-10T09:20:55.5595672Z     [EventLogger] Logged event #12: plugin.installed - Plugin installed
2025-12-10T09:20:55.5595995Z 
2025-12-10T09:20:55.5596272Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5596606Z 
2025-12-10T09:20:55.5602672Z   console.log
2025-12-10T09:20:55.5603235Z     [EventLogger] Logged event #13: player.kicked - Player kicked
2025-12-10T09:20:55.5603689Z 
2025-12-10T09:20:55.5603976Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5604313Z 
2025-12-10T09:20:55.5616569Z   console.log
2025-12-10T09:20:55.5617114Z     [EventLogger] Logged event #14: server.start - Server started
2025-12-10T09:20:55.5617553Z 
2025-12-10T09:20:55.5617977Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5618709Z 
2025-12-10T09:20:55.5624105Z   console.log
2025-12-10T09:20:55.5624586Z     [EventLogger] Logged event #15: server.stop - Server stopped
2025-12-10T09:20:55.5624887Z 
2025-12-10T09:20:55.5625174Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5625514Z 
2025-12-10T09:20:55.5632046Z   console.log
2025-12-10T09:20:55.5632603Z     [EventLogger] Logged event #16: plugin.installed - Plugin installed
2025-12-10T09:20:55.5633049Z 
2025-12-10T09:20:55.5633385Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5633698Z 
2025-12-10T09:20:55.5639367Z   console.log
2025-12-10T09:20:55.5640199Z     [EventLogger] Logged event #17: player.kicked - Player kicked
2025-12-10T09:20:55.5640701Z 
2025-12-10T09:20:55.5641076Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5641419Z 
2025-12-10T09:20:55.5653729Z   console.log
2025-12-10T09:20:55.5654325Z     [EventLogger] Logged event #18: server.start - Server started
2025-12-10T09:20:55.5654634Z 
2025-12-10T09:20:55.5654917Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5655259Z 
2025-12-10T09:20:55.5662221Z   console.log
2025-12-10T09:20:55.5662680Z     [EventLogger] Logged event #19: server.stop - Server stopped
2025-12-10T09:20:55.5662971Z 
2025-12-10T09:20:55.5663259Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5663588Z 
2025-12-10T09:20:55.5669441Z   console.log
2025-12-10T09:20:55.5670266Z     [EventLogger] Logged event #20: plugin.installed - Plugin installed
2025-12-10T09:20:55.5670797Z 
2025-12-10T09:20:55.5671266Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5672103Z 
2025-12-10T09:20:55.5677703Z   console.log
2025-12-10T09:20:55.5678324Z     [EventLogger] Logged event #21: player.kicked - Player kicked
2025-12-10T09:20:55.5678781Z 
2025-12-10T09:20:55.5679107Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5679627Z 
2025-12-10T09:20:55.5695669Z   console.log
2025-12-10T09:20:55.5696250Z     [EventLogger] Logged event #22: server.start - Server started
2025-12-10T09:20:55.5696707Z 
2025-12-10T09:20:55.5697145Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5697672Z 
2025-12-10T09:20:55.5705077Z   console.log
2025-12-10T09:20:55.5705690Z     [EventLogger] Logged event #23: server.stop - Server stopped
2025-12-10T09:20:55.5706185Z 
2025-12-10T09:20:55.5706671Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5707257Z 
2025-12-10T09:20:55.5715096Z   console.log
2025-12-10T09:20:55.5715837Z     [EventLogger] Logged event #24: plugin.installed - Plugin installed
2025-12-10T09:20:55.5716328Z 
2025-12-10T09:20:55.5716765Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5717295Z 
2025-12-10T09:20:55.5724915Z   console.log
2025-12-10T09:20:55.5725504Z     [EventLogger] Logged event #25: player.kicked - Player kicked
2025-12-10T09:20:55.5725956Z 
2025-12-10T09:20:55.5726403Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5726922Z 
2025-12-10T09:20:55.5742542Z   console.log
2025-12-10T09:20:55.5743150Z     [EventLogger] Logged event #26: server.start - Server started
2025-12-10T09:20:55.5743623Z 
2025-12-10T09:20:55.5744104Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5744627Z 
2025-12-10T09:20:55.5750881Z   console.log
2025-12-10T09:20:55.5751475Z     [EventLogger] Logged event #27: server.stop - Server stopped
2025-12-10T09:20:55.5751964Z 
2025-12-10T09:20:55.5752416Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5752946Z 
2025-12-10T09:20:55.5758818Z   console.log
2025-12-10T09:20:55.5759883Z     [EventLogger] Logged event #28: plugin.installed - Plugin installed
2025-12-10T09:20:55.5760410Z 
2025-12-10T09:20:55.5760872Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5761393Z 
2025-12-10T09:20:55.5767100Z   console.log
2025-12-10T09:20:55.5767697Z     [EventLogger] Logged event #29: player.kicked - Player kicked
2025-12-10T09:20:55.5768167Z 
2025-12-10T09:20:55.5768621Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5769380Z 
2025-12-10T09:20:55.5780749Z   console.log
2025-12-10T09:20:55.5781350Z     [EventLogger] Logged event #30: server.start - Server started
2025-12-10T09:20:55.5781808Z 
2025-12-10T09:20:55.5782269Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5782809Z 
2025-12-10T09:20:55.5788698Z   console.log
2025-12-10T09:20:55.5789467Z     [EventLogger] Logged event #31: server.stop - Server stopped
2025-12-10T09:20:55.5789936Z 
2025-12-10T09:20:55.5790405Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5790945Z 
2025-12-10T09:20:55.5796851Z   console.log
2025-12-10T09:20:55.5797489Z     [EventLogger] Logged event #32: plugin.installed - Plugin installed
2025-12-10T09:20:55.5798005Z 
2025-12-10T09:20:55.5798465Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5798993Z 
2025-12-10T09:20:55.5807283Z   console.log
2025-12-10T09:20:55.5808019Z     [EventLogger] Logged event #33: player.kicked - Player kicked
2025-12-10T09:20:55.5808489Z 
2025-12-10T09:20:55.5808929Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5809635Z 
2025-12-10T09:20:55.5825120Z   console.log
2025-12-10T09:20:55.5825813Z     [EventLogger] Logged event #34: server.start - Server started
2025-12-10T09:20:55.5826267Z 
2025-12-10T09:20:55.5826705Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5827236Z 
2025-12-10T09:20:55.5834554Z   console.log
2025-12-10T09:20:55.5835131Z     [EventLogger] Logged event #35: server.stop - Server stopped
2025-12-10T09:20:55.5835579Z 
2025-12-10T09:20:55.5836018Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5836549Z 
2025-12-10T09:20:55.5843958Z   console.log
2025-12-10T09:20:55.5844570Z     [EventLogger] Logged event #36: plugin.installed - Plugin installed
2025-12-10T09:20:55.5845058Z 
2025-12-10T09:20:55.5845497Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5846012Z 
2025-12-10T09:20:55.5853787Z   console.log
2025-12-10T09:20:55.5854381Z     [EventLogger] Logged event #37: player.kicked - Player kicked
2025-12-10T09:20:55.5854842Z 
2025-12-10T09:20:55.5855276Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5855788Z 
2025-12-10T09:20:55.5871890Z   console.log
2025-12-10T09:20:55.5872617Z     [EventLogger] Logged event #38: server.start - Server started
2025-12-10T09:20:55.5873072Z 
2025-12-10T09:20:55.5873512Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5874036Z 
2025-12-10T09:20:55.5922339Z   console.log
2025-12-10T09:20:55.5922913Z     [EventLogger] Logged event #39: server.stop - Server stopped
2025-12-10T09:20:55.5923372Z 
2025-12-10T09:20:55.5923814Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5924341Z 
2025-12-10T09:20:55.5930552Z   console.log
2025-12-10T09:20:55.5931186Z     [EventLogger] Logged event #40: plugin.installed - Plugin installed
2025-12-10T09:20:55.5931686Z 
2025-12-10T09:20:55.5932137Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5932676Z 
2025-12-10T09:20:55.5938232Z   console.log
2025-12-10T09:20:55.5938820Z     [EventLogger] Logged event #41: player.kicked - Player kicked
2025-12-10T09:20:55.5939469Z 
2025-12-10T09:20:55.5940175Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5940726Z 
2025-12-10T09:20:55.5951764Z   console.log
2025-12-10T09:20:55.5952360Z     [EventLogger] Logged event #42: server.start - Server started
2025-12-10T09:20:55.5952818Z 
2025-12-10T09:20:55.5953279Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5953810Z 
2025-12-10T09:20:55.5959592Z   console.log
2025-12-10T09:20:55.5960161Z     [EventLogger] Logged event #43: server.stop - Server stopped
2025-12-10T09:20:55.5960626Z 
2025-12-10T09:20:55.5961086Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5961625Z 
2025-12-10T09:20:55.5967242Z   console.log
2025-12-10T09:20:55.5967867Z     [EventLogger] Logged event #44: plugin.installed - Plugin installed
2025-12-10T09:20:55.5968358Z 
2025-12-10T09:20:55.5968824Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5969612Z 
2025-12-10T09:20:55.5975158Z   console.log
2025-12-10T09:20:55.5975760Z     [EventLogger] Logged event #45: player.kicked - Player kicked
2025-12-10T09:20:55.5976209Z 
2025-12-10T09:20:55.5976655Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5977171Z 
2025-12-10T09:20:55.5989054Z   console.log
2025-12-10T09:20:55.5989845Z     [EventLogger] Logged event #46: server.start - Server started
2025-12-10T09:20:55.5990300Z 
2025-12-10T09:20:55.5990748Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5991263Z 
2025-12-10T09:20:55.5996833Z   console.log
2025-12-10T09:20:55.5997415Z     [EventLogger] Logged event #47: server.stop - Server stopped
2025-12-10T09:20:55.5998100Z 
2025-12-10T09:20:55.5998558Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.5999092Z 
2025-12-10T09:20:55.6004716Z   console.log
2025-12-10T09:20:55.6005353Z     [EventLogger] Logged event #48: plugin.installed - Plugin installed
2025-12-10T09:20:55.6005850Z 
2025-12-10T09:20:55.6006298Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6006813Z 
2025-12-10T09:20:55.6012637Z   console.log
2025-12-10T09:20:55.6013243Z     [EventLogger] Logged event #49: player.kicked - Player kicked
2025-12-10T09:20:55.6013695Z 
2025-12-10T09:20:55.6014140Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6014670Z 
2025-12-10T09:20:55.6026505Z   console.log
2025-12-10T09:20:55.6027101Z     [EventLogger] Logged event #50: server.start - Server started
2025-12-10T09:20:55.6027567Z 
2025-12-10T09:20:55.6028013Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6028549Z 
2025-12-10T09:20:55.6034321Z   console.log
2025-12-10T09:20:55.6034973Z     [EventLogger] Logged event #51: server.stop - Server stopped
2025-12-10T09:20:55.6035424Z 
2025-12-10T09:20:55.6035893Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6036416Z 
2025-12-10T09:20:55.6042428Z   console.log
2025-12-10T09:20:55.6043062Z     [EventLogger] Logged event #52: plugin.installed - Plugin installed
2025-12-10T09:20:55.6043557Z 
2025-12-10T09:20:55.6044007Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6044539Z 
2025-12-10T09:20:55.6049863Z   console.log
2025-12-10T09:20:55.6050459Z     [EventLogger] Logged event #53: player.kicked - Player kicked
2025-12-10T09:20:55.6050905Z 
2025-12-10T09:20:55.6051354Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6051872Z 
2025-12-10T09:20:55.6063429Z   console.log
2025-12-10T09:20:55.6064018Z     [EventLogger] Logged event #54: server.start - Server started
2025-12-10T09:20:55.6064475Z 
2025-12-10T09:20:55.6064910Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6065666Z 
2025-12-10T09:20:55.6071262Z   console.log
2025-12-10T09:20:55.6071843Z     [EventLogger] Logged event #55: server.stop - Server stopped
2025-12-10T09:20:55.6072293Z 
2025-12-10T09:20:55.6072747Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6073268Z 
2025-12-10T09:20:55.6078820Z   console.log
2025-12-10T09:20:55.6079644Z     [EventLogger] Logged event #56: plugin.installed - Plugin installed
2025-12-10T09:20:55.6080159Z 
2025-12-10T09:20:55.6080612Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6081128Z 
2025-12-10T09:20:55.6086571Z   console.log
2025-12-10T09:20:55.6087173Z     [EventLogger] Logged event #57: player.kicked - Player kicked
2025-12-10T09:20:55.6087659Z 
2025-12-10T09:20:55.6088095Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6088593Z 
2025-12-10T09:20:55.6101356Z   console.log
2025-12-10T09:20:55.6101895Z     [EventLogger] Logged event #58: system.info - Event 0
2025-12-10T09:20:55.6102315Z 
2025-12-10T09:20:55.6102769Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6103294Z 
2025-12-10T09:20:55.6108900Z   console.log
2025-12-10T09:20:55.6109607Z     [EventLogger] Logged event #59: system.info - Event 1
2025-12-10T09:20:55.6110005Z 
2025-12-10T09:20:55.6110465Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6110984Z 
2025-12-10T09:20:55.6116646Z   console.log
2025-12-10T09:20:55.6117162Z     [EventLogger] Logged event #60: system.info - Event 2
2025-12-10T09:20:55.6117571Z 
2025-12-10T09:20:55.6118020Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6118808Z 
2025-12-10T09:20:55.6124394Z   console.log
2025-12-10T09:20:55.6124972Z     [EventLogger] Logged event #61: system.info - Event 3
2025-12-10T09:20:55.6125367Z 
2025-12-10T09:20:55.6125832Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6126356Z 
2025-12-10T09:20:55.6132461Z   console.log
2025-12-10T09:20:55.6132987Z     [EventLogger] Logged event #62: system.info - Event 4
2025-12-10T09:20:55.6133385Z 
2025-12-10T09:20:55.6133832Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6134364Z 
2025-12-10T09:20:55.6146911Z   console.log
2025-12-10T09:20:55.6147437Z     [EventLogger] Logged event #63: system.info - Event 5
2025-12-10T09:20:55.6147832Z 
2025-12-10T09:20:55.6148280Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6148798Z 
2025-12-10T09:20:55.6150721Z   console.log
2025-12-10T09:20:55.6151243Z     [EventLogger] Logged event #64: system.info - Event 6
2025-12-10T09:20:55.6151632Z 
2025-12-10T09:20:55.6152076Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6152600Z 
2025-12-10T09:20:55.6158525Z   console.log
2025-12-10T09:20:55.6159064Z     [EventLogger] Logged event #65: system.info - Event 7
2025-12-10T09:20:55.6159674Z 
2025-12-10T09:20:55.6160127Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6160654Z 
2025-12-10T09:20:55.6166504Z   console.log
2025-12-10T09:20:55.6167023Z     [EventLogger] Logged event #66: system.info - Event 8
2025-12-10T09:20:55.6167426Z 
2025-12-10T09:20:55.6167885Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6168417Z 
2025-12-10T09:20:55.6174413Z   console.log
2025-12-10T09:20:55.6174949Z     [EventLogger] Logged event #67: system.info - Event 9
2025-12-10T09:20:55.6175352Z 
2025-12-10T09:20:55.6175796Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6176324Z 
2025-12-10T09:20:55.6188675Z   console.log
2025-12-10T09:20:55.6189416Z     [EventLogger] Logged event #68: system.info - Event 0
2025-12-10T09:20:55.6189828Z 
2025-12-10T09:20:55.6190519Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6191061Z 
2025-12-10T09:20:55.6196527Z   console.log
2025-12-10T09:20:55.6197054Z     [EventLogger] Logged event #69: system.info - Event 1
2025-12-10T09:20:55.6197465Z 
2025-12-10T09:20:55.6197912Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6198431Z 
2025-12-10T09:20:55.6204321Z   console.log
2025-12-10T09:20:55.6204857Z     [EventLogger] Logged event #70: system.info - Event 2
2025-12-10T09:20:55.6205262Z 
2025-12-10T09:20:55.6205713Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6206238Z 
2025-12-10T09:20:55.6212252Z   console.log
2025-12-10T09:20:55.6212884Z     [EventLogger] Logged event #71: system.info - Event 3
2025-12-10T09:20:55.6213285Z 
2025-12-10T09:20:55.6213729Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6214255Z 
2025-12-10T09:20:55.6219747Z   console.log
2025-12-10T09:20:55.6220259Z     [EventLogger] Logged event #72: system.info - Event 4
2025-12-10T09:20:55.6220664Z 
2025-12-10T09:20:55.6221118Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6221640Z 
2025-12-10T09:20:55.6227403Z   console.log
2025-12-10T09:20:55.6227933Z     [EventLogger] Logged event #73: system.info - Event 5
2025-12-10T09:20:55.6228339Z 
2025-12-10T09:20:55.6228784Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6229519Z 
2025-12-10T09:20:55.6235102Z   console.log
2025-12-10T09:20:55.6235630Z     [EventLogger] Logged event #74: system.info - Event 6
2025-12-10T09:20:55.6236021Z 
2025-12-10T09:20:55.6236711Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6237230Z 
2025-12-10T09:20:55.6242919Z   console.log
2025-12-10T09:20:55.6243448Z     [EventLogger] Logged event #75: system.info - Event 7
2025-12-10T09:20:55.6243863Z 
2025-12-10T09:20:55.6244308Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6244828Z 
2025-12-10T09:20:55.6250296Z   console.log
2025-12-10T09:20:55.6250813Z     [EventLogger] Logged event #76: system.info - Event 8
2025-12-10T09:20:55.6251211Z 
2025-12-10T09:20:55.6251672Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6252191Z 
2025-12-10T09:20:55.6257756Z   console.log
2025-12-10T09:20:55.6258277Z     [EventLogger] Logged event #77: system.info - Event 9
2025-12-10T09:20:55.6258690Z 
2025-12-10T09:20:55.6259134Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6259911Z 
2025-12-10T09:20:55.6269887Z   console.log
2025-12-10T09:20:55.6270417Z     [EventLogger] Logged event #78: system.info - Event 0
2025-12-10T09:20:55.6270821Z 
2025-12-10T09:20:55.6271274Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6271814Z 
2025-12-10T09:20:55.6277433Z   console.log
2025-12-10T09:20:55.6277945Z     [EventLogger] Logged event #79: system.info - Event 1
2025-12-10T09:20:55.6278355Z 
2025-12-10T09:20:55.6278803Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6279543Z 
2025-12-10T09:20:55.6285194Z   console.log
2025-12-10T09:20:55.6285721Z     [EventLogger] Logged event #80: system.info - Event 2
2025-12-10T09:20:55.6286121Z 
2025-12-10T09:20:55.6286567Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6287085Z 
2025-12-10T09:20:55.6293023Z   console.log
2025-12-10T09:20:55.6293544Z     [EventLogger] Logged event #81: system.info - Event 3
2025-12-10T09:20:55.6293965Z 
2025-12-10T09:20:55.6294410Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6294955Z 
2025-12-10T09:20:55.6300918Z   console.log
2025-12-10T09:20:55.6301795Z     [EventLogger] Logged event #82: system.info - Event 4
2025-12-10T09:20:55.6302250Z 
2025-12-10T09:20:55.6302738Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6303319Z 
2025-12-10T09:20:55.6307820Z   console.log
2025-12-10T09:20:55.6308361Z     [EventLogger] Logged event #83: system.info - Event 5
2025-12-10T09:20:55.6308804Z 
2025-12-10T09:20:55.6309503Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6310093Z 
2025-12-10T09:20:55.6314751Z   console.log
2025-12-10T09:20:55.6315250Z     [EventLogger] Logged event #84: system.info - Event 6
2025-12-10T09:20:55.6315624Z 
2025-12-10T09:20:55.6316049Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6316543Z 
2025-12-10T09:20:55.6321701Z   console.log
2025-12-10T09:20:55.6322209Z     [EventLogger] Logged event #85: system.info - Event 7
2025-12-10T09:20:55.6322604Z 
2025-12-10T09:20:55.6323033Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6323547Z 
2025-12-10T09:20:55.6328374Z   console.log
2025-12-10T09:20:55.6328881Z     [EventLogger] Logged event #86: system.info - Event 8
2025-12-10T09:20:55.6329438Z 
2025-12-10T09:20:55.6329877Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6330360Z 
2025-12-10T09:20:55.6335079Z   console.log
2025-12-10T09:20:55.6335577Z     [EventLogger] Logged event #87: system.info - Event 9
2025-12-10T09:20:55.6335952Z 
2025-12-10T09:20:55.6336376Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6336886Z 
2025-12-10T09:20:55.6352422Z   console.log
2025-12-10T09:20:55.6352992Z     [EventLogger] Logged event #88: server.start - Server started
2025-12-10T09:20:55.6353695Z 
2025-12-10T09:20:55.6354131Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6354634Z 
2025-12-10T09:20:55.6361395Z   console.log
2025-12-10T09:20:55.6362003Z     [EventLogger] Logged event #89: server.start - Server started again
2025-12-10T09:20:55.6362473Z 
2025-12-10T09:20:55.6362759Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6363058Z 
2025-12-10T09:20:55.6393618Z   console.log
2025-12-10T09:20:55.6394221Z     [EventLogger] Logged event #90: plugin.installed - Plugin installed
2025-12-10T09:20:55.6394642Z 
2025-12-10T09:20:55.6394893Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6395188Z 
2025-12-10T09:20:55.6401077Z   console.log
2025-12-10T09:20:55.6401617Z     [EventLogger] Logged event #91: player.kicked - Player kicked
2025-12-10T09:20:55.6401976Z 
2025-12-10T09:20:55.6402259Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6402548Z 
2025-12-10T09:20:55.6413852Z   console.log
2025-12-10T09:20:55.6414396Z     [EventLogger] Logged event #92: server.start - Server started
2025-12-10T09:20:55.6414766Z 
2025-12-10T09:20:55.6415015Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6415302Z 
2025-12-10T09:20:55.6420603Z   console.log
2025-12-10T09:20:55.6421169Z     [EventLogger] Logged event #93: server.start - Server started again
2025-12-10T09:20:55.6421528Z 
2025-12-10T09:20:55.6421781Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6422075Z 
2025-12-10T09:20:55.6427041Z   console.log
2025-12-10T09:20:55.6427606Z     [EventLogger] Logged event #94: plugin.installed - Plugin installed
2025-12-10T09:20:55.6427977Z 
2025-12-10T09:20:55.6428222Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6428518Z 
2025-12-10T09:20:55.6433826Z   console.log
2025-12-10T09:20:55.6434360Z     [EventLogger] Logged event #95: player.kicked - Player kicked
2025-12-10T09:20:55.6434743Z 
2025-12-10T09:20:55.6435178Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6435468Z 
2025-12-10T09:20:55.6448875Z   console.log
2025-12-10T09:20:55.6449565Z     [EventLogger] Logged event #96: server.start - Server started
2025-12-10T09:20:55.6449963Z 
2025-12-10T09:20:55.6450205Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6450489Z 
2025-12-10T09:20:55.6455512Z   console.log
2025-12-10T09:20:55.6456069Z     [EventLogger] Logged event #97: server.start - Server started again
2025-12-10T09:20:55.6456467Z 
2025-12-10T09:20:55.6456714Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6456990Z 
2025-12-10T09:20:55.6462257Z   console.log
2025-12-10T09:20:55.6462835Z     [EventLogger] Logged event #98: plugin.installed - Plugin installed
2025-12-10T09:20:55.6463235Z 
2025-12-10T09:20:55.6463487Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6463767Z 
2025-12-10T09:20:55.6468681Z   console.log
2025-12-10T09:20:55.6469387Z     [EventLogger] Logged event #99: player.kicked - Player kicked
2025-12-10T09:20:55.6469770Z 
2025-12-10T09:20:55.6470020Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6470301Z 
2025-12-10T09:20:55.6514786Z   console.log
2025-12-10T09:20:55.6515325Z     [EventLogger] Logged event #100: server.start - Server started
2025-12-10T09:20:55.6515709Z 
2025-12-10T09:20:55.6515963Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6516262Z 
2025-12-10T09:20:55.6521338Z   console.log
2025-12-10T09:20:55.6521902Z     [EventLogger] Logged event #101: server.start - Server started again
2025-12-10T09:20:55.6522470Z 
2025-12-10T09:20:55.6522718Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6522994Z 
2025-12-10T09:20:55.6527684Z   console.log
2025-12-10T09:20:55.6528267Z     [EventLogger] Logged event #102: plugin.installed - Plugin installed
2025-12-10T09:20:55.6528658Z 
2025-12-10T09:20:55.6528905Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6529350Z 
2025-12-10T09:20:55.6534157Z   console.log
2025-12-10T09:20:55.6534694Z     [EventLogger] Logged event #103: player.kicked - Player kicked
2025-12-10T09:20:55.6535080Z 
2025-12-10T09:20:55.6535328Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6535607Z 
2025-12-10T09:20:55.6547798Z   console.log
2025-12-10T09:20:55.6548312Z     [EventLogger] Logged event #105: system.info - Recent event
2025-12-10T09:20:55.6548693Z 
2025-12-10T09:20:55.6548943Z       at EventLoggerService.log [as logEvent] (services/eventLogger.js:230:17)
2025-12-10T09:20:55.6549412Z 
2025-12-10T09:20:55.6554984Z   console.log
2025-12-10T09:20:55.6555524Z     [EventLogger] Deleted 1 events older than 90 days
2025-12-10T09:20:55.6555867Z 
2025-12-10T09:20:55.6556165Z       at EventLoggerService.log [as deleteOldEvents] (services/eventLogger.js:437:17)
2025-12-10T09:20:55.6556487Z 
2025-12-10T09:20:55.6583437Z   console.log
2025-12-10T09:20:55.6583847Z     [EventLogger] Database connection closed
2025-12-10T09:20:55.6584166Z 
2025-12-10T09:20:55.6584491Z       at EventLoggerService.log [as close] (services/eventLogger.js:448:21)
2025-12-10T09:20:55.6584813Z 
2025-12-10T09:20:55.6612465Z PASS __tests__/services/eventLogger.test.js
2025-12-10T09:20:55.6613080Z   Event Logger Service
2025-12-10T09:20:55.6613527Z     Initialization
2025-12-10T09:20:55.6614430Z       ✓ should initialize database successfully (1 ms)
2025-12-10T09:20:55.6615171Z       ✓ should create events table (1 ms)
2025-12-10T09:20:55.6615717Z       ✓ should create indexes
2025-12-10T09:20:55.6616113Z     logEvent()
2025-12-10T09:20:55.6616546Z       ✓ should log a basic event (1 ms)
2025-12-10T09:20:55.6617319Z       ✓ should log event with all fields (2 ms)
2025-12-10T09:20:55.6618214Z       ✓ should default to system actor if not provided (2 ms)
2025-12-10T09:20:55.6619653Z       ✓ should default to INFO severity if not provided (1 ms)
2025-12-10T09:20:55.6620638Z       ✓ should emit event for real-time notifications (1 ms)
2025-12-10T09:20:55.6621143Z     queryEvents()
2025-12-10T09:20:55.6621669Z       ✓ should query all events (4 ms)
2025-12-10T09:20:55.6622253Z       ✓ should filter by category (4 ms)
2025-12-10T09:20:55.6622664Z       ✓ should filter by severity (4 ms)
2025-12-10T09:20:55.6623017Z       ✓ should filter by event type (4 ms)
2025-12-10T09:20:55.6623339Z       ✓ should filter by actor (4 ms)
2025-12-10T09:20:55.6623662Z       ✓ should filter by target (4 ms)
2025-12-10T09:20:55.6623999Z       ✓ should search in title and message (4 ms)
2025-12-10T09:20:55.6624345Z       ✓ should apply limit (4 ms)
2025-12-10T09:20:55.6624630Z       ✓ should apply offset (9 ms)
2025-12-10T09:20:55.6624999Z       ✓ should sort by timestamp descending by default (3 ms)
2025-12-10T09:20:55.6625392Z       ✓ should sort ascending when specified (3 ms)
2025-12-10T09:20:55.6625759Z       ✓ should combine multiple filters (4 ms)
2025-12-10T09:20:55.6626138Z       ✓ should indicate if more results available (4 ms)
2025-12-10T09:20:55.6626425Z     getRecentEvents()
2025-12-10T09:20:55.6626748Z       ✓ should get recent events with default limit (8 ms)
2025-12-10T09:20:55.6627109Z       ✓ should respect custom limit (9 ms)
2025-12-10T09:20:55.6627473Z       ✓ should return events in descending order (8 ms)
2025-12-10T09:20:55.6627745Z     getEventStats()
2025-12-10T09:20:55.6628001Z       ✓ should get total count (6 ms)
2025-12-10T09:20:55.6628305Z       ✓ should count by category (3 ms)
2025-12-10T09:20:55.6628610Z       ✓ should count by severity (4 ms)
2025-12-10T09:20:55.6628911Z       ✓ should count by event type (6 ms)
2025-12-10T09:20:55.6629538Z     deleteOldEvents()
2025-12-10T09:20:55.6629880Z       ✓ should delete events older than specified days (2 ms)
2025-12-10T09:20:55.6630096Z 
2025-12-10T09:20:55.7810296Z   console.log
2025-12-10T09:20:55.7810875Z     [AUTH] Authentication check: {
2025-12-10T09:20:55.7811235Z       path: '/warn',
2025-12-10T09:20:55.7811543Z       method: 'POST',
2025-12-10T09:20:55.7811899Z       sessionID: 'lFj2-POozWWBj9MLEg8OT-LArz7Ftvkj',
2025-12-10T09:20:55.7812263Z       hasSession: true,
2025-12-10T09:20:55.7812530Z       authenticated: true,
2025-12-10T09:20:55.7812800Z       username: 'testadmin',
2025-12-10T09:20:55.7813069Z       hasCookies: false,
2025-12-10T09:20:55.7813369Z       timestamp: '2025-12-10T09:20:55.778Z'
2025-12-10T09:20:55.7813651Z     }
2025-12-10T09:20:55.7813774Z 
2025-12-10T09:20:55.7813906Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:55.7814107Z 
2025-12-10T09:20:55.7818104Z   console.log
2025-12-10T09:20:55.7818555Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:55.7818912Z 
2025-12-10T09:20:55.7819040Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:55.7819422Z 
2025-12-10T09:20:55.7864821Z   console.log
2025-12-10T09:20:55.7865319Z     [AUTH] Authentication check: {
2025-12-10T09:20:55.7865846Z       path: '/warn',
2025-12-10T09:20:55.7866175Z       method: 'POST',
2025-12-10T09:20:55.7866545Z       sessionID: '_onecHMOF0hSkm-fFROzlCk2jNShT7FC',
2025-12-10T09:20:55.7866926Z       hasSession: true,
2025-12-10T09:20:55.7867190Z       authenticated: true,
2025-12-10T09:20:55.7867463Z       username: 'testadmin',
2025-12-10T09:20:55.7867734Z       hasCookies: false,
2025-12-10T09:20:55.7868033Z       timestamp: '2025-12-10T09:20:55.785Z'
2025-12-10T09:20:55.7868325Z     }
2025-12-10T09:20:55.7868440Z 
2025-12-10T09:20:55.7868575Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:55.7868766Z 
2025-12-10T09:20:55.7873780Z   console.log
2025-12-10T09:20:55.7874336Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:55.7874790Z 
2025-12-10T09:20:55.7874931Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:55.7875127Z 
2025-12-10T09:20:55.7906625Z   console.log
2025-12-10T09:20:55.7907099Z     [AUTH] Authentication check: {
2025-12-10T09:20:55.7907981Z       path: '/warn',
2025-12-10T09:20:55.7908262Z       method: 'POST',
2025-12-10T09:20:55.7908624Z       sessionID: 'K0mq802rh5UH4RLks8k1pwotIMAwr8PS',
2025-12-10T09:20:55.7908981Z       hasSession: true,
2025-12-10T09:20:55.7909444Z       authenticated: true,
2025-12-10T09:20:55.7909727Z       username: 'testadmin',
2025-12-10T09:20:55.7909994Z       hasCookies: false,
2025-12-10T09:20:55.7910300Z       timestamp: '2025-12-10T09:20:55.789Z'
2025-12-10T09:20:55.7910600Z     }
2025-12-10T09:20:55.7910715Z 
2025-12-10T09:20:55.7910858Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:55.7911047Z 
2025-12-10T09:20:55.7915210Z   console.log
2025-12-10T09:20:55.7915683Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:55.7916070Z 
2025-12-10T09:20:55.7916256Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:55.7916446Z 
2025-12-10T09:20:55.7944929Z   console.log
2025-12-10T09:20:55.7945341Z     [AUTH] Authentication check: {
2025-12-10T09:20:55.7945772Z       path: '/mute',
2025-12-10T09:20:55.7946040Z       method: 'POST',
2025-12-10T09:20:55.7946372Z       sessionID: '0YntaZL4ThPqCMONnNbzpTfAwFFXbKgg',
2025-12-10T09:20:55.7946716Z       hasSession: true,
2025-12-10T09:20:55.7946959Z       authenticated: true,
2025-12-10T09:20:55.7947207Z       username: 'testadmin',
2025-12-10T09:20:55.7947463Z       hasCookies: false,
2025-12-10T09:20:55.7947750Z       timestamp: '2025-12-10T09:20:55.793Z'
2025-12-10T09:20:55.7948033Z     }
2025-12-10T09:20:55.7948140Z 
2025-12-10T09:20:55.7948265Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:55.7948455Z 
2025-12-10T09:20:55.7953153Z   console.log
2025-12-10T09:20:55.7953514Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:55.7953759Z 
2025-12-10T09:20:55.7953892Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:55.7954293Z 
2025-12-10T09:20:55.7986445Z   console.log
2025-12-10T09:20:55.7986867Z     [AUTH] Authentication check: {
2025-12-10T09:20:55.7987304Z       path: '/unmute',
2025-12-10T09:20:55.7987565Z       method: 'POST',
2025-12-10T09:20:55.7987913Z       sessionID: 'QDfh6sqVDsugSGioabt7AG1mpNFA5XOO',
2025-12-10T09:20:55.7988264Z       hasSession: true,
2025-12-10T09:20:55.7988510Z       authenticated: true,
2025-12-10T09:20:55.7988768Z       username: 'testadmin',
2025-12-10T09:20:55.7989026Z       hasCookies: false,
2025-12-10T09:20:55.7989483Z       timestamp: '2025-12-10T09:20:55.797Z'
2025-12-10T09:20:55.7989766Z     }
2025-12-10T09:20:55.7989882Z 
2025-12-10T09:20:55.7990008Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:55.7990198Z 
2025-12-10T09:20:55.7995016Z   console.log
2025-12-10T09:20:55.7995487Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:55.7995823Z 
2025-12-10T09:20:55.7996015Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:55.7996205Z 
2025-12-10T09:20:55.8030154Z   console.log
2025-12-10T09:20:55.8030553Z     [AUTH] Authentication check: {
2025-12-10T09:20:55.8031046Z       path: '/test-uuid-123/details',
2025-12-10T09:20:55.8031352Z       method: 'GET',
2025-12-10T09:20:55.8031689Z       sessionID: 'CnKs1vdnorzIbBYV6DMLn-yAhnbfjKtW',
2025-12-10T09:20:55.8032030Z       hasSession: true,
2025-12-10T09:20:55.8032315Z       authenticated: true,
2025-12-10T09:20:55.8032585Z       username: 'testadmin',
2025-12-10T09:20:55.8032853Z       hasCookies: false,
2025-12-10T09:20:55.8033136Z       timestamp: '2025-12-10T09:20:55.801Z'
2025-12-10T09:20:55.8041877Z     }
2025-12-10T09:20:55.8042103Z 
2025-12-10T09:20:55.8042333Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:55.8042527Z 
2025-12-10T09:20:55.8042626Z   console.log
2025-12-10T09:20:55.8042915Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:55.8043148Z 
2025-12-10T09:20:55.8043268Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:55.8043452Z 
2025-12-10T09:20:55.8107897Z   console.log
2025-12-10T09:20:55.8108309Z     [AUTH] Authentication check: {
2025-12-10T09:20:55.8108784Z       path: '/nonexistent-uuid/details',
2025-12-10T09:20:55.8109109Z       method: 'GET',
2025-12-10T09:20:55.8109837Z       sessionID: 'DpevSo1DZB2R4iMtFFbLi9TjdVxTdKye',
2025-12-10T09:20:55.8110147Z       hasSession: true,
2025-12-10T09:20:55.8110369Z       authenticated: true,
2025-12-10T09:20:55.8110588Z       username: 'testadmin',
2025-12-10T09:20:55.8110814Z       hasCookies: false,
2025-12-10T09:20:55.8111065Z       timestamp: '2025-12-10T09:20:55.809Z'
2025-12-10T09:20:55.8111306Z     }
2025-12-10T09:20:55.8111401Z 
2025-12-10T09:20:55.8111507Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:55.8111674Z 
2025-12-10T09:20:55.8119382Z   console.log
2025-12-10T09:20:55.8119834Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:55.8120179Z 
2025-12-10T09:20:55.8120324Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:55.8120481Z 
2025-12-10T09:20:55.8151018Z   console.log
2025-12-10T09:20:55.8151428Z     [AUTH] Authentication check: {
2025-12-10T09:20:55.8151944Z       path: '/test-uuid-123/history',
2025-12-10T09:20:55.8152395Z       method: 'GET',
2025-12-10T09:20:55.8152866Z       sessionID: 'zLvPDbXNBUUnfEUUjN3CIodZkyMQEpYe',
2025-12-10T09:20:55.8153353Z       hasSession: true,
2025-12-10T09:20:55.8153571Z       authenticated: true,
2025-12-10T09:20:55.8153798Z       username: 'testadmin',
2025-12-10T09:20:55.8154019Z       hasCookies: false,
2025-12-10T09:20:55.8154265Z       timestamp: '2025-12-10T09:20:55.813Z'
2025-12-10T09:20:55.8154498Z     }
2025-12-10T09:20:55.8154593Z 
2025-12-10T09:20:55.8154698Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:55.8154854Z 
2025-12-10T09:20:55.8164858Z   console.log
2025-12-10T09:20:55.8165309Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:55.8165654Z 
2025-12-10T09:20:55.8165798Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:55.8165961Z 
2025-12-10T09:20:55.8208960Z   console.log
2025-12-10T09:20:55.8209664Z     [AUTH] Authentication check: {
2025-12-10T09:20:55.8210258Z       path: '/test-uuid-123/history',
2025-12-10T09:20:55.8210604Z       method: 'GET',
2025-12-10T09:20:55.8210980Z       sessionID: 'zssrEPuQBtGptfmA-jhKNbFkZu-eO7EQ',
2025-12-10T09:20:55.8211365Z       hasSession: true,
2025-12-10T09:20:55.8211634Z       authenticated: true,
2025-12-10T09:20:55.8211908Z       username: 'testadmin',
2025-12-10T09:20:55.8212174Z       hasCookies: false,
2025-12-10T09:20:55.8212472Z       timestamp: '2025-12-10T09:20:55.819Z'
2025-12-10T09:20:55.8212762Z     }
2025-12-10T09:20:55.8212880Z 
2025-12-10T09:20:55.8213013Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:55.8213203Z 
2025-12-10T09:20:55.8220255Z   console.log
2025-12-10T09:20:55.8220708Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:55.8221060Z 
2025-12-10T09:20:55.8221237Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:55.8221475Z 
2025-12-10T09:20:55.8253604Z   console.log
2025-12-10T09:20:55.8254118Z     [AUTH] Authentication check: {
2025-12-10T09:20:55.8254632Z       path: '/whitelist',
2025-12-10T09:20:55.8254959Z       method: 'GET',
2025-12-10T09:20:55.8255315Z       sessionID: 'GUR0WxMn60qbPg1QGQojCO0Jcjmk-DAl',
2025-12-10T09:20:55.8255687Z       hasSession: true,
2025-12-10T09:20:55.8255949Z       authenticated: true,
2025-12-10T09:20:55.8256210Z       username: 'testadmin',
2025-12-10T09:20:55.8256479Z       hasCookies: false,
2025-12-10T09:20:55.8256780Z       timestamp: '2025-12-10T09:20:55.824Z'
2025-12-10T09:20:55.8257070Z     }
2025-12-10T09:20:55.8257186Z 
2025-12-10T09:20:55.8257322Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:55.8257517Z 
2025-12-10T09:20:55.8265305Z   console.log
2025-12-10T09:20:55.8265787Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:55.8266137Z 
2025-12-10T09:20:55.8266311Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:55.8266489Z 
2025-12-10T09:20:55.8310526Z   console.log
2025-12-10T09:20:55.8311782Z     [AUTH] Authentication check: {
2025-12-10T09:20:55.8312240Z       path: '/whitelist/add',
2025-12-10T09:20:55.8312633Z       method: 'POST',
2025-12-10T09:20:55.8313115Z       sessionID: 'zKmV0eQRlIQbxC0u6OmCsbxIMmOTPeYt',
2025-12-10T09:20:55.8313628Z       hasSession: true,
2025-12-10T09:20:55.8314241Z       authenticated: true,
2025-12-10T09:20:55.8314622Z       username: 'testadmin',
2025-12-10T09:20:55.8315000Z       hasCookies: false,
2025-12-10T09:20:55.8315419Z       timestamp: '2025-12-10T09:20:55.828Z'
2025-12-10T09:20:55.8315827Z     }
2025-12-10T09:20:55.8315983Z 
2025-12-10T09:20:55.8316166Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:55.8316449Z 
2025-12-10T09:20:55.8322962Z   console.log
2025-12-10T09:20:55.8323464Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:55.8323815Z 
2025-12-10T09:20:55.8324006Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:55.8324268Z 
2025-12-10T09:20:55.8355853Z   console.log
2025-12-10T09:20:55.8356301Z     [AUTH] Authentication check: {
2025-12-10T09:20:55.8356782Z       path: '/whitelist/add',
2025-12-10T09:20:55.8357186Z       method: 'POST',
2025-12-10T09:20:55.8357682Z       sessionID: 'RNi7ZMj8KVF5M-tEw-j_etceHh-R5e2I',
2025-12-10T09:20:55.8358188Z       hasSession: true,
2025-12-10T09:20:55.8358556Z       authenticated: true,
2025-12-10T09:20:55.8358941Z       username: 'testadmin',
2025-12-10T09:20:55.8359623Z       hasCookies: false,
2025-12-10T09:20:55.8360075Z       timestamp: '2025-12-10T09:20:55.834Z'
2025-12-10T09:20:55.8360499Z     }
2025-12-10T09:20:55.8360669Z 
2025-12-10T09:20:55.8360849Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:55.8361124Z 
2025-12-10T09:20:55.8366888Z   console.log
2025-12-10T09:20:55.8367398Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:55.8367785Z 
2025-12-10T09:20:55.8368002Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:55.8368300Z 
2025-12-10T09:20:55.8397315Z   console.log
2025-12-10T09:20:55.8397764Z     [AUTH] Authentication check: {
2025-12-10T09:20:55.8398604Z       path: '/whitelist/remove',
2025-12-10T09:20:55.8399030Z       method: 'POST',
2025-12-10T09:20:55.8399764Z       sessionID: '2h_ZSf6Pddvf0NXIpWhcB_VUJ9k5T0nf',
2025-12-10T09:20:55.8400268Z       hasSession: true,
2025-12-10T09:20:55.8400644Z       authenticated: true,
2025-12-10T09:20:55.8401030Z       username: 'testadmin',
2025-12-10T09:20:55.8401420Z       hasCookies: false,
2025-12-10T09:20:55.8401857Z       timestamp: '2025-12-10T09:20:55.838Z'
2025-12-10T09:20:55.8402266Z     }
2025-12-10T09:20:55.8402434Z 
2025-12-10T09:20:55.8402612Z       at log (auth/auth.js:86:13)
2025-12-10T09:20:55.8402880Z 
2025-12-10T09:20:55.8408274Z   console.log
2025-12-10T09:20:55.8408757Z     [AUTH] Authentication successful for: testadmin
2025-12-10T09:20:55.8409137Z 
2025-12-10T09:20:55.8409565Z       at log (auth/auth.js:98:17)
2025-12-10T09:20:55.8409871Z 
2025-12-10T09:20:55.8608761Z PASS __tests__/routes/players-advanced.test.js
2025-12-10T09:20:55.8609515Z   Advanced Player Management Routes
2025-12-10T09:20:55.8609975Z     POST /api/players/warn
2025-12-10T09:20:55.8610650Z       ✓ warns player with reason (10 ms)
2025-12-10T09:20:55.8611343Z       ✓ returns error when player name missing (4 ms)
2025-12-10T09:20:55.8612005Z       ✓ returns error when reason missing (4 ms)
2025-12-10T09:20:55.8612329Z     POST /api/players/mute
2025-12-10T09:20:55.8612874Z       ✓ mutes player with reason and duration (4 ms)
2025-12-10T09:20:55.8613167Z     POST /api/players/unmute
2025-12-10T09:20:55.8613433Z       ✓ unmutes player (4 ms)
2025-12-10T09:20:55.8613693Z     GET /api/players/:uuid/details
2025-12-10T09:20:55.8614059Z       ✓ returns player details with action history (8 ms)
2025-12-10T09:20:55.8614441Z       ✓ returns 404 when player not found (4 ms)
2025-12-10T09:20:55.8615927Z     GET /api/players/:uuid/history
2025-12-10T09:20:55.8617475Z       ✓ returns action history for player (5 ms)
2025-12-10T09:20:55.8618173Z       ✓ respects limit parameter (5 ms)
2025-12-10T09:20:55.8618685Z     GET /api/players/whitelist
2025-12-10T09:20:55.8629993Z       ✓ returns whitelist entries (5 ms)
2025-12-10T09:20:55.8630548Z     POST /api/players/whitelist/add
2025-12-10T09:20:55.8631130Z       ✓ adds player to whitelist (6 ms)
2025-12-10T09:20:55.8631999Z       ✓ returns error when player not found (4 ms)
2025-12-10T09:20:55.8632540Z     POST /api/players/whitelist/remove
2025-12-10T09:20:55.8633099Z       ✓ removes player from whitelist (4 ms)
2025-12-10T09:20:55.8633405Z 
2025-12-10T09:20:55.9895768Z   console.error
2025-12-10T09:20:55.9896258Z     GitHub API request failed: GitHub API error
2025-12-10T09:20:55.9896623Z 
2025-12-10T09:20:55.9897086Z     [0m [90m 48 |[39m         [36mreturn[39m response[33m.[39mdata[33m;[39m
2025-12-10T09:20:55.9897521Z      [90m 49 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:55.9898213Z     [31m[1m>[22m[39m[90m 50 |[39m         console[33m.[39merror([32m'GitHub API request failed:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:55.9898827Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:55.9899417Z      [90m 51 |[39m         [36mthrow[39m error[33m;[39m
2025-12-10T09:20:55.9899739Z      [90m 52 |[39m     }
2025-12-10T09:20:55.9899981Z      [90m 53 |[39m }[0m
2025-12-10T09:20:55.9900134Z 
2025-12-10T09:20:55.9900251Z       at error (routes/cicd.js:50:17)
2025-12-10T09:20:55.9900500Z       at routes/cicd.js:61:22
2025-12-10T09:20:55.9900643Z 
2025-12-10T09:20:55.9915337Z   console.error
2025-12-10T09:20:55.9915912Z     Failed to fetch CI/CD status: Error: GitHub API error
2025-12-10T09:20:55.9917172Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/cicd.test.js:108:37)
2025-12-10T09:20:55.9919050Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:55.9920525Z         at new Promise (<anonymous>)
2025-12-10T09:20:55.9922262Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:55.9924150Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:55.9925532Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:55.9926879Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:55.9928799Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:55.9930968Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:55.9932933Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:55.9934777Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:55.9937040Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:55.9939789Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:55.9941887Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:55.9943698Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:55.9945555Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:55.9946519Z 
2025-12-10T09:20:55.9947331Z     [0m [90m 90 |[39m         res[33m.[39mjson(overview)[33m;[39m
2025-12-10T09:20:55.9948124Z      [90m 91 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:55.9949517Z     [31m[1m>[22m[39m[90m 92 |[39m         console[33m.[39merror([32m'Failed to fetch CI/CD status:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:55.9950554Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:55.9951330Z      [90m 93 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ 
2025-12-10T09:20:55.9952304Z      [90m 94 |[39m             error[33m:[39m [32m'Failed to fetch CI/CD status'[39m[33m,[39m
2025-12-10T09:20:55.9953227Z      [90m 95 |[39m             message[33m:[39m error[33m.[39mmessage [0m
2025-12-10T09:20:55.9953643Z 
2025-12-10T09:20:55.9953862Z       at error (routes/cicd.js:92:17)
2025-12-10T09:20:55.9954153Z 
2025-12-10T09:20:56.0146529Z PASS __tests__/routes/cicd.test.js
2025-12-10T09:20:56.0147036Z   CI/CD Routes
2025-12-10T09:20:56.0147315Z     GET /api/cicd/status
2025-12-10T09:20:56.0147789Z       ✓ should return CI/CD status overview (16 ms)
2025-12-10T09:20:56.0148157Z       ✓ should handle errors gracefully (8 ms)
2025-12-10T09:20:56.0148421Z     GET /api/cicd/runs
2025-12-10T09:20:56.0148727Z       ✓ should return workflow runs list (3 ms)
2025-12-10T09:20:56.0149092Z       ✓ should support filtering by workflow (2 ms)
2025-12-10T09:20:56.0149703Z       ✓ should support filtering by status (1 ms)
2025-12-10T09:20:56.0149970Z     GET /api/cicd/runs/:runId
2025-12-10T09:20:56.0150352Z       ✓ should return detailed workflow run information (3 ms)
2025-12-10T09:20:56.0150695Z     GET /api/cicd/runs/:runId/artifacts
2025-12-10T09:20:56.0151067Z       ✓ should return artifacts for a workflow run (2 ms)
2025-12-10T09:20:56.0151656Z     GET /api/cicd/workflows
2025-12-10T09:20:56.0151964Z       ✓ should return list of workflows (2 ms)
2025-12-10T09:20:56.0152337Z     GET /api/cicd/deployments
2025-12-10T09:20:56.0152907Z       ✓ should return deployment history (5 ms)
2025-12-10T09:20:56.0153241Z 
2025-12-10T09:20:56.0515782Z   console.log
2025-12-10T09:20:56.0516797Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:56.0517592Z 
2025-12-10T09:20:56.0518005Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.0518504Z 
2025-12-10T09:20:56.0543755Z   console.log
2025-12-10T09:20:56.0544200Z     Database connection closed
2025-12-10T09:20:56.0544495Z 
2025-12-10T09:20:56.0544899Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.0545369Z 
2025-12-10T09:20:56.0592563Z   console.log
2025-12-10T09:20:56.0593551Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:56.0594367Z 
2025-12-10T09:20:56.0594778Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.0595263Z 
2025-12-10T09:20:56.0653730Z   console.log
2025-12-10T09:20:56.0654174Z     Database connection closed
2025-12-10T09:20:56.0654471Z 
2025-12-10T09:20:56.0654869Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.0655358Z 
2025-12-10T09:20:56.0702703Z   console.log
2025-12-10T09:20:56.0703674Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:56.0704457Z 
2025-12-10T09:20:56.0704881Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.0705372Z 
2025-12-10T09:20:56.0730428Z   console.log
2025-12-10T09:20:56.0730866Z     Database connection closed
2025-12-10T09:20:56.0731167Z 
2025-12-10T09:20:56.0731566Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.0732059Z 
2025-12-10T09:20:56.0773904Z   console.log
2025-12-10T09:20:56.0775146Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:56.0775953Z 
2025-12-10T09:20:56.0776383Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.0776895Z 
2025-12-10T09:20:56.0802634Z   console.log
2025-12-10T09:20:56.0803071Z     Database connection closed
2025-12-10T09:20:56.0803367Z 
2025-12-10T09:20:56.0803772Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.0804260Z 
2025-12-10T09:20:56.0850432Z   console.log
2025-12-10T09:20:56.0851431Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:56.0852217Z 
2025-12-10T09:20:56.0852644Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.0853157Z 
2025-12-10T09:20:56.0877898Z   console.log
2025-12-10T09:20:56.0878326Z     Database connection closed
2025-12-10T09:20:56.0878686Z 
2025-12-10T09:20:56.0879092Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.0879808Z 
2025-12-10T09:20:56.0920448Z   console.log
2025-12-10T09:20:56.0921448Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:56.0922232Z 
2025-12-10T09:20:56.0922760Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.0923262Z 
2025-12-10T09:20:56.0968063Z   console.log
2025-12-10T09:20:56.0968468Z     Database connection closed
2025-12-10T09:20:56.0968739Z 
2025-12-10T09:20:56.0969105Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.0969771Z 
2025-12-10T09:20:56.1030446Z   console.log
2025-12-10T09:20:56.1031402Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:56.1032420Z 
2025-12-10T09:20:56.1032819Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.1033277Z 
2025-12-10T09:20:56.1564803Z   console.log
2025-12-10T09:20:56.1565286Z     Database connection closed
2025-12-10T09:20:56.1565616Z 
2025-12-10T09:20:56.1566069Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.1566607Z 
2025-12-10T09:20:56.1609949Z   console.log
2025-12-10T09:20:56.1610965Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:56.1611753Z 
2025-12-10T09:20:56.1612189Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.1612688Z 
2025-12-10T09:20:56.1654166Z   console.warn
2025-12-10T09:20:56.1654965Z     Cannot end session for 12345678-1234-1234-1234-123456789abc: no active session
2025-12-10T09:20:56.1655486Z 
2025-12-10T09:20:56.1655931Z     [0m [90m 395 |[39m         
2025-12-10T09:20:56.1656668Z      [90m 396 |[39m         [36mif[39m ([33m![39mplayer [33m||[39m [33m![39mplayer[33m.[39mcurrent_session_start) {
2025-12-10T09:20:56.1657617Z     [31m[1m>[22m[39m[90m 397 |[39m             console[33m.[39mwarn([32m`Cannot end session for ${uuid}: no active session`[39m)[33m;[39m
2025-12-10T09:20:56.1658444Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:56.1658879Z      [90m 398 |[39m             [36mreturn[39m [35m0[39m[33m;[39m
2025-12-10T09:20:56.1659460Z      [90m 399 |[39m         }
2025-12-10T09:20:56.1659891Z      [90m 400 |[39m[0m
2025-12-10T09:20:56.1660034Z 
2025-12-10T09:20:56.1660265Z       at DatabaseService.warn [as endSession] (services/database.js:397:21)
2025-12-10T09:20:56.1660898Z       at Object.endSession (__tests__/services/database.test.js:152:46)
2025-12-10T09:20:56.1661157Z 
2025-12-10T09:20:56.1676160Z   console.log
2025-12-10T09:20:56.1676681Z     Database connection closed
2025-12-10T09:20:56.1677311Z 
2025-12-10T09:20:56.1677948Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.1678606Z 
2025-12-10T09:20:56.1722472Z   console.log
2025-12-10T09:20:56.1723416Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:56.1724009Z 
2025-12-10T09:20:56.1724262Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.1724565Z 
2025-12-10T09:20:56.2251676Z   console.log
2025-12-10T09:20:56.2252122Z     Database connection closed
2025-12-10T09:20:56.2252431Z 
2025-12-10T09:20:56.2252797Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.2253156Z 
2025-12-10T09:20:56.2300116Z   console.log
2025-12-10T09:20:56.2300820Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:56.2301399Z 
2025-12-10T09:20:56.2301690Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.2302036Z 
2025-12-10T09:20:56.2324559Z   console.log
2025-12-10T09:20:56.2324864Z     Database connection closed
2025-12-10T09:20:56.2325066Z 
2025-12-10T09:20:56.2325350Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.2325682Z 
2025-12-10T09:20:56.2368501Z   console.log
2025-12-10T09:20:56.2369422Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:56.2370077Z 
2025-12-10T09:20:56.2370376Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.2370716Z 
2025-12-10T09:20:56.2389872Z   console.log
2025-12-10T09:20:56.2390163Z     Database connection closed
2025-12-10T09:20:56.2390360Z 
2025-12-10T09:20:56.2390636Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.2391205Z 
2025-12-10T09:20:56.2430780Z   console.log
2025-12-10T09:20:56.2431628Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:56.2432207Z 
2025-12-10T09:20:56.2432508Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.2432859Z 
2025-12-10T09:20:56.2454568Z   console.log
2025-12-10T09:20:56.2454965Z     Database connection closed
2025-12-10T09:20:56.2455170Z 
2025-12-10T09:20:56.2455457Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.2455974Z 
2025-12-10T09:20:56.2499126Z   console.log
2025-12-10T09:20:56.2500379Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:56.2500969Z 
2025-12-10T09:20:56.2501263Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.2501615Z 
2025-12-10T09:20:56.2529039Z   console.log
2025-12-10T09:20:56.2529622Z     Database connection closed
2025-12-10T09:20:56.2529931Z 
2025-12-10T09:20:56.2530292Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.2530626Z 
2025-12-10T09:20:56.2571861Z   console.log
2025-12-10T09:20:56.2572695Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:56.2573276Z 
2025-12-10T09:20:56.2573573Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.2573927Z 
2025-12-10T09:20:56.2594420Z   console.log
2025-12-10T09:20:56.2594789Z     Database connection closed
2025-12-10T09:20:56.2594990Z 
2025-12-10T09:20:56.2595272Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.2595603Z 
2025-12-10T09:20:56.2641652Z   console.log
2025-12-10T09:20:56.2642476Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:56.2643036Z 
2025-12-10T09:20:56.2643373Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.2643760Z 
2025-12-10T09:20:56.2667984Z   console.log
2025-12-10T09:20:56.2668525Z     Database connection closed
2025-12-10T09:20:56.2668734Z 
2025-12-10T09:20:56.2669011Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.2669647Z 
2025-12-10T09:20:56.2717302Z   console.log
2025-12-10T09:20:56.2718133Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-players.db
2025-12-10T09:20:56.2718684Z 
2025-12-10T09:20:56.2718977Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.2719573Z 
2025-12-10T09:20:56.2746648Z   console.log
2025-12-10T09:20:56.2747323Z     Database connection closed
2025-12-10T09:20:56.2747687Z 
2025-12-10T09:20:56.2748181Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.2748846Z 
2025-12-10T09:20:56.2857028Z PASS __tests__/services/database.test.js
2025-12-10T09:20:56.2857540Z   DatabaseService
2025-12-10T09:20:56.2857861Z     initialize
2025-12-10T09:20:56.2858471Z       ✓ should create database file (10 ms)
2025-12-10T09:20:56.2859063Z       ✓ should create players table (11 ms)
2025-12-10T09:20:56.2859585Z     upsertPlayer
2025-12-10T09:20:56.2859894Z       ✓ should insert a new player (8 ms)
2025-12-10T09:20:56.2860273Z       ✓ should update existing player username (7 ms)
2025-12-10T09:20:56.2860563Z     startSession
2025-12-10T09:20:56.2860922Z       ✓ should start a session and increment session count (7 ms)
2025-12-10T09:20:56.2861391Z       ✓ should increment session count on multiple sessions (9 ms)
2025-12-10T09:20:56.2861707Z     endSession
2025-12-10T09:20:56.2862033Z       ✓ should end session and update total playtime (60 ms)
2025-12-10T09:20:56.2862433Z       ✓ should return 0 if no active session (11 ms)
2025-12-10T09:20:56.2862958Z     updateLastSeen
2025-12-10T09:20:56.2863267Z       ✓ should update last_seen timestamp (58 ms)
2025-12-10T09:20:56.2863531Z     getPlayerByUuid
2025-12-10T09:20:56.2863826Z       ✓ should retrieve player by UUID (7 ms)
2025-12-10T09:20:56.2864281Z       ✓ should return null for non-existent player (7 ms)
2025-12-10T09:20:56.2864606Z     getPlayerByUsername
2025-12-10T09:20:56.2864927Z       ✓ should retrieve player by username (6 ms)
2025-12-10T09:20:56.2865201Z     getAllPlayers
2025-12-10T09:20:56.2865531Z       ✓ should return all players sorted by playtime (7 ms)
2025-12-10T09:20:56.2865957Z       ✓ should return empty array when no players (7 ms)
2025-12-10T09:20:56.2866252Z     getActivePlayers
2025-12-10T09:20:56.2866606Z       ✓ should return only players with active sessions (7 ms)
2025-12-10T09:20:56.2866914Z     getPlayerCount
2025-12-10T09:20:56.2867199Z       ✓ should return correct player count (8 ms)
2025-12-10T09:20:56.2867403Z 
2025-12-10T09:20:56.4326178Z   console.error
2025-12-10T09:20:56.4326941Z     Error getting player activity: Error: Database error
2025-12-10T09:20:56.4328186Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/analytics.test.js:125:23)
2025-12-10T09:20:56.4329867Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:397:39
2025-12-10T09:20:56.4330958Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:404:13)
2025-12-10T09:20:56.4332137Z         at Object.mockConstructor (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:148:19)
2025-12-10T09:20:56.4333527Z         at Object.getPlayerActivity (eval at _createMockFunction (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:566:31), <anonymous>:3:63)
2025-12-10T09:20:56.4334784Z         at getPlayerActivity (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/routes/analytics.js:72:43)
2025-12-10T09:20:56.4336621Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:56.4337995Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:56.4339012Z         at middleware (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express-validator/lib/middlewares/check.js:16:13)
2025-12-10T09:20:56.4340069Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:56.4340368Z 
2025-12-10T09:20:56.4340713Z     [0m [90m 81 |[39m             })[33m;[39m
2025-12-10T09:20:56.4341086Z      [90m 82 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:56.4341733Z     [31m[1m>[22m[39m[90m 83 |[39m             console[33m.[39merror([32m'Error getting player activity:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:56.4342513Z      [90m    |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:56.4342954Z      [90m 84 |[39m             res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ 
2025-12-10T09:20:56.4343406Z      [90m 85 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m 
2025-12-10T09:20:56.4343945Z      [90m 86 |[39m                 error[33m:[39m [32m'Failed to retrieve player activity data'[39m [0m
2025-12-10T09:20:56.4344227Z 
2025-12-10T09:20:56.4344350Z       at error (routes/analytics.js:83:21)
2025-12-10T09:20:56.4344774Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:56.4345295Z       at next (node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:56.4345746Z       at middleware (node_modules/express-validator/lib/middlewares/check.js:16:13)
2025-12-10T09:20:56.4346030Z 
2025-12-10T09:20:56.4607322Z   console.error
2025-12-10T09:20:56.4607961Z     Error updating privacy settings: Error: Database error
2025-12-10T09:20:56.4609531Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/analytics.test.js:311:23)
2025-12-10T09:20:56.4611277Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:397:39
2025-12-10T09:20:56.4612989Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:404:13)
2025-12-10T09:20:56.4614861Z         at Object.mockConstructor (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:148:19)
2025-12-10T09:20:56.4617163Z         at Object.updatePrivacySettings (eval at _createMockFunction (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:566:31), <anonymous>:3:67)
2025-12-10T09:20:56.4619585Z         at updatePrivacySettings (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/routes/analytics.js:256:47)
2025-12-10T09:20:56.4621428Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:56.4623220Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:56.4625037Z         at middleware (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express-validator/lib/middlewares/check.js:16:13)
2025-12-10T09:20:56.4626460Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:56.4626973Z 
2025-12-10T09:20:56.4627447Z     [0m [90m 261 |[39m             })[33m;[39m
2025-12-10T09:20:56.4628110Z      [90m 262 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:56.4629575Z     [31m[1m>[22m[39m[90m 263 |[39m             console[33m.[39merror([32m'Error updating privacy settings:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:56.4630638Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:56.4631758Z      [90m 264 |[39m             res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ 
2025-12-10T09:20:56.4632643Z      [90m 265 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m 
2025-12-10T09:20:56.4633631Z      [90m 266 |[39m                 error[33m:[39m [32m'Failed to update privacy settings'[39m [0m
2025-12-10T09:20:56.4634111Z 
2025-12-10T09:20:56.4634335Z       at error (routes/analytics.js:263:21)
2025-12-10T09:20:56.4635100Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:56.4635989Z       at next (node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:56.4636830Z       at middleware (node_modules/express-validator/lib/middlewares/check.js:16:13)
2025-12-10T09:20:56.4637613Z 
2025-12-10T09:20:56.4670560Z PASS __tests__/routes/analytics.test.js
2025-12-10T09:20:56.4671046Z   Analytics Routes
2025-12-10T09:20:56.4671442Z     GET /api/analytics/dashboard
2025-12-10T09:20:56.4672104Z       ✓ should return dashboard statistics (8 ms)
2025-12-10T09:20:56.4672718Z       ✓ should accept date range filters (4 ms)
2025-12-10T09:20:56.4673130Z       ✓ should return 400 for invalid date format (1 ms)
2025-12-10T09:20:56.4673445Z     GET /api/analytics/players
2025-12-10T09:20:56.4673774Z       ✓ should return player activity data (2 ms)
2025-12-10T09:20:56.4674123Z       ✓ should handle errors gracefully (23 ms)
2025-12-10T09:20:56.4674389Z     GET /api/analytics/server
2025-12-10T09:20:56.4674697Z       ✓ should return server health data (2 ms)
2025-12-10T09:20:56.4674973Z     GET /api/analytics/plugins
2025-12-10T09:20:56.4675272Z       ✓ should return plugin usage data (2 ms)
2025-12-10T09:20:56.4675534Z     GET /api/analytics/export
2025-12-10T09:20:56.4675856Z       ✓ should export data as JSON (2 ms)
2025-12-10T09:20:56.4676173Z       ✓ should export data as CSV (2 ms)
2025-12-10T09:20:56.4676504Z       ✓ should validate format parameter (2 ms)
2025-12-10T09:20:56.4676853Z       ✓ should validate dataType parameter (2 ms)
2025-12-10T09:20:56.4677141Z     GET /api/analytics/settings
2025-12-10T09:20:56.4677469Z       ✓ should return privacy settings (1 ms)
2025-12-10T09:20:56.4677756Z     POST /api/analytics/settings
2025-12-10T09:20:56.4678066Z       ✓ should update privacy settings (4 ms)
2025-12-10T09:20:56.4678503Z       ✓ should validate boolean fields (2 ms)
2025-12-10T09:20:56.4679131Z       ✓ should validate retentionDays range (4 ms)
2025-12-10T09:20:56.4680058Z       ✓ should handle errors during update (4 ms)
2025-12-10T09:20:56.4680389Z 
2025-12-10T09:20:56.5193387Z   console.log
2025-12-10T09:20:56.5194502Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:56.5195415Z 
2025-12-10T09:20:56.5195827Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.5196323Z 
2025-12-10T09:20:56.5201483Z   console.log
2025-12-10T09:20:56.5202015Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:56.5202394Z 
2025-12-10T09:20:56.5202910Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:56.5203489Z 
2025-12-10T09:20:56.5208468Z   console.log
2025-12-10T09:20:56.5208954Z     Player tracker initialized with 0 players
2025-12-10T09:20:56.5209538Z 
2025-12-10T09:20:56.5210043Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:56.5210616Z 
2025-12-10T09:20:56.5234794Z   console.log
2025-12-10T09:20:56.5235229Z     Database connection closed
2025-12-10T09:20:56.5235517Z 
2025-12-10T09:20:56.5235910Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.5236363Z 
2025-12-10T09:20:56.5241341Z   console.log
2025-12-10T09:20:56.5241786Z     Player tracker shutdown complete
2025-12-10T09:20:56.5242125Z 
2025-12-10T09:20:56.5242615Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:56.5243458Z 
2025-12-10T09:20:56.5291837Z   console.log
2025-12-10T09:20:56.5292898Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:56.5293736Z 
2025-12-10T09:20:56.5294162Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.5294644Z 
2025-12-10T09:20:56.5298894Z   console.log
2025-12-10T09:20:56.5299659Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:56.5300036Z 
2025-12-10T09:20:56.5300543Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:56.5301120Z 
2025-12-10T09:20:56.5306191Z   console.log
2025-12-10T09:20:56.5306666Z     Player tracker initialized with 0 players
2025-12-10T09:20:56.5307302Z 
2025-12-10T09:20:56.5307813Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:56.5308390Z 
2025-12-10T09:20:56.5328602Z   console.log
2025-12-10T09:20:56.5329044Z     Database connection closed
2025-12-10T09:20:56.5329528Z 
2025-12-10T09:20:56.5329924Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.5330391Z 
2025-12-10T09:20:56.5335098Z   console.log
2025-12-10T09:20:56.5335544Z     Player tracker shutdown complete
2025-12-10T09:20:56.5335873Z 
2025-12-10T09:20:56.5336367Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:56.5336925Z 
2025-12-10T09:20:56.5377229Z   console.log
2025-12-10T09:20:56.5378281Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:56.5379125Z 
2025-12-10T09:20:56.5379796Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.5380299Z 
2025-12-10T09:20:56.5384721Z   console.log
2025-12-10T09:20:56.5385219Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:56.5385595Z 
2025-12-10T09:20:56.5386117Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:56.5386686Z 
2025-12-10T09:20:56.5391856Z   console.log
2025-12-10T09:20:56.5392325Z     Player tracker initialized with 0 players
2025-12-10T09:20:56.5392681Z 
2025-12-10T09:20:56.5393160Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:56.5393716Z 
2025-12-10T09:20:56.5399738Z   console.log
2025-12-10T09:20:56.5400265Z     Player joined: NewPlayer (UUID: uuid-newplayer)
2025-12-10T09:20:56.5400663Z 
2025-12-10T09:20:56.5401165Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:56.5401738Z 
2025-12-10T09:20:56.5412186Z   console.log
2025-12-10T09:20:56.5412612Z     Ended session for NewPlayer
2025-12-10T09:20:56.5412834Z 
2025-12-10T09:20:56.5413121Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:219:29)
2025-12-10T09:20:56.5413435Z 
2025-12-10T09:20:56.5469113Z   console.log
2025-12-10T09:20:56.5469765Z     Database connection closed
2025-12-10T09:20:56.5470068Z 
2025-12-10T09:20:56.5470459Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.5470914Z 
2025-12-10T09:20:56.5475780Z   console.log
2025-12-10T09:20:56.5476226Z     Player tracker shutdown complete
2025-12-10T09:20:56.5476559Z 
2025-12-10T09:20:56.5477054Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:56.5477611Z 
2025-12-10T09:20:56.5522693Z   console.log
2025-12-10T09:20:56.5523527Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:56.5524100Z 
2025-12-10T09:20:56.5524376Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.5524715Z 
2025-12-10T09:20:56.5528805Z   console.log
2025-12-10T09:20:56.5529130Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:56.5529576Z 
2025-12-10T09:20:56.5530115Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:56.5530515Z 
2025-12-10T09:20:56.5535498Z   console.log
2025-12-10T09:20:56.5535983Z     Player tracker initialized with 0 players
2025-12-10T09:20:56.5536353Z 
2025-12-10T09:20:56.5536846Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:56.5537427Z 
2025-12-10T09:20:56.5542201Z   console.log
2025-12-10T09:20:56.5542789Z     Player joined: ReturningPlayer (UUID: uuid-returningplayer)
2025-12-10T09:20:56.5543239Z 
2025-12-10T09:20:56.5543755Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:56.5544333Z 
2025-12-10T09:20:56.5549143Z   console.log
2025-12-10T09:20:56.5549814Z     Player left: ReturningPlayer (session: 0s)
2025-12-10T09:20:56.5550171Z 
2025-12-10T09:20:56.5550666Z       at PlayerTrackerService.log [as playerLeft] (services/playerTracker.js:146:21)
2025-12-10T09:20:56.5551249Z 
2025-12-10T09:20:56.5554982Z   console.log
2025-12-10T09:20:56.5555564Z     Player joined: ReturningPlayer (UUID: uuid-returningplayer)
2025-12-10T09:20:56.5556012Z 
2025-12-10T09:20:56.5556525Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:56.5557114Z 
2025-12-10T09:20:56.5565655Z   console.log
2025-12-10T09:20:56.5566165Z     Ended session for ReturningPlayer
2025-12-10T09:20:56.5566564Z 
2025-12-10T09:20:56.5567049Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:219:29)
2025-12-10T09:20:56.5567658Z 
2025-12-10T09:20:56.5587158Z   console.log
2025-12-10T09:20:56.5587557Z     Database connection closed
2025-12-10T09:20:56.5587824Z 
2025-12-10T09:20:56.5588217Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.5588659Z 
2025-12-10T09:20:56.5593310Z   console.log
2025-12-10T09:20:56.5593725Z     Player tracker shutdown complete
2025-12-10T09:20:56.5594033Z 
2025-12-10T09:20:56.5594509Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:56.5595119Z 
2025-12-10T09:20:56.5645236Z   console.log
2025-12-10T09:20:56.5646246Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:56.5647058Z 
2025-12-10T09:20:56.5647462Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.5647949Z 
2025-12-10T09:20:56.5651964Z   console.log
2025-12-10T09:20:56.5652419Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:56.5652764Z 
2025-12-10T09:20:56.5653266Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:56.5653836Z 
2025-12-10T09:20:56.5658174Z   console.log
2025-12-10T09:20:56.5658621Z     Player tracker initialized with 0 players
2025-12-10T09:20:56.5658959Z 
2025-12-10T09:20:56.5659623Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:56.5660149Z 
2025-12-10T09:20:56.5664273Z   console.log
2025-12-10T09:20:56.5664787Z     Player joined: ActivePlayer (UUID: uuid-activeplayer)
2025-12-10T09:20:56.5665176Z 
2025-12-10T09:20:56.5665650Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:56.5666179Z 
2025-12-10T09:20:56.5673928Z   console.log
2025-12-10T09:20:56.5674323Z     Ended session for ActivePlayer
2025-12-10T09:20:56.5674607Z 
2025-12-10T09:20:56.5675053Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:219:29)
2025-12-10T09:20:56.5675577Z 
2025-12-10T09:20:56.5696475Z   console.log
2025-12-10T09:20:56.5696879Z     Database connection closed
2025-12-10T09:20:56.5697164Z 
2025-12-10T09:20:56.5697537Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.5697987Z 
2025-12-10T09:20:56.5702700Z   console.log
2025-12-10T09:20:56.5703112Z     Player tracker shutdown complete
2025-12-10T09:20:56.5703426Z 
2025-12-10T09:20:56.5704132Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:56.5704686Z 
2025-12-10T09:20:56.5755849Z   console.log
2025-12-10T09:20:56.5756796Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:56.5757282Z 
2025-12-10T09:20:56.5757529Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.5757804Z 
2025-12-10T09:20:56.5761913Z   console.log
2025-12-10T09:20:56.5762350Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:56.5762693Z 
2025-12-10T09:20:56.5763029Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:56.5763654Z 
2025-12-10T09:20:56.5767701Z   console.log
2025-12-10T09:20:56.5768117Z     Player tracker initialized with 0 players
2025-12-10T09:20:56.5768433Z 
2025-12-10T09:20:56.5768770Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:56.5769092Z 
2025-12-10T09:20:56.5773231Z   console.log
2025-12-10T09:20:56.5773723Z     Player joined: LeavingPlayer (UUID: uuid-leavingplayer)
2025-12-10T09:20:56.5774114Z 
2025-12-10T09:20:56.5774397Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:56.5774701Z 
2025-12-10T09:20:56.6283336Z   console.log
2025-12-10T09:20:56.6283883Z     Player left: LeavingPlayer (session: 0s)
2025-12-10T09:20:56.6284289Z 
2025-12-10T09:20:56.6284702Z       at PlayerTrackerService.log [as playerLeft] (services/playerTracker.js:146:21)
2025-12-10T09:20:56.6285105Z 
2025-12-10T09:20:56.6309808Z   console.log
2025-12-10T09:20:56.6310220Z     Database connection closed
2025-12-10T09:20:56.6310539Z 
2025-12-10T09:20:56.6310871Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.6311177Z 
2025-12-10T09:20:56.6315593Z   console.log
2025-12-10T09:20:56.6316041Z     Player tracker shutdown complete
2025-12-10T09:20:56.6316360Z 
2025-12-10T09:20:56.6316721Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:56.6317093Z 
2025-12-10T09:20:56.6366601Z   console.log
2025-12-10T09:20:56.6367247Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:56.6367780Z 
2025-12-10T09:20:56.6368040Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.6368339Z 
2025-12-10T09:20:56.6373106Z   console.log
2025-12-10T09:20:56.6373454Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:56.6373694Z 
2025-12-10T09:20:56.6374023Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:56.6374416Z 
2025-12-10T09:20:56.6379431Z   console.log
2025-12-10T09:20:56.6379739Z     Player tracker initialized with 0 players
2025-12-10T09:20:56.6379964Z 
2025-12-10T09:20:56.6380288Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:56.6380648Z 
2025-12-10T09:20:56.6393847Z   console.warn
2025-12-10T09:20:56.6394171Z     Player left but no session found: NoSessionPlayer
2025-12-10T09:20:56.6394423Z 
2025-12-10T09:20:56.6394936Z     [0m [90m 131 |[39m                     uuid [33m=[39m player[33m.[39muuid[33m;[39m
2025-12-10T09:20:56.6395437Z      [90m 132 |[39m                 } [36melse[39m {
2025-12-10T09:20:56.6396218Z     [31m[1m>[22m[39m[90m 133 |[39m                     console[33m.[39mwarn([32m`Player left but no session found: ${username}`[39m)[33m;[39m
2025-12-10T09:20:56.6396890Z      [90m     |[39m                             [31m[1m^[22m[39m
2025-12-10T09:20:56.6397379Z      [90m 134 |[39m                     [36mreturn[39m[33m;[39m
2025-12-10T09:20:56.6397770Z      [90m 135 |[39m                 }
2025-12-10T09:20:56.6398112Z      [90m 136 |[39m             }[0m
2025-12-10T09:20:56.6398583Z 
2025-12-10T09:20:56.6398973Z       at PlayerTrackerService.warn [as playerLeft] (services/playerTracker.js:133:29)
2025-12-10T09:20:56.6399958Z       at Object.playerLeft (__tests__/services/playerTracker.test.js:137:40)
2025-12-10T09:20:56.6400468Z 
2025-12-10T09:20:56.6419982Z   console.log
2025-12-10T09:20:56.6420255Z     Database connection closed
2025-12-10T09:20:56.6420446Z 
2025-12-10T09:20:56.6420701Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.6421012Z 
2025-12-10T09:20:56.6425931Z   console.log
2025-12-10T09:20:56.6426208Z     Player tracker shutdown complete
2025-12-10T09:20:56.6426410Z 
2025-12-10T09:20:56.6426725Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:56.6427303Z 
2025-12-10T09:20:56.6474589Z   console.log
2025-12-10T09:20:56.6475378Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:56.6475960Z 
2025-12-10T09:20:56.6476250Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.6476581Z 
2025-12-10T09:20:56.6481292Z   console.log
2025-12-10T09:20:56.6481600Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:56.6481834Z 
2025-12-10T09:20:56.6482167Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:56.6482542Z 
2025-12-10T09:20:56.6487414Z   console.log
2025-12-10T09:20:56.6487835Z     Player tracker initialized with 0 players
2025-12-10T09:20:56.6488074Z 
2025-12-10T09:20:56.6488386Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:56.6488750Z 
2025-12-10T09:20:56.6493812Z   console.log
2025-12-10T09:20:56.6494115Z     Player joined: Player1 (UUID: uuid-player1)
2025-12-10T09:20:56.6494344Z 
2025-12-10T09:20:56.6494671Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:56.6495043Z 
2025-12-10T09:20:56.6498703Z   console.log
2025-12-10T09:20:56.6499000Z     Player joined: Player2 (UUID: uuid-player2)
2025-12-10T09:20:56.6499478Z 
2025-12-10T09:20:56.6499837Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:56.6500217Z 
2025-12-10T09:20:56.6509977Z   console.log
2025-12-10T09:20:56.6510227Z     Ended session for Player1
2025-12-10T09:20:56.6510406Z 
2025-12-10T09:20:56.6510721Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:219:29)
2025-12-10T09:20:56.6511083Z 
2025-12-10T09:20:56.6516755Z   console.log
2025-12-10T09:20:56.6516989Z     Ended session for Player2
2025-12-10T09:20:56.6517175Z 
2025-12-10T09:20:56.6517484Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:219:29)
2025-12-10T09:20:56.6517856Z 
2025-12-10T09:20:56.6569609Z   console.log
2025-12-10T09:20:56.6570046Z     Database connection closed
2025-12-10T09:20:56.6570335Z 
2025-12-10T09:20:56.6570752Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.6571216Z 
2025-12-10T09:20:56.6576047Z   console.log
2025-12-10T09:20:56.6576487Z     Player tracker shutdown complete
2025-12-10T09:20:56.6576817Z 
2025-12-10T09:20:56.6577297Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:56.6577852Z 
2025-12-10T09:20:56.6626191Z   console.log
2025-12-10T09:20:56.6626852Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:56.6627318Z 
2025-12-10T09:20:56.6627558Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.6627828Z 
2025-12-10T09:20:56.6632758Z   console.log
2025-12-10T09:20:56.6633038Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:56.6633249Z 
2025-12-10T09:20:56.6633534Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:56.6633854Z 
2025-12-10T09:20:56.6639082Z   console.log
2025-12-10T09:20:56.6639579Z     Player tracker initialized with 0 players
2025-12-10T09:20:56.6639780Z 
2025-12-10T09:20:56.6640052Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:56.6640346Z 
2025-12-10T09:20:56.6666796Z   console.log
2025-12-10T09:20:56.6667042Z     Database connection closed
2025-12-10T09:20:56.6667210Z 
2025-12-10T09:20:56.6667434Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.6667699Z 
2025-12-10T09:20:56.6672915Z   console.log
2025-12-10T09:20:56.6673214Z     Player tracker shutdown complete
2025-12-10T09:20:56.6673390Z 
2025-12-10T09:20:56.6673662Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:56.6674166Z 
2025-12-10T09:20:56.6719609Z   console.log
2025-12-10T09:20:56.6720364Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:56.6720957Z 
2025-12-10T09:20:56.6721246Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.6721581Z 
2025-12-10T09:20:56.6725958Z   console.log
2025-12-10T09:20:56.6726340Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:56.6726598Z 
2025-12-10T09:20:56.6726946Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:56.6727330Z 
2025-12-10T09:20:56.6732628Z   console.log
2025-12-10T09:20:56.6732897Z     Player tracker initialized with 0 players
2025-12-10T09:20:56.6733110Z 
2025-12-10T09:20:56.6733395Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:56.6733732Z 
2025-12-10T09:20:56.6738698Z   console.log
2025-12-10T09:20:56.6739023Z     Player joined: OnlinePlayer1 (UUID: uuid-onlineplayer1)
2025-12-10T09:20:56.6739521Z 
2025-12-10T09:20:56.6739838Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:56.6740165Z 
2025-12-10T09:20:56.6744759Z   console.log
2025-12-10T09:20:56.6745122Z     Player joined: OnlinePlayer2 (UUID: uuid-onlineplayer2)
2025-12-10T09:20:56.6745372Z 
2025-12-10T09:20:56.6745655Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:56.6745979Z 
2025-12-10T09:20:56.6749951Z   console.log
2025-12-10T09:20:56.6750273Z     Player joined: OfflinePlayer (UUID: uuid-offlineplayer)
2025-12-10T09:20:56.6750518Z 
2025-12-10T09:20:56.6750809Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:56.6751147Z 
2025-12-10T09:20:56.6754237Z   console.log
2025-12-10T09:20:56.6754566Z     Player left: OfflinePlayer (session: 0s)
2025-12-10T09:20:56.6754785Z 
2025-12-10T09:20:56.6755078Z       at PlayerTrackerService.log [as playerLeft] (services/playerTracker.js:146:21)
2025-12-10T09:20:56.6755417Z 
2025-12-10T09:20:56.6764936Z   console.log
2025-12-10T09:20:56.6765222Z     Ended session for OnlinePlayer1
2025-12-10T09:20:56.6765428Z 
2025-12-10T09:20:56.6765751Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:219:29)
2025-12-10T09:20:56.6766110Z 
2025-12-10T09:20:56.6771988Z   console.log
2025-12-10T09:20:56.6772300Z     Ended session for OnlinePlayer2
2025-12-10T09:20:56.6772490Z 
2025-12-10T09:20:56.6772792Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:219:29)
2025-12-10T09:20:56.6773134Z 
2025-12-10T09:20:56.6802165Z   console.log
2025-12-10T09:20:56.6802442Z     Database connection closed
2025-12-10T09:20:56.6802655Z 
2025-12-10T09:20:56.6802901Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.6803195Z 
2025-12-10T09:20:56.6808028Z   console.log
2025-12-10T09:20:56.6808410Z     Player tracker shutdown complete
2025-12-10T09:20:56.6808682Z 
2025-12-10T09:20:56.6809109Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:56.6810084Z 
2025-12-10T09:20:56.6861064Z   console.log
2025-12-10T09:20:56.6861832Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:56.6862436Z 
2025-12-10T09:20:56.6862727Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.6863065Z 
2025-12-10T09:20:56.6867025Z   console.log
2025-12-10T09:20:56.6867375Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:56.6867627Z 
2025-12-10T09:20:56.6867973Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:56.6868372Z 
2025-12-10T09:20:56.6874006Z   console.log
2025-12-10T09:20:56.6874274Z     Player tracker initialized with 0 players
2025-12-10T09:20:56.6874668Z 
2025-12-10T09:20:56.6874943Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:56.6875240Z 
2025-12-10T09:20:56.6903631Z   console.log
2025-12-10T09:20:56.6903892Z     Database connection closed
2025-12-10T09:20:56.6904057Z 
2025-12-10T09:20:56.6904280Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.6904548Z 
2025-12-10T09:20:56.6909593Z   console.log
2025-12-10T09:20:56.6909848Z     Player tracker shutdown complete
2025-12-10T09:20:56.6910019Z 
2025-12-10T09:20:56.6910281Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:56.6910574Z 
2025-12-10T09:20:56.6956305Z   console.log
2025-12-10T09:20:56.6957040Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:56.6957624Z 
2025-12-10T09:20:56.6957913Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.6958265Z 
2025-12-10T09:20:56.6962914Z   console.log
2025-12-10T09:20:56.6963224Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:56.6963455Z 
2025-12-10T09:20:56.6963796Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:56.6964171Z 
2025-12-10T09:20:56.6968977Z   console.log
2025-12-10T09:20:56.6969463Z     Player tracker initialized with 0 players
2025-12-10T09:20:56.6969697Z 
2025-12-10T09:20:56.6970009Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:56.6970375Z 
2025-12-10T09:20:56.6990519Z   console.log
2025-12-10T09:20:56.6990889Z     Database connection closed
2025-12-10T09:20:56.6991083Z 
2025-12-10T09:20:56.6991348Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.6991667Z 
2025-12-10T09:20:56.6996203Z   console.log
2025-12-10T09:20:56.6996489Z     Player tracker shutdown complete
2025-12-10T09:20:56.6996703Z 
2025-12-10T09:20:56.6997013Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:56.6997560Z 
2025-12-10T09:20:56.7044083Z   console.log
2025-12-10T09:20:56.7045082Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:56.7045662Z 
2025-12-10T09:20:56.7045936Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.7046258Z 
2025-12-10T09:20:56.7050059Z   console.log
2025-12-10T09:20:56.7050521Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:56.7050883Z 
2025-12-10T09:20:56.7051247Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:56.7051638Z 
2025-12-10T09:20:56.7055944Z   console.log
2025-12-10T09:20:56.7056392Z     Player tracker initialized with 0 players
2025-12-10T09:20:56.7056749Z 
2025-12-10T09:20:56.7057116Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:56.7057487Z 
2025-12-10T09:20:56.7080096Z   console.log
2025-12-10T09:20:56.7080483Z     Database connection closed
2025-12-10T09:20:56.7080748Z 
2025-12-10T09:20:56.7081269Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.7081589Z 
2025-12-10T09:20:56.7085669Z   console.log
2025-12-10T09:20:56.7086059Z     Player tracker shutdown complete
2025-12-10T09:20:56.7086346Z 
2025-12-10T09:20:56.7086718Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:56.7087061Z 
2025-12-10T09:20:56.7132444Z   console.log
2025-12-10T09:20:56.7133419Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:56.7133990Z 
2025-12-10T09:20:56.7134260Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.7134586Z 
2025-12-10T09:20:56.7138246Z   console.log
2025-12-10T09:20:56.7138705Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:56.7139066Z 
2025-12-10T09:20:56.7139561Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:56.7139952Z 
2025-12-10T09:20:56.7144184Z   console.log
2025-12-10T09:20:56.7144597Z     Player tracker initialized with 0 players
2025-12-10T09:20:56.7144914Z 
2025-12-10T09:20:56.7145265Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:56.7145611Z 
2025-12-10T09:20:56.7165986Z   console.log
2025-12-10T09:20:56.7166364Z     Database connection closed
2025-12-10T09:20:56.7166625Z 
2025-12-10T09:20:56.7166959Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.7167253Z 
2025-12-10T09:20:56.7171600Z   console.log
2025-12-10T09:20:56.7171984Z     Player tracker shutdown complete
2025-12-10T09:20:56.7172276Z 
2025-12-10T09:20:56.7172656Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:56.7173021Z 
2025-12-10T09:20:56.7221620Z   console.log
2025-12-10T09:20:56.7222688Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:56.7223543Z 
2025-12-10T09:20:56.7223952Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.7224435Z 
2025-12-10T09:20:56.7228789Z   console.log
2025-12-10T09:20:56.7229429Z     Player heartbeat started (interval: 60000ms)
2025-12-10T09:20:56.7229781Z 
2025-12-10T09:20:56.7230091Z       at PlayerTrackerService.log [as startHeartbeat] (services/playerTracker.js:49:17)
2025-12-10T09:20:56.7230438Z 
2025-12-10T09:20:56.7234809Z   console.log
2025-12-10T09:20:56.7235311Z     Player tracker initialized with 0 players
2025-12-10T09:20:56.7235647Z 
2025-12-10T09:20:56.7235942Z       at PlayerTrackerService.log [as initialize] (services/playerTracker.js:30:21)
2025-12-10T09:20:56.7236278Z 
2025-12-10T09:20:56.7240857Z   console.log
2025-12-10T09:20:56.7241342Z     Player joined: TestPlayer1 (UUID: uuid-testplayer1)
2025-12-10T09:20:56.7241711Z 
2025-12-10T09:20:56.7242023Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:56.7242376Z 
2025-12-10T09:20:56.7246743Z   console.log
2025-12-10T09:20:56.7247217Z     Player joined: TestPlayer2 (UUID: uuid-testplayer2)
2025-12-10T09:20:56.7247583Z 
2025-12-10T09:20:56.7247865Z       at PlayerTrackerService.log [as playerJoined] (services/playerTracker.js:106:21)
2025-12-10T09:20:56.7248183Z 
2025-12-10T09:20:56.7251989Z   console.log
2025-12-10T09:20:56.7252378Z     Ended session for TestPlayer1
2025-12-10T09:20:56.7252653Z 
2025-12-10T09:20:56.7253007Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:219:29)
2025-12-10T09:20:56.7253330Z 
2025-12-10T09:20:56.7255927Z   console.log
2025-12-10T09:20:56.7256305Z     Ended session for TestPlayer2
2025-12-10T09:20:56.7256599Z 
2025-12-10T09:20:56.7256942Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:219:29)
2025-12-10T09:20:56.7257253Z 
2025-12-10T09:20:56.7283098Z   console.log
2025-12-10T09:20:56.7283562Z     Database connection closed
2025-12-10T09:20:56.7284071Z 
2025-12-10T09:20:56.7284413Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.7284742Z 
2025-12-10T09:20:56.7284841Z   console.log
2025-12-10T09:20:56.7285116Z     Player tracker shutdown complete
2025-12-10T09:20:56.7285329Z 
2025-12-10T09:20:56.7285643Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:56.7286009Z 
2025-12-10T09:20:56.7287953Z   console.log
2025-12-10T09:20:56.7288908Z     Database initialized at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/data/test-tracker-players.db
2025-12-10T09:20:56.7289623Z 
2025-12-10T09:20:56.7289904Z       at DatabaseService.log [as initialize] (services/database.js:42:21)
2025-12-10T09:20:56.7290437Z 
2025-12-10T09:20:56.7295518Z   console.log
2025-12-10T09:20:56.7295905Z     Database connection closed
2025-12-10T09:20:56.7296177Z 
2025-12-10T09:20:56.7296504Z       at DatabaseService.log [as close] (services/database.js:1491:21)
2025-12-10T09:20:56.7296805Z 
2025-12-10T09:20:56.7301204Z   console.log
2025-12-10T09:20:56.7301609Z     Player tracker shutdown complete
2025-12-10T09:20:56.7301913Z 
2025-12-10T09:20:56.7302275Z       at PlayerTrackerService.log [as shutdown] (services/playerTracker.js:231:21)
2025-12-10T09:20:56.7302629Z 
2025-12-10T09:20:56.7409813Z PASS __tests__/services/playerTracker.test.js
2025-12-10T09:20:56.7410400Z   PlayerTrackerService
2025-12-10T09:20:56.7410796Z     initialize
2025-12-10T09:20:56.7411517Z       ✓ should initialize database (16 ms)
2025-12-10T09:20:56.7412144Z       ✓ should start heartbeat timer (9 ms)
2025-12-10T09:20:56.7412545Z     playerJoined
2025-12-10T09:20:56.7413224Z       ✓ should create new player record on first join (14 ms)
2025-12-10T09:20:56.7414103Z       ✓ should increment session count for returning player (12 ms)
2025-12-10T09:20:56.7414613Z       ✓ should track active session (11 ms)
2025-12-10T09:20:56.7414925Z     playerLeft
2025-12-10T09:20:56.7415321Z       ✓ should update player stats when leaving (61 ms)
2025-12-10T09:20:56.7415905Z       ✓ should handle leaving without active session gracefully (11 ms)
2025-12-10T09:20:56.7416322Z     getAllPlayers
2025-12-10T09:20:56.7416673Z       ✓ should return all tracked players (15 ms)
2025-12-10T09:20:56.7417153Z       ✓ should return empty array when no players (10 ms)
2025-12-10T09:20:56.7417528Z     getOnlinePlayers
2025-12-10T09:20:56.7417897Z       ✓ should return only online players (13 ms)
2025-12-10T09:20:56.7418230Z     formatDuration
2025-12-10T09:20:56.7418552Z       ✓ should format seconds (11 ms)
2025-12-10T09:20:56.7418931Z       ✓ should format minutes (8 ms)
2025-12-10T09:20:56.7419644Z       ✓ should format hours (9 ms)
2025-12-10T09:20:56.7420034Z       ✓ should format days (9 ms)
2025-12-10T09:20:56.7420310Z     heartbeat
2025-12-10T09:20:56.7420693Z       ○ skipped should update active sessions on heartbeat
2025-12-10T09:20:56.7421057Z     shutdown
2025-12-10T09:20:56.7421438Z       ✓ should end all active sessions on shutdown (13 ms)
2025-12-10T09:20:56.7421703Z 
2025-12-10T09:20:56.8086258Z   console.warn
2025-12-10T09:20:56.8087259Z     plugins.json not found at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/test-data/plugins.json, returning empty plugin list
2025-12-10T09:20:56.8087917Z 
2025-12-10T09:20:56.8088473Z     [0m [90m  98 |[39m             [36mawait[39m fs[33m.[39maccess([33mPLUGINS_JSON[39m)[33m;[39m
2025-12-10T09:20:56.8089011Z      [90m  99 |[39m         } [36mcatch[39m (accessError) {
2025-12-10T09:20:56.8090111Z     [31m[1m>[22m[39m[90m 100 |[39m             console[33m.[39mwarn([32m`plugins.json not found at ${PLUGINS_JSON}, returning empty plugin list`[39m)[33m;[39m
2025-12-10T09:20:56.8090826Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:56.8091234Z      [90m 101 |[39m             [36mreturn[39m [][33m;[39m
2025-12-10T09:20:56.8091580Z      [90m 102 |[39m         }
2025-12-10T09:20:56.8092138Z      [90m 103 |[39m         [0m
2025-12-10T09:20:56.8092315Z 
2025-12-10T09:20:56.8092561Z       at Object.warn [as getAllPlugins] (services/pluginManager.js:100:21)
2025-12-10T09:20:56.8093095Z       at Object.<anonymous> (__tests__/services/pluginManager.test.js:60:29)
2025-12-10T09:20:56.8093407Z 
2025-12-10T09:20:56.8144545Z   console.error
2025-12-10T09:20:56.8145566Z     plugins.json is empty at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/test-data/plugins.json
2025-12-10T09:20:56.8146416Z 
2025-12-10T09:20:56.8146813Z     [0m [90m 106 |[39m         [90m// Validate content is not empty[39m
2025-12-10T09:20:56.8147561Z      [90m 107 |[39m         [36mif[39m ([33m![39mcontent [33m||[39m content[33m.[39mtrim()[33m.[39mlength [33m===[39m [35m0[39m) {
2025-12-10T09:20:56.8148708Z     [31m[1m>[22m[39m[90m 108 |[39m             console[33m.[39merror([32m`plugins.json is empty at ${PLUGINS_JSON}`[39m)[33m;[39m
2025-12-10T09:20:56.8149696Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:56.8150264Z      [90m 109 |[39m             [36mreturn[39m [][33m;[39m
2025-12-10T09:20:56.8150622Z      [90m 110 |[39m         }
2025-12-10T09:20:56.8150905Z      [90m 111 |[39m         [0m
2025-12-10T09:20:56.8151068Z 
2025-12-10T09:20:56.8151316Z       at Object.error [as getAllPlugins] (services/pluginManager.js:108:21)
2025-12-10T09:20:56.8151856Z       at Object.<anonymous> (__tests__/services/pluginManager.test.js:66:29)
2025-12-10T09:20:56.8152157Z 
2025-12-10T09:20:56.8201862Z   console.error
2025-12-10T09:20:56.8202510Z     Failed to parse plugins.json: Unexpected token i in JSON at position 1 {
2025-12-10T09:20:56.8203379Z       file: '/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/test-data/plugins.json',
2025-12-10T09:20:56.8204056Z       contentPreview: '{invalid json',
2025-12-10T09:20:56.8204358Z       contentLength: 13,
2025-12-10T09:20:56.8204751Z       parseErrorLine: 'Unexpected token i in JSON at position 1'
2025-12-10T09:20:56.8205121Z     }
2025-12-10T09:20:56.8205235Z 
2025-12-10T09:20:56.8205807Z     [0m [90m 116 |[39m             [90m// Sanitize content preview - only show first 100 chars and mask potential secrets[39m
2025-12-10T09:20:56.8207040Z      [90m 117 |[39m             [36mconst[39m preview [33m=[39m content[33m.[39msubstring([35m0[39m[33m,[39m [35m100[39m)[33m.[39mreplace([35m/(['"])([^'"]{8,})(['"])/g[39m[33m,[39m [32m'$1***$3'[39m)[33m;[39m
2025-12-10T09:20:56.8208253Z     [31m[1m>[22m[39m[90m 118 |[39m             console[33m.[39merror([32m`Failed to parse plugins.json: ${parseError.message}`[39m[33m,[39m {
2025-12-10T09:20:56.8209449Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:56.8210330Z      [90m 119 |[39m                 file[33m:[39m [33mPLUGINS_JSON[39m[33m,[39m
2025-12-10T09:20:56.8211293Z      [90m 120 |[39m                 contentPreview[33m:[39m preview[33m,[39m
2025-12-10T09:20:56.8212346Z      [90m 121 |[39m                 contentLength[33m:[39m content[33m.[39mlength[33m,[39m[0m
2025-12-10T09:20:56.8212876Z 
2025-12-10T09:20:56.8213305Z       at Object.error [as getAllPlugins] (services/pluginManager.js:118:21)
2025-12-10T09:20:56.8214208Z       at Object.<anonymous> (__tests__/services/pluginManager.test.js:72:29)
2025-12-10T09:20:56.8214688Z 
2025-12-10T09:20:56.8327378Z   console.error
2025-12-10T09:20:56.8328441Z     plugins.json is empty at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/test-data/plugins.json
2025-12-10T09:20:56.8329065Z 
2025-12-10T09:20:56.8329635Z     [0m [90m 106 |[39m         [90m// Validate content is not empty[39m
2025-12-10T09:20:56.8330590Z      [90m 107 |[39m         [36mif[39m ([33m![39mcontent [33m||[39m content[33m.[39mtrim()[33m.[39mlength [33m===[39m [35m0[39m) {
2025-12-10T09:20:56.8331808Z     [31m[1m>[22m[39m[90m 108 |[39m             console[33m.[39merror([32m`plugins.json is empty at ${PLUGINS_JSON}`[39m)[33m;[39m
2025-12-10T09:20:56.8332664Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:56.8333066Z      [90m 109 |[39m             [36mreturn[39m [][33m;[39m
2025-12-10T09:20:56.8333593Z      [90m 110 |[39m         }
2025-12-10T09:20:56.8333964Z      [90m 111 |[39m         [0m
2025-12-10T09:20:56.8334136Z 
2025-12-10T09:20:56.8334394Z       at Object.error [as getAllPlugins] (services/pluginManager.js:108:21)
2025-12-10T09:20:56.8334943Z       at Object.<anonymous> (__tests__/services/pluginManager.test.js:102:29)
2025-12-10T09:20:56.8335337Z 
2025-12-10T09:20:56.8770471Z   console.error
2025-12-10T09:20:56.8771039Z     Plugin uninstall failed: {
2025-12-10T09:20:56.8771910Z       pluginName: 'NonExistentPlugin',
2025-12-10T09:20:56.8772302Z       deleteConfigs: false,
2025-12-10T09:20:56.8772756Z       error: 'Plugin not found',
2025-12-10T09:20:56.8773275Z       stack: 'Error: Plugin not found\n' +
2025-12-10T09:20:56.8774453Z         '    at Object.uninstallPlugin (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/services/pluginManager.js:613:19)\n' +
2025-12-10T09:20:56.8775899Z         '    at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/services/pluginManager.test.js:187:13)'
2025-12-10T09:20:56.8776660Z     }
2025-12-10T09:20:56.8776771Z 
2025-12-10T09:20:56.8777381Z     [0m [90m 649 |[39m         [36mreturn[39m { status[33m:[39m [32m'success'[39m }[33m;[39m
2025-12-10T09:20:56.8777946Z      [90m 650 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:56.8778820Z     [31m[1m>[22m[39m[90m 651 |[39m         console[33m.[39merror([32m'Plugin uninstall failed:'[39m[33m,[39m {
2025-12-10T09:20:56.8779922Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:56.8780469Z      [90m 652 |[39m             pluginName[33m,[39m
2025-12-10T09:20:56.8780886Z      [90m 653 |[39m             deleteConfigs[33m,[39m
2025-12-10T09:20:56.8781709Z      [90m 654 |[39m             error[33m:[39m error[33m.[39mmessage[33m,[39m[0m
2025-12-10T09:20:56.8782116Z 
2025-12-10T09:20:56.8782379Z       at Object.error [as uninstallPlugin] (services/pluginManager.js:651:17)
2025-12-10T09:20:56.8782928Z       at Object.<anonymous> (__tests__/services/pluginManager.test.js:187:13)
2025-12-10T09:20:56.8783234Z 
2025-12-10T09:20:56.8872083Z PASS __tests__/services/pluginManager.test.js
2025-12-10T09:20:56.8872690Z   Plugin Manager - Error Handling
2025-12-10T09:20:56.8873108Z     getAllPlugins
2025-12-10T09:20:56.8873868Z       ✓ should return empty array when plugins.json does not exist (15 ms)
2025-12-10T09:20:56.8874777Z       ✓ should return empty array when plugins.json is empty (5 ms)
2025-12-10T09:20:56.8875735Z       ✓ should return empty array when plugins.json contains invalid JSON (9 ms)
2025-12-10T09:20:56.8876496Z       ✓ should return empty array when plugins.json is missing plugins array (1 ms)
2025-12-10T09:20:56.8877072Z       ✓ should return plugins when plugins.json is valid (2 ms)
2025-12-10T09:20:56.8877499Z       ✓ should handle non-object JSON (1 ms)
2025-12-10T09:20:56.8877885Z       ✓ should handle whitespace-only file (5 ms)
2025-12-10T09:20:56.8878184Z     checkHealth
2025-12-10T09:20:56.8878588Z       ✓ should return unhealthy when plugins.json does not exist (1 ms)
2025-12-10T09:20:56.8879112Z       ✓ should return unhealthy when plugins.json is empty (2 ms)
2025-12-10T09:20:56.8879786Z       ✓ should return unhealthy when plugins.json has invalid JSON (1 ms)
2025-12-10T09:20:56.8880361Z       ✓ should return unhealthy when plugins directory does not exist (2 ms)
2025-12-10T09:20:56.8880966Z       ✓ should return healthy when both plugins.json and directory are valid (2 ms)
2025-12-10T09:20:56.8881583Z       ✓ should return unhealthy when plugins.json has invalid structure (2 ms)
2025-12-10T09:20:56.8882068Z       ✓ should detect non-writable directory (2 ms)
2025-12-10T09:20:56.8882619Z     uninstallPlugin - error handling
2025-12-10T09:20:56.8883096Z       ✓ should fail when plugin does not exist in plugins.json (33 ms)
2025-12-10T09:20:56.8883376Z 
2025-12-10T09:20:57.1186420Z PASS __tests__/routes/automation.test.js
2025-12-10T09:20:57.1186982Z   Automation Routes
2025-12-10T09:20:57.1187362Z     GET /api/automation/tasks
2025-12-10T09:20:57.1188143Z       ✓ should return list of tasks (5 ms)
2025-12-10T09:20:57.1188645Z     POST /api/automation/tasks
2025-12-10T09:20:57.1189373Z       ✓ should validate required fields (5 ms)
2025-12-10T09:20:57.1190053Z       ✓ should create task with valid data (2 ms)
2025-12-10T09:20:57.1190561Z     PUT /api/automation/tasks/:id
2025-12-10T09:20:57.1191117Z       ✓ should update task (2 ms)
2025-12-10T09:20:57.1192221Z       ✓ should return 400 if no valid fields to update (2 ms)
2025-12-10T09:20:57.1192801Z     DELETE /api/automation/tasks/:id
2025-12-10T09:20:57.1193381Z       ✓ should delete task successfully (1 ms)
2025-12-10T09:20:57.1193927Z     POST /api/automation/tasks/:id/execute
2025-12-10T09:20:57.1194378Z       ✓ should execute task manually (2 ms)
2025-12-10T09:20:57.1194716Z     GET /api/automation/history
2025-12-10T09:20:57.1195070Z       ✓ should return execution history (2 ms)
2025-12-10T09:20:57.1195477Z       ✓ should filter history by task_type (2 ms)
2025-12-10T09:20:57.1195823Z     GET /api/automation/validate-cron
2025-12-10T09:20:57.1196194Z       ✓ should validate cron expression (3 ms)
2025-12-10T09:20:57.1196584Z       ✓ should require expression parameter (2 ms)
2025-12-10T09:20:57.1196799Z 
2025-12-10T09:20:57.2981766Z   console.error
2025-12-10T09:20:57.2983762Z     Error creating API key: Error: Invalid scopes provided
2025-12-10T09:20:57.2985165Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/apiKeys.test.js:164:23)
2025-12-10T09:20:57.2986949Z         at /home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:397:39
2025-12-10T09:20:57.2988714Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:404:13)
2025-12-10T09:20:57.2990871Z         at Object.mockConstructor (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:148:19)
2025-12-10T09:20:57.2993150Z         at Object.createApiKey (eval at _createMockFunction (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-mock/build/index.js:566:31), <anonymous>:3:58)
2025-12-10T09:20:57.2995176Z         at createApiKey (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/routes/apiKeys.js:123:42)
2025-12-10T09:20:57.2997006Z         at Layer.handle [as handle_request] (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:57.2998927Z         at next (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:57.3001124Z         at middleware (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/express-validator/lib/middlewares/check.js:16:13)
2025-12-10T09:20:57.3002614Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:57.3003172Z 
2025-12-10T09:20:57.3003717Z     [0m [90m 136 |[39m             })[33m;[39m
2025-12-10T09:20:57.3004447Z      [90m 137 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:57.3005671Z     [31m[1m>[22m[39m[90m 138 |[39m             console[33m.[39merror([32m'Error creating API key:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:57.3006767Z      [90m     |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:57.3007634Z      [90m 139 |[39m             res[33m.[39mstatus([35m500[39m)[33m.[39mjson({
2025-12-10T09:20:57.3008975Z      [90m 140 |[39m                 success[33m:[39m [36mfalse[39m[33m,[39m
2025-12-10T09:20:57.3010567Z      [90m 141 |[39m                 error[33m:[39m error[33m.[39mmessage [33m||[39m [32m'Failed to create API key'[39m[0m
2025-12-10T09:20:57.3011193Z 
2025-12-10T09:20:57.3011439Z       at error (routes/apiKeys.js:138:21)
2025-12-10T09:20:57.3012283Z       at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
2025-12-10T09:20:57.3013181Z       at next (node_modules/express/lib/router/route.js:149:13)
2025-12-10T09:20:57.3014075Z       at middleware (node_modules/express-validator/lib/middlewares/check.js:16:13)
2025-12-10T09:20:57.3014635Z 
2025-12-10T09:20:57.3330454Z PASS __tests__/routes/apiKeys.test.js
2025-12-10T09:20:57.3331405Z   API Key Routes
2025-12-10T09:20:57.3331739Z     GET /api/api-keys
2025-12-10T09:20:57.3332357Z       ✓ should return list of API keys (9 ms)
2025-12-10T09:20:57.3332780Z     GET /api/api-keys/scopes
2025-12-10T09:20:57.3333298Z       ✓ should return available scopes (2 ms)
2025-12-10T09:20:57.3333614Z     GET /api/api-keys/:id
2025-12-10T09:20:57.3333945Z       ✓ should return specific API key (1 ms)
2025-12-10T09:20:57.3334346Z       ✓ should return 404 for non-existent key (2 ms)
2025-12-10T09:20:57.3334651Z     POST /api/api-keys
2025-12-10T09:20:57.3334985Z       ✓ should create API key with valid data (5 ms)
2025-12-10T09:20:57.3335374Z       ✓ should validate required fields (2 ms)
2025-12-10T09:20:57.3335749Z       ✓ should validate scopes is an array (1 ms)
2025-12-10T09:20:57.3336145Z       ✓ should handle service errors (28 ms)
2025-12-10T09:20:57.3336431Z     PATCH /api/api-keys/:id
2025-12-10T09:20:57.3336745Z       ✓ should update API key (2 ms)
2025-12-10T09:20:57.3337116Z       ✓ should return 404 for non-existent key (3 ms)
2025-12-10T09:20:57.3337513Z       ✓ should validate update fields (2 ms)
2025-12-10T09:20:57.3337802Z     DELETE /api/api-keys/:id
2025-12-10T09:20:57.3338109Z       ✓ should revoke API key (2 ms)
2025-12-10T09:20:57.3338486Z       ✓ should return 404 for non-existent key (2 ms)
2025-12-10T09:20:57.3338807Z     GET /api/api-keys/:id/logs
2025-12-10T09:20:57.3339126Z       ✓ should return usage logs (1 ms)
2025-12-10T09:20:57.3339775Z       ✓ should accept limit parameter (2 ms)
2025-12-10T09:20:57.3340156Z       ✓ should validate limit parameter (2 ms)
2025-12-10T09:20:57.3340462Z     GET /api/api-keys/:id/stats
2025-12-10T09:20:57.3340796Z       ✓ should return usage statistics (1 ms)
2025-12-10T09:20:57.3341180Z       ✓ should accept date range parameters (4 ms)
2025-12-10T09:20:57.3341627Z       ✓ should use default date range if not provided (2 ms)
2025-12-10T09:20:57.3341867Z 
2025-12-10T09:20:57.4550488Z   console.error
2025-12-10T09:20:57.4551017Z     Error searching marketplace: Error: Search failed
2025-12-10T09:20:57.4552068Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/marketplace.test.js:60:17)
2025-12-10T09:20:57.4553501Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:57.4554408Z         at new Promise (<anonymous>)
2025-12-10T09:20:57.4555339Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:57.4556518Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:57.4557310Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:57.4558099Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:57.4559345Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:57.4560855Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:57.4562017Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:57.4563060Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:57.4564345Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:57.4565771Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:57.4567129Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:57.4568176Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:57.4569370Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:57.4569937Z 
2025-12-10T09:20:57.4570283Z     [0m [90m 59 |[39m         })[33m;[39m
2025-12-10T09:20:57.4570646Z      [90m 60 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:57.4571315Z     [31m[1m>[22m[39m[90m 61 |[39m         console[33m.[39merror([32m'Error searching marketplace:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:57.4571897Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:57.4572329Z      [90m 62 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({
2025-12-10T09:20:57.4572822Z      [90m 63 |[39m             success[33m:[39m [36mfalse[39m[33m,[39m
2025-12-10T09:20:57.4573378Z      [90m 64 |[39m             error[33m:[39m [32m'Failed to search marketplace'[39m[33m,[39m[0m
2025-12-10T09:20:57.4573677Z 
2025-12-10T09:20:57.4573816Z       at error (routes/marketplace.js:61:17)
2025-12-10T09:20:57.4574013Z 
2025-12-10T09:20:57.4647547Z   console.error
2025-12-10T09:20:57.4648028Z     Error fetching plugin details: Error: Not found
2025-12-10T09:20:57.4649021Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/marketplace.test.js:124:17)
2025-12-10T09:20:57.4650647Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:57.4651525Z         at new Promise (<anonymous>)
2025-12-10T09:20:57.4652407Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:57.4653508Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:57.4654300Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:57.4655092Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:57.4656149Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:57.4657292Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:57.4658444Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:57.4659861Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:57.4661175Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:57.4662618Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:57.4663812Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:57.4664857Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:57.4666041Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:57.4666599Z 
2025-12-10T09:20:57.4666813Z     [0m [90m 93 |[39m         })[33m;[39m
2025-12-10T09:20:57.4667165Z      [90m 94 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:57.4667834Z     [31m[1m>[22m[39m[90m 95 |[39m         console[33m.[39merror([32m'Error fetching plugin details:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:57.4668405Z      [90m    |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:57.4668841Z      [90m 96 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({
2025-12-10T09:20:57.4669435Z      [90m 97 |[39m             success[33m:[39m [36mfalse[39m[33m,[39m
2025-12-10T09:20:57.4669995Z      [90m 98 |[39m             error[33m:[39m [32m'Failed to fetch plugin details'[39m[33m,[39m[0m
2025-12-10T09:20:57.4670337Z 
2025-12-10T09:20:57.4670480Z       at error (routes/marketplace.js:95:17)
2025-12-10T09:20:57.4670685Z 
2025-12-10T09:20:57.4775715Z   console.error
2025-12-10T09:20:57.4776177Z     Error fetching featured plugins: Error: Failed
2025-12-10T09:20:57.4777183Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/marketplace.test.js:210:17)
2025-12-10T09:20:57.4778589Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:57.4779656Z         at new Promise (<anonymous>)
2025-12-10T09:20:57.4780568Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:57.4781903Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:57.4782897Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:57.4783898Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:57.4785242Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:57.4786648Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:57.4787781Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:57.4788808Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:57.4790197Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:57.4791849Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:57.4793040Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:57.4794083Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:57.4795127Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:57.4795694Z 
2025-12-10T09:20:57.4796084Z     [0m [90m 170 |[39m         })[33m;[39m
2025-12-10T09:20:57.4796456Z      [90m 171 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:57.4797152Z     [31m[1m>[22m[39m[90m 172 |[39m         console[33m.[39merror([32m'Error fetching featured plugins:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:57.4797741Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:57.4798174Z      [90m 173 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({
2025-12-10T09:20:57.4798647Z      [90m 174 |[39m             success[33m:[39m [36mfalse[39m[33m,[39m
2025-12-10T09:20:57.4799334Z      [90m 175 |[39m             error[33m:[39m [32m'Failed to fetch featured plugins'[39m[33m,[39m[0m
2025-12-10T09:20:57.4799653Z 
2025-12-10T09:20:57.4799796Z       at error (routes/marketplace.js:172:17)
2025-12-10T09:20:57.4800001Z 
2025-12-10T09:20:57.4826465Z   console.error
2025-12-10T09:20:57.4826938Z     Error fetching categories: Error: Failed
2025-12-10T09:20:57.4827874Z         at Object.<anonymous> (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/__tests__/routes/marketplace.test.js:241:17)
2025-12-10T09:20:57.4829435Z         at Promise.then.completed (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:298:28)
2025-12-10T09:20:57.4830425Z         at new Promise (<anonymous>)
2025-12-10T09:20:57.4831334Z         at callAsyncCircusFn (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/utils.js:231:10)
2025-12-10T09:20:57.4832668Z         at _callCircusTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:316:40)
2025-12-10T09:20:57.4833647Z         at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-12-10T09:20:57.4834649Z         at _runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:252:3)
2025-12-10T09:20:57.4836755Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:126:9)
2025-12-10T09:20:57.4838731Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:57.4840750Z         at _runTestsForDescribeBlock (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:121:9)
2025-12-10T09:20:57.4842423Z         at run (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/run.js:71:3)
2025-12-10T09:20:57.4844484Z         at runAndTransformResultsToJestFormat (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-12-10T09:20:57.4846848Z         at jestAdapter (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-12-10T09:20:57.4848780Z         at runTestInternal (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:367:16)
2025-12-10T09:20:57.4850859Z         at runTest (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/runTest.js:444:34)
2025-12-10T09:20:57.4852558Z         at Object.worker (/home/runner/work/Minecraft-Server/Minecraft-Server/console/backend/node_modules/jest-runner/build/testWorker.js:106:12)
2025-12-10T09:20:57.4853440Z 
2025-12-10T09:20:57.4853773Z     [0m [90m 192 |[39m         })[33m;[39m
2025-12-10T09:20:57.4854314Z      [90m 193 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:57.4855329Z     [31m[1m>[22m[39m[90m 194 |[39m         console[33m.[39merror([32m'Error fetching categories:'[39m[33m,[39m error)[33m;[39m
2025-12-10T09:20:57.4856238Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:57.4857125Z      [90m 195 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({
2025-12-10T09:20:57.4857903Z      [90m 196 |[39m             success[33m:[39m [36mfalse[39m[33m,[39m
2025-12-10T09:20:57.4858790Z      [90m 197 |[39m             error[33m:[39m [32m'Failed to fetch categories'[39m[33m,[39m[0m
2025-12-10T09:20:57.4859377Z 
2025-12-10T09:20:57.4859579Z       at error (routes/marketplace.js:194:17)
2025-12-10T09:20:57.4859873Z 
2025-12-10T09:20:57.4921149Z PASS __tests__/routes/marketplace.test.js
2025-12-10T09:20:57.4921693Z   Marketplace Routes
2025-12-10T09:20:57.4921976Z     GET /api/marketplace/search
2025-12-10T09:20:57.4922439Z       ✓ should search plugins successfully (13 ms)
2025-12-10T09:20:57.4922854Z       ✓ should handle search errors (4 ms)
2025-12-10T09:20:57.4923249Z       ✓ should apply default parameters (2 ms)
2025-12-10T09:20:57.4923632Z     GET /api/marketplace/plugin/:platform/:pluginId
2025-12-10T09:20:57.4924088Z       ✓ should get plugin details successfully (2 ms)
2025-12-10T09:20:57.4924484Z       ✓ should reject invalid platform (2 ms)
2025-12-10T09:20:57.4924844Z       ✓ should handle fetch errors (4 ms)
2025-12-10T09:20:57.4925241Z     GET /api/marketplace/plugin/:platform/:pluginId/versions
2025-12-10T09:20:57.4925699Z       ✓ should get plugin versions successfully (2 ms)
2025-12-10T09:20:57.4926102Z       ✓ should pass gameVersion filter (2 ms)
2025-12-10T09:20:57.4926461Z       ✓ should reject invalid platform (2 ms)
2025-12-10T09:20:57.4926784Z     GET /api/marketplace/featured
2025-12-10T09:20:57.4927178Z       ✓ should get featured plugins successfully (2 ms)
2025-12-10T09:20:57.4927577Z       ✓ should apply limit parameter (2 ms)
2025-12-10T09:20:57.4927982Z       ✓ should handle errors (3 ms)
2025-12-10T09:20:57.4928469Z     GET /api/marketplace/categories
2025-12-10T09:20:57.4929101Z       ✓ should get categories successfully (2 ms)
2025-12-10T09:20:57.4929922Z       ✓ should handle errors (7 ms)
2025-12-10T09:20:57.4930238Z 
2025-12-10T09:20:57.6061955Z   console.error
2025-12-10T09:20:57.6062741Z     [PluginIntegrations] Dynmap configuration error: Plugin not ready
2025-12-10T09:20:57.6063195Z 
2025-12-10T09:20:57.6063653Z     [0m [90m 189 |[39m         })[33m;[39m
2025-12-10T09:20:57.6064172Z      [90m 190 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:57.6065358Z     [31m[1m>[22m[39m[90m 191 |[39m         console[33m.[39merror([32m'[PluginIntegrations] Dynmap configuration error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:57.6066341Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:57.6066786Z      [90m 192 |[39m         
2025-12-10T09:20:57.6067833Z      [90m 193 |[39m         res[33m.[39mstatus(error[33m.[39mmessage[33m.[39mincludes([32m'not ready'[39m) [33m?[39m [35m503[39m [33m:[39m [35m500[39m)[33m.[39mjson({
2025-12-10T09:20:57.6068928Z      [90m 194 |[39m             success[33m:[39m [36mfalse[39m[33m,[39m[0m
2025-12-10T09:20:57.6069545Z 
2025-12-10T09:20:57.6069754Z       at error (routes/pluginIntegrations.js:191:17)
2025-12-10T09:20:57.6070161Z 
2025-12-10T09:20:57.6138667Z   console.error
2025-12-10T09:20:57.6140122Z     [PluginIntegrations] Dynmap configuration error: Server error
2025-12-10T09:20:57.6140530Z 
2025-12-10T09:20:57.6140887Z     [0m [90m 189 |[39m         })[33m;[39m
2025-12-10T09:20:57.6141365Z      [90m 190 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:57.6142422Z     [31m[1m>[22m[39m[90m 191 |[39m         console[33m.[39merror([32m'[PluginIntegrations] Dynmap configuration error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:57.6143300Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:57.6143705Z      [90m 192 |[39m         
2025-12-10T09:20:57.6144694Z      [90m 193 |[39m         res[33m.[39mstatus(error[33m.[39mmessage[33m.[39mincludes([32m'not ready'[39m) [33m?[39m [35m503[39m [33m:[39m [35m500[39m)[33m.[39mjson({
2025-12-10T09:20:57.6146579Z      [90m 194 |[39m             success[33m:[39m [36mfalse[39m[33m,[39m[0m
2025-12-10T09:20:57.6146931Z 
2025-12-10T09:20:57.6147166Z       at error (routes/pluginIntegrations.js:191:17)
2025-12-10T09:20:57.6147459Z 
2025-12-10T09:20:57.6230115Z   console.error
2025-12-10T09:20:57.6230880Z     [PluginIntegrations] Dynmap enriched players error: Dynmap not ready
2025-12-10T09:20:57.6231373Z 
2025-12-10T09:20:57.6231645Z     [0m [90m 269 |[39m         })[33m;[39m
2025-12-10T09:20:57.6232110Z      [90m 270 |[39m     } [36mcatch[39m (error) {
2025-12-10T09:20:57.6233181Z     [31m[1m>[22m[39m[90m 271 |[39m         console[33m.[39merror([32m'[PluginIntegrations] Dynmap enriched players error:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:57.6234096Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-12-10T09:20:57.6234490Z      [90m 272 |[39m         
2025-12-10T09:20:57.6235499Z      [90m 273 |[39m         res[33m.[39mstatus(error[33m.[39mmessage[33m.[39mincludes([32m'not ready'[39m) [33m?[39m [35m503[39m [33m:[39m [35m500[39m)[33m.[39mjson({
2025-12-10T09:20:57.6236953Z      [90m 274 |[39m             success[33m:[39m [36mfalse[39m[33m,[39m[0m
2025-12-10T09:20:57.6237282Z 
2025-12-10T09:20:57.6237492Z       at error (routes/pluginIntegrations.js:271:17)
2025-12-10T09:20:57.6237775Z 
2025-12-10T09:20:57.6264127Z PASS __tests__/routes/pluginIntegrations-map.test.js
2025-12-10T09:20:57.6264898Z   Plugin Integrations - Map Endpoints
2025-12-10T09:20:57.6265491Z     GET /api/plugins/dynmap/configuration
2025-12-10T09:20:57.6266492Z       ✓ should return map configuration when successful (5 ms)
2025-12-10T09:20:57.6267447Z       ✓ should return 503 when plugin is not ready (10 ms)
2025-12-10T09:20:57.6268266Z       ✓ should return 500 on other errors (4 ms)
2025-12-10T09:20:57.6268979Z     GET /api/plugins/dynmap/players-enriched
2025-12-10T09:20:57.6270322Z       ✓ should return enriched player data combining Dynmap and tracker stats (3 ms)
2025-12-10T09:20:57.6271268Z       ✓ should handle players not in tracker (2 ms)
2025-12-10T09:20:57.6271881Z       ✓ should return 503 when Dynmap is not ready (4 ms)
2025-12-10T09:20:57.6272157Z 
2025-12-10T09:20:57.7764900Z   console.log
2025-12-10T09:20:57.7765405Z     [Session] Cookie configuration: {
2025-12-10T09:20:57.7765717Z       secure: false,
2025-12-10T09:20:57.7765944Z       nodeEnv: 'test',
2025-12-10T09:20:57.7766229Z       cookieSecureOverride: 'undefined',
2025-12-10T09:20:57.7766622Z       warning: 'HTTP allowed - cookies work without SSL'
2025-12-10T09:20:57.7766933Z     }
2025-12-10T09:20:57.7767050Z 
2025-12-10T09:20:57.7767199Z       at log (utils/cookieSecurity.js:61:13)
2025-12-10T09:20:57.7767413Z 
2025-12-10T09:20:57.7939581Z PASS __tests__/auth/session.test.js
2025-12-10T09:20:57.7940258Z   Cookie Security Configuration
2025-12-10T09:20:57.7940788Z     shouldUseSecureCookies()
2025-12-10T09:20:57.7941877Z       ✓ should return false in development environment (1 ms)
2025-12-10T09:20:57.7942691Z       ✓ should return false in test environment
2025-12-10T09:20:57.7943432Z       ✓ should return true in production environment (1 ms)
2025-12-10T09:20:57.7944666Z       ✓ should return false when COOKIE_SECURE=false in production
2025-12-10T09:20:57.7945550Z       ✓ should return true when COOKIE_SECURE=true in development
2025-12-10T09:20:57.7946307Z       ✓ should return false when NODE_ENV is not set
2025-12-10T09:20:57.7946837Z     getCookieSecurityWarning()
2025-12-10T09:20:57.7947546Z       ✓ should return HTTPS warning for secure cookies (1 ms)
2025-12-10T09:20:57.7948107Z       ✓ should return HTTP allowed warning for non-secure cookies
2025-12-10T09:20:57.7948479Z     logCookieConfiguration()
2025-12-10T09:20:57.7948858Z       ✓ should log configuration with correct format
2025-12-10T09:20:57.7949453Z     Session middleware creation
2025-12-10T09:20:57.7949957Z       ✓ should successfully create session middleware with utility (59 ms)
2025-12-10T09:20:57.7950844Z       ✓ should throw error if getSessionMiddleware called before initialization (72 ms)
2025-12-10T09:20:57.7951196Z 
2025-12-10T09:20:57.8390201Z PASS __tests__/config/rbac-automation.test.js
2025-12-10T09:20:57.8390808Z   Automation RBAC
2025-12-10T09:20:57.8391147Z     Permission Definitions
2025-12-10T09:20:57.8391780Z       ✓ should have all required automation permissions defined (1 ms)
2025-12-10T09:20:57.8392235Z     Owner Role Permissions
2025-12-10T09:20:57.8392880Z       ✓ should have all automation permissions (1 ms)
2025-12-10T09:20:57.8393389Z     Admin Role Permissions
2025-12-10T09:20:57.8393972Z       ✓ should have all automation permissions
2025-12-10T09:20:57.8394515Z     Moderator Role Permissions
2025-12-10T09:20:57.8395165Z       ✓ should have execute, view, and history permissions
2025-12-10T09:20:57.8396018Z       ✓ should NOT have create, edit, or delete permissions
2025-12-10T09:20:57.8396588Z     Viewer Role Permissions
2025-12-10T09:20:57.8397235Z       ✓ should have view and history permissions only (1 ms)
2025-12-10T09:20:57.8398052Z       ✓ should NOT have create, edit, delete, or execute permissions
2025-12-10T09:20:57.8398598Z     Permission Matrix
2025-12-10T09:20:57.8399604Z       ✓ should enforce automation:create permission correctly across all roles (1 ms)
2025-12-10T09:20:57.8400705Z       ✓ should enforce automation:edit permission correctly across all roles (1 ms)
2025-12-10T09:20:57.8401754Z       ✓ should enforce automation:delete permission correctly across all roles
2025-12-10T09:20:57.8402848Z       ✓ should enforce automation:execute permission correctly across all roles (1 ms)
2025-12-10T09:20:57.8403990Z       ✓ should enforce automation:view permission correctly across all roles
2025-12-10T09:20:57.8405080Z       ✓ should enforce automation:history permission correctly across all roles (1 ms)
2025-12-10T09:20:57.8405752Z     Edge Cases
2025-12-10T09:20:57.8406294Z       ✓ should return false for invalid role (1 ms)
2025-12-10T09:20:57.8406925Z       ✓ should return false for null role
2025-12-10T09:20:57.8407534Z       ✓ should return false for undefined role
2025-12-10T09:20:57.8408150Z       ✓ should return false for invalid permission
2025-12-10T09:20:57.8408656Z     Case Sensitivity
2025-12-10T09:20:57.8409396Z       ✓ should handle lowercase role names
2025-12-10T09:20:57.8410051Z       ✓ should handle uppercase role names (1 ms)
2025-12-10T09:20:57.8410668Z       ✓ should handle mixed case role names
2025-12-10T09:20:57.8411116Z     Privilege Hierarchy
2025-12-10T09:20:57.8411767Z       ✓ owner should have all permissions that admin has (1 ms)
2025-12-10T09:20:57.8412553Z       ✓ admin should have all permissions that moderator has
2025-12-10T09:20:57.8413357Z       ✓ moderator should have all permissions that viewer has
2025-12-10T09:20:57.8413913Z     Security Principles
2025-12-10T09:20:57.8414579Z       ✓ should follow principle of least privilege for viewer
2025-12-10T09:20:57.8415531Z       ✓ should allow moderators to execute but not modify tasks (1 ms)
2025-12-10T09:20:57.8416472Z       ✓ should require admin or higher for task management (1 ms)
2025-12-10T09:20:57.8416913Z 
2025-12-10T09:20:57.8872753Z   console.warn
2025-12-10T09:20:57.8875321Z     Player NonExistentPlayer not found in Mojang API
2025-12-10T09:20:57.8877981Z 
2025-12-10T09:20:57.8878738Z     [0m [90m 48 |[39m         } [36mcatch[39m (error) {
2025-12-10T09:20:57.8880256Z      [90m 49 |[39m             [36mif[39m (error[33m.[39mresponse [33m&&[39m error[33m.[39mresponse[33m.[39mstatus [33m===[39m [35m404[39m) {
2025-12-10T09:20:57.8881867Z     [31m[1m>[22m[39m[90m 50 |[39m                 console[33m.[39mwarn([32m`Player ${username} not found in Mojang API`[39m)[33m;[39m
2025-12-10T09:20:57.8882877Z      [90m    |[39m                         [31m[1m^[22m[39m
2025-12-10T09:20:57.8883645Z      [90m 51 |[39m                 [36mreturn[39m [36mnull[39m[33m;[39m
2025-12-10T09:20:57.8884569Z      [90m 52 |[39m             }
2025-12-10T09:20:57.8885079Z      [90m 53 |[39m             [0m
2025-12-10T09:20:57.8885363Z 
2025-12-10T09:20:57.8885715Z       at MojangService.warn [as getUuid] (services/mojang.js:50:25)
2025-12-10T09:20:57.8886550Z       at Object.<anonymous> (__tests__/services/mojang.test.js:59:26)
2025-12-10T09:20:57.8887010Z 
2025-12-10T09:20:57.8887976Z   console.error
2025-12-10T09:20:57.8888465Z     Error fetching UUID for TestPlayer: Network error
2025-12-10T09:20:57.8888852Z 
2025-12-10T09:20:57.8889376Z     [0m [90m 52 |[39m             }
2025-12-10T09:20:57.8889918Z      [90m 53 |[39m             
2025-12-10T09:20:57.8891218Z     [31m[1m>[22m[39m[90m 54 |[39m             console[33m.[39merror([32m`Error fetching UUID for ${username}:`[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:57.8892318Z      [90m    |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:57.8893272Z      [90m 55 |[39m             [90m// On error, generate a fallback UUID based on username[39m
2025-12-10T09:20:57.8894439Z      [90m 56 |[39m             [90m// This ensures we can still track players even if API is down[39m
2025-12-10T09:20:57.8895739Z      [90m 57 |[39m             [36mreturn[39m [36mthis[39m[33m.[39mgenerateFallbackUuid(username)[33m;[39m[0m
2025-12-10T09:20:57.8896346Z 
2025-12-10T09:20:57.8896728Z       at MojangService.error [as getUuid] (services/mojang.js:54:21)
2025-12-10T09:20:57.8897558Z       at Object.<anonymous> (__tests__/services/mojang.test.js:68:26)
2025-12-10T09:20:57.8898017Z 
2025-12-10T09:20:57.8904186Z   console.error
2025-12-10T09:20:57.8904703Z     Error fetching UUID for TestPlayer: Network error
2025-12-10T09:20:57.8905079Z 
2025-12-10T09:20:57.8905396Z     [0m [90m 52 |[39m             }
2025-12-10T09:20:57.8905901Z      [90m 53 |[39m             
2025-12-10T09:20:57.8907119Z     [31m[1m>[22m[39m[90m 54 |[39m             console[33m.[39merror([32m`Error fetching UUID for ${username}:`[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:57.8908233Z      [90m    |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:57.8909120Z      [90m 55 |[39m             [90m// On error, generate a fallback UUID based on username[39m
2025-12-10T09:20:57.8910396Z      [90m 56 |[39m             [90m// This ensures we can still track players even if API is down[39m
2025-12-10T09:20:57.8911560Z      [90m 57 |[39m             [36mreturn[39m [36mthis[39m[33m.[39mgenerateFallbackUuid(username)[33m;[39m[0m
2025-12-10T09:20:57.8912113Z 
2025-12-10T09:20:57.8912469Z       at MojangService.error [as getUuid] (services/mojang.js:54:21)
2025-12-10T09:20:57.8913235Z       at Object.<anonymous> (__tests__/services/mojang.test.js:78:27)
2025-12-10T09:20:57.8913671Z 
2025-12-10T09:20:57.8913819Z   console.error
2025-12-10T09:20:57.8914275Z     Error fetching UUID for TestPlayer: Network error
2025-12-10T09:20:57.8914637Z 
2025-12-10T09:20:57.8914907Z     [0m [90m 52 |[39m             }
2025-12-10T09:20:57.8915395Z      [90m 53 |[39m             
2025-12-10T09:20:57.8916844Z     [31m[1m>[22m[39m[90m 54 |[39m             console[33m.[39merror([32m`Error fetching UUID for ${username}:`[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-12-10T09:20:57.8917957Z      [90m    |[39m                     [31m[1m^[22m[39m
2025-12-10T09:20:57.8918828Z      [90m 55 |[39m             [90m// On error, generate a fallback UUID based on username[39m
2025-12-10T09:20:57.8920089Z      [90m 56 |[39m             [90m// This ensures we can still track players even if API is down[39m
2025-12-10T09:20:57.8921275Z      [90m 57 |[39m             [36mreturn[39m [36mthis[39m[33m.[39mgenerateFallbackUuid(username)[33m;[39m[0m
2025-12-10T09:20:57.8921836Z 
2025-12-10T09:20:57.8922195Z       at MojangService.error [as getUuid] (services/mojang.js:54:21)
2025-12-10T09:20:57.8922982Z       at Object.<anonymous> (__tests__/services/mojang.test.js:79:27)
2025-12-10T09:20:57.8923661Z 
2025-12-10T09:20:57.8952258Z PASS __tests__/services/mojang.test.js
2025-12-10T09:20:57.8953642Z   MojangService
2025-12-10T09:20:57.8953970Z     getUuid
2025-12-10T09:20:57.8954541Z       ✓ should fetch UUID from Mojang API (1 ms)
2025-12-10T09:20:57.8955123Z       ✓ should cache UUID results
2025-12-10T09:20:57.8955681Z       ✓ should handle 404 not found (3 ms)
2025-12-10T09:20:57.8956303Z       ✓ should generate fallback UUID on API error (2 ms)
2025-12-10T09:20:57.8957059Z       ✓ should generate same fallback UUID for same username (2 ms)
2025-12-10T09:20:57.8957566Z     formatUuid
2025-12-10T09:20:57.8957972Z       ✓ should format UUID with dashes
2025-12-10T09:20:57.8958563Z       ✓ should not modify already formatted UUID (1 ms)
2025-12-10T09:20:57.8959027Z     generateFallbackUuid
2025-12-10T09:20:57.8959715Z       ✓ should generate valid UUID format
2025-12-10T09:20:57.8960364Z       ✓ should be deterministic for same username (1 ms)
2025-12-10T09:20:57.8960985Z       ✓ should be case-insensitive
2025-12-10T09:20:57.8961367Z     clearCache
2025-12-10T09:20:57.8961765Z       ✓ should clear the cache
2025-12-10T09:20:57.8962017Z 
2025-12-10T09:20:57.9295120Z   console.log
2025-12-10T09:20:57.9295899Z     [BearerAuth] Valid API key: { id: 'key-1', name: 'Test Key', prefix: undefined }
2025-12-10T09:20:57.9296430Z 
2025-12-10T09:20:57.9296665Z       at log (auth/bearerAuth.js:75:17)
2025-12-10T09:20:57.9296990Z 
2025-12-10T09:20:57.9310309Z   console.log
2025-12-10T09:20:57.9310706Z     [BearerAuth] Invalid or expired API key
2025-12-10T09:20:57.9310962Z 
2025-12-10T09:20:57.9311113Z       at log (auth/bearerAuth.js:62:17)
2025-12-10T09:20:57.9311330Z 
2025-12-10T09:20:57.9332654Z   console.log
2025-12-10T09:20:57.9333038Z     [Auth] Authentication check: {
2025-12-10T09:20:57.9333342Z       path: undefined,
2025-12-10T09:20:57.9333595Z       method: undefined,
2025-12-10T09:20:57.9333863Z       hasBearerToken: true,
2025-12-10T09:20:57.9334137Z       hasSession: true,
2025-12-10T09:20:57.9334446Z       sessionAuthenticated: false
2025-12-10T09:20:57.9334757Z     }
2025-12-10T09:20:57.9334910Z 
2025-12-10T09:20:57.9335084Z       at log (auth/bearerAuth.js:90:13)
2025-12-10T09:20:57.9335353Z 
2025-12-10T09:20:57.9339854Z   console.log
2025-12-10T09:20:57.9340496Z     [BearerAuth] Valid API key: { id: 'key-1', name: 'Test Key', prefix: undefined }
2025-12-10T09:20:57.9340907Z 
2025-12-10T09:20:57.9341065Z       at log (auth/bearerAuth.js:75:17)
2025-12-10T09:20:57.9341313Z 
2025-12-10T09:20:57.9345937Z   console.log
2025-12-10T09:20:57.9346346Z     [Auth] API key authentication successful
2025-12-10T09:20:57.9346589Z 
2025-12-10T09:20:57.9346732Z       at log (auth/bearerAuth.js:101:17)
2025-12-10T09:20:57.9346950Z 
2025-12-10T09:20:57.9358349Z   console.log
2025-12-10T09:20:57.9358748Z     [Auth] Authentication check: {
2025-12-10T09:20:57.9359334Z       path: undefined,
2025-12-10T09:20:57.9359730Z       method: undefined,
2025-12-10T09:20:57.9360173Z       hasBearerToken: undefined,
2025-12-10T09:20:57.9360616Z       hasSession: true,
2025-12-10T09:20:57.9361053Z       sessionAuthenticated: true
2025-12-10T09:20:57.9361329Z     }
2025-12-10T09:20:57.9361451Z 
2025-12-10T09:20:57.9361591Z       at log (auth/bearerAuth.js:90:13)
2025-12-10T09:20:57.9362077Z 
2025-12-10T09:20:57.9366283Z   console.log
2025-12-10T09:20:57.9366776Z     [Auth] Session authentication successful: testuser
2025-12-10T09:20:57.9367163Z 
2025-12-10T09:20:57.9367379Z       at log (auth/bearerAuth.js:116:17)
2025-12-10T09:20:57.9367632Z 
2025-12-10T09:20:57.9378002Z   console.log
2025-12-10T09:20:57.9378378Z     [Auth] Authentication check: {
2025-12-10T09:20:57.9378679Z       path: undefined,
2025-12-10T09:20:57.9378929Z       method: undefined,
2025-12-10T09:20:57.9379366Z       hasBearerToken: undefined,
2025-12-10T09:20:57.9379656Z       hasSession: true,
2025-12-10T09:20:57.9379947Z       sessionAuthenticated: false
2025-12-10T09:20:57.9380224Z     }
2025-12-10T09:20:57.9380337Z 
2025-12-10T09:20:57.9380771Z       at log (auth/bearerAuth.js:90:13)
2025-12-10T09:20:57.9380992Z 
2025-12-10T09:20:57.9384554Z   console.log
2025-12-10T09:20:57.9385679Z     [Auth] Authentication failed: no valid API key, *** or session
2025-12-10T09:20:57.9386012Z 
2025-12-10T09:20:57.9386173Z       at log (auth/bearerAuth.js:122:13)
2025-12-10T09:20:57.9386395Z 
2025-12-10T09:20:57.9544487Z PASS __tests__/auth/apiKeyAuth.test.js
2025-12-10T09:20:57.9545234Z   *** with API Keys
2025-12-10T09:20:57.9545582Z     verifyApiKey
2025-12-10T09:20:57.9546111Z       ✓ should verify valid API key (3 ms)
2025-12-10T09:20:57.9546543Z       ✓ should return null for invalid API key (1 ms)
2025-12-10T09:20:57.9546978Z       ✓ should return null for non-mcs_ prefixed token
2025-12-10T09:20:57.9547416Z       ✓ should return null when no authorization header
2025-12-10T09:20:57.9547965Z       ✓ should return null for non-*** (1 ms)
2025-12-10T09:20:57.9548267Z     requireAuthOrToken
2025-12-10T09:20:57.9548629Z       ✓ should authenticate with valid API key (2 ms)
2025-12-10T09:20:57.9549127Z       ✓ should fallback to session auth when no API key (2 ms)
2025-12-10T09:20:57.9549915Z       ✓ should return 401 when no valid authentication (2 ms)
2025-12-10T09:20:57.9550248Z     requireApiScope
2025-12-10T09:20:57.9550599Z       ✓ should allow request with required scope (1 ms)
2025-12-10T09:20:57.9551042Z       ✓ should reject request without required scope (1 ms)
2025-12-10T09:20:57.9551469Z       ✓ should skip scope check for non-API key auth
2025-12-10T09:20:57.9551882Z       ✓ should return 403 when API key is missing (1 ms)
2025-12-10T09:20:57.9552104Z 
2025-12-10T09:20:57.9957236Z PASS __tests__/config/rbac-webhooks.test.js
2025-12-10T09:20:57.9957860Z   Webhook RBAC Permissions
2025-12-10T09:20:57.9958232Z     Owner Role
2025-12-10T09:20:57.9958992Z       ✓ should have all webhook permissions (1 ms)
2025-12-10T09:20:57.9959927Z       ✓ should have all inbound webhook permissions
2025-12-10T09:20:57.9960410Z     Admin Role
2025-12-10T09:20:57.9960978Z       ✓ should have all webhook permissions (3 ms)
2025-12-10T09:20:57.9961671Z       ✓ should have all inbound webhook permissions
2025-12-10T09:20:57.9962137Z     Moderator Role
2025-12-10T09:20:57.9963104Z       ✓ should have limited webhook permissions (1 ms)
2025-12-10T09:20:57.9963924Z       ✓ should have view-only inbound webhook permissions
2025-12-10T09:20:57.9964428Z     Viewer Role
2025-12-10T09:20:57.9964988Z       ✓ should have view-only webhook permissions (1 ms)
2025-12-10T09:20:57.9965701Z       ✓ should have view-only inbound webhook permissions
2025-12-10T09:20:57.9966193Z     Permission Hierarchy
2025-12-10T09:20:57.9966755Z       ✓ Owner should have more permissions than Admin
2025-12-10T09:20:57.9967509Z       ✓ Admin should have more permissions than Moderator (1 ms)
2025-12-10T09:20:57.9968269Z       ✓ Moderator should have more permissions than Viewer
2025-12-10T09:20:57.9968782Z     Webhook Creation Workflow
2025-12-10T09:20:57.9969594Z       ✓ Admin can create and manage webhooks (1 ms)
2025-12-10T09:20:57.9970373Z       ✓ Moderator can only view and trigger existing webhooks
2025-12-10T09:20:57.9971102Z       ✓ Viewer cannot modify or trigger webhooks (1 ms)
2025-12-10T09:20:57.9971620Z     Inbound Webhook Workflow
2025-12-10T09:20:57.9972273Z       ✓ Admin can create and manage inbound webhooks
2025-12-10T09:20:57.9972995Z       ✓ Moderator can only view inbound webhooks (1 ms)
2025-12-10T09:20:57.9973691Z       ✓ Viewer has minimal inbound webhook access
2025-12-10T09:20:57.9974149Z     Webhook Logs Access
2025-12-10T09:20:57.9974678Z       ✓ All roles can view webhook logs (1 ms)
2025-12-10T09:20:57.9975184Z     Integration with Other Features
2025-12-10T09:20:57.9975922Z       ✓ Webhook permissions are separate from automation permissions
2025-12-10T09:20:57.9976766Z       ✓ Moderator can execute automations and trigger webhooks
2025-12-10T09:20:57.9977191Z 
2025-12-10T09:20:58.0348106Z PASS __tests__/config/rbac-backup.test.js
2025-12-10T09:20:58.0348723Z   RBAC - Backup Permissions
2025-12-10T09:20:58.0349740Z     Permission definitions
2025-12-10T09:20:58.0350353Z       ✓ should define all backup permissions (4 ms)
2025-12-10T09:20:58.0350662Z     Owner role
2025-12-10T09:20:58.0351001Z       ✓ should have all backup permissions (1 ms)
2025-12-10T09:20:58.0351294Z     Admin role
2025-12-10T09:20:58.0351579Z       ✓ should have all backup permissions
2025-12-10T09:20:58.0351854Z     Moderator role
2025-12-10T09:20:58.0352277Z       ✓ should have limited backup permissions (view and download only) (1 ms)
2025-12-10T09:20:58.0352650Z     Viewer role
2025-12-10T09:20:58.0352985Z       ✓ should have view-only backup permissions (1 ms)
2025-12-10T09:20:58.0353302Z     Permission hierarchy
2025-12-10T09:20:58.0353671Z       ✓ should grant more permissions to higher roles (1 ms)
2025-12-10T09:20:58.0353998Z     Critical permissions
2025-12-10T09:20:58.0354411Z       ✓ should restrict restore permission to admin and above (1 ms)
2025-12-10T09:20:58.0354915Z       ✓ should restrict delete permission to admin and above
2025-12-10T09:20:58.0355441Z       ✓ should restrict migration permissions to admin and above (1 ms)
2025-12-10T09:20:58.0355808Z     Permission format
2025-12-10T09:20:58.0356123Z       ✓ should follow naming convention (1 ms)
2025-12-10T09:20:58.0356506Z       ✓ should have unique permission values
2025-12-10T09:20:58.0356708Z 
2025-12-10T09:20:58.0864813Z PASS __tests__/middleware/validation.test.js
2025-12-10T09:20:58.0865529Z   Validation Middleware
2025-12-10T09:20:58.0866007Z     login validation
2025-12-10T09:20:58.0866856Z       ✓ should validate correct login credentials (1 ms)
2025-12-10T09:20:58.0867316Z     executeCommand validation
2025-12-10T09:20:58.0867773Z       ✓ should have command validation rules
2025-12-10T09:20:58.0868154Z     playerName validation
2025-12-10T09:20:58.0868598Z       ✓ should have player name validation rules
2025-12-10T09:20:58.0868986Z     filePath validation
2025-12-10T09:20:58.0869622Z       ✓ should have file path validation rules (1 ms)
2025-12-10T09:20:58.0870056Z     validate function
2025-12-10T09:20:58.0870388Z       ✓ should be a function
2025-12-10T09:20:58.0870600Z 
2025-12-10T09:20:58.1178950Z   console.log
2025-12-10T09:20:58.1179688Z     [RBAC] Permission granted: {
2025-12-10T09:20:58.1180416Z       username: undefined,
2025-12-10T09:20:58.1180722Z       role: 'owner',
2025-12-10T09:20:58.1181041Z       permission: 'server:start',
2025-12-10T09:20:58.1181376Z       path: '/test'
2025-12-10T09:20:58.1181622Z     }
2025-12-10T09:20:58.1181758Z 
2025-12-10T09:20:58.1181915Z       at log (middleware/rbac.js:51:17)
2025-12-10T09:20:58.1182163Z 
2025-12-10T09:20:58.1193328Z   console.log
2025-12-10T09:20:58.1193629Z     [RBAC] Permission denied: {
2025-12-10T09:20:58.1193949Z       username: undefined,
2025-12-10T09:20:58.1194230Z       role: 'viewer',
2025-12-10T09:20:58.1194525Z       permission: 'server:start',
2025-12-10T09:20:58.1194833Z       path: '/test',
2025-12-10T09:20:58.1195082Z       method: 'GET'
2025-12-10T09:20:58.1195331Z     }
2025-12-10T09:20:58.1195452Z 
2025-12-10T09:20:58.1195600Z       at log (middleware/rbac.js:37:21)
2025-12-10T09:20:58.1195829Z 
2025-12-10T09:20:58.1206477Z   console.log
2025-12-10T09:20:58.1206883Z     [RBAC] Permission check failed: Not authenticated
2025-12-10T09:20:58.1207193Z 
2025-12-10T09:20:58.1207369Z       at log (middleware/rbac.js:19:21)
2025-12-10T09:20:58.1207617Z 
2025-12-10T09:20:58.1217559Z   console.log
2025-12-10T09:20:58.1217946Z     [RBAC] Permission check failed: No role in session
2025-12-10T09:20:58.1218253Z 
2025-12-10T09:20:58.1218416Z       at log (middleware/rbac.js:28:21)
2025-12-10T09:20:58.1218661Z 
2025-12-10T09:20:58.1233180Z   console.log
2025-12-10T09:20:58.1233549Z     [RBAC] Permission granted: {
2025-12-10T09:20:58.1233919Z       username: undefined,
2025-12-10T09:20:58.1234212Z       role: 'owner',
2025-12-10T09:20:58.1234531Z       permission: 'server:start',
2025-12-10T09:20:58.1234867Z       path: '/test'
2025-12-10T09:20:58.1235122Z     }
2025-12-10T09:20:58.1235475Z 
2025-12-10T09:20:58.1235642Z       at log (middleware/rbac.js:51:17)
2025-12-10T09:20:58.1235888Z 
2025-12-10T09:20:58.1245802Z   console.log
2025-12-10T09:20:58.1246123Z     [RBAC] Role check passed: {
2025-12-10T09:20:58.1246469Z       username: undefined,
2025-12-10T09:20:58.1246773Z       role: 'admin',
2025-12-10T09:20:58.1247052Z       requiredRole: 'admin',
2025-12-10T09:20:58.1247362Z       path: '/test'
2025-12-10T09:20:58.1247616Z     }
2025-12-10T09:20:58.1247744Z 
2025-12-10T09:20:58.1247917Z       at log (middleware/rbac.js:103:17)
2025-12-10T09:20:58.1248168Z 
2025-12-10T09:20:58.1257082Z   console.log
2025-12-10T09:20:58.1257513Z     [RBAC] Role check passed: {
2025-12-10T09:20:58.1257965Z       username: undefined,
2025-12-10T09:20:58.1258363Z       role: 'owner',
2025-12-10T09:20:58.1258721Z       requiredRole: 'admin',
2025-12-10T09:20:58.1259125Z       path: '/test'
2025-12-10T09:20:58.1259675Z     }
2025-12-10T09:20:58.1259860Z 
2025-12-10T09:20:58.1260098Z       at log (middleware/rbac.js:103:17)
2025-12-10T09:20:58.1260435Z 
2025-12-10T09:20:58.1271026Z   console.log
2025-12-10T09:20:58.1271493Z     [RBAC] Role check failed: {
2025-12-10T09:20:58.1273249Z       username: undefined,
2025-12-10T09:20:58.1273752Z       userRole: 'moderator',
2025-12-10T09:20:58.1274241Z       requiredRole: 'admin',
2025-12-10T09:20:58.1274712Z       path: '/test',
2025-12-10T09:20:58.1275112Z       method: 'GET'
2025-12-10T09:20:58.1275499Z     }
2025-12-10T09:20:58.1275683Z 
2025-12-10T09:20:58.1275913Z       at log (middleware/rbac.js:89:21)
2025-12-10T09:20:58.1276257Z 
2025-12-10T09:20:58.1283210Z   console.log
2025-12-10T09:20:58.1283621Z     [RBAC] Role check passed: {
2025-12-10T09:20:58.1284017Z       username: undefined,
2025-12-10T09:20:58.1284292Z       role: 'owner',
2025-12-10T09:20:58.1284641Z       requiredRole: 'owner',
2025-12-10T09:20:58.1285051Z       path: '/test'
2025-12-10T09:20:58.1285390Z     }
2025-12-10T09:20:58.1285582Z 
2025-12-10T09:20:58.1285806Z       at log (middleware/rbac.js:103:17)
2025-12-10T09:20:58.1286099Z 
2025-12-10T09:20:58.1293035Z   console.log
2025-12-10T09:20:58.1293413Z     [RBAC] Role check failed: {
2025-12-10T09:20:58.1293811Z       username: undefined,
2025-12-10T09:20:58.1294312Z       userRole: 'admin',
2025-12-10T09:20:58.1294569Z       requiredRole: 'owner',
2025-12-10T09:20:58.1294812Z       path: '/test',
2025-12-10T09:20:58.1295171Z       method: 'GET'
2025-12-10T09:20:58.1295504Z     }
2025-12-10T09:20:58.1295682Z 
2025-12-10T09:20:58.1295822Z       at log (middleware/rbac.js:89:21)
2025-12-10T09:20:58.1296022Z 
2025-12-10T09:20:58.1308341Z PASS __tests__/middleware/rbac.test.js
2025-12-10T09:20:58.1308848Z   RBAC Middleware
2025-12-10T09:20:58.1309404Z     requirePermission
2025-12-10T09:20:58.1310302Z       ✓ should allow access when user has required permission (3 ms)
2025-12-10T09:20:58.1311138Z       ✓ should deny access when user lacks permission (1 ms)
2025-12-10T09:20:58.1311950Z       ✓ should deny access when user is not authenticated (1 ms)
2025-12-10T09:20:58.1312754Z       ✓ should deny access when session has no role (1 ms)
2025-12-10T09:20:58.1320973Z     checkPermission (alias)
2025-12-10T09:20:58.1321572Z       ✓ should be an alias for requirePermission
2025-12-10T09:20:58.1322019Z       ✓ should work the same as requirePermission (1 ms)
2025-12-10T09:20:58.1322325Z     requireRole
2025-12-10T09:20:58.1322655Z       ✓ should allow access when user has exact role (1 ms)
2025-12-10T09:20:58.1323075Z       ✓ should allow access when user has higher role (1 ms)
2025-12-10T09:20:58.1323484Z       ✓ should deny access when user has lower role (2 ms)
2025-12-10T09:20:58.1323769Z     requireOwner
2025-12-10T09:20:58.1324054Z       ✓ should allow access for owner role (1 ms)
2025-12-10T09:20:58.1324434Z       ✓ should deny access for non-owner roles (1 ms)
2025-12-10T09:20:58.1324633Z 
2025-12-10T09:20:58.1679305Z PASS __tests__/config/rbac.test.js
2025-12-10T09:20:58.1679869Z   RBAC Configuration
2025-12-10T09:20:58.1680646Z     isValidRole
2025-12-10T09:20:58.1681324Z       ✓ should validate owner role (1 ms)
2025-12-10T09:20:58.1681924Z       ✓ should validate admin role
2025-12-10T09:20:58.1682493Z       ✓ should validate moderator role
2025-12-10T09:20:58.1683087Z       ✓ should validate viewer role
2025-12-10T09:20:58.1683716Z       ✓ should reject invalid roles (1 ms)
2025-12-10T09:20:58.1684191Z     hasPermission
2025-12-10T09:20:58.1684698Z       ✓ should grant owner all permissions
2025-12-10T09:20:58.1685437Z       ✓ should grant admin server control permissions (1 ms)
2025-12-10T09:20:58.1686135Z       ✓ should deny admin owner-only permissions
2025-12-10T09:20:58.1686836Z       ✓ should grant moderator player management permissions
2025-12-10T09:20:58.1687573Z       ✓ should deny moderator server control permissions
2025-12-10T09:20:58.1688255Z       ✓ should grant viewer read-only permissions (1 ms)
2025-12-10T09:20:58.1688882Z       ✓ should deny viewer write permissions
2025-12-10T09:20:58.1689710Z       ✓ should return false for invalid inputs
2025-12-10T09:20:58.1690200Z     hasHigherOrEqualRole
2025-12-10T09:20:58.1690867Z       ✓ should confirm owner has higher role than all others (1 ms)
2025-12-10T09:20:58.1691757Z       ✓ should confirm admin has higher role than moderator and viewer
2025-12-10T09:20:58.1692558Z       ✓ should deny admin has higher role than owner
2025-12-10T09:20:58.1693297Z       ✓ should confirm moderator has higher role than viewer
2025-12-10T09:20:58.1694130Z       ✓ should deny moderator has higher role than admin or owner (1 ms)
2025-12-10T09:20:58.1694828Z       ✓ should handle invalid inputs
2025-12-10T09:20:58.1695263Z     getRolePermissions
2025-12-10T09:20:58.1695813Z       ✓ should return all permissions for owner (1 ms)
2025-12-10T09:20:58.1696529Z       ✓ should return appropriate permissions for each role
2025-12-10T09:20:58.1697214Z       ✓ should return empty array for invalid role
2025-12-10T09:20:58.1697552Z 
2025-12-10T09:20:58.2013127Z PASS __tests__/config/rbac-player-management.test.js
2025-12-10T09:20:58.2013812Z   Player Management RBAC Permissions
2025-12-10T09:20:58.2014306Z     New Player Management Permissions
2025-12-10T09:20:58.2015016Z       ✓ PLAYER_WARN permission exists (1 ms)
2025-12-10T09:20:58.2016015Z       ✓ PLAYER_MUTE permission exists (3 ms)
2025-12-10T09:20:58.2016753Z       ✓ PLAYER_UNMUTE permission exists
2025-12-10T09:20:58.2017361Z       ✓ PLAYER_TELEPORT permission exists
2025-12-10T09:20:58.2018007Z       ✓ PLAYER_VIEW_DETAILS permission exists
2025-12-10T09:20:58.2018698Z       ✓ PLAYER_VIEW_INVENTORY permission exists (1 ms)
2025-12-10T09:20:58.2019598Z       ✓ PLAYER_ACTION_HISTORY permission exists
2025-12-10T09:20:58.2020078Z     Owner Role Permissions
2025-12-10T09:20:58.2020638Z       ✓ Owner has all player management permissions
2025-12-10T09:20:58.2021104Z     Admin Role Permissions
2025-12-10T09:20:58.2021686Z       ✓ Admin has all player management permissions (1 ms)
2025-12-10T09:20:58.2022213Z     Moderator Role Permissions
2025-12-10T09:20:58.2022774Z       ✓ Moderator has player action permissions
2025-12-10T09:20:58.2023397Z       ✓ Moderator cannot view player inventory
2025-12-10T09:20:58.2023867Z     Viewer Role Permissions
2025-12-10T09:20:58.2024390Z       ✓ Viewer can view player details
2025-12-10T09:20:58.2025024Z       ✓ Viewer cannot perform player actions
2025-12-10T09:20:58.2025497Z     Whitelist Permissions
2025-12-10T09:20:58.2026057Z       ✓ Moderator can manage whitelist (1 ms)
2025-12-10T09:20:58.2026630Z       ✓ Admin can manage whitelist
2025-12-10T09:20:58.2027167Z       ✓ Viewer cannot manage whitelist
2025-12-10T09:20:58.2027471Z 
2025-12-10T09:20:58.2306502Z PASS __tests__/config/rbac-analytics.test.js
2025-12-10T09:20:58.2307966Z   Analytics RBAC
2025-12-10T09:20:58.2308256Z     ANALYTICS_VIEW permission
2025-12-10T09:20:58.2308748Z       ✓ should be granted to owner (1 ms)
2025-12-10T09:20:58.2309420Z       ✓ should be granted to admin
2025-12-10T09:20:58.2309946Z       ✓ should be granted to moderator
2025-12-10T09:20:58.2310839Z       ✓ should be granted to viewer (1 ms)
2025-12-10T09:20:58.2311310Z     ANALYTICS_EXPORT permission
2025-12-10T09:20:58.2311783Z       ✓ should be granted to owner
2025-12-10T09:20:58.2312273Z       ✓ should be granted to admin
2025-12-10T09:20:58.2312790Z       ✓ should be denied to moderator
2025-12-10T09:20:58.2313287Z       ✓ should be denied to viewer
2025-12-10T09:20:58.2313693Z     ANALYTICS_MANAGE permission
2025-12-10T09:20:58.2314188Z       ✓ should be granted to owner (1 ms)
2025-12-10T09:20:58.2314695Z       ✓ should be granted to admin
2025-12-10T09:20:58.2315173Z       ✓ should be denied to moderator
2025-12-10T09:20:58.2315673Z       ✓ should be denied to viewer
2025-12-10T09:20:58.2316077Z     Analytics feature access summary
2025-12-10T09:20:58.2316632Z       ✓ should allow owner full analytics access
2025-12-10T09:20:58.2317349Z       ✓ should allow admin full analytics access (1 ms)
2025-12-10T09:20:58.2318023Z       ✓ should allow moderator view-only analytics access
2025-12-10T09:20:58.2318699Z       ✓ should allow viewer view-only analytics access
2025-12-10T09:20:58.2319028Z 
2025-12-10T09:20:58.2620028Z   console.error
2025-12-10T09:20:58.2620505Z     Error Handler: {
2025-12-10T09:20:58.2620910Z       message: 'Test error',
2025-12-10T09:20:58.2621359Z       statusCode: 400,
2025-12-10T09:20:58.2621713Z       path: '/test',
2025-12-10T09:20:58.2622061Z       method: 'GET',
2025-12-10T09:20:58.2622396Z       stack: undefined
2025-12-10T09:20:58.2622719Z     }
2025-12-10T09:20:58.2622884Z 
2025-12-10T09:20:58.2623295Z     [0m [90m 30 |[39m     
2025-12-10T09:20:58.2624205Z      [90m 31 |[39m     [90m// Log error details (but not in production with sensitive data)[39m
2025-12-10T09:20:58.2625417Z     [31m[1m>[22m[39m[90m 32 |[39m     console[33m.[39merror([32m'Error Handler:'[39m[33m,[39m {
2025-12-10T09:20:58.2626308Z      [90m    |[39m             [31m[1m^[22m[39m
2025-12-10T09:20:58.2627098Z      [90m 33 |[39m         message[33m:[39m err[33m.[39mmessage[33m,[39m
2025-12-10T09:20:58.2627947Z      [90m 34 |[39m         statusCode[33m:[39m statusCode[33m,[39m
2025-12-10T09:20:58.2628762Z      [90m 35 |[39m         path[33m:[39m req[33m.[39mpath[33m,[39m[0m
2025-12-10T09:20:58.2629773Z 
2025-12-10T09:20:58.2630059Z       at error (middleware/errorHandler.js:32:13)
2025-12-10T09:20:58.2630836Z       at Object.errorHandler (__tests__/middleware/errorHandler.test.js:30:7)
2025-12-10T09:20:58.2631331Z 
2025-12-10T09:20:58.2638950Z   console.error
2025-12-10T09:20:58.2639515Z     Error Handler: {
2025-12-10T09:20:58.2639920Z       message: 'Test error',
2025-12-10T09:20:58.2640333Z       statusCode: 500,
2025-12-10T09:20:58.2640704Z       path: '/test',
2025-12-10T09:20:58.2641060Z       method: 'GET',
2025-12-10T09:20:58.2641432Z       stack: undefined
2025-12-10T09:20:58.2641777Z     }
2025-12-10T09:20:58.2641956Z 
2025-12-10T09:20:58.2642224Z     [0m [90m 30 |[39m     
2025-12-10T09:20:58.2643121Z      [90m 31 |[39m     [90m// Log error details (but not in production with sensitive data)[39m
2025-12-10T09:20:58.2644353Z     [31m[1m>[22m[39m[90m 32 |[39m     console[33m.[39merror([32m'Error Handler:'[39m[33m,[39m {
2025-12-10T09:20:58.2645227Z      [90m    |[39m             [31m[1m^[22m[39m
2025-12-10T09:20:58.2646034Z      [90m 33 |[39m         message[33m:[39m err[33m.[39mmessage[33m,[39m
2025-12-10T09:20:58.2646903Z      [90m 34 |[39m         statusCode[33m:[39m statusCode[33m,[39m
2025-12-10T09:20:58.2647771Z      [90m 35 |[39m         path[33m:[39m req[33m.[39mpath[33m,[39m[0m
2025-12-10T09:20:58.2648172Z 
2025-12-10T09:20:58.2648442Z       at error (middleware/errorHandler.js:32:13)
2025-12-10T09:20:58.2649499Z       at Object.errorHandler (__tests__/middleware/errorHandler.test.js:49:7)
2025-12-10T09:20:58.2650031Z 
2025-12-10T09:20:58.2661460Z PASS __tests__/middleware/errorHandler.test.js
2025-12-10T09:20:58.2661997Z   Error Handler Middleware
2025-12-10T09:20:58.2662546Z     notFoundHandler
2025-12-10T09:20:58.2662994Z       ✓ should create a 404 error (1 ms)
2025-12-10T09:20:58.2663436Z     errorHandler
2025-12-10T09:20:58.2664008Z       ✓ should send error response with status code (3 ms)
2025-12-10T09:20:58.2664811Z       ✓ should not include stack trace in production (1 ms)
2025-12-10T09:20:58.2665342Z     asyncHandler
2025-12-10T09:20:58.2665806Z       ✓ should wrap async functions
2025-12-10T09:20:58.2666468Z       ✓ should catch errors from async functions (1 ms)
2025-12-10T09:20:58.2666845Z 
2025-12-10T09:20:58.2984131Z PASS __tests__/config/rbac-map.test.js
2025-12-10T09:20:58.2984678Z   RBAC - Map Permissions
2025-12-10T09:20:58.2985062Z     MAP_VIEW permission
2025-12-10T09:20:58.2985512Z       ✓ should exist as a permission
2025-12-10T09:20:58.2985917Z       ✓ viewer role should have MAP_VIEW permission (1 ms)
2025-12-10T09:20:58.2986331Z       ✓ moderator role should have MAP_VIEW permission
2025-12-10T09:20:58.2986724Z       ✓ admin role should have MAP_VIEW permission
2025-12-10T09:20:58.2987113Z       ✓ owner role should have MAP_VIEW permission
2025-12-10T09:20:58.2987403Z     MAP_PLAYER_TELEPORT permission
2025-12-10T09:20:58.2987707Z       ✓ should exist as a permission
2025-12-10T09:20:58.2988136Z       ✓ viewer role should NOT have MAP_PLAYER_TELEPORT permission (1 ms)
2025-12-10T09:20:58.2988621Z       ✓ moderator role should have MAP_PLAYER_TELEPORT permission
2025-12-10T09:20:58.2989057Z       ✓ admin role should have MAP_PLAYER_TELEPORT permission
2025-12-10T09:20:58.2989666Z       ✓ owner role should have MAP_PLAYER_TELEPORT permission
2025-12-10T09:20:58.2989979Z     MAP_PLAYER_INFO permission
2025-12-10T09:20:58.2990279Z       ✓ should exist as a permission
2025-12-10T09:20:58.2990673Z       ✓ viewer role should have MAP_PLAYER_INFO permission (1 ms)
2025-12-10T09:20:58.2991121Z       ✓ moderator role should have MAP_PLAYER_INFO permission
2025-12-10T09:20:58.2991538Z       ✓ admin role should have MAP_PLAYER_INFO permission
2025-12-10T09:20:58.2991946Z       ✓ owner role should have MAP_PLAYER_INFO permission
2025-12-10T09:20:58.2992161Z 
2025-12-10T09:21:09.2906760Z PASS __tests__/auth/session-startup.test.js (23.538 s)
2025-12-10T09:21:09.2907355Z   Session Startup Order
2025-12-10T09:21:09.2908245Z     Production mode (NODE_ENV=production)
2025-12-10T09:21:09.2909511Z       ✓ should fail if Redis is unavailable (no MemoryStore fallback) (11497 ms)
2025-12-10T09:21:09.2910214Z     Development mode (NODE_ENV=development)
2025-12-10T09:21:09.2910935Z       ✓ should fall back to MemoryStore if Redis unavailable (11353 ms)
2025-12-10T09:21:09.2911286Z     Test mode (NODE_ENV=test)
2025-12-10T09:21:09.2911710Z       ✓ should use MemoryStore without attempting Redis connection (154 ms)
2025-12-10T09:21:09.2912062Z     Session middleware access
2025-12-10T09:21:09.2912526Z       ✓ should create middleware immediately via initializeSessionMiddleware (128 ms)
2025-12-10T09:21:09.2913080Z       ✓ should return same middleware instance on subsequent calls (129 ms)
2025-12-10T09:21:09.2913462Z     Initialization order enforcement
2025-12-10T09:21:09.2913868Z       ✓ should initialize session middleware early for routes (116 ms)
2025-12-10T09:21:09.2914339Z       ✓ should upgrade to Redis during async initialization (123 ms)
2025-12-10T09:21:09.2914588Z 
2025-12-10T09:21:09.9554127Z ---------------------------|---------|----------|---------|---------|----------------------------------------------------------------------------------------------------------------------------------------------------------------
2025-12-10T09:21:09.9555433Z File                       | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                                                                                                              
2025-12-10T09:21:09.9556322Z ---------------------------|---------|----------|---------|---------|----------------------------------------------------------------------------------------------------------------------------------------------------------------
2025-12-10T09:21:09.9561369Z All files                  |   36.38 |    28.16 |   33.79 |    36.6 |                                                                                                                                                                
2025-12-10T09:21:09.9562476Z  auth                      |   59.09 |    56.25 |   57.77 |   60.41 |                                                                                                                                                                
2025-12-10T09:21:09.9564021Z   auth.js                  |   44.36 |     43.1 |    42.3 |   46.21 | 22-24,46-47,64,102-108,144,154-156,217-370                                                                                                                     
2025-12-10T09:21:09.9565188Z   bearerAuth.js            |   54.79 |    59.09 |   71.42 |   55.55 | 18-36,68,109-111,134-139,176-195                                                                                                                               
2025-12-10T09:21:09.9566341Z   session.js               |   76.64 |    67.24 |   83.33 |   76.64 | 27-44,143,147,158-182,240,317-321                                                                                                                              
2025-12-10T09:21:09.9567425Z  middleware                |   38.48 |    40.76 |   33.96 |   39.59 |                                                                                                                                                                
2025-12-10T09:21:09.9568392Z   auth.js                  |    5.63 |        0 |       0 |    6.06 | 14-370                                                                                                                                                         
2025-12-10T09:21:09.9569682Z   debugLogger.js           |   62.02 |    69.64 |   77.77 |   62.02 | 18,42,81-93,113-117,172,206-234                                                                                                                                
2025-12-10T09:21:09.9571054Z   errorHandler.js          |   94.73 |    66.66 |     100 |   94.44 | 26                                                                                                                                                             
2025-12-10T09:21:09.9572164Z   rateLimiter.js           |   52.94 |       50 |      20 |   52.94 | 52-58,74-81,97-103,120-128                                                                                                                                     
2025-12-10T09:21:09.9573265Z   rbac.js                  |   80.64 |     87.5 |   71.42 |   80.64 | 71-72,80-81,127-135                                                                                                                                            
2025-12-10T09:21:09.9574275Z   validation.js            |      50 |    15.38 |      50 |      50 | 64-82                                                                                                                                                          
2025-12-10T09:21:09.9575257Z  routes                    |   49.38 |    40.66 |   48.45 |   49.29 |                                                                                                                                                                
2025-12-10T09:21:09.9576369Z   analytics.js             |   83.33 |       90 |     100 |   83.33 | 44-45,67,106,122-123,145,161-162,203-204,227-228                                                                                                               
2025-12-10T09:21:09.9577553Z   api.js                   |    66.1 |    57.69 |   83.33 |    66.1 | 24-27,34-35,60-61,96-97,120,139,155-167                                                                                                                        
2025-12-10T09:21:09.9578748Z   apiKeys.js               |   81.92 |    83.33 |     100 |   81.92 | 30-31,55-56,88-89,190-191,224-225,264-265,287,310-311                                                                                                          
2025-12-10T09:21:09.9580212Z   audit.js                 |   15.38 |        0 |       0 |   15.38 | 27-81,93-133                                                                                                                                                   
2025-12-10T09:21:09.9581437Z   automation.js            |   70.93 |       76 |    87.5 |   70.93 | 38-39,48-58,93-94,129-130,147-148,168-169,183,191,195,199,206-207,230-231                                                                                      
2025-12-10T09:21:09.9582909Z   backups.js               |   84.29 |    93.75 |     100 |   84.29 | 56-57,139-140,177-181,198-199,217-218,234,245-246,274-275,293-294                                                                                              
2025-12-10T09:21:09.9584259Z   cicd.js                  |   70.33 |     61.4 |   83.33 |   69.44 | 38,149-150,211-212,245-246,261-290,322-323,338-365,403,419-420                                                                                                 
2025-12-10T09:21:09.9585528Z   commands.js              |   40.98 |    13.33 |    12.5 |   40.98 | 22-68,81-82,93,107,118-119,127-143,151-159                                                                                                                     
2025-12-10T09:21:09.9586644Z   files.js                 |   34.04 |    33.33 |       0 |   34.78 | 30-35,44-61,70-78,87-100                                                                                                                                       
2025-12-10T09:21:09.9587886Z   logging.js               |   17.69 |        0 |       0 |   18.01 | 42-52,68-74,91-96,116-160,173,199-205,217-223,238-254,266-272,287-303,315-321,341-352                                                                          
2025-12-10T09:21:09.9589321Z   marketplace.js           |   96.07 |      100 |     100 |   96.07 | 136-137                                                                                                                                                        
2025-12-10T09:21:09.9590899Z   players.js               |   45.65 |    28.16 |    42.1 |   45.85 | 20-25,55-90,99-135,144-187,196-207,216-227,236-247,256-272,281-323,381-382,394,432-433,445,472-473,514-515,537-538,547-559,577-578,590,629-630,642,649,680-681 
2025-12-10T09:21:09.9592619Z   pluginIntegrations.js    |    37.3 |       40 |   22.22 |    37.3 | 39-62,75-90,103-116,129-142,155-168,290-310,323-338,351-366,379-395,408-423,436-451,464-477,494-508,520-532                                                    
2025-12-10T09:21:09.9594270Z   plugins.js               |   38.73 |    36.84 |    42.1 |   38.63 | 20,32-35,84-95,123-125,155,183-185,202-262,283,302-306,323,335-340,378-389,398-403,412-423,434-603                                                             
2025-12-10T09:21:09.9595654Z   pluginsV2.js             |    22.5 |        0 |       0 |   22.78 | 28-75,84-116,125-151,160-187,196-218,230-254                                                                                                                   
2025-12-10T09:21:09.9596956Z   server.js                |   27.36 |        0 |       0 |   27.36 | 27-32,41-58,67-95,104-132,141-165,174-179,188-193,202-207,216-247                                                                                              
2025-12-10T09:21:09.9598225Z   users.js                 |   14.56 |        0 |       0 |   14.56 | 30-35,45-56,66-128,138-192,202-247,257-303,313-353                                                                                                             
2025-12-10T09:21:09.9599769Z   webhooks.js              |      62 |    47.61 |      70 |   61.48 | 36,65-66,80-96,134-135,161,202-203,261-262,288-289,307-321,339-340,370-371,385-401,439-440,460-481,495-507,536-537                                             
2025-12-10T09:21:09.9600897Z  services                  |   26.33 |    18.96 |   26.69 |   26.47 |                                                                                                                                                                
2025-12-10T09:21:09.9602051Z   analyticsService.js      |    5.14 |        0 |    4.34 |    5.18 | 36-553                                                                                                                                                         
2025-12-10T09:21:09.9602705Z   apiKeyService.js         |   92.75 |     80.7 |     100 |   93.93 | 53,150,277,292                                                                                                                                                 
2025-12-10T09:21:09.9603330Z   auditLog.js              |   20.68 |     6.45 |    12.5 |   23.07 | 78-82,112,138-213                                                                                                                                              
2025-12-10T09:21:09.9604375Z   automationService.js     |   11.11 |        0 |    4.54 |   11.25 | 54-506                                                                                                                                                         
2025-12-10T09:21:09.9605219Z   backupService.js         |    8.07 |      6.5 |    3.33 |    8.24 | 59-827                                                                                                                                                         
2025-12-10T09:21:09.9606105Z   database.js              |   36.52 |    11.31 |   40.98 |   36.53 | 31,44-45,484-1257,1364-1365,1374-1375,1379                                                                                                                     
2025-12-10T09:21:09.9606893Z   docker.js                |    4.65 |     4.34 |    8.33 |    4.65 | 13-209                                                                                                                                                         
2025-12-10T09:21:09.9607538Z   eventLogger.js           |   93.63 |    81.35 |     100 |   93.51 | 115,127-128,283-284,288-289                                                                                                                                    
2025-12-10T09:21:09.9608661Z   inboundWebhookService.js |    8.05 |        0 |    6.25 |    8.05 | 51-503                                                                                                                                                         
2025-12-10T09:21:09.9609543Z   jobQueue.js              |    6.02 |        0 |       0 |    6.41 | 16-224                                                                                                                                                         
2025-12-10T09:21:09.9610229Z   jobWorker.js             |    6.66 |        0 |       0 |    6.74 | 17-239                                                                                                                                                         
2025-12-10T09:21:09.9610903Z   logs.js                  |   14.89 |        0 |    12.5 |    17.5 | 16-104                                                                                                                                                         
2025-12-10T09:21:09.9611617Z   marketplaceService.js    |   67.16 |    49.58 |   60.52 |    66.4 | 23,71-72,97-99,121-129,164-165,310,314,331-341,364-430,438,440-441                                                                                             
2025-12-10T09:21:09.9612312Z   mojang.js                |   96.15 |    92.85 |     100 |   96.15 | 47                                                                                                                                                             
2025-12-10T09:21:09.9612901Z   notificationService.js   |     7.1 |        0 |    5.55 |    7.14 | 28-536                                                                                                                                                         
2025-12-10T09:21:09.9613584Z   playerTracker.js         |   76.74 |       75 |   66.66 |   77.64 | 32-33,42,46,66-75,88-89,108,131,148,173-182,221,233                                                                                                            
2025-12-10T09:21:09.9614422Z   pluginGateway.js         |   97.29 |      100 |     100 |   97.29 | 203-207                                                                                                                                                        
2025-12-10T09:21:09.9615153Z   pluginManager.js         |   21.32 |    20.32 |   17.24 |   21.34 | 19-86,129-130,135-185,201-593,607,616-649,665-770,825-827,855-1009                                                                                             
2025-12-10T09:21:09.9615862Z   pluginParser.js          |   10.81 |        0 |       0 |   11.11 | 11-93                                                                                                                                                          
2025-12-10T09:21:09.9616454Z   rcon.js                  |    9.25 |     12.5 |    6.25 |    9.43 | 18-165                                                                                                                                                         
2025-12-10T09:21:09.9617051Z   scheduler.js             |       0 |        0 |       0 |       0 | 1-218                                                                                                                                                          
2025-12-10T09:21:09.9617601Z   stats.js                 |   11.11 |        0 |    9.09 |   11.11 | 21-192                                                                                                                                                         
2025-12-10T09:21:09.9618151Z   urlParser.js             |     2.7 |        0 |       0 |    2.73 | 9-202                                                                                                                                                          
2025-12-10T09:21:09.9618751Z   webhookService.js        |    11.3 |        0 |    3.57 |   11.71 | 61-114,126-512                                                                                                                                                 
2025-12-10T09:21:09.9619645Z  services/adapters         |    19.8 |    21.64 |   15.78 |    19.4 |                                                                                                                                                                
2025-12-10T09:21:09.9620311Z   baseAdapter.js           |   69.49 |    67.44 |      60 |   68.42 | 82-98,134,139,141,163,175-210                                                                                                                                  
2025-12-10T09:21:09.9620932Z   dynmapAdapter.js         |       0 |        0 |       0 |       0 | 10-236                                                                                                                                                         
2025-12-10T09:21:09.9621539Z   essentialsxAdapter.js    |       0 |        0 |       0 |       0 | 11-276                                                                                                                                                         
2025-12-10T09:21:09.9622367Z ---------------------------|---------|----------|---------|---------|----------------------------------------------------------------------------------------------------------------------------------------------------------------
2025-12-10T09:21:10.0949073Z Summary of all failing tests
2025-12-10T09:21:10.0952200Z FAIL __tests__/services/pluginGateway.test.js
2025-12-10T09:21:10.0955942Z   ● PluginGateway › getConfig › should return null for non-configured adapter
2025-12-10T09:21:10.0956529Z 
2025-12-10T09:21:10.0956762Z     expect(received).toBeNull()
2025-12-10T09:21:10.0957050Z 
2025-12-10T09:21:10.0957675Z     Received: {"enabled": true}
2025-12-10T09:21:10.0957936Z 
2025-12-10T09:21:10.0965159Z     [0m [90m 172 |[39m         it([32m'should return null for non-configured adapter'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:21:10.0971433Z      [90m 173 |[39m             [36mconst[39m result [33m=[39m pluginGateway[33m.[39mgetConfig([32m'nonexistent'[39m)[33m;[39m
2025-12-10T09:21:10.0975263Z     [31m[1m>[22m[39m[90m 174 |[39m             expect(result)[33m.[39mtoBeNull()[33m;[39m
2025-12-10T09:21:10.0978423Z      [90m     |[39m                            [31m[1m^[22m[39m
2025-12-10T09:21:10.0980406Z      [90m 175 |[39m         })[33m;[39m
2025-12-10T09:21:10.0981960Z      [90m 176 |[39m     })[33m;[39m
2025-12-10T09:21:10.0983189Z      [90m 177 |[39m[0m
2025-12-10T09:21:10.0983431Z 
2025-12-10T09:21:10.0987806Z       at Object.toBeNull (__tests__/services/pluginGateway.test.js:174:28)
2025-12-10T09:21:10.0988306Z 
2025-12-10T09:21:10.1020182Z FAIL __tests__/services/marketplaceService.test.js
2025-12-10T09:21:10.1021173Z   ● Marketplace Service › searchPlugins › should apply filters correctly
2025-12-10T09:21:10.1021684Z 
2025-12-10T09:21:10.1021978Z     expect(jest.fn()).toHaveBeenCalledWith(...expected)
2025-12-10T09:21:10.1022349Z 
2025-12-10T09:21:10.1022604Z     Expected: StringContaining "categories:admin"
2025-12-10T09:21:10.1024458Z     Received: "https://api.modrinth.com/v2/search?query=test&limit=10&offset=0&facets=%5B%5B%22project_type%3Aplugin%22%5D%5D&facets=%5B%5B%22categories%3Aadmin%22%5D%5D&facets=%5B%5B%22versions%3A1.20.1%22%5D%5D&index=downloads", {"maxRedirects": 3, "timeout": 10000}
2025-12-10T09:21:10.1025995Z 
2025-12-10T09:21:10.1026143Z     Number of calls: 1
2025-12-10T09:21:10.1026349Z 
2025-12-10T09:21:10.1026682Z     [0m [90m 102 |[39m             })[33m;[39m
2025-12-10T09:21:10.1027157Z      [90m 103 |[39m
2025-12-10T09:21:10.1028038Z     [31m[1m>[22m[39m[90m 104 |[39m             expect(axios[33m.[39m[36mget[39m)[33m.[39mtoHaveBeenCalledWith(
2025-12-10T09:21:10.1028954Z      [90m     |[39m                               [31m[1m^[22m[39m
2025-12-10T09:21:10.1030074Z      [90m 105 |[39m                 expect[33m.[39mstringContaining([32m'categories:admin'[39m)
2025-12-10T09:21:10.1032061Z      [90m 106 |[39m             )[33m;[39m
2025-12-10T09:21:10.1033309Z      [90m 107 |[39m         })[33m;[39m[0m
2025-12-10T09:21:10.1034318Z 
2025-12-10T09:21:10.1034880Z       at Object.toHaveBeenCalledWith (__tests__/services/marketplaceService.test.js:104:31)
2025-12-10T09:21:10.1035499Z 
2025-12-10T09:21:10.1035812Z FAIL __tests__/services/integration.test.js
2025-12-10T09:21:10.1036743Z   ● System Integration › Event Logger Integration › should initialize event logger
2025-12-10T09:21:10.1037260Z 
2025-12-10T09:21:10.1038397Z     Cannot find module '../services/eventLogger' from '__tests__/services/integration.test.js'
2025-12-10T09:21:10.1038969Z 
2025-12-10T09:21:10.1039750Z     However, Jest was able to find:
2025-12-10T09:21:10.1040871Z     	'./eventLogger.test.js'
2025-12-10T09:21:10.1041126Z 
2025-12-10T09:21:10.1049498Z     You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js', 'mjs', 'cjs', 'jsx', 'ts', 'tsx', 'json', 'node'].
2025-12-10T09:21:10.1050516Z 
2025-12-10T09:21:10.1051320Z     See https://jestjs.io/docs/configuration#modulefileextensions-arraystring
2025-12-10T09:21:10.1051847Z 
2025-12-10T09:21:10.1055626Z     [0m [90m 32 |[39m     describe([32m'Event Logger Integration'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:21:10.1060144Z      [90m 33 |[39m         test([32m'should initialize event logger'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:21:10.1066670Z     [31m[1m>[22m[39m[90m 34 |[39m             [36mconst[39m { eventLogger[33m:[39m logger } [33m=[39m require([32m'../services/eventLogger'[39m)[33m;[39m
2025-12-10T09:21:10.1068870Z      [90m    |[39m                                             [31m[1m^[22m[39m
2025-12-10T09:21:10.1075265Z      [90m 35 |[39m             logger[33m.[39mdbPath [33m=[39m path[33m.[39mjoin(__dirname[33m,[39m [32m'../data-test/events.db'[39m)[33m;[39m
2025-12-10T09:21:10.1076561Z      [90m 36 |[39m             
2025-12-10T09:21:10.1080156Z      [90m 37 |[39m             expect(() [33m=>[39m logger[33m.[39minitialize())[33m.[39mnot[33m.[39mtoThrow()[33m;[39m[0m
2025-12-10T09:21:10.1080780Z 
2025-12-10T09:21:10.1085018Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:21:10.1086525Z       at Object.require (__tests__/services/integration.test.js:34:45)
2025-12-10T09:21:10.1087337Z 
2025-12-10T09:21:10.1087967Z   ● System Integration › Event Logger Integration › should log an event
2025-12-10T09:21:10.1090193Z 
2025-12-10T09:21:10.1090747Z     Cannot find module '../services/eventLogger' from '__tests__/services/integration.test.js'
2025-12-10T09:21:10.1091836Z 
2025-12-10T09:21:10.1092274Z     However, Jest was able to find:
2025-12-10T09:21:10.1092796Z     	'./eventLogger.test.js'
2025-12-10T09:21:10.1093054Z 
2025-12-10T09:21:10.1098565Z     You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js', 'mjs', 'cjs', 'jsx', 'ts', 'tsx', 'json', 'node'].
2025-12-10T09:21:10.1099872Z 
2025-12-10T09:21:10.1100477Z     See https://jestjs.io/docs/configuration#modulefileextensions-arraystring
2025-12-10T09:21:10.1101135Z 
2025-12-10T09:21:10.1101539Z     [0m [90m 42 |[39m
2025-12-10T09:21:10.1104921Z      [90m 43 |[39m         test([32m'should log an event'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:21:10.1111637Z     [31m[1m>[22m[39m[90m 44 |[39m             [36mconst[39m { [33mEVENT_TYPES[39m[33m,[39m [33mEVENT_CATEGORIES[39m[33m,[39m [33mEVENT_SEVERITY[39m } [33m=[39m require([32m'../services/eventLogger'[39m)[33m;[39m
2025-12-10T09:21:10.1113339Z      [90m    |[39m                                                                       [31m[1m^[22m[39m
2025-12-10T09:21:10.1114086Z      [90m 45 |[39m             
2025-12-10T09:21:10.1119910Z      [90m 46 |[39m             [36mconst[39m eventId [33m=[39m eventLogger[33m.[39mlogEvent({
2025-12-10T09:21:10.1122153Z      [90m 47 |[39m                 eventType[33m:[39m [33mEVENT_TYPES[39m[33m.[39m[33mSYSTEM_INFO[39m[33m,[39m[0m
2025-12-10T09:21:10.1123425Z 
2025-12-10T09:21:10.1124205Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:21:10.1126775Z       at Object.require (__tests__/services/integration.test.js:44:71)
2025-12-10T09:21:10.1127679Z 
2025-12-10T09:21:10.1129610Z   ● System Integration › Event Logger Integration › should query events
2025-12-10T09:21:10.1130634Z 
2025-12-10T09:21:10.1131698Z     TypeError: Cannot read properties of undefined (reading 'queryEvents')
2025-12-10T09:21:10.1132197Z 
2025-12-10T09:21:10.1132499Z     [0m [90m 57 |[39m
2025-12-10T09:21:10.1134648Z      [90m 58 |[39m         test([32m'should query events'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:21:10.1137867Z     [31m[1m>[22m[39m[90m 59 |[39m             [36mconst[39m result [33m=[39m eventLogger[33m.[39mqueryEvents()[33m;[39m
2025-12-10T09:21:10.1139023Z      [90m    |[39m                                        [31m[1m^[22m[39m
2025-12-10T09:21:10.1141355Z      [90m 60 |[39m             expect(result)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:21:10.1143655Z      [90m 61 |[39m             expect(result[33m.[39mevents)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:21:10.1146196Z      [90m 62 |[39m             expect(result[33m.[39mtotal)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m[0m
2025-12-10T09:21:10.1146756Z 
2025-12-10T09:21:10.1147280Z       at Object.queryEvents (__tests__/services/integration.test.js:59:40)
2025-12-10T09:21:10.1147747Z 
2025-12-10T09:21:10.1150201Z   ● System Integration › Notification Service Integration › should initialize notification service
2025-12-10T09:21:10.1150867Z 
2025-12-10T09:21:10.1153050Z     Cannot find module '../services/notificationService' from '__tests__/services/integration.test.js'
2025-12-10T09:21:10.1153983Z 
2025-12-10T09:21:10.1155248Z     [0m [90m 66 |[39m     describe([32m'Notification Service Integration'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:21:10.1157838Z      [90m 67 |[39m         test([32m'should initialize notification service'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:21:10.1161172Z     [31m[1m>[22m[39m[90m 68 |[39m             [36mconst[39m service [33m=[39m require([32m'../services/notificationService'[39m)[33m;[39m
2025-12-10T09:21:10.1162219Z      [90m    |[39m                             [31m[1m^[22m[39m
2025-12-10T09:21:10.1165771Z      [90m 69 |[39m             service[33m.[39mdbPath [33m=[39m path[33m.[39mjoin(__dirname[33m,[39m [32m'../data-test/notifications.db'[39m)[33m;[39m
2025-12-10T09:21:10.1166750Z      [90m 70 |[39m             
2025-12-10T09:21:10.1169324Z      [90m 71 |[39m             expect(() [33m=>[39m service[33m.[39minitialize())[33m.[39mnot[33m.[39mtoThrow()[33m;[39m[0m
2025-12-10T09:21:10.1169951Z 
2025-12-10T09:21:10.1170784Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:21:10.1172053Z       at Object.require (__tests__/services/integration.test.js:68:29)
2025-12-10T09:21:10.1172510Z 
2025-12-10T09:21:10.1174490Z   ● System Integration › Notification Service Integration › should get user preferences
2025-12-10T09:21:10.1175080Z 
2025-12-10T09:21:10.1175684Z     TypeError: Cannot read properties of undefined (reading 'getUserPreferences')
2025-12-10T09:21:10.1176214Z 
2025-12-10T09:21:10.1176417Z     [0m [90m 76 |[39m
2025-12-10T09:21:10.1178769Z      [90m 77 |[39m         test([32m'should get user preferences'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:21:10.1182603Z     [31m[1m>[22m[39m[90m 78 |[39m             [36mconst[39m prefs [33m=[39m notificationService[33m.[39mgetUserPreferences([32m'testuser'[39m)[33m;[39m
2025-12-10T09:21:10.1183835Z      [90m    |[39m                                               [31m[1m^[22m[39m
2025-12-10T09:21:10.1185228Z      [90m 79 |[39m             expect(prefs)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:21:10.1187930Z      [90m 80 |[39m             expect(prefs[33m.[39menabled)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-12-10T09:21:10.1190048Z      [90m 81 |[39m             expect(prefs[33m.[39mchannels)[33m.[39mtoBeDefined()[33m;[39m[0m
2025-12-10T09:21:10.1190550Z 
2025-12-10T09:21:10.1191607Z       at Object.getUserPreferences (__tests__/services/integration.test.js:78:47)
2025-12-10T09:21:10.1192144Z 
2025-12-10T09:21:10.1193938Z   ● System Integration › Notification Service Integration › should update user preferences
2025-12-10T09:21:10.1194544Z 
2025-12-10T09:21:10.1195327Z     TypeError: Cannot read properties of undefined (reading 'updateUserPreferences')
2025-12-10T09:21:10.1195878Z 
2025-12-10T09:21:10.1196081Z     [0m [90m 83 |[39m
2025-12-10T09:21:10.1198358Z      [90m 84 |[39m         test([32m'should update user preferences'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:21:10.1202339Z     [31m[1m>[22m[39m[90m 85 |[39m             [36mconst[39m updated [33m=[39m notificationService[33m.[39mupdateUserPreferences([32m'testuser'[39m[33m,[39m {
2025-12-10T09:21:10.1203595Z      [90m    |[39m                                                 [31m[1m^[22m[39m
2025-12-10T09:21:10.1205115Z      [90m 86 |[39m                 severity_filter[33m:[39m [32m'warning'[39m[33m,[39m
2025-12-10T09:21:10.1206580Z      [90m 87 |[39m                 channels[33m:[39m [[32m'inbox'[39m]
2025-12-10T09:21:10.1207555Z      [90m 88 |[39m             })[33m;[39m[0m
2025-12-10T09:21:10.1207869Z 
2025-12-10T09:21:10.1209924Z       at Object.updateUserPreferences (__tests__/services/integration.test.js:85:49)
2025-12-10T09:21:10.1210514Z 
2025-12-10T09:21:10.1226862Z   ● System Integration › Notification Service Integration › should create notification from event
2025-12-10T09:21:10.1227766Z 
2025-12-10T09:21:10.1228297Z     Cannot find module '../services/eventLogger' from '__tests__/services/integration.test.js'
2025-12-10T09:21:10.1228878Z 
2025-12-10T09:21:10.1229087Z     However, Jest was able to find:
2025-12-10T09:21:10.1229728Z     	'./eventLogger.test.js'
2025-12-10T09:21:10.1229996Z 
2025-12-10T09:21:10.1233223Z     You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js', 'mjs', 'cjs', 'jsx', 'ts', 'tsx', 'json', 'node'].
2025-12-10T09:21:10.1234188Z 
2025-12-10T09:21:10.1234647Z     See https://jestjs.io/docs/configuration#modulefileextensions-arraystring
2025-12-10T09:21:10.1235171Z 
2025-12-10T09:21:10.1235402Z     [0m [90m 93 |[39m
2025-12-10T09:21:10.1236759Z      [90m 94 |[39m         test([32m'should create notification from event'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:21:10.1241682Z     [31m[1m>[22m[39m[90m 95 |[39m             [36mconst[39m { [33mEVENT_TYPES[39m[33m,[39m [33mEVENT_CATEGORIES[39m[33m,[39m [33mEVENT_SEVERITY[39m } [33m=[39m require([32m'../services/eventLogger'[39m)[33m;[39m
2025-12-10T09:21:10.1243198Z      [90m    |[39m                                                                       [31m[1m^[22m[39m
2025-12-10T09:21:10.1243835Z      [90m 96 |[39m             
2025-12-10T09:21:10.1244495Z      [90m 97 |[39m             [36mconst[39m event [33m=[39m {
2025-12-10T09:21:10.1245845Z      [90m 98 |[39m                 id[33m:[39m [35m1[39m[33m,[39m[0m
2025-12-10T09:21:10.1246209Z 
2025-12-10T09:21:10.1248052Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:21:10.1248988Z       at Object.require (__tests__/services/integration.test.js:95:71)
2025-12-10T09:21:10.1249567Z 
2025-12-10T09:21:10.1251300Z   ● System Integration › Notification Service Integration › should get user notifications
2025-12-10T09:21:10.1251873Z 
2025-12-10T09:21:10.1252668Z     TypeError: Cannot read properties of undefined (reading 'getUserNotifications')
2025-12-10T09:21:10.1253208Z 
2025-12-10T09:21:10.1253421Z     [0m [90m 110 |[39m
2025-12-10T09:21:10.1255878Z      [90m 111 |[39m         test([32m'should get user notifications'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:21:10.1259333Z     [31m[1m>[22m[39m[90m 112 |[39m             [36mconst[39m result [33m=[39m notificationService[33m.[39mgetUserNotifications([32m'testuser'[39m)[33m;[39m
2025-12-10T09:21:10.1260567Z      [90m     |[39m                                                [31m[1m^[22m[39m
2025-12-10T09:21:10.1261759Z      [90m 113 |[39m             expect(result)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:21:10.1264138Z      [90m 114 |[39m             expect(result[33m.[39mnotifications)[33m.[39mtoBeDefined()[33m;[39m
2025-12-10T09:21:10.1266166Z      [90m 115 |[39m             expect(result[33m.[39mtotal)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m[0m
2025-12-10T09:21:10.1266736Z 
2025-12-10T09:21:10.1267625Z       at Object.getUserNotifications (__tests__/services/integration.test.js:112:48)
2025-12-10T09:21:10.1268172Z 
2025-12-10T09:21:10.1269512Z   ● System Integration › Notification Service Integration › should get unread count
2025-12-10T09:21:10.1270054Z 
2025-12-10T09:21:10.1270869Z     TypeError: Cannot read properties of undefined (reading 'getUnreadCount')
2025-12-10T09:21:10.1271380Z 
2025-12-10T09:21:10.1271587Z     [0m [90m 117 |[39m
2025-12-10T09:21:10.1273764Z      [90m 118 |[39m         test([32m'should get unread count'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:21:10.1277038Z     [31m[1m>[22m[39m[90m 119 |[39m             [36mconst[39m count [33m=[39m notificationService[33m.[39mgetUnreadCount([32m'testuser'[39m)[33m;[39m
2025-12-10T09:21:10.1278188Z      [90m     |[39m                                               [31m[1m^[22m[39m
2025-12-10T09:21:10.1280653Z      [90m 120 |[39m             expect([36mtypeof[39m count)[33m.[39mtoBe([32m'number'[39m)[33m;[39m
2025-12-10T09:21:10.1282223Z      [90m 121 |[39m             expect(count)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
2025-12-10T09:21:10.1282990Z      [90m 122 |[39m         })[33m;[39m[0m
2025-12-10T09:21:10.1283298Z 
2025-12-10T09:21:10.1284913Z       at Object.getUnreadCount (__tests__/services/integration.test.js:119:47)
2025-12-10T09:21:10.1285430Z 
2025-12-10T09:21:10.1287583Z   ● System Integration › Event Logger and Notification Integration › should trigger notification when event is logged
2025-12-10T09:21:10.1288313Z 
2025-12-10T09:21:10.1289300Z     Cannot find module '../services/eventLogger' from '__tests__/services/integration.test.js'
2025-12-10T09:21:10.1289884Z 
2025-12-10T09:21:10.1290091Z     However, Jest was able to find:
2025-12-10T09:21:10.1290530Z     	'./eventLogger.test.js'
2025-12-10T09:21:10.1290779Z 
2025-12-10T09:21:10.1294175Z     You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js', 'mjs', 'cjs', 'jsx', 'ts', 'tsx', 'json', 'node'].
2025-12-10T09:21:10.1295135Z 
2025-12-10T09:21:10.1295582Z     See https://jestjs.io/docs/configuration#modulefileextensions-arraystring
2025-12-10T09:21:10.1296100Z 
2025-12-10T09:21:10.1297454Z     [0m [90m 125 |[39m     describe([32m'Event Logger and Notification Integration'[39m[33m,[39m () [33m=>[39m {
2025-12-10T09:21:10.1300204Z      [90m 126 |[39m         test([32m'should trigger notification when event is logged'[39m[33m,[39m (done) [33m=>[39m {
2025-12-10T09:21:10.1304783Z     [31m[1m>[22m[39m[90m 127 |[39m             [36mconst[39m { [33mEVENT_TYPES[39m[33m,[39m [33mEVENT_CATEGORIES[39m[33m,[39m [33mEVENT_SEVERITY[39m } [33m=[39m require([32m'../services/eventLogger'[39m)[33m;[39m
2025-12-10T09:21:10.1306256Z      [90m     |[39m                                                                       [31m[1m^[22m[39m
2025-12-10T09:21:10.1306886Z      [90m 128 |[39m             
2025-12-10T09:21:10.1307887Z      [90m 129 |[39m             [90m// Listen for notification event[39m
2025-12-10T09:21:10.1311740Z      [90m 130 |[39m             notificationService[33m.[39monce([32m'notification'[39m[33m,[39m ({ userId[33m,[39m notification }) [33m=>[39m {[0m
2025-12-10T09:21:10.1312509Z 
2025-12-10T09:21:10.1313042Z       at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
2025-12-10T09:21:10.1314028Z       at Object.require (__tests__/services/integration.test.js:127:71)
2025-12-10T09:21:10.1314528Z 
2025-12-10T09:21:10.1329748Z FAIL __tests__/auth/auth.test.js
2025-12-10T09:21:10.1332084Z   ● Auth Module - Password Change Detection › verifyCredentials › should verify correct credentials
2025-12-10T09:21:10.1332726Z 
2025-12-10T09:21:10.1333024Z     expect(received).toBe(expected) // Object.is equality
2025-12-10T09:21:10.1333416Z 
2025-12-10T09:21:10.1333552Z     Expected: true
2025-12-10T09:21:10.1335547Z     Received: {"createdAt": "2025-12-10T09:20:45.830Z", "lastLogin": undefined, "role": "owner", "username": "testuser"}
2025-12-10T09:21:10.1336197Z 
2025-12-10T09:21:10.1336487Z     [0m [90m 121 |[39m             
2025-12-10T09:21:10.1340434Z      [90m 122 |[39m             [36mconst[39m isValid [33m=[39m [36mawait[39m auth[33m.[39mverifyCredentials([32m'testuser'[39m[33m,[39m [32m'test-password-456'[39m)[33m;[39m
2025-12-10T09:21:10.1341926Z     [31m[1m>[22m[39m[90m 123 |[39m             expect(isValid)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-12-10T09:21:10.1342806Z      [90m     |[39m                             [31m[1m^[22m[39m
2025-12-10T09:21:10.1343393Z      [90m 124 |[39m             
2025-12-10T09:21:10.1344726Z      [90m 125 |[39m             [90m// Restore original values[39m
2025-12-10T09:21:10.1347786Z      [90m 126 |[39m             process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m=[39m originalPassword[33m;[39m[0m
2025-12-10T09:21:10.1348653Z 
2025-12-10T09:21:10.1348950Z       at Object.toBe (__tests__/auth/auth.test.js:123:29)
2025-12-10T09:21:10.1349480Z 
2025-12-10T09:21:10.1350611Z   ● Auth Module - Password Change Detection › verifyCredentials › should reject incorrect password
2025-12-10T09:21:10.1351225Z 
2025-12-10T09:21:10.1351517Z     expect(received).toBe(expected) // Object.is equality
2025-12-10T09:21:10.1351883Z 
2025-12-10T09:21:10.1352040Z     Expected: false
2025-12-10T09:21:10.1352409Z     Received: null
2025-12-10T09:21:10.1352608Z 
2025-12-10T09:21:10.1353072Z     [0m [90m 138 |[39m             
2025-12-10T09:21:10.1356763Z      [90m 139 |[39m             [36mconst[39m isValid [33m=[39m [36mawait[39m auth[33m.[39mverifyCredentials([32m'testuser'[39m[33m,[39m [32m'wrong-password'[39m)[33m;[39m
2025-12-10T09:21:10.1358266Z     [31m[1m>[22m[39m[90m 140 |[39m             expect(isValid)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
2025-12-10T09:21:10.1359134Z      [90m     |[39m                             [31m[1m^[22m[39m
2025-12-10T09:21:10.1359897Z      [90m 141 |[39m             
2025-12-10T09:21:10.1360901Z      [90m 142 |[39m             [90m// Restore original values[39m
2025-12-10T09:21:10.1363477Z      [90m 143 |[39m             process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m=[39m originalPassword[33m;[39m[0m
2025-12-10T09:21:10.1364128Z 
2025-12-10T09:21:10.1364436Z       at Object.toBe (__tests__/auth/auth.test.js:140:29)
2025-12-10T09:21:10.1364810Z 
2025-12-10T09:21:10.1365937Z   ● Auth Module - Password Change Detection › verifyCredentials › should reject non-existent username
2025-12-10T09:21:10.1366583Z 
2025-12-10T09:21:10.1366895Z     expect(received).toBe(expected) // Object.is equality
2025-12-10T09:21:10.1367273Z 
2025-12-10T09:21:10.1367410Z     Expected: false
2025-12-10T09:21:10.1367756Z     Received: null
2025-12-10T09:21:10.1367960Z 
2025-12-10T09:21:10.1368233Z     [0m [90m 153 |[39m             
2025-12-10T09:21:10.1372045Z      [90m 154 |[39m             [36mconst[39m isValid [33m=[39m [36mawait[39m auth[33m.[39mverifyCredentials([32m'nonexistent'[39m[33m,[39m [32m'test-password'[39m)[33m;[39m
2025-12-10T09:21:10.1373785Z     [31m[1m>[22m[39m[90m 155 |[39m             expect(isValid)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
2025-12-10T09:21:10.1374688Z      [90m     |[39m                             [31m[1m^[22m[39m
2025-12-10T09:21:10.1375284Z      [90m 156 |[39m             
2025-12-10T09:21:10.1375995Z      [90m 157 |[39m             [90m// Restore original password[39m
2025-12-10T09:21:10.1378596Z      [90m 158 |[39m             process[33m.[39menv[33m.[39m[33mADMIN_PASSWORD[39m [33m=[39m originalPassword[33m;[39m[0m
2025-12-10T09:21:10.1379126Z 
2025-12-10T09:21:10.1379491Z       at Object.toBe (__tests__/auth/auth.test.js:155:29)
2025-12-10T09:21:10.1379709Z 
2025-12-10T09:21:10.1379721Z 
2025-12-10T09:21:10.1382496Z Test Suites: 4 failed, 36 passed, 40 total
2025-12-10T09:21:10.1382893Z Tests:       15 failed, 1 skipped, 563 passed, 579 total
2025-12-10T09:21:10.1383185Z Snapshots:   0 total
2025-12-10T09:21:10.1383394Z Time:        25.43 s
2025-12-10T09:21:10.1383595Z Ran all test suites.
2025-12-10T09:21:10.1625291Z ##[group]Run actions/upload-artifact@v4
2025-12-10T09:21:10.1625569Z with:
2025-12-10T09:21:10.1625767Z   name: backend-coverage-report-49
2025-12-10T09:21:10.1626025Z   path: console/backend/coverage/
2025-12-10T09:21:10.1626254Z   retention-days: 30
2025-12-10T09:21:10.1626457Z   if-no-files-found: warn
2025-12-10T09:21:10.1626671Z   compression-level: 6
2025-12-10T09:21:10.1626863Z   overwrite: false
2025-12-10T09:21:10.1627056Z   include-hidden-files: false
2025-12-10T09:21:10.1627269Z ##[endgroup]
2025-12-10T09:21:10.4003629Z With the provided path, there will be 70 files uploaded
2025-12-10T09:21:10.4009025Z Artifact name is valid!
2025-12-10T09:21:10.4010902Z Root directory input is valid!
2025-12-10T09:21:10.5023064Z Beginning upload of artifact content to blob storage
2025-12-10T09:21:10.6867883Z Uploaded bytes 562126
2025-12-10T09:21:10.7011316Z Finished uploading artifact content to blob storage!
2025-12-10T09:21:10.7015241Z SHA256 digest of uploaded artifact zip is 2b37e6f8e27cf6c81d0db57a1e4a9c2626e42dd96c42cf69c2cbf2aadc46d0e4
2025-12-10T09:21:10.7016813Z Finalizing artifact upload
2025-12-10T09:21:10.7793142Z Artifact backend-coverage-report-49.zip successfully finalized. Artifact ID 4822045624
2025-12-10T09:21:10.7794725Z Artifact backend-coverage-report-49 has been successfully uploaded! Final size is 562126 bytes. Artifact ID is 4822045624
2025-12-10T09:21:10.7801817Z Artifact download URL: https://github.com/Festas/Minecraft-Server/actions/runs/20093510221/artifacts/4822045624
2025-12-10T09:21:10.7932323Z ##[group]Run actions/upload-artifact@v4
2025-12-10T09:21:10.7932596Z with:
2025-12-10T09:21:10.7932787Z   name: backend-test-results-49
2025-12-10T09:21:10.7933044Z   path: console/backend/coverage/junit.xml
2025-12-10T09:21:10.7933353Z   retention-days: 30
2025-12-10T09:21:10.7933574Z   if-no-files-found: warn
2025-12-10T09:21:10.7933787Z   compression-level: 6
2025-12-10T09:21:10.7933976Z   overwrite: false
2025-12-10T09:21:10.7934170Z   include-hidden-files: false
2025-12-10T09:21:10.7934389Z ##[endgroup]
2025-12-10T09:21:11.0158216Z ##[warning]No files were found with the provided path: console/backend/coverage/junit.xml. No artifacts will be uploaded.
2025-12-10T09:21:11.0297510Z Post job cleanup.
2025-12-10T09:21:11.1240037Z [command]/usr/bin/git version
2025-12-10T09:21:11.1275966Z git version 2.52.0
2025-12-10T09:21:11.1318616Z Temporarily overriding HOME='/home/runner/work/_temp/8e101705-deda-4a47-85a7-e1a49c5ec647' before making global git config changes
2025-12-10T09:21:11.1319780Z Adding repository directory to the temporary git global config as a safe directory
2025-12-10T09:21:11.1324002Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/Minecraft-Server/Minecraft-Server
2025-12-10T09:21:11.1358961Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-12-10T09:21:11.1391568Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-12-10T09:21:11.1617566Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-12-10T09:21:11.1640948Z http.https://github.com/.extraheader
2025-12-10T09:21:11.1653167Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-12-10T09:21:11.1683070Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-12-10T09:21:11.1899013Z [command]/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
2025-12-10T09:21:11.1930043Z [command]/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url
2025-12-10T09:21:11.2274517Z Cleaning up orphan processes
