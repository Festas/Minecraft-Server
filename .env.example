# Minecraft Console Environment Variables
# Copy this file to .env and fill in your actual values

# Console Configuration
CONSOLE_PORT=3001
# NODE_ENV controls cookie security:
# - production: secure cookies (HTTPS/SSL required for authentication to work)
# - development: non-secure cookies (HTTP allowed for local testing)
# - test: non-secure cookies (HTTP allowed for CI/testing)
NODE_ENV=production

# Cookie Security Override (optional)
# Controls whether session and CSRF cookies require HTTPS (secure flag)
#
# How it works:
# - When COOKIE_SECURE is not set: Uses NODE_ENV to determine security
#   * production: secure=true (HTTPS required)
#   * development/test: secure=false (HTTP allowed)
# - When COOKIE_SECURE=false: Forces secure=false regardless of NODE_ENV (HTTP allowed)
# - When COOKIE_SECURE=true: Forces secure=true regardless of NODE_ENV (HTTPS required)
#
# When to use COOKIE_SECURE=false:
# - Local development over HTTP (http://localhost:3001)
# - CI/CD testing over plain HTTP
# - curl/diagnostic scripts over HTTP
# - Any environment without SSL/TLS
#
# Important: Secure cookies (secure=true) ONLY work over HTTPS
# - Browsers/curl will NOT send secure cookies over HTTP connections
# - This breaks authentication: session cookies aren't sent, login always fails
# - CSRF validation fails: tokens from different sessions don't match
# - Set COOKIE_SECURE=false for all HTTP testing
#
# For production with HTTPS/SSL: Leave this commented out or set to 'true'
# COOKIE_SECURE=false

# Session Secret (CHANGE THIS!)
# Generate a secure random string: openssl rand -hex 32
SESSION_SECRET=your-secure-random-session-secret-change-this

# Redis Configuration (for persistent sessions)
# Required for session persistence across server restarts and in CI/Docker
# The console will work without Redis but sessions won't persist (memory store fallback)
#
# For Docker Compose (default): Uses 'redis' service defined in docker-compose.console.yml
REDIS_HOST=redis
REDIS_PORT=6379
# REDIS_PASSWORD=  # Optional: Set if Redis requires authentication
#
# Alternative: Use a Redis connection URL (overrides REDIS_HOST/PORT/PASSWORD)
# REDIS_URL=redis://user:password@host:port/db
# Examples:
#   Local: redis://localhost:6379
#   With auth: redis://:password@localhost:6379
#   Cloud: redis://user:pass@redis-host.cloud:6379

# CSRF Secret (REQUIRED - CHANGE THIS!)
# Generate a secure random string: openssl rand -base64 32
CSRF_SECRET=

# Admin Account (REQUIRED - CHANGE THESE!)
# You MUST set a secure password. The console will not start without it.
ADMIN_USERNAME=admin
# Generate a strong password: openssl rand -base64 32
ADMIN_PASSWORD=

# RCON Configuration
# These must match the values in your Minecraft server configuration
RCON_HOST=minecraft-server
RCON_PORT=25575
# Generate a secure password: openssl rand -base64 32
RCON_PASSWORD=your-secure-rcon-password

# Minecraft Server
MC_CONTAINER_NAME=minecraft-server
MC_SERVER_DIR=/data

# Security Settings
# Rate limiting for login attempts
RATE_LIMIT_WINDOW_MS=900000    # 15 minutes in milliseconds
RATE_LIMIT_MAX_ATTEMPTS=5      # Maximum login attempts per window

# Optional: IP Whitelist (comma-separated IPs)
# IP_WHITELIST=192.168.1.100,10.0.0.50

# Minecraft Server Version (informational)
VERSION=Paper 1.20.4
